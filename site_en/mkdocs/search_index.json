{
    "docs": [
        {
            "location": "/", 
            "text": "Introduction\n\n\nSeafile is an open source cloud storage system with file encryption and group sharing. \n\n\nCollections of files are called libraries, and each library can be synced separately. A library can be encrypted with a user chosen password. This password is not stored on the server, so even the server admin cannot view a file's contents.\n\n\nSeafile allows users to create groups with file syncing, wiki, and discussion to enable easy collaboration around documents within a team.\n\n\nTranslation (Work In Progress)\n\n\nEven if you are not familiar with \ngettext\n system, you can start translating this manual following 3 simple steps.\n\n\nAs an example to translate files from \noverview/\n folder to \nSpanish\n, these 3 steps are:\n\n\n\n\ncopy \npo/overview.pot\n to  \npo/overview.es.po\n.\n\n\nTranslate messages in \npo/overview.es.po\n to spanish language.\n\n\nSend us your \npo/overview.es.po\n for integration. You can also make a pull request, if you modified an already existing po file.\n\n\n\n\nIf you are familiar with POT and PO files, you can use the one in \npo/\n folder.\n\n\nLICENSE\n\n\nSeafile server is public under GPLv2.\n\n\nThe Seafile server's web end, i.e. Seahub, is published under the Apache License.\n\n\nAbout this manual\n\n\nThe \"source code\" of this manual is hosted on GitHub: https://github.com/haiwen/seafile-docs\n\n\nContact information\n\n\n\n\nTwitter: @seafile https://twitter.com/seafile\n\n\nForum: https://forum.seafile-server.org\n\n\n\n\nMore Documents\n\n\n\n\nWiki containing general information of Seafile", 
            "title": "Summary"
        }, 
        {
            "location": "/#introduction", 
            "text": "Seafile is an open source cloud storage system with file encryption and group sharing.   Collections of files are called libraries, and each library can be synced separately. A library can be encrypted with a user chosen password. This password is not stored on the server, so even the server admin cannot view a file's contents.  Seafile allows users to create groups with file syncing, wiki, and discussion to enable easy collaboration around documents within a team.", 
            "title": "Introduction"
        }, 
        {
            "location": "/#translation-work-in-progress", 
            "text": "Even if you are not familiar with  gettext  system, you can start translating this manual following 3 simple steps.  As an example to translate files from  overview/  folder to  Spanish , these 3 steps are:   copy  po/overview.pot  to   po/overview.es.po .  Translate messages in  po/overview.es.po  to spanish language.  Send us your  po/overview.es.po  for integration. You can also make a pull request, if you modified an already existing po file.   If you are familiar with POT and PO files, you can use the one in  po/  folder.", 
            "title": "Translation (Work In Progress)"
        }, 
        {
            "location": "/#license", 
            "text": "Seafile server is public under GPLv2.  The Seafile server's web end, i.e. Seahub, is published under the Apache License.", 
            "title": "LICENSE"
        }, 
        {
            "location": "/#about-this-manual", 
            "text": "The \"source code\" of this manual is hosted on GitHub: https://github.com/haiwen/seafile-docs", 
            "title": "About this manual"
        }, 
        {
            "location": "/#contact-information", 
            "text": "Twitter: @seafile https://twitter.com/seafile  Forum: https://forum.seafile-server.org", 
            "title": "Contact information"
        }, 
        {
            "location": "/#more-documents", 
            "text": "Wiki containing general information of Seafile", 
            "title": "More Documents"
        }, 
        {
            "location": "/README/", 
            "text": "Introduction\n\n\nSeafile is an open source cloud storage system with file encryption and group sharing. \n\n\nCollections of files are called libraries, and each library can be synced separately. A library can be encrypted with a user chosen password. This password is not stored on the server, so even the server admin cannot view a file's contents.\n\n\nSeafile allows users to create groups with file syncing, wiki, and discussion to enable easy collaboration around documents within a team.\n\n\nTranslation (Work In Progress)\n\n\nEven if you are not familiar with \ngettext\n system, you can start translating this manual following 3 simple steps.\n\n\nAs an example to translate files from \noverview/\n folder to \nSpanish\n, these 3 steps are:\n\n\n\n\ncopy \npo/overview.pot\n to  \npo/overview.es.po\n.\n\n\nTranslate messages in \npo/overview.es.po\n to spanish language.\n\n\nSend us your \npo/overview.es.po\n for integration. You can also make a pull request, if you modified an already existing po file.\n\n\n\n\nIf you are familiar with POT and PO files, you can use the one in \npo/\n folder.\n\n\nLICENSE\n\n\nSeafile server is public under GPLv2.\n\n\nThe Seafile server's web end, i.e. Seahub, is published under the Apache License.\n\n\nAbout this manual\n\n\nThe \"source code\" of this manual is hosted on GitHub: https://github.com/haiwen/seafile-docs\n\n\nContact information\n\n\n\n\nTwitter: @seafile https://twitter.com/seafile\n\n\nForum: https://forum.seafile-server.org\n\n\n\n\nMore Documents\n\n\n\n\nWiki containing general information of Seafile", 
            "title": "README"
        }, 
        {
            "location": "/README/#introduction", 
            "text": "Seafile is an open source cloud storage system with file encryption and group sharing.   Collections of files are called libraries, and each library can be synced separately. A library can be encrypted with a user chosen password. This password is not stored on the server, so even the server admin cannot view a file's contents.  Seafile allows users to create groups with file syncing, wiki, and discussion to enable easy collaboration around documents within a team.", 
            "title": "Introduction"
        }, 
        {
            "location": "/README/#translation-work-in-progress", 
            "text": "Even if you are not familiar with  gettext  system, you can start translating this manual following 3 simple steps.  As an example to translate files from  overview/  folder to  Spanish , these 3 steps are:   copy  po/overview.pot  to   po/overview.es.po .  Translate messages in  po/overview.es.po  to spanish language.  Send us your  po/overview.es.po  for integration. You can also make a pull request, if you modified an already existing po file.   If you are familiar with POT and PO files, you can use the one in  po/  folder.", 
            "title": "Translation (Work In Progress)"
        }, 
        {
            "location": "/README/#license", 
            "text": "Seafile server is public under GPLv2.  The Seafile server's web end, i.e. Seahub, is published under the Apache License.", 
            "title": "LICENSE"
        }, 
        {
            "location": "/README/#about-this-manual", 
            "text": "The \"source code\" of this manual is hosted on GitHub: https://github.com/haiwen/seafile-docs", 
            "title": "About this manual"
        }, 
        {
            "location": "/README/#contact-information", 
            "text": "Twitter: @seafile https://twitter.com/seafile  Forum: https://forum.seafile-server.org", 
            "title": "Contact information"
        }, 
        {
            "location": "/README/#more-documents", 
            "text": "Wiki containing general information of Seafile", 
            "title": "More Documents"
        }, 
        {
            "location": "/overview/README/", 
            "text": "Overview\n\n\n\n\nSeafile Components\n\n\nFile permission management\n\n\nFAQ\n\n\nChangelog\n\n\nRoadmap\n\n\nContribution", 
            "title": "README"
        }, 
        {
            "location": "/overview/README/#overview", 
            "text": "Seafile Components  File permission management  FAQ  Changelog  Roadmap  Contribution", 
            "title": "Overview"
        }, 
        {
            "location": "/overview/components/", 
            "text": "Components Overview\n\n\nSeafile server consists of following components:\n\n\n\n\nSeahub\n (django)\uff1athe website. Seafile server package contains a light-weight Python HTTP server gunicorn that serves the website. By default, Seahub runs as an application within gunicorn. You can also configure Seahub to run under fast-cgi mode, behind Nginx or Apache.\n\n\nSeafile server\n (\nseaf-server\n)\uff1adata service daemon, handles raw file upload/download/syncing. Seafile server by default listens on 8082 port. You can configure Nginx/Apache to proxy traffic to the local 8082 port.\n\n\nCcnet server\n (\nccnet-server\n)\uff1a RPC service daemon to enable communication among multiple components. Ccnet is only used for internal communication.\n\n\n\n\nThe picture below shows how Seafile clients access files when you configure Seafile behind Nginx/Apache. \n\n\n\n\n\n\nAll access the Seafile service (including Seahub and Seafile server) can be configured behind Nginx or Apache web server. This way all network traffic to the service can be encrypted with HTTPS.\n\n\nWhen user access Seahub, Seahub access data from Seafile server via Ccnet RPC.", 
            "title": "Seafile Components"
        }, 
        {
            "location": "/overview/components/#components-overview", 
            "text": "Seafile server consists of following components:   Seahub  (django)\uff1athe website. Seafile server package contains a light-weight Python HTTP server gunicorn that serves the website. By default, Seahub runs as an application within gunicorn. You can also configure Seahub to run under fast-cgi mode, behind Nginx or Apache.  Seafile server  ( seaf-server )\uff1adata service daemon, handles raw file upload/download/syncing. Seafile server by default listens on 8082 port. You can configure Nginx/Apache to proxy traffic to the local 8082 port.  Ccnet server  ( ccnet-server )\uff1a RPC service daemon to enable communication among multiple components. Ccnet is only used for internal communication.   The picture below shows how Seafile clients access files when you configure Seafile behind Nginx/Apache.     All access the Seafile service (including Seahub and Seafile server) can be configured behind Nginx or Apache web server. This way all network traffic to the service can be encrypted with HTTPS.  When user access Seahub, Seahub access data from Seafile server via Ccnet RPC.", 
            "title": "Components Overview"
        }, 
        {
            "location": "/overview/file_permission_management/", 
            "text": "File permission management\n\n\nSeafile manages files into libraries. Every library has an owner, who can share the library to other users or share it into groups. The sharing can be read-only or read-write.\n\n\nRead-only syncing\n\n\nRead-only libraries can be synced to local desktop. The modifications at the client will not be synced back. If an user has modified some file contents, he/she can use \"resync\" to revert the modifications.\n\n\nCascading permission/Sub-folder permissions (Pro edition)\n\n\nSharing controls whether an user/group can see an library, while sub-foler permissions is used to modify permissions on specific folders.\n\n\nSuppose you share a library as read-only to a group and then want specific sub-folders to be read-write by a few users. You can set permissions on sub-folders for shared users and groups.\n\n\nNote:\n\n\n\n\nSetting sub-folder permission for an user without sharing the folder or parent folder to that user will have no effect.\n\n\nSharing a library read-only to an user and then sharing a sub-folder read-write to that user will lead to two shared items for that user. This will cause confusing. Use sub-folder permission instead.", 
            "title": "File permission management"
        }, 
        {
            "location": "/overview/file_permission_management/#file-permission-management", 
            "text": "Seafile manages files into libraries. Every library has an owner, who can share the library to other users or share it into groups. The sharing can be read-only or read-write.", 
            "title": "File permission management"
        }, 
        {
            "location": "/overview/file_permission_management/#read-only-syncing", 
            "text": "Read-only libraries can be synced to local desktop. The modifications at the client will not be synced back. If an user has modified some file contents, he/she can use \"resync\" to revert the modifications.", 
            "title": "Read-only syncing"
        }, 
        {
            "location": "/overview/file_permission_management/#cascading-permissionsub-folder-permissions-pro-edition", 
            "text": "Sharing controls whether an user/group can see an library, while sub-foler permissions is used to modify permissions on specific folders.  Suppose you share a library as read-only to a group and then want specific sub-folders to be read-write by a few users. You can set permissions on sub-folders for shared users and groups.  Note:   Setting sub-folder permission for an user without sharing the folder or parent folder to that user will have no effect.  Sharing a library read-only to an user and then sharing a sub-folder read-write to that user will lead to two shared items for that user. This will cause confusing. Use sub-folder permission instead.", 
            "title": "Cascading permission/Sub-folder permissions (Pro edition)"
        }, 
        {
            "location": "/roadmap/", 
            "text": "Roadmap\n\n\nPlease check https://seacloud.cc/group/3/wiki/seafile-roadmap/", 
            "title": "Roadmap"
        }, 
        {
            "location": "/roadmap/#roadmap", 
            "text": "Please check https://seacloud.cc/group/3/wiki/seafile-roadmap/", 
            "title": "Roadmap"
        }, 
        {
            "location": "/faq/", 
            "text": "FAQ\n\n\nQuestions about file syncing\n\n\nWhen downloading a library, the client hangs at \"connecting server\"\n\n\nFirst, you can check the Seafile client log (\n~/.ccnet/logs/seafile.log\n for Linux, \nC:/users/your_name/ccnet/logs/seafile.log\n for Windows) to see what's wrong.\n\n\nPossible reasons:\n\n\n\n\nFirewall: Ensure the firewall is configured properly. See \nFirewall Settings for Seafile Server\n\n\n\n\nHow to add more verbose log information at the client\n\n\nSet environment variable \nSEAFILE_DEBUG = all\n before running Seafile desktop client. On Linux, you can open a terminal and type: \n\n\nexport SEAFILE_DEBUG=all\n./seafile-applet\n\n\n\n\nQuestions about server setup\n\n\nFailed to upload/download file online\n\n\n\n\nMake sure you firewall for seafile fileserver is opened.\n\n\nMake \nSERVICE_URL\n in ccnet.conf and \nFILE_SERVER_ROOT\n in seahub_settings.py are set correctly.\n\n\nUsing chrome/firefox debug mode to find which link is given when click download button and what's wrong with this link\n\n\n\n\nDoes Seafile server support Python 3?\n\n\nNo, You must have python 2.6.5+ or 2.7 installed on your server.\n\n\nCan Seafile server run on FreeBSD?\n\n\nThere was an unconfirmed solution on the internet, which later has vanished.\n(Please explain the installation routine if you successfully set up Seafile in FreeBSD.)\n\n\nWebsite displays \"Page unavailable\", what can I do?\n\n\n\n\n\n\nYou can check the back trace in seahub log files(\ninstallation folder/logs/seahub_django_request.log\n)\n\n\n\n\n\n\nYou can also turn on debug by adding \nDEBUG = True\n to seahub_settings.py and restart seahub by \n./seahub.sh restart\n, then refresh that page, all the debug infomations will be displayed. Make sure ./seahub.sh was started as: ./seahub.sh start-fastcgi\n\n\n\n\n\n\nAvatar pictures vanished after upgrading server, what can I do?\n\n\n\n\n\n\nYou need to check whether the \"avatars\" symbolic link under seahub/media/ is correctly link to ../../../seahub-data/avatars. If not, you need to correct the link according to the \"minor upgrade\" section in \nUpgrading-Seafile-Server\n\n\n\n\n\n\nIf your avatars link is correctly linked, and avatars are still broken, you may refresh seahub cache by \nrm -rf /tmp/seahub_cache/*\n\n\n\n\n\n\nHow to change seafile-data location after setup?\n\n\nModify file seafile.ini under ccnet. This file contains the location of seafile-data. Move seafile-data to another place, like \n/opt/new/seafile-data\n. Then modify the file accordingly.\n\n\nFailed to send email, what can I do?\n\n\nPlease check logs/seahub.log.\n\n\nThere are some common mistakes:\n\n\n\n\nCheck whether there are some typos in the config, e.g., forget single quote, \nEMAIL_HOST_USER = XXX\n, which should be \nEMAIL_HOST_USER = 'XXX'\n\n\nYour mail server is not available.\n\n\n\n\nAfter upgrade Web UI is broken because CSS files can't be loaded\n\n\nPlease remove the cache and try again, \nrm -rf /tmp/seahub_cache/*\n. If you configured memecached, restart memcached, then restart Seahub.\n\n\nIf the problem is not fixed, check whether seafile-server-latest point to the right folder. Then check whether \nseafile-server-latest/seahub/media/CACHE\n is correctly generated (it should contain the auto-generated CSS file). \n\n\nQuestions about Clustering\n\n\nPage layout broken because seahub/media/CACHE is created only on first node\n\n\nPlease add\n\n\nCOMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'\n\n\n\nto seahub_settings.py as documented http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html\n\n\nThis will tell every node to generate the CSS CACHE in its local folder.\n\n\nQuestions about server maintenance\n\n\nHow to migrate libraries and groups from one account to another?\n\n\nSince version 4.4.2, system admin can migrate libraries and groups from one account to another existing account using \nRESTful web api\n.\n\n\nSeafile GC shows errors, FSCK can\u2019t fix them\n\n\nGC scans the history. But FSCK only scan the currently version. You can ignore the error. It is a minor issue.\n\n\nQuestions about LDAP and User management\n\n\nHow to restrict Seafile access to a certain accounts in AD\n\n\nYou can use FILTER field in LDAP configuration in \nccnet.conf\n. For example, the following filter restricts the access to Seafile to members of a group.\n\n\nFILTER = (memberOf=cn=group,cn=users,DC=x)\n\n\n\nAD also supports groups within group. The following filter restricts the access to Seafile to members/groups of a group.\n\n\nFILTER = (memberOf:1.2.840.113556.1.4.1941:=cn=group,cn=users,DC=x)\n\n\n\nFor more information on the Filter syntax, see http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx", 
            "title": "FAQ"
        }, 
        {
            "location": "/faq/#faq", 
            "text": "", 
            "title": "FAQ"
        }, 
        {
            "location": "/faq/#questions-about-file-syncing", 
            "text": "", 
            "title": "Questions about file syncing"
        }, 
        {
            "location": "/faq/#when-downloading-a-library-the-client-hangs-at-connecting-server", 
            "text": "First, you can check the Seafile client log ( ~/.ccnet/logs/seafile.log  for Linux,  C:/users/your_name/ccnet/logs/seafile.log  for Windows) to see what's wrong.  Possible reasons:   Firewall: Ensure the firewall is configured properly. See  Firewall Settings for Seafile Server", 
            "title": "When downloading a library, the client hangs at \"connecting server\""
        }, 
        {
            "location": "/faq/#how-to-add-more-verbose-log-information-at-the-client", 
            "text": "Set environment variable  SEAFILE_DEBUG = all  before running Seafile desktop client. On Linux, you can open a terminal and type:   export SEAFILE_DEBUG=all\n./seafile-applet", 
            "title": "How to add more verbose log information at the client"
        }, 
        {
            "location": "/faq/#questions-about-server-setup", 
            "text": "", 
            "title": "Questions about server setup"
        }, 
        {
            "location": "/faq/#failed-to-uploaddownload-file-online", 
            "text": "Make sure you firewall for seafile fileserver is opened.  Make  SERVICE_URL  in ccnet.conf and  FILE_SERVER_ROOT  in seahub_settings.py are set correctly.  Using chrome/firefox debug mode to find which link is given when click download button and what's wrong with this link", 
            "title": "Failed to upload/download file online"
        }, 
        {
            "location": "/faq/#does-seafile-server-support-python-3", 
            "text": "No, You must have python 2.6.5+ or 2.7 installed on your server.", 
            "title": "Does Seafile server support Python 3?"
        }, 
        {
            "location": "/faq/#can-seafile-server-run-on-freebsd", 
            "text": "There was an unconfirmed solution on the internet, which later has vanished.\n(Please explain the installation routine if you successfully set up Seafile in FreeBSD.)", 
            "title": "Can Seafile server run on FreeBSD?"
        }, 
        {
            "location": "/faq/#website-displays-page-unavailable-what-can-i-do", 
            "text": "You can check the back trace in seahub log files( installation folder/logs/seahub_django_request.log )    You can also turn on debug by adding  DEBUG = True  to seahub_settings.py and restart seahub by  ./seahub.sh restart , then refresh that page, all the debug infomations will be displayed. Make sure ./seahub.sh was started as: ./seahub.sh start-fastcgi", 
            "title": "Website displays \"Page unavailable\", what can I do?"
        }, 
        {
            "location": "/faq/#avatar-pictures-vanished-after-upgrading-server-what-can-i-do", 
            "text": "You need to check whether the \"avatars\" symbolic link under seahub/media/ is correctly link to ../../../seahub-data/avatars. If not, you need to correct the link according to the \"minor upgrade\" section in  Upgrading-Seafile-Server    If your avatars link is correctly linked, and avatars are still broken, you may refresh seahub cache by  rm -rf /tmp/seahub_cache/*", 
            "title": "Avatar pictures vanished after upgrading server, what can I do?"
        }, 
        {
            "location": "/faq/#how-to-change-seafile-data-location-after-setup", 
            "text": "Modify file seafile.ini under ccnet. This file contains the location of seafile-data. Move seafile-data to another place, like  /opt/new/seafile-data . Then modify the file accordingly.", 
            "title": "How to change seafile-data location after setup?"
        }, 
        {
            "location": "/faq/#failed-to-send-email-what-can-i-do", 
            "text": "Please check logs/seahub.log.  There are some common mistakes:   Check whether there are some typos in the config, e.g., forget single quote,  EMAIL_HOST_USER = XXX , which should be  EMAIL_HOST_USER = 'XXX'  Your mail server is not available.", 
            "title": "Failed to send email, what can I do?"
        }, 
        {
            "location": "/faq/#after-upgrade-web-ui-is-broken-because-css-files-cant-be-loaded", 
            "text": "Please remove the cache and try again,  rm -rf /tmp/seahub_cache/* . If you configured memecached, restart memcached, then restart Seahub.  If the problem is not fixed, check whether seafile-server-latest point to the right folder. Then check whether  seafile-server-latest/seahub/media/CACHE  is correctly generated (it should contain the auto-generated CSS file).", 
            "title": "After upgrade Web UI is broken because CSS files can't be loaded"
        }, 
        {
            "location": "/faq/#questions-about-clustering", 
            "text": "", 
            "title": "Questions about Clustering"
        }, 
        {
            "location": "/faq/#page-layout-broken-because-seahubmediacache-is-created-only-on-first-node", 
            "text": "Please add  COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'  to seahub_settings.py as documented http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html  This will tell every node to generate the CSS CACHE in its local folder.", 
            "title": "Page layout broken because seahub/media/CACHE is created only on first node"
        }, 
        {
            "location": "/faq/#questions-about-server-maintenance", 
            "text": "", 
            "title": "Questions about server maintenance"
        }, 
        {
            "location": "/faq/#how-to-migrate-libraries-and-groups-from-one-account-to-another", 
            "text": "Since version 4.4.2, system admin can migrate libraries and groups from one account to another existing account using  RESTful web api .", 
            "title": "How to migrate libraries and groups from one account to another?"
        }, 
        {
            "location": "/faq/#seafile-gc-shows-errors-fsck-cant-fix-them", 
            "text": "GC scans the history. But FSCK only scan the currently version. You can ignore the error. It is a minor issue.", 
            "title": "Seafile GC shows errors, FSCK can\u2019t fix them"
        }, 
        {
            "location": "/faq/#questions-about-ldap-and-user-management", 
            "text": "", 
            "title": "Questions about LDAP and User management"
        }, 
        {
            "location": "/faq/#how-to-restrict-seafile-access-to-a-certain-accounts-in-ad", 
            "text": "You can use FILTER field in LDAP configuration in  ccnet.conf . For example, the following filter restricts the access to Seafile to members of a group.  FILTER = (memberOf=cn=group,cn=users,DC=x)  AD also supports groups within group. The following filter restricts the access to Seafile to members/groups of a group.  FILTER = (memberOf:1.2.840.113556.1.4.1941:=cn=group,cn=users,DC=x)  For more information on the Filter syntax, see http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx", 
            "title": "How to restrict Seafile access to a certain accounts in AD"
        }, 
        {
            "location": "/changelog/", 
            "text": "Changelog\n\n\nChangelog for this manual\n\n\n\n\n2015.11.20: Update document for file copy and add document for multiple file/folder delete/copy/move\n\n\n2015.11.18: Add document for \ncleaning database\n.\n\n\n\n\nChangelogs\n\n\n\n\nSeafile Community Edition\n\n\nSeafile Professional Edition\n\n\nSeafile Client\n\n\nAndroid Client\n\n\niOS Client", 
            "title": "Changelog"
        }, 
        {
            "location": "/changelog/#changelog", 
            "text": "", 
            "title": "Changelog"
        }, 
        {
            "location": "/changelog/#changelog-for-this-manual", 
            "text": "2015.11.20: Update document for file copy and add document for multiple file/folder delete/copy/move  2015.11.18: Add document for  cleaning database .", 
            "title": "Changelog for this manual"
        }, 
        {
            "location": "/changelog/#changelogs", 
            "text": "Seafile Community Edition  Seafile Professional Edition  Seafile Client  Android Client  iOS Client", 
            "title": "Changelogs"
        }, 
        {
            "location": "/contribution/", 
            "text": "Contribution\n\n\nLicensing\n\n\nSeafile and its desktop and mobile clients are published under the GPLv3.\n\n\nThe Seafile server's web end, i.e. Seahub, is published under the Apache License.\n\n\nDiscussion\n\n\nGoogle Group: https://groups.google.com/forum/?fromgroups#!forum/seafile\n\n\nIRC: #seafile on freenode\n\n\nFollow us @seafile https://twitter.com/seafile\n\n\nReporting a Bug?\n\n\n\n\nFind the existing issues that fit your situation if any, or create a new issue. We are using github as our issue tracer https://github.com/haiwen/seafile/issues?state=open\n\n\nJoin us on Google Group: https://groups.google.com/forum/?fromgroups#!forum/seafile\n\n\n\n\nCode Style\n\n\nThe source code of seafile is ISO/IEC 9899:1999 (E) (a.k.a. C99) compatible. Take a look at \ncode standard\n.", 
            "title": "Contribution"
        }, 
        {
            "location": "/contribution/#contribution", 
            "text": "", 
            "title": "Contribution"
        }, 
        {
            "location": "/contribution/#licensing", 
            "text": "Seafile and its desktop and mobile clients are published under the GPLv3.  The Seafile server's web end, i.e. Seahub, is published under the Apache License.", 
            "title": "Licensing"
        }, 
        {
            "location": "/contribution/#discussion", 
            "text": "Google Group: https://groups.google.com/forum/?fromgroups#!forum/seafile  IRC: #seafile on freenode  Follow us @seafile https://twitter.com/seafile", 
            "title": "Discussion"
        }, 
        {
            "location": "/contribution/#reporting-a-bug", 
            "text": "Find the existing issues that fit your situation if any, or create a new issue. We are using github as our issue tracer https://github.com/haiwen/seafile/issues?state=open  Join us on Google Group: https://groups.google.com/forum/?fromgroups#!forum/seafile", 
            "title": "Reporting a Bug?"
        }, 
        {
            "location": "/contribution/#code-style", 
            "text": "The source code of seafile is ISO/IEC 9899:1999 (E) (a.k.a. C99) compatible. Take a look at  code standard .", 
            "title": "Code Style"
        }, 
        {
            "location": "/deploy/README/", 
            "text": "Deploying Seafile under Linux\n\n\nHere we describe how to deploy Seafile from prebuild binary packages.\n\n\nDeploy Seafile in Home/Personal Environment\n\n\n\n\nDeploying Seafile with SQLite\n\n\n\n\nDeploy Seafile in Production/Enterprise Environment\n\n\nIn production environment we recommend using MySQL as the database and config Seafile web behing Nginx or Apache. For those who are not familiar with Nginx and Apache. We recommend Nginx, since it is easier to config than Apache.\n\n\nNote: We have prepared an installation script \nDeploy Seafile with an installation script\n. The installer offer a quick and easy way to set up a production ready Seafile Server using MariaDB, Memcached and NGINX as a reverse proxy in under 5 minutes.\n\n\nYou can also install Seafile manually without the installation script as following:\n\n\nBasic:\n\n\n\n\nDeploying Seafile with MySQL\n\n\nConfig Seahub with Nginx\n\n\nEnabling Https with Nginx\n\n\nConfig Seahub with Apache\n\n\nEnabling Https with Apache\n\n\n\n\nAdvanced:\n\n\n\n\nAdd Memcached\n, adding memcached is very important if you have more than 50 users.\n\n\nStart Seafile at System Bootup\n\n\nFirewall settings\n\n\nLogrotate\n\n\n\n\nUser Authentication:\n\n\nSeafile supports a few external user authentication methods.\n\n\n\n\nConfigure Seafile to use LDAP\n\n\nShibboleth Authentication\n\n\n\n\nOther Deployment Issues\n\n\n\n\nDeploy Seafile behind NAT\n\n\nDeploy Seahub at Non-root domain\n\n\nMigrate From SQLite to MySQL\n\n\n\n\nCheck \nconfiguration options\n for server config options like enabling user registration.\n\n\nRead here\n if you have troubles setting up Seafile server\n\n\n\n\nRead \nSeafile Server Components Overview\n to understand how Seafile server works. This will save you a lot of time.\n\n\nCommon Problems for Setting up Server\n\n\nGo to our \nforum\n for help.\n\n\n\n\nUpgrade Seafile Server\n\n\n\n\nUpgrade Seafile server\n\n\n\n\nFor those that want to package Seafile server\n\n\nIf you want to package seafile yourself, (e.g. for your favorite Linux distribution), you should always use the correspondent tags:\n\n\n\n\nWhen we release a new version of seafile client, say 3.0.1, we will add tags \nv3.0.1\n to ccnet, seafile and seafile-client.\n\n\nLikewise, when we release a new version of seafile server, say 3.0.1, we will add tags \nv3.0.1-server\n to ccnet, seafile and seahub.\n\n\nFor libsearpc, we always use tag \nv3.0-latest\n.\n\n\n\n\nNote\n: The version numbers of each project has nothing to do with the tag name.", 
            "title": "README"
        }, 
        {
            "location": "/deploy/README/#deploying-seafile-under-linux", 
            "text": "Here we describe how to deploy Seafile from prebuild binary packages.", 
            "title": "Deploying Seafile under Linux"
        }, 
        {
            "location": "/deploy/README/#deploy-seafile-in-homepersonal-environment", 
            "text": "Deploying Seafile with SQLite", 
            "title": "Deploy Seafile in Home/Personal Environment"
        }, 
        {
            "location": "/deploy/README/#deploy-seafile-in-productionenterprise-environment", 
            "text": "In production environment we recommend using MySQL as the database and config Seafile web behing Nginx or Apache. For those who are not familiar with Nginx and Apache. We recommend Nginx, since it is easier to config than Apache.  Note: We have prepared an installation script  Deploy Seafile with an installation script . The installer offer a quick and easy way to set up a production ready Seafile Server using MariaDB, Memcached and NGINX as a reverse proxy in under 5 minutes.  You can also install Seafile manually without the installation script as following:  Basic:   Deploying Seafile with MySQL  Config Seahub with Nginx  Enabling Https with Nginx  Config Seahub with Apache  Enabling Https with Apache   Advanced:   Add Memcached , adding memcached is very important if you have more than 50 users.  Start Seafile at System Bootup  Firewall settings  Logrotate   User Authentication:  Seafile supports a few external user authentication methods.   Configure Seafile to use LDAP  Shibboleth Authentication   Other Deployment Issues   Deploy Seafile behind NAT  Deploy Seahub at Non-root domain  Migrate From SQLite to MySQL   Check  configuration options  for server config options like enabling user registration.  Read here  if you have troubles setting up Seafile server   Read  Seafile Server Components Overview  to understand how Seafile server works. This will save you a lot of time.  Common Problems for Setting up Server  Go to our  forum  for help.", 
            "title": "Deploy Seafile in Production/Enterprise Environment"
        }, 
        {
            "location": "/deploy/README/#upgrade-seafile-server", 
            "text": "Upgrade Seafile server", 
            "title": "Upgrade Seafile Server"
        }, 
        {
            "location": "/deploy/README/#for-those-that-want-to-package-seafile-server", 
            "text": "If you want to package seafile yourself, (e.g. for your favorite Linux distribution), you should always use the correspondent tags:   When we release a new version of seafile client, say 3.0.1, we will add tags  v3.0.1  to ccnet, seafile and seafile-client.  Likewise, when we release a new version of seafile server, say 3.0.1, we will add tags  v3.0.1-server  to ccnet, seafile and seahub.  For libsearpc, we always use tag  v3.0-latest .   Note : The version numbers of each project has nothing to do with the tag name.", 
            "title": "For those that want to package Seafile server"
        }, 
        {
            "location": "/deploy/using_sqlite/", 
            "text": "Deploying Seafile with SQLite\n\n\nDownload binary package\n\n\nVisit our \ndownload page\n,  download the latest server package.\n\n\nChoose one of:\n- Generic Linux\n- Windows\n- Server for Raspberry Pi\n\n\n#check if your system is x86 (32bit) or x86_64 (64 bit)\nuname -m\n\n\n\n\nClick the tarball link and save it.\n\n\nDeploying and Directory Layout\n\n\nNOTE: If you place the Seafile data directory in external storage, such as NFS, CIFS mount, you should not use SQLite as the database, but use MySQL instead.\n\n\nSupposed your organization's name is \"haiwen\", and you've downloaded seafile-server_1.4.0_* into your home directory. We suggest you to use the following layout for your deployment:\n\n\nmkdir haiwen\nmv seafile-server_* haiwen\ncd haiwen\n# after moving seafile-server_* to this directory\ntar -xzf seafile-server_*\nmkdir installed\nmv seafile-server_* installed\n\n\n\n\nNow you should have the following directory layout\n\n\n# tree . -L 2\n.\n\u251c\u2500\u2500 installed\n\u2502   \u2514\u2500\u2500 seafile-server_1.4.0_x86-64.tar.gz\n\u2514\u2500\u2500 seafile-server-1.4.0\n    \u251c\u2500\u2500 reset-admin.sh\n    \u251c\u2500\u2500 runtime\n    \u251c\u2500\u2500 seafile\n    \u251c\u2500\u2500 seafile.sh\n    \u251c\u2500\u2500 seahub\n    \u251c\u2500\u2500 seahub.sh\n    \u251c\u2500\u2500 setup-seafile.sh\n    \u2514\u2500\u2500 upgrade\n\n\n\n\nBenefits of this layout are\n\n\n\n\nWe can place all the config files for Seafile server inside \"haiwen\" directory, making it easier to manage.\n\n\nWhen you upgrade to a new version of Seafile, you can simply untar the latest package into \"haiwen\" directory. In this way you can reuse the existing config files in \"haiwen\" directory and don't need to configure again.\n\n\n\n\nSetting Up Seafile Server\n\n\nPrerequisites\n\n\nThe Seafile server package requires the following packages have been installed in your system\n\n\n\n\npython 2.7\n\n\npython-setuptools\n\n\npython-imaging\n\n\npython-ldap\n\n\nsqlite3\n\n\n\n\n#on Debian\napt-get update\napt-get install python2.7 libpython2.7 python-setuptools python-imaging python-ldap sqlite3\n\n\n\n\n# on CentOS 7\nsudo yum install python-imaging MySQL-python python-memcached python-ldap\n\n\n\n\nSetup\n\n\ncd seafile-server-*\n./setup-seafile.sh  #run the setup script \n answer prompted questions\n\n\n\n\nIf some of the prerequisites are not installed, the Seafile initialization script will ask you to install them.\n\n\nThe script will guide you through the settings of various configuration options.\n\n\nSeafile configuration options\n\n\n\n\n\n\n\n\nOption\n\n\nDescription\n\n\nNote\n\n\n\n\n\n\n\n\n\n\nserver name\n\n\nName of this Seafile server\n\n\n3-15 characters, only English letters, digits and underscore ('_') are allowed\n\n\n\n\n\n\nserver ip or domain\n\n\nThe IP address or domain name used by this server\n\n\nSeafile client program will access the server with this address\n\n\n\n\n\n\nSeafile data dir\n\n\nSeafile stores your data in this directory. By default it'll be placed in the current directory.\n\n\nThe size of this directory will increase as you put more and more data into Seafile. Please select a disk partition with enough free space.\n\n\n\n\n\n\nfileserver port\n\n\nThe TCP port used by Seafile fileserver\n\n\nDefault is 8082. If it's been used by other service, you can set it to another port.\n\n\n\n\n\n\n\n\nNow you should have the following directory layout:\n\n\n#tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502   \u251c\u2500\u2500 mykey.peer\n\u2502   \u251c\u2500\u2500 PeerMgr\n\u2502   \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u251c\u2500\u2500 installed\n\u2502   \u2514\u2500\u2500 seafile-server_1.4.0_x86-64.tar.gz\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-server-1.4.0  # active version\n\u2502   \u251c\u2500\u2500 reset-admin.sh\n\u2502   \u251c\u2500\u2500 runtime\n\u2502   \u251c\u2500\u2500 seafile\n\u2502   \u251c\u2500\u2500 seafile.sh\n\u2502   \u251c\u2500\u2500 seahub\n\u2502   \u251c\u2500\u2500 seahub.sh\n\u2502   \u251c\u2500\u2500 setup-seafile.sh\n\u2502   \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seafile-server-latest  # symbolic link to seafile-server-1.4.0\n\u251c\u2500\u2500 seahub-data\n\u2502   \u2514\u2500\u2500 avatars\n\u251c\u2500\u2500 seahub.db\n\n\n\n\nThe folder seafile-server-latest is a symbolic link to the current Seafile server folder. When later you upgrade to a new version, the upgrade scripts would update this link to keep it always point to the latest Seafile server folder.\n\n\nRunning Seafile Server\n\n\nBefore Running\n\n\nSince Seafile uses persistent connections between client and server, you should increase Linux file descriptors by ulimit if you have a large number of clients before start Seafile, like:\n\n\nulimit -n 30000\n\n\nStarting Seafile Server and Seahub Website\n\n\n\n\nStart Seafile:\n\n\n\n\n./seafile.sh start # Start Seafile service\n\n\n\n\n\n\nStart Seahub:\n\n\n\n\n./seahub.sh start \nport\n  # Start Seahub website, port defaults to 8000\n\n\n\n\nNote\n: The first time you start Seahub, the script is going to prompt you to create an admin account for your Seafile server.\n\n\nAfter starting the services, you may open a web browser and type in\n\n\nhttp://192.168.1.111:8000\n\n\nyou will be redirected to the Login page. Just enter the admin username and password.\n\n\nCongratulations!\n Now you have successfully setup your private Seafile server.\n\n\nRun Seahub on another port\n\n\nIf you want to run Seahub on a port other than the default 8000, say 8001, you must:\n\n\n\n\nstop the Seafile server\n\n\n\n\n./seahub.sh stop\n./seafile.sh stop\n\n\n\n\n\n\nmodify the value of SERVICE_URL in the file \nccnet.conf\n, like this: (assume your ip or domain is 192.168.1.100). For Seafile version 5.0+, you can modify SERVICE_URL via web UI in \"System Admin-\nSettings\"\n\n\n\n\nSERVICE_URL = http://192.168.1.100:8001\n\n\n\n\n\n\nrestart Seafile server\n\n\n\n\n./seafile.sh start\n./seahub.sh start 8001\n\n\n\n\nSee Seafile \nServer Configuration Manual\n for more details about \nccnet.conf\n.\n\n\nManage Seafile and Seahub\n\n\nStopping\n\n\n./seahub.sh stop # stop seahub website\n./seafile.sh stop # stop seafile processes\n\n\n\n\nRestarting\n\n\n./seafile.sh restart\n./seahub.sh restart\n\n\n\n\nWhen the Scripts Fail\n\n\nMost of the time, \nseafile.sh\n and \nseahub.sh\n work fine. But if they fail, you might want to\n\n\n\n\nUse pgrep command to check if Seafile/Seahub processes are still running\n\n\n\n\npgrep -f seafile-controller # check Seafile processes\npgrep -f \nmanage.py run_gunicorn\n # check Seahub process\n\n\n\n\n\n\nUse pkill to kill the processes\n\n\n\n\npkill -f seafile-controller\npkill -f \nmanage.py run_gunicorn\n\n\n\n\n\nThat's it!\n\n\nFor a production server we highly recommend to setup with Nginx/Apache and enable SSL/TLS.\n\n\nThat's it! Now you might want read more about Seafile.\n- \nAdministration", 
            "title": "Deploying Seafile with SQLite"
        }, 
        {
            "location": "/deploy/using_sqlite/#deploying-seafile-with-sqlite", 
            "text": "", 
            "title": "Deploying Seafile with SQLite"
        }, 
        {
            "location": "/deploy/using_sqlite/#download-binary-package", 
            "text": "Visit our  download page ,  download the latest server package.  Choose one of:\n- Generic Linux\n- Windows\n- Server for Raspberry Pi  #check if your system is x86 (32bit) or x86_64 (64 bit)\nuname -m  Click the tarball link and save it.", 
            "title": "Download binary package"
        }, 
        {
            "location": "/deploy/using_sqlite/#deploying-and-directory-layout", 
            "text": "NOTE: If you place the Seafile data directory in external storage, such as NFS, CIFS mount, you should not use SQLite as the database, but use MySQL instead.  Supposed your organization's name is \"haiwen\", and you've downloaded seafile-server_1.4.0_* into your home directory. We suggest you to use the following layout for your deployment:  mkdir haiwen\nmv seafile-server_* haiwen\ncd haiwen\n# after moving seafile-server_* to this directory\ntar -xzf seafile-server_*\nmkdir installed\nmv seafile-server_* installed  Now you should have the following directory layout  # tree . -L 2\n.\n\u251c\u2500\u2500 installed\n\u2502   \u2514\u2500\u2500 seafile-server_1.4.0_x86-64.tar.gz\n\u2514\u2500\u2500 seafile-server-1.4.0\n    \u251c\u2500\u2500 reset-admin.sh\n    \u251c\u2500\u2500 runtime\n    \u251c\u2500\u2500 seafile\n    \u251c\u2500\u2500 seafile.sh\n    \u251c\u2500\u2500 seahub\n    \u251c\u2500\u2500 seahub.sh\n    \u251c\u2500\u2500 setup-seafile.sh\n    \u2514\u2500\u2500 upgrade  Benefits of this layout are   We can place all the config files for Seafile server inside \"haiwen\" directory, making it easier to manage.  When you upgrade to a new version of Seafile, you can simply untar the latest package into \"haiwen\" directory. In this way you can reuse the existing config files in \"haiwen\" directory and don't need to configure again.", 
            "title": "Deploying and Directory Layout"
        }, 
        {
            "location": "/deploy/using_sqlite/#setting-up-seafile-server", 
            "text": "", 
            "title": "Setting Up Seafile Server"
        }, 
        {
            "location": "/deploy/using_sqlite/#prerequisites", 
            "text": "The Seafile server package requires the following packages have been installed in your system   python 2.7  python-setuptools  python-imaging  python-ldap  sqlite3   #on Debian\napt-get update\napt-get install python2.7 libpython2.7 python-setuptools python-imaging python-ldap sqlite3  # on CentOS 7\nsudo yum install python-imaging MySQL-python python-memcached python-ldap", 
            "title": "Prerequisites"
        }, 
        {
            "location": "/deploy/using_sqlite/#setup", 
            "text": "cd seafile-server-*\n./setup-seafile.sh  #run the setup script   answer prompted questions  If some of the prerequisites are not installed, the Seafile initialization script will ask you to install them.  The script will guide you through the settings of various configuration options.  Seafile configuration options     Option  Description  Note      server name  Name of this Seafile server  3-15 characters, only English letters, digits and underscore ('_') are allowed    server ip or domain  The IP address or domain name used by this server  Seafile client program will access the server with this address    Seafile data dir  Seafile stores your data in this directory. By default it'll be placed in the current directory.  The size of this directory will increase as you put more and more data into Seafile. Please select a disk partition with enough free space.    fileserver port  The TCP port used by Seafile fileserver  Default is 8082. If it's been used by other service, you can set it to another port.     Now you should have the following directory layout:  #tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502   \u251c\u2500\u2500 mykey.peer\n\u2502   \u251c\u2500\u2500 PeerMgr\n\u2502   \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u251c\u2500\u2500 installed\n\u2502   \u2514\u2500\u2500 seafile-server_1.4.0_x86-64.tar.gz\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-server-1.4.0  # active version\n\u2502   \u251c\u2500\u2500 reset-admin.sh\n\u2502   \u251c\u2500\u2500 runtime\n\u2502   \u251c\u2500\u2500 seafile\n\u2502   \u251c\u2500\u2500 seafile.sh\n\u2502   \u251c\u2500\u2500 seahub\n\u2502   \u251c\u2500\u2500 seahub.sh\n\u2502   \u251c\u2500\u2500 setup-seafile.sh\n\u2502   \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seafile-server-latest  # symbolic link to seafile-server-1.4.0\n\u251c\u2500\u2500 seahub-data\n\u2502   \u2514\u2500\u2500 avatars\n\u251c\u2500\u2500 seahub.db  The folder seafile-server-latest is a symbolic link to the current Seafile server folder. When later you upgrade to a new version, the upgrade scripts would update this link to keep it always point to the latest Seafile server folder.", 
            "title": "Setup"
        }, 
        {
            "location": "/deploy/using_sqlite/#running-seafile-server", 
            "text": "", 
            "title": "Running Seafile Server"
        }, 
        {
            "location": "/deploy/using_sqlite/#before-running", 
            "text": "Since Seafile uses persistent connections between client and server, you should increase Linux file descriptors by ulimit if you have a large number of clients before start Seafile, like:  ulimit -n 30000", 
            "title": "Before Running"
        }, 
        {
            "location": "/deploy/using_sqlite/#starting-seafile-server-and-seahub-website", 
            "text": "Start Seafile:   ./seafile.sh start # Start Seafile service   Start Seahub:   ./seahub.sh start  port   # Start Seahub website, port defaults to 8000  Note : The first time you start Seahub, the script is going to prompt you to create an admin account for your Seafile server.  After starting the services, you may open a web browser and type in  http://192.168.1.111:8000  you will be redirected to the Login page. Just enter the admin username and password.  Congratulations!  Now you have successfully setup your private Seafile server.", 
            "title": "Starting Seafile Server and Seahub Website"
        }, 
        {
            "location": "/deploy/using_sqlite/#run-seahub-on-another-port", 
            "text": "If you want to run Seahub on a port other than the default 8000, say 8001, you must:   stop the Seafile server   ./seahub.sh stop\n./seafile.sh stop   modify the value of SERVICE_URL in the file  ccnet.conf , like this: (assume your ip or domain is 192.168.1.100). For Seafile version 5.0+, you can modify SERVICE_URL via web UI in \"System Admin- Settings\"   SERVICE_URL = http://192.168.1.100:8001   restart Seafile server   ./seafile.sh start\n./seahub.sh start 8001  See Seafile  Server Configuration Manual  for more details about  ccnet.conf .", 
            "title": "Run Seahub on another port"
        }, 
        {
            "location": "/deploy/using_sqlite/#manage-seafile-and-seahub", 
            "text": "", 
            "title": "Manage Seafile and Seahub"
        }, 
        {
            "location": "/deploy/using_sqlite/#stopping", 
            "text": "./seahub.sh stop # stop seahub website\n./seafile.sh stop # stop seafile processes", 
            "title": "Stopping"
        }, 
        {
            "location": "/deploy/using_sqlite/#restarting", 
            "text": "./seafile.sh restart\n./seahub.sh restart", 
            "title": "Restarting"
        }, 
        {
            "location": "/deploy/using_sqlite/#when-the-scripts-fail", 
            "text": "Most of the time,  seafile.sh  and  seahub.sh  work fine. But if they fail, you might want to   Use pgrep command to check if Seafile/Seahub processes are still running   pgrep -f seafile-controller # check Seafile processes\npgrep -f  manage.py run_gunicorn  # check Seahub process   Use pkill to kill the processes   pkill -f seafile-controller\npkill -f  manage.py run_gunicorn", 
            "title": "When the Scripts Fail"
        }, 
        {
            "location": "/deploy/using_sqlite/#thats-it", 
            "text": "For a production server we highly recommend to setup with Nginx/Apache and enable SSL/TLS.  That's it! Now you might want read more about Seafile.\n-  Administration", 
            "title": "That's it!"
        }, 
        {
            "location": "/deploy/using_mysql/", 
            "text": "Deploying Seafile with MySQL\n\n\nThis manual explains how to setup and run seafile server from a pre-built package with MySQL.\n\n\nDownload\n\n\nDownload\n the latest server package.\n\n\nDeploying and Directory Layout\n\n\nSupposed your organization's name is \"haiwen\", and you've downloaded \nseafile-server_1.8.2_*\n into your home directory. We suggest you to layout your deployment as follows :\n\n\n\nmkdir haiwen\nmv seafile-server_* haiwen\ncd haiwen\n# after moving seafile-server_* to this directory\ntar -xzf seafile-server_*\nmkdir installed\nmv seafile-server_* installed\n\n\n\n\nNow you should have the following directory layout\n\n\n\ntree haiwen -L 2\n\n\nhaiwen\n\u251c\u2500\u2500 installed\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile-server_1.8.2_x86-64.tar.gz\n\u2514\u2500\u2500 seafile-server-1.8.2\n    \u251c\u2500\u2500 reset-admin.sh\n    \u251c\u2500\u2500 runtime\n    \u251c\u2500\u2500 seafile\n    \u251c\u2500\u2500 seafile.sh\n    \u251c\u2500\u2500 seahub\n    \u251c\u2500\u2500 seahub.sh\n    \u251c\u2500\u2500 setup-seafile.sh\n    \u2514\u2500\u2500 upgrade\n\n\n\nThe benefit of this layout is that:\n\n\n\n\nWe can place all the config files for Seafile server inside \"haiwen\" directory, making it easier to manage.\n\n\nWhen you upgrade to a new version of Seafile, you can simply untar the latest package into \"haiwen\" directory. In this way you can reuse the existing config files in \"haiwen\" directory and don't need to configure again.\n\n\n\n\nPrepare MySQL Databases\n\n\nThree components of Seafile Server need their own databases:\n\n\n\n\nccnet server\n\n\nseafile server\n\n\nseahub\n\n\n\n\nSee \nSeafile Server Components Overview\n if you want to know more about the seafile server components.\n\n\nThere are two ways to intialize the databases:\n\n\n\n\nlet the \nsetup-seafile-mysql.sh\n script create the databases for you.\n\n\ncreate the databases by yourself, or someone else (the database admin, for example)\n\n\n\n\nWe recommend the first way. The script would ask you for the root password of the mysql server, and it will create:\n\n\n\n\ndatabase for ccnet/seafile/seahub.\n\n\na new user to access these databases\n\n\n\n\nHowever, sometimes you have to use the second way. If you don't have the root password, you need someone who has the privileges, e.g., the database admin, to create the three databases, as well as a mysql user who can access the three databases for you. For example, to create three databases: \nccnet-db\n / \nseafile-db\n / \nseahub-db\n for ccnet/seafile/seahub respectively, and a mysql user \"seafile\" to access these databases:\n\n\n\ncreate database `ccnet-db` character set = 'utf8';\ncreate database `seafile-db` character set = 'utf8';\ncreate database `seahub-db` character set = 'utf8';\n\ncreate user 'seafile'@'localhost' identified by 'seafile';\n\nGRANT ALL PRIVILEGES ON `ccnet-db`.* to `seafile`@localhost;\nGRANT ALL PRIVILEGES ON `seafile-db`.* to `seafile`@localhost;\nGRANT ALL PRIVILEGES ON `seahub-db`.* to `seafile`@localhost;\n\n\n\n\nSetting Up Seafile Server\n\n\nPrerequisites\n\n\nThe Seafile server package requires the following packages have been installed in your system\n\n\n\n\npython 2.7\n\n\npython-setuptools\n\n\npython-imaging\n\n\npython-ldap\n\n\npython-mysqldb\n\n\npython-memcache (or python-memcached)\n\n\n\n\n\n# on Debian/Ubuntu\napt-get update\napt-get install python2.7 libpython2.7 python-setuptools python-imaging \\\n  python-ldap python-mysqldb python-memcache\n\n\n\n\n\n# on CentOS 7\nsudo yum install python-imaging MySQL-python python-memcached python-ldap\n\n\n\n\nSetup\n\n\n\ncd seafile-server-*\n./setup-seafile-mysql.sh  #run the setup script \n&\n answer prompted questions\n\n\n\n\nIf some of the prerequisites are not installed, the seafile initialization script will ask you to install them.\n\n\nThe script will guide you through the settings of various configuration options.\n\n\n Seafile configuration options \n\n\n\n\n\n\n\n\nOption\n\n\nDescription\n\n\nNote\n\n\n\n\n\n\n\n\n\n\nserver name\n\n\nName of this seafile server\n\n\n3-15 characters, only English letters, digits and underscore ('_') are allowed\n\n\n\n\n\n\nserver ip or domain\n\n\nThe IP address or domain name used by this server\n\n\nSeafile client program will access the server with this address\n\n\n\n\n\n\nseafile data dir\n\n\nSeafile stores your data in this directory. By default it'll be placed in the current directory.\n\n\nThe size of this directory will increase as you put more and more data into Seafile. Please select a disk partition with enough free space.\n\n\n\n\n\n\nfileserver port\n\n\nThe TCP port used by Seafile fileserver\n\n\nDefault is 8082. If it's been used by other service, you can set it to another port.\n\n\n\n\n\n\n\n\nAt this moment, you will be asked to choose a way to initialize seafile databases:\n\n\n-------------------------------------------------------\nPlease choose a way to initialize seafile databases:\n-------------------------------------------------------\n\n[1] Create new ccnet/seafile/seahub databases\n[2] Use existing ccnet/seafile/seahub databases\n\n\n\n\n\nWhich one to choose depends on if you have the root password.\n\n\n\n\nIf you choose \"1\", you need to provide the root password. The script would create the databases and a new user to access the databases\n\n\nIf you choose \"2\", the ccnet/seafile/seahub databases must have already been created, either by you, or someone else.\n\n\n\n\nIf you choose \"[1] Create new ccnet/seafile/seahub databases\", you would be asked these questions:\n\n\n\n\n\n\n\n\nQuestion\n\n\nDescription\n\n\nNote\n\n\n\n\n\n\n\n\n\n\nmysql server host\n\n\nthe host address of the mysql server\n\n\nthe default is localhost\n\n\n\n\n\n\nmysql server port\n\n\nthe port of the mysql server\n\n\nthe default is 3306. Almost every mysql server uses this port.\n\n\n\n\n\n\nroot password\n\n\nthe password of mysql root account\n\n\nthe root password is required to create new databases and a new user\n\n\n\n\n\n\nmysql user for seafile\n\n\nthe username for seafile programs to use to access MySQL server\n\n\nif the user does not exist, it would be created\n\n\n\n\n\n\npassword for seafile mysql user\n\n\nthe password for the user above\n\n\n\n\n\n\n\n\nccnet dabase name\n\n\nthe name of the database used by ccnet, default is \"ccnet-db\"\n\n\nthe database would be created if not existing\n\n\n\n\n\n\nseafile dabase name\n\n\nthe name of the database used by seafile, default is \"seafile-db\"\n\n\nthe database would be created if not existing\n\n\n\n\n\n\nseahub dabase name\n\n\nthe name of the database used by seahub, default is \"seahub-db\"\n\n\nthe database would be created if not existing\n\n\n\n\n\n\n\n\nIf you choose \"[2] Use existing ccnet/seafile/seahub databases\", you would be asked these questions:\n\n\n related questions for \"Use existing ccnet/seafile/seahub databases\" \n\n\n\n\n\n\n\n\nQuestion\n\n\nDescription\n\n\nNote\n\n\n\n\n\n\n\n\n\n\nmysql server host\n\n\nthe host address of the mysql server\n\n\nthe default is localhost\n\n\n\n\n\n\nmysql server port\n\n\nthe port of the mysql server\n\n\nthe default is 3306. Almost every mysql server uses this port\n\n\n\n\n\n\nmysql user for seafile\n\n\nthe user for seafile programs to use to access MySQL server\n\n\nthe user must already exists\n\n\n\n\n\n\npassword for seafile mysql user\n\n\nthe password for the user above\n\n\n\n\n\n\n\n\nccnet dabase name\n\n\nthe name of the database used by ccnet\n\n\nthis database must already exist\n\n\n\n\n\n\nseafile dabase name\n\n\nthe name of the database used by seafile, default is \"seafile-db\"\n\n\nthis database must already exist\n\n\n\n\n\n\nseahub dabase name\n\n\nthe name of the database used by seahub, default is \"seahub-db\"\n\n\nthis database must already exist\n\n\n\n\n\n\n\n\nIf the setup is successful, you'll see the following output\n\n\n\n\nNow you should have the following directory layout :\n\n\n#tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mykey.peer\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 PeerMgr\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u251c\u2500\u2500 installed\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile-server_1.8.2_x86-64.tar.gz\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-server-1.8.2  # active version\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 reset-admin.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 runtime\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 setup-seafile.sh\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seafile-server-latest  # symbolic link to seafile-server-1.8.2\n\u251c\u2500\u2500 seahub-data\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 avatars\n\n\n\n\nThe folder \nseafile-server-latest\n is a symbolic link to the current seafile server folder. When later you upgrade to a new version, the upgrade scripts would update this link to keep it always point to the latest seafile server folder.\n\n\nRunning Seafile Server\n\n\nStarting Seafile Server and Seahub Website\n\n\nUnder seafile-server-1.8.2 directory, run the following commands\n\n\n./seafile.sh start # Start seafile service\n./seahub.sh start \nport\n  # Start seahub website, port defaults to 8000\n\n\n\n\nNote: The first time you start seahub, the script would prompt you to create an admin account for your seafile server.\n\n\nAfter starting the services, you may open a web browser and visit Seafile web interface at (assume your server IP is 192.168.1.111):\n\n\nhttp://192.168.1.111:8000/\n\n\n\n\nCongratulations! Now you have successfully setup your private Seafile server.\n\n\nRun Seahub on another port\n\n\nIf you want to run seahub in a port other than the default 8000, say 8001, you must:\n\n\n\n\n\n\nstop the seafile server\n\n\n./seahub.sh stop\n./seafile.sh stop\n\n\n\n\n\n\n\nmodify the value of \nSERVICE_URL\n in the file \nccnet.conf\n, like this: (assume your ip or domain is \n192.168.1.111\n)\n\n\nSERVICE_URL = http://192.168.1.111:8001\n\n\n\n\n\n\n\nrestart seafile server\n\n\n./seafile.sh start\n./seahub.sh start 8001\n\n\n\n\n\n\n\nsee \nSeafile server configuration options\n for more details about \nccnet.conf\n.\n\n\nStopping and Restarting Seafile and Seahub\n\n\nStopping\n\n\n\n./seahub.sh stop # stop seahub website\n./seafile.sh stop # stop seafile processes\n\n\n\n\nRestarting\n\n\n\n./seafile.sh restart\n./seahub.sh restart\n\n\n\n\nWhen the Scripts Fail\n\n\nMost of the time, seafile.sh and seahub.sh work fine. But if they fail, you may\n\n\n\n\nUse \npgrep\n command to check if seafile/seahub processes are still running\n\n\n\n\n\npgrep -f seafile-controller # check seafile processes\npgrep -f \"manage.py run_gunicorn\" # check seahub process\n\n\n\n\n\n\nUse \npkill\n to kill the processes\n\n\n\n\n\npkill -f seafile-controller\npkill -f \"manage.py run_gunicorn\"\n\n\n\n\nPerformance turning\n\n\nIf you have more than 50 users in your Seafile system, we highly recommand you to \nadd memcached\n. This will make the web 10x faster.  \n\n\nThat's it!\n\n\nThat's it! Now you may want read more about seafile.\n\n\n\n\nDeploy Seafile with Nginx\n / \nDeploy Seafile with Apache\n\n\nEnable Https on Seafile Web with Nginx\n / \nEnable Https on Seafile Web with Apache\n\n\nConfigure Seafile to use LDAP\n\n\nHow to manage the server", 
            "title": "Deploying Seafile with MySQL"
        }, 
        {
            "location": "/deploy/using_mysql/#deploying-seafile-with-mysql", 
            "text": "This manual explains how to setup and run seafile server from a pre-built package with MySQL.", 
            "title": "Deploying Seafile with MySQL"
        }, 
        {
            "location": "/deploy/using_mysql/#download", 
            "text": "Download  the latest server package.", 
            "title": "Download"
        }, 
        {
            "location": "/deploy/using_mysql/#deploying-and-directory-layout", 
            "text": "Supposed your organization's name is \"haiwen\", and you've downloaded  seafile-server_1.8.2_*  into your home directory. We suggest you to layout your deployment as follows :  \nmkdir haiwen\nmv seafile-server_* haiwen\ncd haiwen\n# after moving seafile-server_* to this directory\ntar -xzf seafile-server_*\nmkdir installed\nmv seafile-server_* installed  Now you should have the following directory layout", 
            "title": "Deploying and Directory Layout"
        }, 
        {
            "location": "/deploy/using_mysql/#tree-haiwen-l-2", 
            "text": "haiwen\n\u251c\u2500\u2500 installed\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile-server_1.8.2_x86-64.tar.gz\n\u2514\u2500\u2500 seafile-server-1.8.2\n    \u251c\u2500\u2500 reset-admin.sh\n    \u251c\u2500\u2500 runtime\n    \u251c\u2500\u2500 seafile\n    \u251c\u2500\u2500 seafile.sh\n    \u251c\u2500\u2500 seahub\n    \u251c\u2500\u2500 seahub.sh\n    \u251c\u2500\u2500 setup-seafile.sh\n    \u2514\u2500\u2500 upgrade  The benefit of this layout is that:   We can place all the config files for Seafile server inside \"haiwen\" directory, making it easier to manage.  When you upgrade to a new version of Seafile, you can simply untar the latest package into \"haiwen\" directory. In this way you can reuse the existing config files in \"haiwen\" directory and don't need to configure again.", 
            "title": "tree haiwen -L 2"
        }, 
        {
            "location": "/deploy/using_mysql/#prepare-mysql-databases", 
            "text": "Three components of Seafile Server need their own databases:   ccnet server  seafile server  seahub   See  Seafile Server Components Overview  if you want to know more about the seafile server components.  There are two ways to intialize the databases:   let the  setup-seafile-mysql.sh  script create the databases for you.  create the databases by yourself, or someone else (the database admin, for example)   We recommend the first way. The script would ask you for the root password of the mysql server, and it will create:   database for ccnet/seafile/seahub.  a new user to access these databases   However, sometimes you have to use the second way. If you don't have the root password, you need someone who has the privileges, e.g., the database admin, to create the three databases, as well as a mysql user who can access the three databases for you. For example, to create three databases:  ccnet-db  /  seafile-db  /  seahub-db  for ccnet/seafile/seahub respectively, and a mysql user \"seafile\" to access these databases:  \ncreate database `ccnet-db` character set = 'utf8';\ncreate database `seafile-db` character set = 'utf8';\ncreate database `seahub-db` character set = 'utf8';\n\ncreate user 'seafile'@'localhost' identified by 'seafile';\n\nGRANT ALL PRIVILEGES ON `ccnet-db`.* to `seafile`@localhost;\nGRANT ALL PRIVILEGES ON `seafile-db`.* to `seafile`@localhost;\nGRANT ALL PRIVILEGES ON `seahub-db`.* to `seafile`@localhost;", 
            "title": "Prepare MySQL Databases"
        }, 
        {
            "location": "/deploy/using_mysql/#setting-up-seafile-server", 
            "text": "", 
            "title": "Setting Up Seafile Server"
        }, 
        {
            "location": "/deploy/using_mysql/#prerequisites", 
            "text": "The Seafile server package requires the following packages have been installed in your system   python 2.7  python-setuptools  python-imaging  python-ldap  python-mysqldb  python-memcache (or python-memcached)   \n# on Debian/Ubuntu\napt-get update\napt-get install python2.7 libpython2.7 python-setuptools python-imaging \\\n  python-ldap python-mysqldb python-memcache  \n# on CentOS 7\nsudo yum install python-imaging MySQL-python python-memcached python-ldap", 
            "title": "Prerequisites"
        }, 
        {
            "location": "/deploy/using_mysql/#setup", 
            "text": "cd seafile-server-*\n./setup-seafile-mysql.sh  #run the setup script  &  answer prompted questions  If some of the prerequisites are not installed, the seafile initialization script will ask you to install them.  The script will guide you through the settings of various configuration options.   Seafile configuration options      Option  Description  Note      server name  Name of this seafile server  3-15 characters, only English letters, digits and underscore ('_') are allowed    server ip or domain  The IP address or domain name used by this server  Seafile client program will access the server with this address    seafile data dir  Seafile stores your data in this directory. By default it'll be placed in the current directory.  The size of this directory will increase as you put more and more data into Seafile. Please select a disk partition with enough free space.    fileserver port  The TCP port used by Seafile fileserver  Default is 8082. If it's been used by other service, you can set it to another port.     At this moment, you will be asked to choose a way to initialize seafile databases:  -------------------------------------------------------\nPlease choose a way to initialize seafile databases:\n-------------------------------------------------------\n\n[1] Create new ccnet/seafile/seahub databases\n[2] Use existing ccnet/seafile/seahub databases  Which one to choose depends on if you have the root password.   If you choose \"1\", you need to provide the root password. The script would create the databases and a new user to access the databases  If you choose \"2\", the ccnet/seafile/seahub databases must have already been created, either by you, or someone else.   If you choose \"[1] Create new ccnet/seafile/seahub databases\", you would be asked these questions:     Question  Description  Note      mysql server host  the host address of the mysql server  the default is localhost    mysql server port  the port of the mysql server  the default is 3306. Almost every mysql server uses this port.    root password  the password of mysql root account  the root password is required to create new databases and a new user    mysql user for seafile  the username for seafile programs to use to access MySQL server  if the user does not exist, it would be created    password for seafile mysql user  the password for the user above     ccnet dabase name  the name of the database used by ccnet, default is \"ccnet-db\"  the database would be created if not existing    seafile dabase name  the name of the database used by seafile, default is \"seafile-db\"  the database would be created if not existing    seahub dabase name  the name of the database used by seahub, default is \"seahub-db\"  the database would be created if not existing     If you choose \"[2] Use existing ccnet/seafile/seahub databases\", you would be asked these questions:   related questions for \"Use existing ccnet/seafile/seahub databases\"      Question  Description  Note      mysql server host  the host address of the mysql server  the default is localhost    mysql server port  the port of the mysql server  the default is 3306. Almost every mysql server uses this port    mysql user for seafile  the user for seafile programs to use to access MySQL server  the user must already exists    password for seafile mysql user  the password for the user above     ccnet dabase name  the name of the database used by ccnet  this database must already exist    seafile dabase name  the name of the database used by seafile, default is \"seafile-db\"  this database must already exist    seahub dabase name  the name of the database used by seahub, default is \"seahub-db\"  this database must already exist     If the setup is successful, you'll see the following output   Now you should have the following directory layout :  #tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 mykey.peer\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 PeerMgr\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u251c\u2500\u2500 installed\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 seafile-server_1.8.2_x86-64.tar.gz\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-server-1.8.2  # active version\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 reset-admin.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 runtime\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 setup-seafile.sh\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seafile-server-latest  # symbolic link to seafile-server-1.8.2\n\u251c\u2500\u2500 seahub-data\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 avatars  The folder  seafile-server-latest  is a symbolic link to the current seafile server folder. When later you upgrade to a new version, the upgrade scripts would update this link to keep it always point to the latest seafile server folder.", 
            "title": "Setup"
        }, 
        {
            "location": "/deploy/using_mysql/#running-seafile-server", 
            "text": "", 
            "title": "Running Seafile Server"
        }, 
        {
            "location": "/deploy/using_mysql/#starting-seafile-server-and-seahub-website", 
            "text": "Under seafile-server-1.8.2 directory, run the following commands  ./seafile.sh start # Start seafile service\n./seahub.sh start  port   # Start seahub website, port defaults to 8000  Note: The first time you start seahub, the script would prompt you to create an admin account for your seafile server.  After starting the services, you may open a web browser and visit Seafile web interface at (assume your server IP is 192.168.1.111):  http://192.168.1.111:8000/  Congratulations! Now you have successfully setup your private Seafile server.", 
            "title": "Starting Seafile Server and Seahub Website"
        }, 
        {
            "location": "/deploy/using_mysql/#run-seahub-on-another-port", 
            "text": "If you want to run seahub in a port other than the default 8000, say 8001, you must:    stop the seafile server \n./seahub.sh stop\n./seafile.sh stop    modify the value of  SERVICE_URL  in the file  ccnet.conf , like this: (assume your ip or domain is  192.168.1.111 ) \nSERVICE_URL = http://192.168.1.111:8001    restart seafile server \n./seafile.sh start\n./seahub.sh start 8001    see  Seafile server configuration options  for more details about  ccnet.conf .", 
            "title": "Run Seahub on another port"
        }, 
        {
            "location": "/deploy/using_mysql/#stopping-and-restarting-seafile-and-seahub", 
            "text": "", 
            "title": "Stopping and Restarting Seafile and Seahub"
        }, 
        {
            "location": "/deploy/using_mysql/#stopping", 
            "text": "./seahub.sh stop # stop seahub website\n./seafile.sh stop # stop seafile processes", 
            "title": "Stopping"
        }, 
        {
            "location": "/deploy/using_mysql/#restarting", 
            "text": "./seafile.sh restart\n./seahub.sh restart", 
            "title": "Restarting"
        }, 
        {
            "location": "/deploy/using_mysql/#when-the-scripts-fail", 
            "text": "Most of the time, seafile.sh and seahub.sh work fine. But if they fail, you may   Use  pgrep  command to check if seafile/seahub processes are still running   \npgrep -f seafile-controller # check seafile processes\npgrep -f \"manage.py run_gunicorn\" # check seahub process   Use  pkill  to kill the processes   \npkill -f seafile-controller\npkill -f \"manage.py run_gunicorn\"", 
            "title": "When the Scripts Fail"
        }, 
        {
            "location": "/deploy/using_mysql/#performance-turning", 
            "text": "If you have more than 50 users in your Seafile system, we highly recommand you to  add memcached . This will make the web 10x faster.", 
            "title": "Performance turning"
        }, 
        {
            "location": "/deploy/using_mysql/#thats-it", 
            "text": "That's it! Now you may want read more about seafile.   Deploy Seafile with Nginx  /  Deploy Seafile with Apache  Enable Https on Seafile Web with Nginx  /  Enable Https on Seafile Web with Apache  Configure Seafile to use LDAP  How to manage the server", 
            "title": "That's it!"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/", 
            "text": "Config Seahub with Nginx\n\n\nImportant\n\n\nAccording to the \nsecurity advisory\n published by Django team, we recommend disable \nGZip compression\n to mitigate \nBREACH attack\n.\n\n\nDeploy Seahub/FileServer with Nginx\n\n\nSeahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.\n\n\nHere we deploy Seahub using \nFastCGI\n, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.\n\n\nThis is a sample Nginx config file.\n\n\nIn Ubuntu 14.04, you can add the config file as follows:\n\n\n\n\ncreate file \n/etc/nginx/sites-available/seafile.conf\n\n\nDelete \n/etc/nginx/sites-enabled/default\n: \nrm /etc/nginx/sites-enabled/default\n\n\nCreate symbolic link: \nln -s /etc/nginx/sites-available/seafile.conf /etc/nginx/sites-enabled/seafile.conf\n\n\n\n\nserver {\n    listen 80;\n    server_name www.myseafile.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location / {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n        fastcgi_param   REMOTE_ADDR         $remote_addr;\n\n        access_log      /var/log/nginx/seahub.access.log;\n        error_log       /var/log/nginx/seahub.error.log;\n        fastcgi_read_timeout 36000;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n        proxy_connect_timeout  36000s;\n        proxy_read_timeout  36000s;\n        proxy_send_timeout  36000s;\n        send_timeout  36000s;\n    }\n\n    location /media {\n        root /home/user/haiwen/seafile-server-latest/seahub;\n    }\n}\n\n\n\n\nNginx settings \"client_max_body_size\" is by default 1M. Uploading a file bigger than this limit will give you an error message HTTP error code 413 (\"Request Entity Too Large\").\n\n\nYou should use 0 to disable this feature or write the same value than for the parameter \nmax_upload_size\n in section \n[fileserver]\n of \nseafile.conf\n.\n\n\nTip for uploading very large files (\n 4GB): By default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (seaf-server in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version \n= 1.8.0 and add the following options to Nginx config file:\n\n\n    location /seafhttp {\n        ... ...\n        proxy_request_buffering off;\n    }\n\n\n\n\nModify ccnet.conf and seahub_setting.py\n\n\nModify ccnet.conf\n\n\nYou need to modify the value of \nSERVICE_URL\n in \nccnet.conf\n to let Seafile know the domain you choose.\n\n\nSERVICE_URL = http://www.myseafile.com\n\n\n\n\nNote: If you later change the domain assigned to seahub, you also need to change the value of  \nSERVICE_URL\n.\n\n\nModify seahub_settings.py\n\n\nYou need to add a line in \nseahub_settings.py\n to set the value of \nFILE_SERVER_ROOT\n (or \nHTTP_SERVER_ROOT\n before version 3.1)\n\n\nFILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'\n\n\n\n\nStart Seafile and Seahub\n\n\n./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Config Seahub with Nginx"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#config-seahub-with-nginx", 
            "text": "", 
            "title": "Config Seahub with Nginx"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#important", 
            "text": "According to the  security advisory  published by Django team, we recommend disable  GZip compression  to mitigate  BREACH attack .", 
            "title": "Important"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#deploy-seahubfileserver-with-nginx", 
            "text": "Seahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.  Here we deploy Seahub using  FastCGI , and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.  This is a sample Nginx config file.  In Ubuntu 14.04, you can add the config file as follows:   create file  /etc/nginx/sites-available/seafile.conf  Delete  /etc/nginx/sites-enabled/default :  rm /etc/nginx/sites-enabled/default  Create symbolic link:  ln -s /etc/nginx/sites-available/seafile.conf /etc/nginx/sites-enabled/seafile.conf   server {\n    listen 80;\n    server_name www.myseafile.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location / {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n        fastcgi_param   REMOTE_ADDR         $remote_addr;\n\n        access_log      /var/log/nginx/seahub.access.log;\n        error_log       /var/log/nginx/seahub.error.log;\n        fastcgi_read_timeout 36000;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n        proxy_connect_timeout  36000s;\n        proxy_read_timeout  36000s;\n        proxy_send_timeout  36000s;\n        send_timeout  36000s;\n    }\n\n    location /media {\n        root /home/user/haiwen/seafile-server-latest/seahub;\n    }\n}  Nginx settings \"client_max_body_size\" is by default 1M. Uploading a file bigger than this limit will give you an error message HTTP error code 413 (\"Request Entity Too Large\").  You should use 0 to disable this feature or write the same value than for the parameter  max_upload_size  in section  [fileserver]  of  seafile.conf .  Tip for uploading very large files (  4GB): By default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (seaf-server in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version  = 1.8.0 and add the following options to Nginx config file:      location /seafhttp {\n        ... ...\n        proxy_request_buffering off;\n    }", 
            "title": "Deploy Seahub/FileServer with Nginx"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#modify-ccnetconf-and-seahub_settingpy", 
            "text": "", 
            "title": "Modify ccnet.conf and seahub_setting.py"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#modify-ccnetconf", 
            "text": "You need to modify the value of  SERVICE_URL  in  ccnet.conf  to let Seafile know the domain you choose.  SERVICE_URL = http://www.myseafile.com  Note: If you later change the domain assigned to seahub, you also need to change the value of   SERVICE_URL .", 
            "title": "Modify ccnet.conf"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#modify-seahub_settingspy", 
            "text": "You need to add a line in  seahub_settings.py  to set the value of  FILE_SERVER_ROOT  (or  HTTP_SERVER_ROOT  before version 3.1)  FILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'", 
            "title": "Modify seahub_settings.py"
        }, 
        {
            "location": "/deploy/deploy_with_nginx/#start-seafile-and-seahub", 
            "text": "./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Start Seafile and Seahub"
        }, 
        {
            "location": "/deploy/https_with_nginx/", 
            "text": "Enabling Https with Nginx\n\n\nHere we use self-signed SSL digital certificate for free. If you use a paid ssl certificate from some authority, just skip the first step.\n\n\nGenerate SSL digital certificate with OpenSSL\n\n\n    openssl genrsa -out privkey.pem 2048\n    openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095\n\n\n\n\nIf you're using a custom CA to sign your SSL certificate, you have to enable certificate revocation list (CRL) in your certificate. Otherwise http syncing on Windows client may not work. See \nthis thread\n for more information.\n\n\nEnable SSL module of Nginx (optional)\n\n\nIf your Nginx does not support SSL, you need to recompile it, the commands are as follows:\n\n\n    ./configure --with-http_stub_status_module --with-http_ssl_module\n    make \n make install\n\n\n\n\nModify Nginx configuration file\n\n\nAssume you have configured Nginx as \nDeploy-Seafile-with-nginx\n. To use https, you need to modify your Nginx configuration file.\n\n\n    server {\n        listen       80;\n        server_name  www.yourdomain.com;\n        rewrite ^ https://$http_host$request_uri? permanent;    # force redirect http to https\n    }\n\n    server {\n        listen 443;\n        ssl on;\n        ssl_certificate /etc/ssl/cacert.pem;        # path to your cacert.pem\n        ssl_certificate_key /etc/ssl/privkey.pem;   # path to your privkey.pem\n        server_name www.yourdomain.com;\n        # ......\n        fastcgi_param   HTTPS               on;\n        fastcgi_param   HTTP_SCHEME         https;\n    }\n\n\n\n\nSample configuration file\n\n\nHere is the sample configuration file:\n\n\n    server {\n        listen       80;\n        server_name  www.yourdomain.com;\n        rewrite ^ https://$http_host$request_uri? permanent;    # force redirect http to https\n    }\n    server {\n        listen 443;\n        ssl on;\n        ssl_certificate /etc/ssl/cacert.pem;        # path to your cacert.pem\n        ssl_certificate_key /etc/ssl/privkey.pem;   # path to your privkey.pem\n        server_name www.yourdoamin.com;\n        proxy_set_header X-Forwarded-For $remote_addr;\n\n        add_header Strict-Transport-Security \nmax-age=31536000; includeSubdomains\n;\n        server_tokens off;\n\n        location / {\n            fastcgi_pass    127.0.0.1:8000;\n            fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n            fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n            fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n            fastcgi_param   QUERY_STRING        $query_string;\n            fastcgi_param   REQUEST_METHOD      $request_method;\n            fastcgi_param   CONTENT_TYPE        $content_type;\n            fastcgi_param   CONTENT_LENGTH      $content_length;\n            fastcgi_param   SERVER_ADDR         $server_addr;\n            fastcgi_param   SERVER_PORT         $server_port;\n            fastcgi_param   SERVER_NAME         $server_name;\n            fastcgi_param   HTTPS               on;\n            fastcgi_param   HTTP_SCHEME         https;\n\n            access_log      /var/log/nginx/seahub.access.log;\n            error_log       /var/log/nginx/seahub.error.log;\n            fastcgi_read_timeout 36000;\n        }\n        location /seafhttp {\n            rewrite ^/seafhttp(.*)$ $1 break;\n            proxy_pass http://127.0.0.1:8082;\n            client_max_body_size 0;\n            proxy_connect_timeout  36000s;\n            proxy_read_timeout  36000s;\n            proxy_send_timeout  36000s;\n            send_timeout  36000s;\n        }\n        location /media {\n            root /home/user/haiwen/seafile-server-latest/seahub;\n        }\n    }\n\n\n\n\nLarge file uploads\n\n\nTip for uploading very large files (\n 4GB): By default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (seaf-server in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version \n= 1.8.0 and add the following options to Nginx config file:\n\n\n    location /seafhttp {\n        ... ...\n        proxy_request_buffering off;\n    }\n\n\n\n\n\nIf you have WebDAV enabled it is recommended to add the same:\n\n\n    location /seafdav {\n        ... ...\n        proxy_request_buffering off;\n    }\n\n\n\n\nReload Nginx\n\n\n    nginx -s reload\n\n\n\n\nModify settings to use https\n\n\nccnet conf\n\n\nSince you change from http to https, you need to modify the value of \"SERVICE_URL\" in \nccnet.conf\n:\n\n\nSERVICE_URL = https://www.example.com\n\n\n\n\nseahub_settings.py\n\n\nYou need to add a line in seahub_settings.py to set the value of \nFILE_SERVER_ROOT\n (Or \nHTTP_SERVER_ROOT\n before version 3.1.0)\n\n\nFILE_SERVER_ROOT = 'https://www.example.com/seafhttp'\n\n\n\n\nStart Seafile and Seahub\n\n\n./seafile.sh start\n./seahub.sh start-fastcgi\n\n\n\n\nAdditional security settings for nginx (optional)\n\n\nAdd the HSTS header. If you already visited the https version the next time your browser will visit directly the https site and not the http. Prevent man-in-the-middle-attacks.\n\n\nadd_header Strict-Transport-Security \nmax-age=31536000; includeSubdomains\n;\n\n\n\n\nDisable exact server version in header. Prevent scans for vulnerable server.\n\n\nserver_tokens off;", 
            "title": "Enabling Https with Nginx"
        }, 
        {
            "location": "/deploy/https_with_nginx/#enabling-https-with-nginx", 
            "text": "Here we use self-signed SSL digital certificate for free. If you use a paid ssl certificate from some authority, just skip the first step.", 
            "title": "Enabling Https with Nginx"
        }, 
        {
            "location": "/deploy/https_with_nginx/#generate-ssl-digital-certificate-with-openssl", 
            "text": "openssl genrsa -out privkey.pem 2048\n    openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095  If you're using a custom CA to sign your SSL certificate, you have to enable certificate revocation list (CRL) in your certificate. Otherwise http syncing on Windows client may not work. See  this thread  for more information.", 
            "title": "Generate SSL digital certificate with OpenSSL"
        }, 
        {
            "location": "/deploy/https_with_nginx/#enable-ssl-module-of-nginx-optional", 
            "text": "If your Nginx does not support SSL, you need to recompile it, the commands are as follows:      ./configure --with-http_stub_status_module --with-http_ssl_module\n    make   make install", 
            "title": "Enable SSL module of Nginx (optional)"
        }, 
        {
            "location": "/deploy/https_with_nginx/#modify-nginx-configuration-file", 
            "text": "Assume you have configured Nginx as  Deploy-Seafile-with-nginx . To use https, you need to modify your Nginx configuration file.      server {\n        listen       80;\n        server_name  www.yourdomain.com;\n        rewrite ^ https://$http_host$request_uri? permanent;    # force redirect http to https\n    }\n\n    server {\n        listen 443;\n        ssl on;\n        ssl_certificate /etc/ssl/cacert.pem;        # path to your cacert.pem\n        ssl_certificate_key /etc/ssl/privkey.pem;   # path to your privkey.pem\n        server_name www.yourdomain.com;\n        # ......\n        fastcgi_param   HTTPS               on;\n        fastcgi_param   HTTP_SCHEME         https;\n    }", 
            "title": "Modify Nginx configuration file"
        }, 
        {
            "location": "/deploy/https_with_nginx/#sample-configuration-file", 
            "text": "Here is the sample configuration file:      server {\n        listen       80;\n        server_name  www.yourdomain.com;\n        rewrite ^ https://$http_host$request_uri? permanent;    # force redirect http to https\n    }\n    server {\n        listen 443;\n        ssl on;\n        ssl_certificate /etc/ssl/cacert.pem;        # path to your cacert.pem\n        ssl_certificate_key /etc/ssl/privkey.pem;   # path to your privkey.pem\n        server_name www.yourdoamin.com;\n        proxy_set_header X-Forwarded-For $remote_addr;\n\n        add_header Strict-Transport-Security  max-age=31536000; includeSubdomains ;\n        server_tokens off;\n\n        location / {\n            fastcgi_pass    127.0.0.1:8000;\n            fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n            fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n            fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n            fastcgi_param   QUERY_STRING        $query_string;\n            fastcgi_param   REQUEST_METHOD      $request_method;\n            fastcgi_param   CONTENT_TYPE        $content_type;\n            fastcgi_param   CONTENT_LENGTH      $content_length;\n            fastcgi_param   SERVER_ADDR         $server_addr;\n            fastcgi_param   SERVER_PORT         $server_port;\n            fastcgi_param   SERVER_NAME         $server_name;\n            fastcgi_param   HTTPS               on;\n            fastcgi_param   HTTP_SCHEME         https;\n\n            access_log      /var/log/nginx/seahub.access.log;\n            error_log       /var/log/nginx/seahub.error.log;\n            fastcgi_read_timeout 36000;\n        }\n        location /seafhttp {\n            rewrite ^/seafhttp(.*)$ $1 break;\n            proxy_pass http://127.0.0.1:8082;\n            client_max_body_size 0;\n            proxy_connect_timeout  36000s;\n            proxy_read_timeout  36000s;\n            proxy_send_timeout  36000s;\n            send_timeout  36000s;\n        }\n        location /media {\n            root /home/user/haiwen/seafile-server-latest/seahub;\n        }\n    }", 
            "title": "Sample configuration file"
        }, 
        {
            "location": "/deploy/https_with_nginx/#large-file-uploads", 
            "text": "Tip for uploading very large files (  4GB): By default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (seaf-server in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version  = 1.8.0 and add the following options to Nginx config file:      location /seafhttp {\n        ... ...\n        proxy_request_buffering off;\n    }  If you have WebDAV enabled it is recommended to add the same:      location /seafdav {\n        ... ...\n        proxy_request_buffering off;\n    }", 
            "title": "Large file uploads"
        }, 
        {
            "location": "/deploy/https_with_nginx/#reload-nginx", 
            "text": "nginx -s reload", 
            "title": "Reload Nginx"
        }, 
        {
            "location": "/deploy/https_with_nginx/#modify-settings-to-use-https", 
            "text": "", 
            "title": "Modify settings to use https"
        }, 
        {
            "location": "/deploy/https_with_nginx/#ccnet-conf", 
            "text": "Since you change from http to https, you need to modify the value of \"SERVICE_URL\" in  ccnet.conf :  SERVICE_URL = https://www.example.com", 
            "title": "ccnet conf"
        }, 
        {
            "location": "/deploy/https_with_nginx/#seahub_settingspy", 
            "text": "You need to add a line in seahub_settings.py to set the value of  FILE_SERVER_ROOT  (Or  HTTP_SERVER_ROOT  before version 3.1.0)  FILE_SERVER_ROOT = 'https://www.example.com/seafhttp'", 
            "title": "seahub_settings.py"
        }, 
        {
            "location": "/deploy/https_with_nginx/#start-seafile-and-seahub", 
            "text": "./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Start Seafile and Seahub"
        }, 
        {
            "location": "/deploy/https_with_nginx/#additional-security-settings-for-nginx-optional", 
            "text": "Add the HSTS header. If you already visited the https version the next time your browser will visit directly the https site and not the http. Prevent man-in-the-middle-attacks.  add_header Strict-Transport-Security  max-age=31536000; includeSubdomains ;  Disable exact server version in header. Prevent scans for vulnerable server.  server_tokens off;", 
            "title": "Additional security settings for nginx (optional)"
        }, 
        {
            "location": "/deploy/deploy_with_apache/", 
            "text": "Config Seahub with Apache\n\n\nImportant\n\n\nAccording to the \nsecurity advisory\n published by Django team, we recommend disable \nGZip compression\n to mitigate \nBREACH attack\n.\n\n\nThis tutorial assumes you run at least Apache 2.4.\n\n\nPrepare\n\n\nInstall and enable Apache modules\n\n\nOn Ubuntu you can use:\n\n\nsudo a2enmod rewrite\nsudo a2enmod proxy_fcgi\nsudo a2enmod proxy_http\n\n\n\n\nOn raspbian install fcgi like \nthis\n\n\nDeploy Seahub/FileServer With Apache\n\n\nSeahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.\n\n\nHere we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.\n\n\nModify Apache config file: (\nsites-enabled/000-default\n) for ubuntu/debian, (\nvhost.conf\n) for centos/fedora\n\n\nVirtualHost *:80\n\n    ServerName www.myseafile.com\n    # Use \nDocumentRoot /var/www/html\n for Centos/Fedora\n    # Use \nDocumentRoot /var/www\n for Ubuntu/Debian\n    DocumentRoot /var/www\n    Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n    RewriteEngine On\n\n    \nLocation /media\n\n        Require all granted\n    \n/Location\n\n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization \n(.*)\n HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/\n\n/VirtualHost\n\n\n\n\n\nModify ccnet.conf and seahub_setting.py\n\n\nModify ccnet.conf\n\n\nYou need to modify the value of \nSERVICE_URL\n in \nccnet.conf\n to let Seafile know the domain you choose.\n\n\nSERVICE_URL = http://www.myseafile.com\n\n\n\n\nNote: If you later change the domain assigned to seahub, you also need to change the value of  \nSERVICE_URL\n.\n\n\nModify seahub_settings.py\n\n\nYou need to add a line in \nseahub_settings.py\n to set the value of \nFILE_SERVER_ROOT\n (or \nHTTP_SERVER_ROOT\n before version 3.1)\n\n\nFILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'\n\n\n\n\nStart Seafile and Seahub\n\n\nsudo service apache2 restart\n./seafile.sh start\n./seahub.sh start-fastcgi\n\n\n\n\nTroubleshooting\n\n\nProblems with paths and files containing spaces\n\n\nIf there are problems with paths or files containing spaces, make sure to have at least Apache 2.4.12.\n\n\nReferences\n * https://github.com/haiwen/seafile/issues/1258#issuecomment-188866740\n * https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/1284641\n * https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/1284641/comments/5\n * https://svn.apache.org/viewvc/httpd/httpd/tags/2.4.12/CHANGES?view=markup#l45\n\n\nNotes when Upgrading Seafile Server\n\n\nWhen \nupgrading seafile server\n, besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your Nginx/Apache configuration'''. For example, assume your are upgrading seafile server 1.3.0 to 1.4.0, then:\n\n\n  Alias /media  /home/user/haiwen/seafile-server-1.4.0/seahub/media\n\n\n\n\nTip:\n\nYou can create a symbolic link \nseafile-server-latest\n, and make it point to your current seafile server folder (Since seafile server 2.1.0, the \nsetup-seafile.sh\n script will do this for you). Then, each time you run a upgrade script, it would update the \nseafile-server-latest\n symbolic link to keep it always point to the latest version seafile server folder.\n\n\nIn this case, you can write:\n\n\n  Alias /media  /home/user/haiwen/seafile-server-latest/seahub;\n\n\n\n\nThis way, you no longer need to update the Apache config file each time you upgrade your seafile server.\n\n\nDetailed explanation\n\n\nThis may help you understand seafile server better: \nSeafile Components\n\n\nThere are two components in Seafile server, Seahub and FileServer. FileServer only servers for raw file uploading/downloading, it listens on 8082. Seahub that serving all the other pages, is still listen on 8000. But under https, Seahub should listen as in fastcgi mode on 8000 (run as ./seahub.sh start-fastcgi). And as in fastcgi mode, when you visit  http://domain:8000 directly, it should return an error page.\n\n\nWhen a user visit https://example.com/home/my/, Apache receives this request and sends it to Seahub via fastcgi. This is controlled by the following config items:\n\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization \n(.*)\n HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/\n\n\n\n\nWhen a user click a file download link in Seahub, Seahub reads the value of \nFILE_SERVER_ROOT\n and redirects the user to address \nhttps://example.com/seafhttp/xxxxx/\n. \nhttps://example.com/seafhttp\n is the value of \nFILE_SERVER_ROOT\n. Here, the \nFILE_SERVER\n means the FileServer component of Seafile, which only serves for raw file downloading/uploading.\n\n\nWhen Apache receives the request at 'https://example.com/seafhttp/xxxxx/', it proxies the request to FileServer, which is listening at 127.0.0.1:8082. This is controlled by the following config items:\n\n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]", 
            "title": "Config Seahub with Apache"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#config-seahub-with-apache", 
            "text": "", 
            "title": "Config Seahub with Apache"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#important", 
            "text": "According to the  security advisory  published by Django team, we recommend disable  GZip compression  to mitigate  BREACH attack .  This tutorial assumes you run at least Apache 2.4.", 
            "title": "Important"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#prepare", 
            "text": "Install and enable Apache modules  On Ubuntu you can use:  sudo a2enmod rewrite\nsudo a2enmod proxy_fcgi\nsudo a2enmod proxy_http  On raspbian install fcgi like  this", 
            "title": "Prepare"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#deploy-seahubfileserver-with-apache", 
            "text": "Seahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.  Here we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.  Modify Apache config file: ( sites-enabled/000-default ) for ubuntu/debian, ( vhost.conf ) for centos/fedora  VirtualHost *:80 \n    ServerName www.myseafile.com\n    # Use  DocumentRoot /var/www/html  for Centos/Fedora\n    # Use  DocumentRoot /var/www  for Ubuntu/Debian\n    DocumentRoot /var/www\n    Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n    RewriteEngine On\n\n     Location /media \n        Require all granted\n     /Location \n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization  (.*)  HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/ /VirtualHost", 
            "title": "Deploy Seahub/FileServer With Apache"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#modify-ccnetconf-and-seahub_settingpy", 
            "text": "", 
            "title": "Modify ccnet.conf and seahub_setting.py"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#modify-ccnetconf", 
            "text": "You need to modify the value of  SERVICE_URL  in  ccnet.conf  to let Seafile know the domain you choose.  SERVICE_URL = http://www.myseafile.com  Note: If you later change the domain assigned to seahub, you also need to change the value of   SERVICE_URL .", 
            "title": "Modify ccnet.conf"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#modify-seahub_settingspy", 
            "text": "You need to add a line in  seahub_settings.py  to set the value of  FILE_SERVER_ROOT  (or  HTTP_SERVER_ROOT  before version 3.1)  FILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'", 
            "title": "Modify seahub_settings.py"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#start-seafile-and-seahub", 
            "text": "sudo service apache2 restart\n./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Start Seafile and Seahub"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#troubleshooting", 
            "text": "", 
            "title": "Troubleshooting"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#problems-with-paths-and-files-containing-spaces", 
            "text": "If there are problems with paths or files containing spaces, make sure to have at least Apache 2.4.12.  References\n * https://github.com/haiwen/seafile/issues/1258#issuecomment-188866740\n * https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/1284641\n * https://bugs.launchpad.net/ubuntu/+source/apache2/+bug/1284641/comments/5\n * https://svn.apache.org/viewvc/httpd/httpd/tags/2.4.12/CHANGES?view=markup#l45", 
            "title": "Problems with paths and files containing spaces"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#notes-when-upgrading-seafile-server", 
            "text": "When  upgrading seafile server , besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your Nginx/Apache configuration'''. For example, assume your are upgrading seafile server 1.3.0 to 1.4.0, then:    Alias /media  /home/user/haiwen/seafile-server-1.4.0/seahub/media  Tip: \nYou can create a symbolic link  seafile-server-latest , and make it point to your current seafile server folder (Since seafile server 2.1.0, the  setup-seafile.sh  script will do this for you). Then, each time you run a upgrade script, it would update the  seafile-server-latest  symbolic link to keep it always point to the latest version seafile server folder.  In this case, you can write:    Alias /media  /home/user/haiwen/seafile-server-latest/seahub;  This way, you no longer need to update the Apache config file each time you upgrade your seafile server.", 
            "title": "Notes when Upgrading Seafile Server"
        }, 
        {
            "location": "/deploy/deploy_with_apache/#detailed-explanation", 
            "text": "This may help you understand seafile server better:  Seafile Components  There are two components in Seafile server, Seahub and FileServer. FileServer only servers for raw file uploading/downloading, it listens on 8082. Seahub that serving all the other pages, is still listen on 8000. But under https, Seahub should listen as in fastcgi mode on 8000 (run as ./seahub.sh start-fastcgi). And as in fastcgi mode, when you visit  http://domain:8000 directly, it should return an error page.  When a user visit https://example.com/home/my/, Apache receives this request and sends it to Seahub via fastcgi. This is controlled by the following config items:      #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization  (.*)  HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/  When a user click a file download link in Seahub, Seahub reads the value of  FILE_SERVER_ROOT  and redirects the user to address  https://example.com/seafhttp/xxxxx/ .  https://example.com/seafhttp  is the value of  FILE_SERVER_ROOT . Here, the  FILE_SERVER  means the FileServer component of Seafile, which only serves for raw file downloading/uploading.  When Apache receives the request at 'https://example.com/seafhttp/xxxxx/', it proxies the request to FileServer, which is listening at 127.0.0.1:8082. This is controlled by the following config items:      #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]", 
            "title": "Detailed explanation"
        }, 
        {
            "location": "/deploy/https_with_apache/", 
            "text": "Enabling Https with Apache\n\n\nGenerate SSL digital certificate with OpenSSL\n\n\nHere we use self-signed SSL digital certificate for free. If you use a paid ssl certificate from some authority, just skip the this step.\n\n\n    openssl genrsa -out privkey.pem 2048\n    openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095\n\n\n\n\nIf you're using a custom CA to sign your SSL certificate, you have to enable certificate revocation list (CRL) in your certificate. Otherwise http syncing on Windows client may not work. See \nthis thread\n for more information.\n\n\nEnable https on Seahub\n\n\nAssume you have configured Apache as \nDeploy Seafile with Apache\n. To use https, you need to enable mod_ssl\n\n\n    sudo a2enmod ssl\n\n\n\n\nOn Windows, you have to add ssl module to httpd.conf\n\n\nLoadModule ssl_module modules/mod_ssl.so\n\n\n\n\nThen modify your Apache configuration file. Here is a sample:\n\n\nVirtualHost *:443\n\n  ServerName www.myseafile.com\n  DocumentRoot /var/www\n\n  SSLEngine On\n  SSLCertificateFile /path/to/cacert.pem\n  SSLCertificateKeyFile /path/to/privkey.pem\n\n  Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n  \nLocation /media\n\n    ProxyPass !\n    Require all granted\n  \n/Location\n\n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization \n(.*)\n HTTP_AUTHORIZATION=$1\n  ProxyPass / fcgi://127.0.0.1:8000/\n\n/VirtualHost\n\n\n\n\n\nModify settings to use https\n\n\nccnet conf\n\n\nSince you change from http to https, you need to modify the value of \"SERVICE_URL\" in \nccnet.conf\n:\n\n\nSERVICE_URL = https://www.myseafile.com\n\n\n\n\nseahub_settings.py\n\n\nYou need to add a line in seahub_settings.py to set the value of \nFILE_SERVER_ROOT\n (Or \nHTTP_SERVER_ROOT\n before version 3.1.0)\n\n\nFILE_SERVER_ROOT = 'https://www.myseafile.com/seafhttp'\n\n\n\n\nStart Seafile and Seahub\n\n\n./seafile.sh start\n./seahub.sh start-fastcgi\n\n\n\n\nDetailed explanation\n\n\nThe picture at the end of \nthis document\n may help you understand seafile server better\n\n\nThere are two components in Seafile server, Seahub and FileServer. FileServer only servers for raw file uploading/downloading, it listens on 8082. Seahub, that serving all the other pages, is still listen on 8000. But under https, Seahub should listen as in fastcgi mode on 8000 (run as ./seahub.sh start-fastcgi). And as in fastcgi mode, when you visit  http://domain:8000 directly, it should return an error page.\n\n\nWhen a user visit https://example.com/home/my/, Apache receives this request and sends it to Seahub via fastcgi. This is controlled by the following config items:\n\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization \n(.*)\n HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/\n\n\n\n\nand\n\n\n    FastCGIExternalServer /var/www/seahub.fcgi -host 127.0.0.1:8000\n\n\n\n\nWhen a user click a file download link in Seahub, Seahub reads the value of \nFILE_SERVER_ROOT\n and redirects the user to address \nhttps://example.com/seafhttp/xxxxx/\n. \nhttps://example.com/seafhttp\n is the value of FILE_SERVER_ROOT. Here, the \nFILE_SERVER\n means the FileServer component of Seafile, which only serves for raw file downloading/uploading.\n\n\nWhen Apache receives the request at 'https://example.com/seafhttp/xxxxx/', it proxies the request to FileServer, which is listening at 127.0.0.1:8082. This is controlled by the following config items:\n\n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]", 
            "title": "Enabling Https with Apache"
        }, 
        {
            "location": "/deploy/https_with_apache/#enabling-https-with-apache", 
            "text": "", 
            "title": "Enabling Https with Apache"
        }, 
        {
            "location": "/deploy/https_with_apache/#generate-ssl-digital-certificate-with-openssl", 
            "text": "Here we use self-signed SSL digital certificate for free. If you use a paid ssl certificate from some authority, just skip the this step.      openssl genrsa -out privkey.pem 2048\n    openssl req -new -x509 -key privkey.pem -out cacert.pem -days 1095  If you're using a custom CA to sign your SSL certificate, you have to enable certificate revocation list (CRL) in your certificate. Otherwise http syncing on Windows client may not work. See  this thread  for more information.", 
            "title": "Generate SSL digital certificate with OpenSSL"
        }, 
        {
            "location": "/deploy/https_with_apache/#enable-https-on-seahub", 
            "text": "Assume you have configured Apache as  Deploy Seafile with Apache . To use https, you need to enable mod_ssl      sudo a2enmod ssl  On Windows, you have to add ssl module to httpd.conf  LoadModule ssl_module modules/mod_ssl.so  Then modify your Apache configuration file. Here is a sample:  VirtualHost *:443 \n  ServerName www.myseafile.com\n  DocumentRoot /var/www\n\n  SSLEngine On\n  SSLCertificateFile /path/to/cacert.pem\n  SSLCertificateKeyFile /path/to/privkey.pem\n\n  Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n   Location /media \n    ProxyPass !\n    Require all granted\n   /Location \n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization  (.*)  HTTP_AUTHORIZATION=$1\n  ProxyPass / fcgi://127.0.0.1:8000/ /VirtualHost", 
            "title": "Enable https on Seahub"
        }, 
        {
            "location": "/deploy/https_with_apache/#modify-settings-to-use-https", 
            "text": "", 
            "title": "Modify settings to use https"
        }, 
        {
            "location": "/deploy/https_with_apache/#ccnet-conf", 
            "text": "Since you change from http to https, you need to modify the value of \"SERVICE_URL\" in  ccnet.conf :  SERVICE_URL = https://www.myseafile.com", 
            "title": "ccnet conf"
        }, 
        {
            "location": "/deploy/https_with_apache/#seahub_settingspy", 
            "text": "You need to add a line in seahub_settings.py to set the value of  FILE_SERVER_ROOT  (Or  HTTP_SERVER_ROOT  before version 3.1.0)  FILE_SERVER_ROOT = 'https://www.myseafile.com/seafhttp'", 
            "title": "seahub_settings.py"
        }, 
        {
            "location": "/deploy/https_with_apache/#start-seafile-and-seahub", 
            "text": "./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Start Seafile and Seahub"
        }, 
        {
            "location": "/deploy/https_with_apache/#detailed-explanation", 
            "text": "The picture at the end of  this document  may help you understand seafile server better  There are two components in Seafile server, Seahub and FileServer. FileServer only servers for raw file uploading/downloading, it listens on 8082. Seahub, that serving all the other pages, is still listen on 8000. But under https, Seahub should listen as in fastcgi mode on 8000 (run as ./seahub.sh start-fastcgi). And as in fastcgi mode, when you visit  http://domain:8000 directly, it should return an error page.  When a user visit https://example.com/home/my/, Apache receives this request and sends it to Seahub via fastcgi. This is controlled by the following config items:      #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization  (.*)  HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/  and      FastCGIExternalServer /var/www/seahub.fcgi -host 127.0.0.1:8000  When a user click a file download link in Seahub, Seahub reads the value of  FILE_SERVER_ROOT  and redirects the user to address  https://example.com/seafhttp/xxxxx/ .  https://example.com/seafhttp  is the value of FILE_SERVER_ROOT. Here, the  FILE_SERVER  means the FileServer component of Seafile, which only serves for raw file downloading/uploading.  When Apache receives the request at 'https://example.com/seafhttp/xxxxx/', it proxies the request to FileServer, which is listening at 127.0.0.1:8082. This is controlled by the following config items:      #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]", 
            "title": "Detailed explanation"
        }, 
        {
            "location": "/deploy/using_ldap/", 
            "text": "Configure Seafile to use LDAP\n\n\nNote: This documentation is for the Community Edition. If you're using Pro Edition, please refer to \nthe Seafile Pro documentation\n.\n\n\nHow does LDAP User Management work in Seafile\n\n\nWhen Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:\n\n\n\n\nUsers within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:\n\n\nNative users: these users are created by the admin on Seafile's system admin interface. These users are stored in the \nEmailUser\n table of the \nccnet\n database.\n\n\nUsers imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the \nLDAPUsers\n table of the \nccnet\n database.\n\n\n\n\n\n\nUsers in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.\n\n\n\n\nWhen Seafile counts the number of users in the system, it only counts the \nactivated\n users in its internal database.\n\n\nWhen Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, they can log into the system.\n\n\nBasic LDAP/AD Integration\n\n\nThe only requirement for Seafile to use LDAP/AD for authentication is that there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:\n\n\n\n\nEmail address: this is the most common choice. Most organizations assign unique email address for each member.\n\n\nUserPrincipalName: this is a user attribute only available in Active Directory. It's format is \nuser-login-name@domain-name\n, e.g. \njohn@example.com\n. It's not a real email address, but it works fine as the unique identifier.\n\n\n\n\nConnecting to Active Directory\n\n\nTo use AD to authenticate user, please add the following lines to ccnet.conf.\n\n\nIf you choose email address as unique identifier:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nIf you choose UserPrincipalName as unique identifier:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName\n\n\n\nMeaning of each config options:\n\n\n\n\nHOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include a port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.\n\n\nBASE: The root distinguished name (DN) to use when running queries against the directory server. \nYou cannot use the root DN (e.g. dc=example,dc=com) as BASE\n.\n\n\nUSER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.\n\n\nPASSWORD: Password of the above user.\n\n\nLOGIN_ATTR: The attribute used for user's unique identifier. Use \nmail\n or \nuserPrincipalName\n.\n\n\n\n\nTips for choosing BASE and USER_DN:\n\n\n\n\nTo determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.\n\n\nIf you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).\n\n\nIf you want to limit users to a certain OU (Organization Unit), you run \ndsquery\n command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found \nhere\n.\n\n\n\n\n\n\nAD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use \ndsquery\n command to find out user's DN. For example, if the user name is 'seafileuser', run \ndsquery user -name seafileuser\n. More information \nhere\n.\n\n\n\n\nConnecting to other LDAP servers\n\n\nPlease add the following options to ccnet.conf:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nThe meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use \nmail\n attribute as user's unique identifier.\n\n\nAdvanced LDAP/AD Integration Options\n\n\nMultiple BASE\n\n\nMultiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g. \nou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com\n\n\nAdditional Search Filter\n\n\nSearch filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).\n\n\nThe final filter used for searching for users is \n(\n($LOGIN_ATTR=*)($FILTER))\n. \n$LOGIN_ATTR\n and \n$FILTER\n will be replaced by your option values.\n\n\nFor example, add the following line to LDAP config:\n\n\nFILTER = memberOf=CN=group,CN=developers,DC=example,DC=com\n\n\n\n\nThe final search filter would be \n(\n(mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))\n\n\nNote that the case of attribute names in the above example is significant. The \nmemberOf\n attribute is only available in Active Directory.\n\n\nLimiting Seafile Users to a Group in Active Directory\n\n\nYou can use the FILTER option to limit user scope to a certain AD group.\n\n\n\n\nFirst, you should find out the DN for the group. Again, we'll use the \ndsquery\n command on the domain controller. For example, if group name is 'seafilegroup', run \ndsquery group -name seafilegroup\n.\n\n\nAdd the following line to LDAP config:\n\n\n\n\nFILTER = memberOf={output of dsquery command}\n\n\n\n\nUsing TLS connection to LDAP/AD server\n\n\nTo use a TLS connection to the directory server, you should install a valid SSL certificate on the directory server.\n\n\nThe current version of Seafile Linux server package is compiled on CentOS. We include the ldap client library in the package to maintain compatibility with older Linux distributions. But since different Linux distributions have different path or configuration for OpenSSL library, sometimes Seafile is unable to connect to the directory server with TLS.\n\n\nThe ldap library (libldap) bundled in the Seafile package is of version 2.4. If your Linux distribution is new enough (like CentOS 6, Debian 7 or Ubuntu 12.04 or above), you can use system's libldap instead.\n\n\nOn Ubuntu 14.04 and Debian 7/8, moving the bundled ldap related libraries out of the library path should make TLS connection work.\n\n\ncd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv liblber-2.4.so.2 libldap-2.4.so.2 libsasl2.so.2 libldap_r-2.4.so.2 disabled_libs_use_local_ones_instead/\n\n\n\n\nOn CentOS 6, you have to move the libnssutil library:\n\n\ncd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv libnssutil3.so disabled_libs_use_local_ones_instead/\n\n\n\n\nThis effectively removes the bundled libraries from the library search path. \nWhen the server starts, it'll instead find and use the system libraries (if they are installed). \nThis change has to be repeated after each update of the Seafile installation.", 
            "title": "Configure Seafile to use LDAP"
        }, 
        {
            "location": "/deploy/using_ldap/#configure-seafile-to-use-ldap", 
            "text": "Note: This documentation is for the Community Edition. If you're using Pro Edition, please refer to  the Seafile Pro documentation .", 
            "title": "Configure Seafile to use LDAP"
        }, 
        {
            "location": "/deploy/using_ldap/#how-does-ldap-user-management-work-in-seafile", 
            "text": "When Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:   Users within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:  Native users: these users are created by the admin on Seafile's system admin interface. These users are stored in the  EmailUser  table of the  ccnet  database.  Users imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the  LDAPUsers  table of the  ccnet  database.    Users in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.   When Seafile counts the number of users in the system, it only counts the  activated  users in its internal database.  When Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, they can log into the system.", 
            "title": "How does LDAP User Management work in Seafile"
        }, 
        {
            "location": "/deploy/using_ldap/#basic-ldapad-integration", 
            "text": "The only requirement for Seafile to use LDAP/AD for authentication is that there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:   Email address: this is the most common choice. Most organizations assign unique email address for each member.  UserPrincipalName: this is a user attribute only available in Active Directory. It's format is  user-login-name@domain-name , e.g.  john@example.com . It's not a real email address, but it works fine as the unique identifier.", 
            "title": "Basic LDAP/AD Integration"
        }, 
        {
            "location": "/deploy/using_ldap/#connecting-to-active-directory", 
            "text": "To use AD to authenticate user, please add the following lines to ccnet.conf.  If you choose email address as unique identifier:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail  If you choose UserPrincipalName as unique identifier:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName  Meaning of each config options:   HOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include a port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.  BASE: The root distinguished name (DN) to use when running queries against the directory server.  You cannot use the root DN (e.g. dc=example,dc=com) as BASE .  USER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.  PASSWORD: Password of the above user.  LOGIN_ATTR: The attribute used for user's unique identifier. Use  mail  or  userPrincipalName .   Tips for choosing BASE and USER_DN:   To determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.  If you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).  If you want to limit users to a certain OU (Organization Unit), you run  dsquery  command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found  here .    AD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use  dsquery  command to find out user's DN. For example, if the user name is 'seafileuser', run  dsquery user -name seafileuser . More information  here .", 
            "title": "Connecting to Active Directory"
        }, 
        {
            "location": "/deploy/using_ldap/#connecting-to-other-ldap-servers", 
            "text": "Please add the following options to ccnet.conf:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail  The meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use  mail  attribute as user's unique identifier.", 
            "title": "Connecting to other LDAP servers"
        }, 
        {
            "location": "/deploy/using_ldap/#advanced-ldapad-integration-options", 
            "text": "", 
            "title": "Advanced LDAP/AD Integration Options"
        }, 
        {
            "location": "/deploy/using_ldap/#multiple-base", 
            "text": "Multiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g.  ou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com", 
            "title": "Multiple BASE"
        }, 
        {
            "location": "/deploy/using_ldap/#additional-search-filter", 
            "text": "Search filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  The final filter used for searching for users is  ( ($LOGIN_ATTR=*)($FILTER)) .  $LOGIN_ATTR  and  $FILTER  will be replaced by your option values.  For example, add the following line to LDAP config:  FILTER = memberOf=CN=group,CN=developers,DC=example,DC=com  The final search filter would be  ( (mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))  Note that the case of attribute names in the above example is significant. The  memberOf  attribute is only available in Active Directory.", 
            "title": "Additional Search Filter"
        }, 
        {
            "location": "/deploy/using_ldap/#limiting-seafile-users-to-a-group-in-active-directory", 
            "text": "You can use the FILTER option to limit user scope to a certain AD group.   First, you should find out the DN for the group. Again, we'll use the  dsquery  command on the domain controller. For example, if group name is 'seafilegroup', run  dsquery group -name seafilegroup .  Add the following line to LDAP config:   FILTER = memberOf={output of dsquery command}", 
            "title": "Limiting Seafile Users to a Group in Active Directory"
        }, 
        {
            "location": "/deploy/using_ldap/#using-tls-connection-to-ldapad-server", 
            "text": "To use a TLS connection to the directory server, you should install a valid SSL certificate on the directory server.  The current version of Seafile Linux server package is compiled on CentOS. We include the ldap client library in the package to maintain compatibility with older Linux distributions. But since different Linux distributions have different path or configuration for OpenSSL library, sometimes Seafile is unable to connect to the directory server with TLS.  The ldap library (libldap) bundled in the Seafile package is of version 2.4. If your Linux distribution is new enough (like CentOS 6, Debian 7 or Ubuntu 12.04 or above), you can use system's libldap instead.  On Ubuntu 14.04 and Debian 7/8, moving the bundled ldap related libraries out of the library path should make TLS connection work.  cd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv liblber-2.4.so.2 libldap-2.4.so.2 libsasl2.so.2 libldap_r-2.4.so.2 disabled_libs_use_local_ones_instead/  On CentOS 6, you have to move the libnssutil library:  cd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv libnssutil3.so disabled_libs_use_local_ones_instead/  This effectively removes the bundled libraries from the library search path. \nWhen the server starts, it'll instead find and use the system libraries (if they are installed). \nThis change has to be repeated after each update of the Seafile installation.", 
            "title": "Using TLS connection to LDAP/AD server"
        }, 
        {
            "location": "/deploy/shibboleth_config/", 
            "text": "Overview\n\n\nShibboleth\n is a widely used single sign on (SSO) protocol. Seafile server (Community Edition \n= 4.1.0, Pro Edition \n= 4.0.6) supports authentication via Shibboleth. It allows users from another organization to log in to Seafile without registering an account on the service provider.\n\n\nIn this documentation, we assume the reader is familiar with Shibboleth installation and configuration. For introduction to Shibboleth concepts, please refer to https://wiki.shibboleth.net/confluence/display/SHIB2/UnderstandingShibboleth .\n\n\nShibboleth Service Provider (SP) should be installed on the same server as the Seafile server. The official SP from https://shibboleth.net/ is implemented as an Apache module. The module handles all Shibboleth authentication details. Seafile server receives authentication information (username) from fastcgi. The username then can be used as login name for the user.\n\n\nSeahub provides a special URL to handle Shibboleth login. The URL is \nhttps://your-server/shib-login\n. Only this URL needs to be configured under Shibboleth protection. All other URLs don't go through the Shibboleth module. The overall workflow for a user to login with Shibboleth is as follows:\n\n\n\n\nIn the Seafile login page, there is a separate \"Shibboleth\" login button. When the user clicks the button, she/he will be redirected to \nhttps://your-server/shib-login\n.\n\n\nSince that URL is controlled by Shibboleth, the user will be redirected to IdP for login. After the user logs in, she/he will be redirected back to \nhttps://your-server/shib-login\n.\n\n\nThis time the Shibboleth module passes the request to Seahub. Seahub reads the user information from the request and brings the user to her/his home page.\n\n\nAll later access to Seahub will not pass through the Shibboleth module. Since Seahub keeps session information internally, the user doesn't need to login again until the session expires.\n\n\n\n\nSince Shibboleth support requires Apache, if you want to use Nginx, you need two servers, one for non-Shibboleth access, another configured with Apache to allow Shibboleth login. In a cluster environment, you can configure your load balancer to direct traffic to different server according to URL. Only the URL \nhttps://your-server/shib-login\n needs to be directed to Apache.\n\n\nThe configuration includes 3 steps:\n\n\n\n\nInstall and configure Shibboleth Service Provider;\n\n\nConfigure Apache;\n\n\nConfigure Seahub.\n\n\n\n\nInstall and Configure Shibboleth Service Provider\n\n\nInstallation and configuration of Shibboleth is out of the scope of this documentation. Here are a few references:\n\n\n\n\nFor RedHat and SUSE: https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPLinuxInstall\n\n\nFor Ubuntu: http://bradleybeddoes.com/2011/08/12/installing-a-shibboleth-2-sp-in-ubuntu-11-04-within-virtualbox/\n\n\n\n\nPlease note that you don't have to follow the Apache configurations in the above links. Just use the Apache config we provide in the next section.\n\n\nApache Configuration\n\n\nYou should create a new virtual host configuration for Shibboleth.\n\n\nIfModule mod_ssl.c\n\n    \nVirtualHost _default_:443\n\n        ServerName seafile.example.com\n        DocumentRoot /var/www\n        #Alias /seafmedia  /home/ubuntu/dev/seahub/media\n        Alias /media /home/user/seafile-server-latest/seahub/media\n\n        ErrorLog ${APACHE_LOG_DIR}/seahub.error.log\n        CustomLog ${APACHE_LOG_DIR}/seahub.access.log combined\n\n        SSLEngine on\n        SSLCertificateFile  /path/to/ssl-cert.pem\n        SSLCertificateKeyFile /path/to/ssl-key.pem\n\n        \nLocation /Shibboleth.sso\n\n        SetHandler shib\n        \n/Location\n\n\n        \nLocation /api2\n\n        AuthType None\n        Require all granted\n        Allow from all\n        satisfy any\n        \n/Location\n\n\n        RewriteEngine On\n        \nLocation /media\n\n        Require all granted\n        \n/Location\n\n\n        \nLocation /shib-login\n\n        AuthType shibboleth\n        ShibRequestSetting requireSession true\n        Require valid-user\n        \n/Location\n\n\n        #\n        # seafile fileserver\n        #\n        ProxyPass /seafhttp http://127.0.0.1:8082\n        ProxyPassReverse /seafhttp http://127.0.0.1:8082\n        RewriteRule ^/seafhttp - [QSA,L]\n\n        #\n        # seahub\n        #\n        RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_URI} !^/Shibboleth.sso\n        RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]\n\n    \n/VirtualHost\n\n\n/IfModule\n\n\n\n\n\n\nAfter restarting Apache, you should be able to get the Service Provider metadata by accessing https://seafile.example.com/Shibboleth.sso/Metadata . This metadata should be uploaded to the Identity Provider (IdP) server.\n\n\nConfigure Seahub\n\n\nSeahub extracts the username from the \nREMOTE_USER\n environment variable. So you should modify your SP's shibboleth2.xml (/etc/shibboleth/shibboleth2.xml on Ubuntu) config file, so that Shibboleth translates your desired attribute into \nREMOTE_USER\n environment variable.\n\n\n    \nApplicationDefaults entityID=\nhttps://your-server/shibboleth\n\n        REMOTE_USER=\nxxxx\n\n\n\n\n\nIn Seafile, only one of the following two attributes can be used for username: \neppn\n, and \nmail\n. \neppn\n stands for \"Edu Person Principal Name\". It is usually the UserPrincipalName attribute in Active Directory. It's not necessarily a valid email address. \nmail\n is the user's email address. You should set \nREMOTE_USER\n to either one of these attributes.\n\n\nNow we have to tell Seahub how to do with the authentication information passed in by Shibboleth.\n\n\nAdd the following configuration to seahub_settings.py.\n\n\nEXTRA_AUTHENTICATION_BACKENDS = (\n    'shibboleth.backends.ShibbolethRemoteUserBackend',\n)\nEXTRA_MIDDLEWARE_CLASSES = (\n    'shibboleth.middleware.ShibbolethRemoteUserMiddleware',\n)\n\nENABLE_SHIB_LOGIN = True\n\nSHIBBOLETH_ATTRIBUTE_MAP = {\n    # Change eppn to mail if you use mail attribute for REMOTE_USER\n    \neppn\n: (False, \nusername\n),\n}\n\n\n\n\nSince version 5.0, Seahub can process additional user attributes from Shibboleth. These attributes are saved into Seahub's database, as user's properties. They're all not mandatory. The internal user properties Seahub now supports are:\n\n\n\n\ngivenname\n\n\nsurname\n\n\ncontact_email: used for sending notification email to user if username is not a valid email address (like eppn).\n\n\ninstitution: used to identify user's institution\n\n\n\n\nYou can specify the mapping between Shibboleth attributes and Seahub's user properties in seahub_settings.py:\n\n\nSHIBBOLETH_ATTRIBUTE_MAP = {\n    \neppn\n: (False, \nusername\n),\n    \ngivenname\n: (False, \ngivenname\n),\n    \nsn\n: (False, \nsurname\n),\n    \nmail\n: (False, \ncontact_email\n),\n    \norganization\n: (False, \ninstitution\n),\n}\n\n\n\n\nIn the above config, the hash key is Shibboleth attribute name, the second element in the hash value is Seahub's property name. You can adjust the Shibboleth attribute name for your own needs. \nNote that you may have to change attribute-map.xml in your Shibboleth SP, so that the desired attributes are passed to Seahub. And you have to make sure the IdP sends these attributes to the SP.\n\n\nSince version 5.1.1, we added an option \nSHIB_ACTIVATE_AFTER_CREATION\n (defaults to \nTrue\n) which control the user status after shibboleth connection. If this option set to \nFalse\n, user will be inactive after connection, and system admins will be notified by email to activate that account.\n\n\nVerify\n\n\nAfter restarting Apache and Seafile services, you can then test the shibboleth login workflow.", 
            "title": "Configure Seafile to use Shibboleth Authentication"
        }, 
        {
            "location": "/deploy/shibboleth_config/#overview", 
            "text": "Shibboleth  is a widely used single sign on (SSO) protocol. Seafile server (Community Edition  = 4.1.0, Pro Edition  = 4.0.6) supports authentication via Shibboleth. It allows users from another organization to log in to Seafile without registering an account on the service provider.  In this documentation, we assume the reader is familiar with Shibboleth installation and configuration. For introduction to Shibboleth concepts, please refer to https://wiki.shibboleth.net/confluence/display/SHIB2/UnderstandingShibboleth .  Shibboleth Service Provider (SP) should be installed on the same server as the Seafile server. The official SP from https://shibboleth.net/ is implemented as an Apache module. The module handles all Shibboleth authentication details. Seafile server receives authentication information (username) from fastcgi. The username then can be used as login name for the user.  Seahub provides a special URL to handle Shibboleth login. The URL is  https://your-server/shib-login . Only this URL needs to be configured under Shibboleth protection. All other URLs don't go through the Shibboleth module. The overall workflow for a user to login with Shibboleth is as follows:   In the Seafile login page, there is a separate \"Shibboleth\" login button. When the user clicks the button, she/he will be redirected to  https://your-server/shib-login .  Since that URL is controlled by Shibboleth, the user will be redirected to IdP for login. After the user logs in, she/he will be redirected back to  https://your-server/shib-login .  This time the Shibboleth module passes the request to Seahub. Seahub reads the user information from the request and brings the user to her/his home page.  All later access to Seahub will not pass through the Shibboleth module. Since Seahub keeps session information internally, the user doesn't need to login again until the session expires.   Since Shibboleth support requires Apache, if you want to use Nginx, you need two servers, one for non-Shibboleth access, another configured with Apache to allow Shibboleth login. In a cluster environment, you can configure your load balancer to direct traffic to different server according to URL. Only the URL  https://your-server/shib-login  needs to be directed to Apache.  The configuration includes 3 steps:   Install and configure Shibboleth Service Provider;  Configure Apache;  Configure Seahub.", 
            "title": "Overview"
        }, 
        {
            "location": "/deploy/shibboleth_config/#install-and-configure-shibboleth-service-provider", 
            "text": "Installation and configuration of Shibboleth is out of the scope of this documentation. Here are a few references:   For RedHat and SUSE: https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPLinuxInstall  For Ubuntu: http://bradleybeddoes.com/2011/08/12/installing-a-shibboleth-2-sp-in-ubuntu-11-04-within-virtualbox/   Please note that you don't have to follow the Apache configurations in the above links. Just use the Apache config we provide in the next section.", 
            "title": "Install and Configure Shibboleth Service Provider"
        }, 
        {
            "location": "/deploy/shibboleth_config/#apache-configuration", 
            "text": "You should create a new virtual host configuration for Shibboleth.  IfModule mod_ssl.c \n     VirtualHost _default_:443 \n        ServerName seafile.example.com\n        DocumentRoot /var/www\n        #Alias /seafmedia  /home/ubuntu/dev/seahub/media\n        Alias /media /home/user/seafile-server-latest/seahub/media\n\n        ErrorLog ${APACHE_LOG_DIR}/seahub.error.log\n        CustomLog ${APACHE_LOG_DIR}/seahub.access.log combined\n\n        SSLEngine on\n        SSLCertificateFile  /path/to/ssl-cert.pem\n        SSLCertificateKeyFile /path/to/ssl-key.pem\n\n         Location /Shibboleth.sso \n        SetHandler shib\n         /Location \n\n         Location /api2 \n        AuthType None\n        Require all granted\n        Allow from all\n        satisfy any\n         /Location \n\n        RewriteEngine On\n         Location /media \n        Require all granted\n         /Location \n\n         Location /shib-login \n        AuthType shibboleth\n        ShibRequestSetting requireSession true\n        Require valid-user\n         /Location \n\n        #\n        # seafile fileserver\n        #\n        ProxyPass /seafhttp http://127.0.0.1:8082\n        ProxyPassReverse /seafhttp http://127.0.0.1:8082\n        RewriteRule ^/seafhttp - [QSA,L]\n\n        #\n        # seahub\n        #\n        RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_URI} !^/Shibboleth.sso\n        RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]\n\n     /VirtualHost  /IfModule   After restarting Apache, you should be able to get the Service Provider metadata by accessing https://seafile.example.com/Shibboleth.sso/Metadata . This metadata should be uploaded to the Identity Provider (IdP) server.", 
            "title": "Apache Configuration"
        }, 
        {
            "location": "/deploy/shibboleth_config/#configure-seahub", 
            "text": "Seahub extracts the username from the  REMOTE_USER  environment variable. So you should modify your SP's shibboleth2.xml (/etc/shibboleth/shibboleth2.xml on Ubuntu) config file, so that Shibboleth translates your desired attribute into  REMOTE_USER  environment variable.       ApplicationDefaults entityID= https://your-server/shibboleth \n        REMOTE_USER= xxxx   In Seafile, only one of the following two attributes can be used for username:  eppn , and  mail .  eppn  stands for \"Edu Person Principal Name\". It is usually the UserPrincipalName attribute in Active Directory. It's not necessarily a valid email address.  mail  is the user's email address. You should set  REMOTE_USER  to either one of these attributes.  Now we have to tell Seahub how to do with the authentication information passed in by Shibboleth.  Add the following configuration to seahub_settings.py.  EXTRA_AUTHENTICATION_BACKENDS = (\n    'shibboleth.backends.ShibbolethRemoteUserBackend',\n)\nEXTRA_MIDDLEWARE_CLASSES = (\n    'shibboleth.middleware.ShibbolethRemoteUserMiddleware',\n)\n\nENABLE_SHIB_LOGIN = True\n\nSHIBBOLETH_ATTRIBUTE_MAP = {\n    # Change eppn to mail if you use mail attribute for REMOTE_USER\n     eppn : (False,  username ),\n}  Since version 5.0, Seahub can process additional user attributes from Shibboleth. These attributes are saved into Seahub's database, as user's properties. They're all not mandatory. The internal user properties Seahub now supports are:   givenname  surname  contact_email: used for sending notification email to user if username is not a valid email address (like eppn).  institution: used to identify user's institution   You can specify the mapping between Shibboleth attributes and Seahub's user properties in seahub_settings.py:  SHIBBOLETH_ATTRIBUTE_MAP = {\n     eppn : (False,  username ),\n     givenname : (False,  givenname ),\n     sn : (False,  surname ),\n     mail : (False,  contact_email ),\n     organization : (False,  institution ),\n}  In the above config, the hash key is Shibboleth attribute name, the second element in the hash value is Seahub's property name. You can adjust the Shibboleth attribute name for your own needs.  Note that you may have to change attribute-map.xml in your Shibboleth SP, so that the desired attributes are passed to Seahub. And you have to make sure the IdP sends these attributes to the SP.  Since version 5.1.1, we added an option  SHIB_ACTIVATE_AFTER_CREATION  (defaults to  True ) which control the user status after shibboleth connection. If this option set to  False , user will be inactive after connection, and system admins will be notified by email to activate that account.", 
            "title": "Configure Seahub"
        }, 
        {
            "location": "/deploy/shibboleth_config/#verify", 
            "text": "After restarting Apache and Seafile services, you can then test the shibboleth login workflow.", 
            "title": "Verify"
        }, 
        {
            "location": "/deploy/upgrade/", 
            "text": "Seafile\n\n\nUpgrade Manual\n\n\nThis page is for users who use the pre-compiled seafile server package.\n\n\n\n\nIf you \nbuild seafile server from source\n, please read the \nUpgrading Seafile Server\n section on that page, instead of this one.\n\n\nAfter upgrading, you may need to clean \nseahub cache\n if it doesn't behave as expect.\n\n\n\n\nIf you are running a \ncluster\n, please read \nupgrade a Seafile cluster\n.\n\n\nMajor version upgrade (like from 2.x to 3.y)\n\n\nSuppose you are using version 2.1.0 and like to upgrade to version 3.1.0. First download and extract the new version. You should have a directory layout similar to this:\n\n\n\nhaiwen\n   -- seafile-server-2.1.0\n   -- seafile-server-3.1.0\n   -- ccnet\n   -- seafile-data\n\n\n\n\nNow upgrade to version 3.1.0.\n\n\n\n\nShutdown Seafile server if it's running\n\n\n\n\nsh\n   cd haiwen/seafile-server-2.1.0\n   ./seahub.sh stop\n   ./seafile.sh stop\n\n2. Check the upgrade scripts in seafile-server-3.1.0 directory.\n\n\nsh\n   cd haiwen/seafile-server-3.1.0\n   ls upgrade/upgrade_*\n\n\nYou will get a list of upgrade files:\n\n\n...\n   upgrade/upgrade_2.0_2.1.sh\n   upgrade/upgrade_2.1_2.2.sh\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh\n\n\n\n\nStart from you current version, run the script one by one\n\n\n\n\nupgrade/upgrade_2.1_2.2.sh\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh\n\n\n\n\nStart the new server version as for any upgrade\n\n\n\n\nsh\n   cd haiwen/seafile-server-3.1.0/\n   ./seafile.sh start\n   ./seahub.sh start # or \"./seahub.sh start-fastcgi\" if you're using fastcgi\n\n\nMinor version upgrade (like from 3.0.x to 3.2.y)\n\n\nSuppose you are using version 3.0.0 and like to upgrade to version 3.2.2. First download and extract the new version. You should have a directory layout similar to this:\n\n\n\nhaiwen\n   -- seafile-server-3.0.0\n   -- seafile-server-3.2.2\n   -- ccnet\n   -- seafile-data\n\n\n\n\nNow upgrade to version 3.2.2.\n\n\n\n\nShutdown Seafile server if it's running\n\n\n\n\nsh\n   cd haiwen/seafile-server-3.0.0\n   ./seahub.sh stop\n   ./seafile.sh stop\n\n2. Check the upgrade scripts in seafile-server-3.2.2 directory.\n\n\nsh\n   cd haiwen/seafile-server-3.2.2\n   ls upgrade/upgrade_*\n\n\nYou will get a list of upgrade files:\n\n\n...\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh\n   upgrade/upgrade_3.1_3.2.sh\n\n\n\n\nStart from you current version, run the script one by one\n\n\n\n\nupgrade/upgrade_3.0_3.1.sh\n   upgrade/upgrade_3.1_3.2.sh\n\n\n\n\nStart the new server version as for any upgrade\n\n\n\n\nsh\n   cd haiwen/seafile-server-3.2.2/\n   ./seafile.sh start\n   ./seahub.sh start\n\n\nMaintenance version upgrade (like from 3.1.0 to 3.1.2)\n\n\nMaintenance upgrade is like an upgrade from 3.1.0 to 3.1.2.\n\n\n\n\nStop the current server first as for any upgrade\n\n\nFor this type of upgrade, you only need to update the symbolic links (for avatar and a few other folders). We provide a script for you, just run it (For history reason, the script called \nminor-upgrade.sh\n):\n\n\n\n\nsh\n   cd seafile-server-3.1.2\n   upgrade/minor-upgrade.sh\n\n\n\n\n\n\nStart the new server version as for any upgrade\n\n\n\n\n\n\nIf the new version works file, the old version can be removed\n\n\n\n\n\n\nsh\n   rm -rf seafile-server-3.1.0", 
            "title": "Upgrade Seafile server"
        }, 
        {
            "location": "/deploy/upgrade/#seafile", 
            "text": "", 
            "title": "Seafile"
        }, 
        {
            "location": "/deploy/upgrade/#upgrade-manual", 
            "text": "This page is for users who use the pre-compiled seafile server package.   If you  build seafile server from source , please read the  Upgrading Seafile Server  section on that page, instead of this one.  After upgrading, you may need to clean  seahub cache  if it doesn't behave as expect.   If you are running a  cluster , please read  upgrade a Seafile cluster .", 
            "title": "Upgrade Manual"
        }, 
        {
            "location": "/deploy/upgrade/#major-version-upgrade-like-from-2x-to-3y", 
            "text": "Suppose you are using version 2.1.0 and like to upgrade to version 3.1.0. First download and extract the new version. You should have a directory layout similar to this:  \nhaiwen\n   -- seafile-server-2.1.0\n   -- seafile-server-3.1.0\n   -- ccnet\n   -- seafile-data  Now upgrade to version 3.1.0.   Shutdown Seafile server if it's running   sh\n   cd haiwen/seafile-server-2.1.0\n   ./seahub.sh stop\n   ./seafile.sh stop \n2. Check the upgrade scripts in seafile-server-3.1.0 directory.  sh\n   cd haiwen/seafile-server-3.1.0\n   ls upgrade/upgrade_*  You will get a list of upgrade files:  ...\n   upgrade/upgrade_2.0_2.1.sh\n   upgrade/upgrade_2.1_2.2.sh\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh   Start from you current version, run the script one by one   upgrade/upgrade_2.1_2.2.sh\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh   Start the new server version as for any upgrade   sh\n   cd haiwen/seafile-server-3.1.0/\n   ./seafile.sh start\n   ./seahub.sh start # or \"./seahub.sh start-fastcgi\" if you're using fastcgi", 
            "title": "Major version upgrade (like from 2.x to 3.y)"
        }, 
        {
            "location": "/deploy/upgrade/#minor-version-upgrade-like-from-30x-to-32y", 
            "text": "Suppose you are using version 3.0.0 and like to upgrade to version 3.2.2. First download and extract the new version. You should have a directory layout similar to this:  \nhaiwen\n   -- seafile-server-3.0.0\n   -- seafile-server-3.2.2\n   -- ccnet\n   -- seafile-data  Now upgrade to version 3.2.2.   Shutdown Seafile server if it's running   sh\n   cd haiwen/seafile-server-3.0.0\n   ./seahub.sh stop\n   ./seafile.sh stop \n2. Check the upgrade scripts in seafile-server-3.2.2 directory.  sh\n   cd haiwen/seafile-server-3.2.2\n   ls upgrade/upgrade_*  You will get a list of upgrade files:  ...\n   upgrade/upgrade_2.2_3.0.sh\n   upgrade/upgrade_3.0_3.1.sh\n   upgrade/upgrade_3.1_3.2.sh   Start from you current version, run the script one by one   upgrade/upgrade_3.0_3.1.sh\n   upgrade/upgrade_3.1_3.2.sh   Start the new server version as for any upgrade   sh\n   cd haiwen/seafile-server-3.2.2/\n   ./seafile.sh start\n   ./seahub.sh start", 
            "title": "Minor version upgrade (like from 3.0.x to 3.2.y)"
        }, 
        {
            "location": "/deploy/upgrade/#maintenance-version-upgrade-like-from-310-to-312", 
            "text": "Maintenance upgrade is like an upgrade from 3.1.0 to 3.1.2.   Stop the current server first as for any upgrade  For this type of upgrade, you only need to update the symbolic links (for avatar and a few other folders). We provide a script for you, just run it (For history reason, the script called  minor-upgrade.sh ):   sh\n   cd seafile-server-3.1.2\n   upgrade/minor-upgrade.sh    Start the new server version as for any upgrade    If the new version works file, the old version can be removed    sh\n   rm -rf seafile-server-3.1.0", 
            "title": "Maintenance version upgrade (like from 3.1.0 to 3.1.2)"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/", 
            "text": "Start Seafile at System Bootup\n\n\nFor Ubuntu\n\n\nOn Ubuntu, we make use of the \n/etc/init.d/\n scripts to start seafile/seahub at system boot.\n\n\nCreate a script \n/etc/init.d/seafile-server\n\n\nsudo vim /etc/init.d/seafile-server\n\n\n\nThe content of this script is: (You need to modify the value of \nuser\n and \nseafile_dir\n accordingly)\n\n\n#!/bin/bash\n\n# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to falst if fastcgi is not used\nfastcgi=true\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \" \n ${seafile_init_log}\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \" \n ${seahub_init_log}\ncase \"$1\" in\n        start)\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port} \n ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                fi\n        ;;\n        restart)\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port} \n ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                fi\n        ;;\n        stop)\n                sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n        ;;\n        *)\n                echo \"Usage: /etc/init.d/seafile-server {start|stop|restart}\"\n                exit 1\n        ;;\nesac\n\n\n\nCreate a file \n/etc/init/seafile-server.conf\n\n\nIf you're not using MySQL or an external MySQL server\n\n\nstart on (runlevel [2345])\nstop on (runlevel [016])\n\npre-start script\n/etc/init.d/seafile-server start\nend script\n\npost-stop script\n/etc/init.d/seafile-server stop\nend script\n\n\n\nIf you're using MySQL\n\n\nstart on (started mysql\nand runlevel [2345])\nstop on (runlevel [016])\n\npre-start script\n/etc/init.d/seafile-server start\nend script\n\npost-stop script\n/etc/init.d/seafile-server stop\nend script\n\n\n\nMake the seafile-sever script executable\n\n\nsudo chmod +x /etc/init.d/seafile-server\n\n\n\nDone\n\n\nDon't forget to update the value of \nscript_path\n later if you update your seafile server.\n\n\nFor other Debian based Linux\n\n\nCreate a script \n/etc/init.d/seafile-server\n\n\nsudo vim /etc/init.d/seafile-server\n\n\n\nThe content of this script is: (You need to modify the value of \nuser\n and \nseafile_dir\n accordingly)\n\n\n#!/bin/sh\n\n### BEGIN INIT INFO\n# Provides:          seafile-server\n# Required-Start:    $local_fs $remote_fs $network\n# Required-Stop:     $local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Starts Seafile Server\n# Description:       starts Seafile Server\n### END INIT INFO\n\n# Change the value of \"user\" to linux user name who runs seafile\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi=false\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \" \n ${seafile_init_log}\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \" \n ${seahub_init_log}\n\ncase \"$1\" in\n        start)\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port} \n ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                fi\n        ;;\n        restart)\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port} \n ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                fi\n        ;;\n        stop)\n                sudo -u ${user} ${script_path}/seahub.sh ${1} \n ${seahub_init_log}\n                sudo -u ${user} ${script_path}/seafile.sh ${1} \n ${seafile_init_log}\n        ;;\n        *)\n                echo \"Usage: /etc/init.d/seafile-server {start|stop|restart}\"\n                exit 1\n        ;;\nesac\n\n\n\nNote\n:\n\n\n\n\nIf you want to start seahub in fastcgi, just change the \nfastcgi\n variable to \ntrue\n\n\nIf you deployed Seafile with MySQL, append \"mysql\" to the Required-Start line:\n\n\n\n\n\n\n\n# Required-Start: $local_fs $remote_fs $network mysql\n\n\n\nAdd Directory for Logfiles\n\n\n mkdir /path/to/seafile/dir/logs\n\n\n\nMake the seafile-sever script executable\n\n\nsudo chmod +x /etc/init.d/seafile-server\n\n\n\nAdd seafile-server to rc.d\n\n\nsudo update-rc.d seafile-server defaults\n\n\n\nDone\n\n\nDon't forget to update the value of \nseafile_dir\n later if you update your seafile server.\n\n\nFor RHEL/CentOS\n\n\nOn RHEL/CentOS, the script \n/etc/rc.local\n is executed by the system at bootup, so we start seafile/seahub there.\n\n\n\n\nLocate your python executable (python 2.6 or 2.7)\n\n\n\n\n\n\n\nwhich python2.6 # or \"which python2.7\"\n\n\n\n\n\nIn /etc/rc.local, add the directory of python2.6(2.7) to \nPATH\n,\n    and add the seafile/seahub start command\n\n\n\n\n\n\n\n`\n# Assume the python 2.6(2.7) executable is in \"/usr/local/bin\"\nPATH=$PATH:/usr/local/bin/\n\n# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\n\nsudo -u ${user} ${script_path}/seafile.sh start \n /tmp/seafile.init.log 2\n1\nsudo -u ${user} ${script_path}/seahub.sh start \n /tmp/seahub.init.log 2\n1\n\n\n\nNote\n: If you want to start seahub in fastcgi, just change the \n\"seahub.sh start\"\n in the last line above to \n\"seahub.sh start-fastcgi\"\n\n\n\n\nDone. Don't forget to update the value of \nseafile_dir\n later if you update your seafile server.\n\n\n\n\nFor RHEL/CentOS run as service\n\n\nOn RHEL/CentOS , we make use of the /etc/init.d/ scripts to start seafile/seahub at system boot as service.\n\n\nCreate a file \n/etc/sysconfig/seafile\n\n\n# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi=false\n\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000\n\n\n\nCreate a script \n/etc/init.d/seafile\n\n\n#!/bin/bash\n#\n# seafile\n\n#\n# chkconfig: - 68 32\n# description: seafile\n\n# Source function library.\n. /etc/init.d/functions\n\n# Source networking configuration.\n. /etc/sysconfig/network\n\nif [ -f /etc/sysconfig/seafile ];then\n        . /etc/sysconfig/seafile\n        else\n            echo \"Config file /etc/sysconfig/seafile not found! Bye.\"\n            exit 200\n        fi\n\nRETVAL=0\n\nstart() {\n        # Start daemons.\n        echo -n $\"Starting seafile: \"\n        ulimit -n 30000\n        su - ${user} -c\"${script_path}/seafile.sh start \n ${seafile_init_log} 2\n1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] \n touch /var/lock/subsys/seafile\n        return $RETVAL\n}\n\nstop() {\n        echo -n $\"Shutting down seafile: \"\n        su - ${user} -c\"${script_path}/seafile.sh stop \n ${seafile_init_log} 2\n1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] \n rm -f /var/lock/subsys/seafile\n        return $RETVAL\n}\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \" \n ${seafile_init_log}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  restart|reload)\n        stop\n        start\n        RETVAL=$?\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|restart}\"\n        RETVAL=3\nesac\n\nexit $RETVAL\n\n\n\nCreate a script \n/etc/init.d/seahub\n\n\n#!/bin/bash\n#\n# seahub\n\n#\n# chkconfig: - 69 31\n# description: seahub\n\n# Source function library.\n. /etc/init.d/functions\n\n# Source networking configuration.\n. /etc/sysconfig/network\n\nif [ -f /etc/sysconfig/seafile ];then\n        . /etc/sysconfig/seafile\n        else\n            echo \"Config file /etc/sysconfig/seafile not found! Bye.\"\n            exit 200\n        fi\n\nRETVAL=0\n\nstart() {\n        # Start daemons.\n        echo -n $\"Starting seahub: \"\n        ulimit -n 30000\n        if [  $fastcgi = true ];\n                then\n                su - ${user} -c\"${script_path}/seahub.sh start-fastcgi ${fastcgi_port} \n ${seahub_init_log} 2\n1\"\n                else\n                su - ${user} -c\"${script_path}/seahub.sh start \n ${seahub_init_log} 2\n1\"\n                fi\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] \n touch /var/lock/subsys/seahub\n        return $RETVAL\n}\n\nstop() {\n        echo -n $\"Shutting down seahub: \"\n        su - ${user} -c\"${script_path}/seahub.sh stop \n ${seahub_init_log} 2\n1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ] \n rm -f /var/lock/subsys/seahub\n        return $RETVAL\n}\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \" \n ${seahub_init_log}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  restart|reload)\n        stop\n        start\n        RETVAL=$?\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|restart}\"\n        RETVAL=3\nesac\n\nexit $RETVAL\n\n\n\nNext, enable services:\n\n\nchmod 550 /etc/init.d/seafile\nchmod 550 /etc/init.d/seahub\nchkconfig --add seafile\nchkconfig --add seahub\nchkconfig seahub on\nchkconfig seafile on\n\n\n\nand run:\n\n\nservice seafile start\nservice seahub start\n\n\n\nFor systems running systemd\n\n\nCreate systemd service files, change \n${seafile_dir}\n to your \nseafile\n installation location and \nseafile\n to user, who runs \nseafile\n (if appropriate). Then you need to reload systemd's daemons: \nsystemctl daemon-reload\n.\n\n\nCreate systemd service file /etc/systemd/system/seafile.service\n\n\n[Unit]\nDescription=Seafile\n# add mysql.service or postgresql.service depending on your database to the line below\nAfter=network.target\n\n[Service]\nType=oneshot\nExecStart=${seafile_dir}/seafile-server-latest/seafile.sh start\nExecStop=${seafile_dir}/seafile-server-latest/seafile.sh stop\nRemainAfterExit=yes\nUser=seafile\nGroup=seafile\n\n[Install]\nWantedBy=multi-user.target\n\n\n\nCreate systemd service file /etc/systemd/system/seahub.service\n\n\n[Unit]\nDescription=Seafile hub\nAfter=network.target seafile.service\n\n[Service]\n# change start to start-fastcgi if you want to run fastcgi\nExecStart=${seafile_dir}/seafile-server-latest/seahub.sh start\nExecStop=${seafile_dir}/seafile-server-latest/seahub.sh stop\nUser=seafile\nGroup=seafile\nType=oneshot\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n\n\n\nCreate systemd service file /etc/systemd/system/seafile-client.service (optional)\n\n\nYou need to create this service file only if you have \nseafile\n console client and you want to run it on system boot.\n\n\n[Unit]\nDescription=Seafile client\n# Uncomment the next line you are running seafile client on the same computer as server\n# After=seafile.service\n# Or the next one in other case\n# After=network.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/seaf-cli start\nExecStop=/usr/bin/seaf-cli stop\nRemainAfterExit=yes\nUser=seafile\nGroup=seafile\n\n[Install]\nWantedBy=multi-user.target\n\n\n\nDone", 
            "title": "Start Seafile at System Bootup"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#start-seafile-at-system-bootup", 
            "text": "", 
            "title": "Start Seafile at System Bootup"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#for-ubuntu", 
            "text": "On Ubuntu, we make use of the  /etc/init.d/  scripts to start seafile/seahub at system boot.", 
            "title": "For Ubuntu"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-script-etcinitdseafile-server", 
            "text": "sudo vim /etc/init.d/seafile-server  The content of this script is: (You need to modify the value of  user  and  seafile_dir  accordingly)  #!/bin/bash\n\n# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to falst if fastcgi is not used\nfastcgi=true\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \"   ${seafile_init_log}\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \"   ${seahub_init_log}\ncase \"$1\" in\n        start)\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port}   ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                fi\n        ;;\n        restart)\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port}   ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                fi\n        ;;\n        stop)\n                sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n        ;;\n        *)\n                echo \"Usage: /etc/init.d/seafile-server {start|stop|restart}\"\n                exit 1\n        ;;\nesac", 
            "title": "Create a script /etc/init.d/seafile-server"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-file-etcinitseafile-serverconf", 
            "text": "", 
            "title": "Create a file /etc/init/seafile-server.conf"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#if-youre-not-using-mysql-or-an-external-mysql-server", 
            "text": "start on (runlevel [2345])\nstop on (runlevel [016])\n\npre-start script\n/etc/init.d/seafile-server start\nend script\n\npost-stop script\n/etc/init.d/seafile-server stop\nend script", 
            "title": "If you're not using MySQL or an external MySQL server"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#if-youre-using-mysql", 
            "text": "start on (started mysql\nand runlevel [2345])\nstop on (runlevel [016])\n\npre-start script\n/etc/init.d/seafile-server start\nend script\n\npost-stop script\n/etc/init.d/seafile-server stop\nend script", 
            "title": "If you're using MySQL"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#make-the-seafile-sever-script-executable", 
            "text": "sudo chmod +x /etc/init.d/seafile-server", 
            "title": "Make the seafile-sever script executable"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#done", 
            "text": "Don't forget to update the value of  script_path  later if you update your seafile server.", 
            "title": "Done"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#for-other-debian-based-linux", 
            "text": "", 
            "title": "For other Debian based Linux"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-script-etcinitdseafile-server_1", 
            "text": "sudo vim /etc/init.d/seafile-server  The content of this script is: (You need to modify the value of  user  and  seafile_dir  accordingly)  #!/bin/sh\n\n### BEGIN INIT INFO\n# Provides:          seafile-server\n# Required-Start:    $local_fs $remote_fs $network\n# Required-Stop:     $local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Starts Seafile Server\n# Description:       starts Seafile Server\n### END INIT INFO\n\n# Change the value of \"user\" to linux user name who runs seafile\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi=false\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \"   ${seafile_init_log}\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \"   ${seahub_init_log}\n\ncase \"$1\" in\n        start)\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port}   ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                fi\n        ;;\n        restart)\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n                if [ $fastcgi = true ];\n                then\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}-fastcgi ${fastcgi_port}   ${seahub_init_log}\n                else\n                        sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                fi\n        ;;\n        stop)\n                sudo -u ${user} ${script_path}/seahub.sh ${1}   ${seahub_init_log}\n                sudo -u ${user} ${script_path}/seafile.sh ${1}   ${seafile_init_log}\n        ;;\n        *)\n                echo \"Usage: /etc/init.d/seafile-server {start|stop|restart}\"\n                exit 1\n        ;;\nesac  Note :   If you want to start seahub in fastcgi, just change the  fastcgi  variable to  true  If you deployed Seafile with MySQL, append \"mysql\" to the Required-Start line:    # Required-Start: $local_fs $remote_fs $network mysql", 
            "title": "Create a script /etc/init.d/seafile-server"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#add-directory-for-logfiles", 
            "text": "mkdir /path/to/seafile/dir/logs", 
            "title": "Add Directory for Logfiles"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#make-the-seafile-sever-script-executable_1", 
            "text": "sudo chmod +x /etc/init.d/seafile-server", 
            "title": "Make the seafile-sever script executable"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#add-seafile-server-to-rcd", 
            "text": "sudo update-rc.d seafile-server defaults", 
            "title": "Add seafile-server to rc.d"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#done_1", 
            "text": "Don't forget to update the value of  seafile_dir  later if you update your seafile server.", 
            "title": "Done"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#for-rhelcentos", 
            "text": "On RHEL/CentOS, the script  /etc/rc.local  is executed by the system at bootup, so we start seafile/seahub there.   Locate your python executable (python 2.6 or 2.7)    which python2.6 # or \"which python2.7\"   In /etc/rc.local, add the directory of python2.6(2.7) to  PATH ,\n    and add the seafile/seahub start command    `\n# Assume the python 2.6(2.7) executable is in \"/usr/local/bin\"\nPATH=$PATH:/usr/local/bin/\n\n# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\n\nsudo -u ${user} ${script_path}/seafile.sh start   /tmp/seafile.init.log 2 1\nsudo -u ${user} ${script_path}/seahub.sh start   /tmp/seahub.init.log 2 1  Note : If you want to start seahub in fastcgi, just change the  \"seahub.sh start\"  in the last line above to  \"seahub.sh start-fastcgi\"   Done. Don't forget to update the value of  seafile_dir  later if you update your seafile server.", 
            "title": "For RHEL/CentOS"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#for-rhelcentos-run-as-service", 
            "text": "On RHEL/CentOS , we make use of the /etc/init.d/ scripts to start seafile/seahub at system boot as service.", 
            "title": "For RHEL/CentOS run as service"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-file-etcsysconfigseafile", 
            "text": "# Change the value of \"user\" to your linux user name\nuser=haiwen\n\n# Change the value of \"seafile_dir\" to your path of seafile installation\n# usually the home directory of $user\nseafile_dir=/data/haiwen\nscript_path=${seafile_dir}/seafile-server-latest\nseafile_init_log=${seafile_dir}/logs/seafile.init.log\nseahub_init_log=${seafile_dir}/logs/seahub.init.log\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi=false\n\n# Set the port of fastcgi, default is 8000. Change it if you need different.\nfastcgi_port=8000", 
            "title": "Create a file /etc/sysconfig/seafile"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-script-etcinitdseafile", 
            "text": "#!/bin/bash\n#\n# seafile\n\n#\n# chkconfig: - 68 32\n# description: seafile\n\n# Source function library.\n. /etc/init.d/functions\n\n# Source networking configuration.\n. /etc/sysconfig/network\n\nif [ -f /etc/sysconfig/seafile ];then\n        . /etc/sysconfig/seafile\n        else\n            echo \"Config file /etc/sysconfig/seafile not found! Bye.\"\n            exit 200\n        fi\n\nRETVAL=0\n\nstart() {\n        # Start daemons.\n        echo -n $\"Starting seafile: \"\n        ulimit -n 30000\n        su - ${user} -c\"${script_path}/seafile.sh start   ${seafile_init_log} 2 1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ]   touch /var/lock/subsys/seafile\n        return $RETVAL\n}\n\nstop() {\n        echo -n $\"Shutting down seafile: \"\n        su - ${user} -c\"${script_path}/seafile.sh stop   ${seafile_init_log} 2 1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ]   rm -f /var/lock/subsys/seafile\n        return $RETVAL\n}\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seafile at `date -Iseconds` \\n \"   ${seafile_init_log}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  restart|reload)\n        stop\n        start\n        RETVAL=$?\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|restart}\"\n        RETVAL=3\nesac\n\nexit $RETVAL", 
            "title": "Create a script /etc/init.d/seafile"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-a-script-etcinitdseahub", 
            "text": "#!/bin/bash\n#\n# seahub\n\n#\n# chkconfig: - 69 31\n# description: seahub\n\n# Source function library.\n. /etc/init.d/functions\n\n# Source networking configuration.\n. /etc/sysconfig/network\n\nif [ -f /etc/sysconfig/seafile ];then\n        . /etc/sysconfig/seafile\n        else\n            echo \"Config file /etc/sysconfig/seafile not found! Bye.\"\n            exit 200\n        fi\n\nRETVAL=0\n\nstart() {\n        # Start daemons.\n        echo -n $\"Starting seahub: \"\n        ulimit -n 30000\n        if [  $fastcgi = true ];\n                then\n                su - ${user} -c\"${script_path}/seahub.sh start-fastcgi ${fastcgi_port}   ${seahub_init_log} 2 1\"\n                else\n                su - ${user} -c\"${script_path}/seahub.sh start   ${seahub_init_log} 2 1\"\n                fi\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ]   touch /var/lock/subsys/seahub\n        return $RETVAL\n}\n\nstop() {\n        echo -n $\"Shutting down seahub: \"\n        su - ${user} -c\"${script_path}/seahub.sh stop   ${seahub_init_log} 2 1\"\n        RETVAL=$?\n        echo\n        [ $RETVAL -eq 0 ]   rm -f /var/lock/subsys/seahub\n        return $RETVAL\n}\n\n#\n# Write a polite log message with date and time\n#\necho -e \"\\n \\n About to perform $1 for seahub at `date -Iseconds` \\n \"   ${seahub_init_log}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n        start\n        ;;\n  stop)\n        stop\n        ;;\n  restart|reload)\n        stop\n        start\n        RETVAL=$?\n        ;;\n  *)\n        echo $\"Usage: $0 {start|stop|restart}\"\n        RETVAL=3\nesac\n\nexit $RETVAL  Next, enable services:  chmod 550 /etc/init.d/seafile\nchmod 550 /etc/init.d/seahub\nchkconfig --add seafile\nchkconfig --add seahub\nchkconfig seahub on\nchkconfig seafile on  and run:  service seafile start\nservice seahub start", 
            "title": "Create a script /etc/init.d/seahub"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#for-systems-running-systemd", 
            "text": "Create systemd service files, change  ${seafile_dir}  to your  seafile  installation location and  seafile  to user, who runs  seafile  (if appropriate). Then you need to reload systemd's daemons:  systemctl daemon-reload .", 
            "title": "For systems running systemd"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-systemd-service-file-etcsystemdsystemseafileservice", 
            "text": "[Unit]\nDescription=Seafile\n# add mysql.service or postgresql.service depending on your database to the line below\nAfter=network.target\n\n[Service]\nType=oneshot\nExecStart=${seafile_dir}/seafile-server-latest/seafile.sh start\nExecStop=${seafile_dir}/seafile-server-latest/seafile.sh stop\nRemainAfterExit=yes\nUser=seafile\nGroup=seafile\n\n[Install]\nWantedBy=multi-user.target", 
            "title": "Create systemd service file /etc/systemd/system/seafile.service"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-systemd-service-file-etcsystemdsystemseahubservice", 
            "text": "[Unit]\nDescription=Seafile hub\nAfter=network.target seafile.service\n\n[Service]\n# change start to start-fastcgi if you want to run fastcgi\nExecStart=${seafile_dir}/seafile-server-latest/seahub.sh start\nExecStop=${seafile_dir}/seafile-server-latest/seahub.sh stop\nUser=seafile\nGroup=seafile\nType=oneshot\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target", 
            "title": "Create systemd service file /etc/systemd/system/seahub.service"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#create-systemd-service-file-etcsystemdsystemseafile-clientservice-optional", 
            "text": "You need to create this service file only if you have  seafile  console client and you want to run it on system boot.  [Unit]\nDescription=Seafile client\n# Uncomment the next line you are running seafile client on the same computer as server\n# After=seafile.service\n# Or the next one in other case\n# After=network.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/seaf-cli start\nExecStop=/usr/bin/seaf-cli stop\nRemainAfterExit=yes\nUser=seafile\nGroup=seafile\n\n[Install]\nWantedBy=multi-user.target", 
            "title": "Create systemd service file /etc/systemd/system/seafile-client.service (optional)"
        }, 
        {
            "location": "/deploy/start_seafile_at_system_bootup/#done_2", 
            "text": "", 
            "title": "Done"
        }, 
        {
            "location": "/deploy/using_firewall/", 
            "text": "Firewall settings\n\n\nBy default, you should open 2 ports, 8000 and 8082, in your firewall settings.\n\n\nIf you run Seafile behind Nginx/Apache with HTTPS, you only need to open ports 443.", 
            "title": "Firewall settings"
        }, 
        {
            "location": "/deploy/using_firewall/#firewall-settings", 
            "text": "By default, you should open 2 ports, 8000 and 8082, in your firewall settings.  If you run Seafile behind Nginx/Apache with HTTPS, you only need to open ports 443.", 
            "title": "Firewall settings"
        }, 
        {
            "location": "/deploy/using_logrotate/", 
            "text": "Set up logrotate for server\n\n\nHow it works\n\n\nseaf-server and ccnet-server now (since version 3.1) support reopenning logfile by receiving SIGUR1 signal.\n\n\nThis feature is very useful when you need cut logfile while you don't want to shutdown the server programs. All you need to do now is cutting the logfile on\nthe fly.\n\n\n\n\nNOTE\n: signal is not supported by windows, so the feature is not available in windows\n\n\n\n\nDefault logrotate configuration directory\n\n\nFor debian, the default directory for logrotate should be \n/etc/logrotate.d/\n\n\nSample configuration\n\n\nAssuming your ccnet-server's logfile is \n/home/haiwen/logs/ccnet.log\n, and your ccnet-server's pidfile for ccnet-server is \n/home/haiwen/pids/ccnet.pid\n.\n\n\nAssuming your seaf-server's logfile is setup to \n/home/haiwen/logs/seaf-server.log\n, and your seaf-server's pidfile for seaf-server is setup to \n/home/haiwen/pids/seaf-server.pid\n:\n\n\nThe configuration for logroate could be like this:\n\n\n/home/haiwen/logs/seaf-server.log\n{\n        daily\n        missingok\n        rotate 52\n        compress\n        delaycompress\n        notifempty\n        sharedscripts\n        postrotate\n                [ ! -f /home/haiwen/pids/seaf-server.pid ] || kill -USR1 `cat /home/haiwen/pids/seaf-server.pid`\n        endscript\n}\n\n/home/haiwen/logs/ccnet.log\n{\n        daily\n        missingok\n        rotate 52\n        compress\n        delaycompress\n        notifempty\n        sharedscripts\n        postrotate\n                [ ! -f /home/haiwen/pids/ccnet.pid ] || kill -USR1 `cat /home/haiwen/pids/ccnet.pid`\n        endscript\n}\n\n\n\n\nYou can save this file, for example in debian, to \n/etc/logrotate.d/seafile\n\n\nThat's it\n\n\nYou now gets all the things done, just sit and enjoy your time :-D", 
            "title": "Logrotate"
        }, 
        {
            "location": "/deploy/using_logrotate/#set-up-logrotate-for-server", 
            "text": "", 
            "title": "Set up logrotate for server"
        }, 
        {
            "location": "/deploy/using_logrotate/#how-it-works", 
            "text": "seaf-server and ccnet-server now (since version 3.1) support reopenning logfile by receiving SIGUR1 signal.  This feature is very useful when you need cut logfile while you don't want to shutdown the server programs. All you need to do now is cutting the logfile on\nthe fly.   NOTE : signal is not supported by windows, so the feature is not available in windows", 
            "title": "How it works"
        }, 
        {
            "location": "/deploy/using_logrotate/#default-logrotate-configuration-directory", 
            "text": "For debian, the default directory for logrotate should be  /etc/logrotate.d/", 
            "title": "Default logrotate configuration directory"
        }, 
        {
            "location": "/deploy/using_logrotate/#sample-configuration", 
            "text": "Assuming your ccnet-server's logfile is  /home/haiwen/logs/ccnet.log , and your ccnet-server's pidfile for ccnet-server is  /home/haiwen/pids/ccnet.pid .  Assuming your seaf-server's logfile is setup to  /home/haiwen/logs/seaf-server.log , and your seaf-server's pidfile for seaf-server is setup to  /home/haiwen/pids/seaf-server.pid :  The configuration for logroate could be like this:  /home/haiwen/logs/seaf-server.log\n{\n        daily\n        missingok\n        rotate 52\n        compress\n        delaycompress\n        notifempty\n        sharedscripts\n        postrotate\n                [ ! -f /home/haiwen/pids/seaf-server.pid ] || kill -USR1 `cat /home/haiwen/pids/seaf-server.pid`\n        endscript\n}\n\n/home/haiwen/logs/ccnet.log\n{\n        daily\n        missingok\n        rotate 52\n        compress\n        delaycompress\n        notifempty\n        sharedscripts\n        postrotate\n                [ ! -f /home/haiwen/pids/ccnet.pid ] || kill -USR1 `cat /home/haiwen/pids/ccnet.pid`\n        endscript\n}  You can save this file, for example in debian, to  /etc/logrotate.d/seafile", 
            "title": "Sample configuration"
        }, 
        {
            "location": "/deploy/using_logrotate/#thats-it", 
            "text": "You now gets all the things done, just sit and enjoy your time :-D", 
            "title": "That's it"
        }, 
        {
            "location": "/deploy/add_memcached/", 
            "text": "Add memcached\n\n\nSeahub caches items (avatars, profiles, etc) on the file system in /tmp/seahub_cache/ by default. You can replace it with Memcached. You need to install\n\n\n\n\nmemcached\n\n\npython memcached module (python-memcache or python-memcached)\n\n\n\n\nThen add the following lines to \nseahub_settings.py\n.\n\n\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n    }\n}", 
            "title": "Add Memcached"
        }, 
        {
            "location": "/deploy/add_memcached/#add-memcached", 
            "text": "Seahub caches items (avatars, profiles, etc) on the file system in /tmp/seahub_cache/ by default. You can replace it with Memcached. You need to install   memcached  python memcached module (python-memcache or python-memcached)   Then add the following lines to  seahub_settings.py .  CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n    }\n}", 
            "title": "Add memcached"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/", 
            "text": "Deploy Seafile behind NAT\n\n\nA lot of people want to deploy a seafile server in their LAN, and access it from the WAN.\n\n\nTo achieve this, you need:\n\n\n\n\nA router which supports port forwarding\n\n\nUse a dynamic DNS Service\n\n\nModify your seafile server configuration\n\n\n\n\nTable of Contents\n\n\n\n\nSetup the server\n\n\nSetup port forwarding in your router\n\n\nUse a dynamic dns serivce\n\n\nModify your seafile configuration\n\n\n\n\nSetup the server\n\n\nFirst, you should follow the guide on \nDownload and Setup Seafile Server\n to setup your Seafile server.\n\n\nBefore you continue, make sure:\n\n\n\n\nYou can visit your seahub website\n\n\nYou can download/sync a library through your seafile client\n\n\n\n\nSetup Port Forwarding in Your Router\n\n\nEnsure Your Router Supports Port Forwarding\n\n\nFirst, ensure your router supports port forwarding.\n\n\n\n\n\n\nLogin to the web adminstration page of your router. If you don't know how to do this, you should find the instructions on the manual of the router. If you have no maunal, just google \n\"XXX router administration page\"\n where \nXXX\n is your router's brand.\n\n\n\n\n\n\nNavigate around in the adminstration page, and check if there is a tag which contains a word such as \"forward\", \"advanced\". If your router supports it, chances are that you can find the port forwarding related settings there.\n\n\n\n\n\n\nSetup Port Forwarding Rules\n\n\nSeafile server is composed of several components. You need to configure port forward for all the components listed below.\n\n\n\n\n\n  \ncomponent\n\n  \ndefault port\n\n\n\n\n\n  \nfileserver\n\n  \n8082\n\n\n\n\n\n  \nseahub\n\n  \n8000\n\n\n\n\n\n\n\n\n\nYou don't need to open port 8000 and 8082 if you deploy Seafile behind Apache/Nginx.\n\n\nIf you're not using the default ports, you should adjust the table accroding to your own customiztion.\n\n\n\n\nHow to test if your port forwarding is working\n\n\nAfter you have set the port forwarding rules on your router, you can check whether it works by:\n\n\n\n\nOpen a command line prompt\n\n\nGet your WAN IP. A convenient way to get your WAN ip is to visit \nhttp://who.is\n, which would show you your WAN IP.\n\n\nTry to connect your seahub server\n````\ntelnet \n 8000\n\n\n\n\n\nIf your port forwarding is working, the command above should succeed. Otherwise, you may get a message saying something like *connection refused* or *connection timeout*.\n\nIf your port forwarding is not working, the reasons may be:\n\n- You have configured a wrong port forwarding\n- Your router may need a restart\n- You network may be down\n\n### Set SERVICE_URL\n\n\nSERVICE_URL\n in `ccnet.conf` is used to generate the download/upload link for files when you browse files online. Set it using your WAN IP.\n\n\n\n\n\nSERVICE_URL = http://\n:8000\n\n\n\nMost routers support NAT loopback. When your access Seafile web from intranet, file download/upload still works even when external IP is used.\n\n## Use a Dynamic DNS Serivce\n\n### Why use a Dynamic DNS(DDNS)  Service?\n\nHaving done all the steps above, you should be able to visit your seahub server outside your LAN by your WAN IP. But for most people, the WAN IP address is likey to change regularly by their ISP(Internet Serice Provider), which makes this approach impratical.\n\nYou can use a dynamic DNS(DDNS) Service to overcome this problem. By using a dynamic DNS service, you can visit your seahub by domain name (instead of by IP), and the domain name will always be mapped to your WAN IP address, even if it changes regularly.\n\nThere are a dozen of dynmaic DNS service providers on the internet. If you don't know what service to choose We recommend using [www.noip.com](http://www.noip.com) since it performs well in our testing.\n\nThe detailed process is beyond the scope of this wiki. But basically, you should:\n\n1. Choose a DDNS service provider\n2. Register an account on the DDNS service provider's website\n3. Download a client from your DDNS service provider to keep your domain name always mapped to your WAN IP\n\n## Modify your seafile configuration\n\nAfter you have setup your DDNS service, you need to modify the `ccnet.conf`:\n\n\n\n\n\nSERVICE_URL = http://\n:8000\n```\n\n\nRestart your seafile server after this.", 
            "title": "Deploy Seafile behind NAT"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#deploy-seafile-behind-nat", 
            "text": "A lot of people want to deploy a seafile server in their LAN, and access it from the WAN.  To achieve this, you need:   A router which supports port forwarding  Use a dynamic DNS Service  Modify your seafile server configuration", 
            "title": "Deploy Seafile behind NAT"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#table-of-contents", 
            "text": "Setup the server  Setup port forwarding in your router  Use a dynamic dns serivce  Modify your seafile configuration", 
            "title": "Table of Contents"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#setup-the-server", 
            "text": "First, you should follow the guide on  Download and Setup Seafile Server  to setup your Seafile server.  Before you continue, make sure:   You can visit your seahub website  You can download/sync a library through your seafile client", 
            "title": "Setup the server"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#setup-port-forwarding-in-your-router", 
            "text": "", 
            "title": "Setup Port Forwarding in Your Router"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#ensure-your-router-supports-port-forwarding", 
            "text": "First, ensure your router supports port forwarding.    Login to the web adminstration page of your router. If you don't know how to do this, you should find the instructions on the manual of the router. If you have no maunal, just google  \"XXX router administration page\"  where  XXX  is your router's brand.    Navigate around in the adminstration page, and check if there is a tag which contains a word such as \"forward\", \"advanced\". If your router supports it, chances are that you can find the port forwarding related settings there.", 
            "title": "Ensure Your Router Supports Port Forwarding"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#setup-port-forwarding-rules", 
            "text": "Seafile server is composed of several components. You need to configure port forward for all the components listed below.   \n   component \n   default port   \n   fileserver \n   8082   \n   seahub \n   8000     You don't need to open port 8000 and 8082 if you deploy Seafile behind Apache/Nginx.  If you're not using the default ports, you should adjust the table accroding to your own customiztion.", 
            "title": "Setup Port Forwarding Rules"
        }, 
        {
            "location": "/deploy/deploy_seafile_behind_nat/#how-to-test-if-your-port-forwarding-is-working", 
            "text": "After you have set the port forwarding rules on your router, you can check whether it works by:   Open a command line prompt  Get your WAN IP. A convenient way to get your WAN ip is to visit  http://who.is , which would show you your WAN IP.  Try to connect your seahub server\n````\ntelnet   8000   \nIf your port forwarding is working, the command above should succeed. Otherwise, you may get a message saying something like *connection refused* or *connection timeout*.\n\nIf your port forwarding is not working, the reasons may be:\n\n- You have configured a wrong port forwarding\n- Your router may need a restart\n- You network may be down\n\n### Set SERVICE_URL SERVICE_URL  in `ccnet.conf` is used to generate the download/upload link for files when you browse files online. Set it using your WAN IP.  SERVICE_URL = http:// :8000  \nMost routers support NAT loopback. When your access Seafile web from intranet, file download/upload still works even when external IP is used.\n\n## Use a Dynamic DNS Serivce\n\n### Why use a Dynamic DNS(DDNS)  Service?\n\nHaving done all the steps above, you should be able to visit your seahub server outside your LAN by your WAN IP. But for most people, the WAN IP address is likey to change regularly by their ISP(Internet Serice Provider), which makes this approach impratical.\n\nYou can use a dynamic DNS(DDNS) Service to overcome this problem. By using a dynamic DNS service, you can visit your seahub by domain name (instead of by IP), and the domain name will always be mapped to your WAN IP address, even if it changes regularly.\n\nThere are a dozen of dynmaic DNS service providers on the internet. If you don't know what service to choose We recommend using [www.noip.com](http://www.noip.com) since it performs well in our testing.\n\nThe detailed process is beyond the scope of this wiki. But basically, you should:\n\n1. Choose a DDNS service provider\n2. Register an account on the DDNS service provider's website\n3. Download a client from your DDNS service provider to keep your domain name always mapped to your WAN IP\n\n## Modify your seafile configuration\n\nAfter you have setup your DDNS service, you need to modify the `ccnet.conf`:  SERVICE_URL = http:// :8000\n```  Restart your seafile server after this.", 
            "title": "How to test if your port forwarding is working"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/", 
            "text": "Deploy Seahub at Non-root domain\n\n\nThis documentation will talk about how to deploy Seafile Web using Apache/Nginx at Non-root directory of the website(e.g., www.example.com/seafile/). Please note that the file server path will still be e.g. www.example.com/seafhttp (rather than www.example.com/seafile/seafhttp) because this path is hardcoded in the clients.\n\n\nNote:\n We assume you have read \nDeploy Seafile with Nginx\n or \nDeploy Seafile with Apache\n.\n\n\nConfigure Seahub\n\n\nFirst, we need to overwrite some variables in seahub_settings.py:\n\n\n\nSERVE_STATIC = False\nMEDIA_URL = '/seafmedia/'\nCOMPRESS_URL = MEDIA_URL\nSTATIC_URL = MEDIA_URL + 'assets/'\nSITE_ROOT = '/seafile/'\nLOGIN_URL = '/seafile/accounts/login/'    # NOTE: since version 5.0.4\n\n\n\n\nThe webserver will serve static files (js, css, etc), so we just disable \nSERVE_STATIC\n.\n\n\nMEDIA_URL\n can be anything you like, just make sure a trailing slash is appended at the end.\n\n\nWe deploy Seafile at \n/seafile/\n directory instead of root directory, so we set \nSITE_ROOT\n to \n/seafile/\n.\n\n\nModify ccnet.conf and seahub_setting.py\n\n\nModify ccnet.conf\n\n\nYou need to modify the value of \nSERVICE_URL\n in \nccnet.conf\n to let Seafile know the domain you choose.\n\n\n\nSERVICE_URL = http://www.myseafile.com/seafile\n\n\n\n\nNote: If you later change the domain assigned to seahub, you also need to change the value of  \nSERVICE_URL\n.\n\n\nModify seahub_settings.py\n\n\nYou need to add a line in \nseahub_settings.py\n to set the value of \nFILE_SERVER_ROOT\n\n\nFILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'\n\n\n\n\nNote:\n The file server path MUST be \n/seafhttp\n because this path is hardcoded in the clients.\n\n\nWebserver configuration\n\n\nDeploy with Nginx\n\n\nThen, we need to configure the Nginx:\n\n\n\nserver {\n    listen 80;\n    server_name www.example.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location /seafile {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n#       fastcgi_param   HTTPS               on; # enable this line only if https is used\n        access_log      /var/log/nginx/seahub.access.log;\n        error_log       /var/log/nginx/seahub.error.log;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n    }\n\n    location /seafmedia {\n        rewrite ^/seafmedia(.*)$ /media$1 break;\n        root /home/user/haiwen/seafile-server-latest/seahub;\n    }\n}\n\n\n\n\nDeploy with Apache\n\n\nHere is the sample configuration:\n\n\n\n\n\n  ServerName www.example.com\n  DocumentRoot /var/www\n  Alias /seafmedia  /home/user/haiwen/seafile-server-latest/seahub/media\n\n  \n\n    ProxyPass !\n    Require all granted\n  \n\n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n  ProxyPass /seafile fcgi://127.0.0.1:8000/seafile\n\n\n\n\n\n\nWe use Alias to let Apache serve static files, please change the second argument to your path.\n\n\nClear the cache\n\n\nBy default, Seahub caches some data like the link to the avatar icon in \n/tmp/seahub_cache/\n (unless memcache is used). We suggest to clear the cache after seafile has been stopped:\n\n\n\nrm -rf /tmp/seahub_cache/\n\n\n\n\nFor memcache users, please purge the cache there instead by restarting your memcached server.\n\n\nStart Seafile and Seahub\n\n\n\n./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Deploy Seahub at Non-root domain"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#deploy-seahub-at-non-root-domain", 
            "text": "This documentation will talk about how to deploy Seafile Web using Apache/Nginx at Non-root directory of the website(e.g., www.example.com/seafile/). Please note that the file server path will still be e.g. www.example.com/seafhttp (rather than www.example.com/seafile/seafhttp) because this path is hardcoded in the clients.  Note:  We assume you have read  Deploy Seafile with Nginx  or  Deploy Seafile with Apache .", 
            "title": "Deploy Seahub at Non-root domain"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#configure-seahub", 
            "text": "First, we need to overwrite some variables in seahub_settings.py:  \nSERVE_STATIC = False\nMEDIA_URL = '/seafmedia/'\nCOMPRESS_URL = MEDIA_URL\nSTATIC_URL = MEDIA_URL + 'assets/'\nSITE_ROOT = '/seafile/'\nLOGIN_URL = '/seafile/accounts/login/'    # NOTE: since version 5.0.4  The webserver will serve static files (js, css, etc), so we just disable  SERVE_STATIC .  MEDIA_URL  can be anything you like, just make sure a trailing slash is appended at the end.  We deploy Seafile at  /seafile/  directory instead of root directory, so we set  SITE_ROOT  to  /seafile/ .", 
            "title": "Configure Seahub"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#modify-ccnetconf-and-seahub_settingpy", 
            "text": "", 
            "title": "Modify ccnet.conf and seahub_setting.py"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#modify-ccnetconf", 
            "text": "You need to modify the value of  SERVICE_URL  in  ccnet.conf  to let Seafile know the domain you choose.  \nSERVICE_URL = http://www.myseafile.com/seafile  Note: If you later change the domain assigned to seahub, you also need to change the value of   SERVICE_URL .", 
            "title": "Modify ccnet.conf"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#modify-seahub_settingspy", 
            "text": "You need to add a line in  seahub_settings.py  to set the value of  FILE_SERVER_ROOT  FILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'  Note:  The file server path MUST be  /seafhttp  because this path is hardcoded in the clients.", 
            "title": "Modify seahub_settings.py"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#webserver-configuration", 
            "text": "", 
            "title": "Webserver configuration"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#deploy-with-nginx", 
            "text": "Then, we need to configure the Nginx:  \nserver {\n    listen 80;\n    server_name www.example.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location /seafile {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n#       fastcgi_param   HTTPS               on; # enable this line only if https is used\n        access_log      /var/log/nginx/seahub.access.log;\n        error_log       /var/log/nginx/seahub.error.log;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n    }\n\n    location /seafmedia {\n        rewrite ^/seafmedia(.*)$ /media$1 break;\n        root /home/user/haiwen/seafile-server-latest/seahub;\n    }\n}", 
            "title": "Deploy with Nginx"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#deploy-with-apache", 
            "text": "Here is the sample configuration:   \n  ServerName www.example.com\n  DocumentRoot /var/www\n  Alias /seafmedia  /home/user/haiwen/seafile-server-latest/seahub/media\n\n   \n    ProxyPass !\n    Require all granted\n   \n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n  ProxyPass /seafile fcgi://127.0.0.1:8000/seafile   We use Alias to let Apache serve static files, please change the second argument to your path.", 
            "title": "Deploy with Apache"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#clear-the-cache", 
            "text": "By default, Seahub caches some data like the link to the avatar icon in  /tmp/seahub_cache/  (unless memcache is used). We suggest to clear the cache after seafile has been stopped:  \nrm -rf /tmp/seahub_cache/  For memcache users, please purge the cache there instead by restarting your memcached server.", 
            "title": "Clear the cache"
        }, 
        {
            "location": "/deploy/deploy_seahub_at_non-root_domain/#start-seafile-and-seahub", 
            "text": "./seafile.sh start\n./seahub.sh start-fastcgi", 
            "title": "Start Seafile and Seahub"
        }, 
        {
            "location": "/deploy/migrate_from_sqlite_to_mysql/", 
            "text": "Migrate From SQLite to MySQL\n\n\nFirst make sure the python module for MySQL is installed. On Ubuntu, use \napt-get install python-mysqldb\n to install it.\n\n\nSteps to migrate Seafile from SQLite to MySQL:\n\n\n\n\n\n\nStop seafile and seahub\n\n\n\n\n\n\nDownload \nsqlite2mysql.sh\n and \nsqlite2mysql.py\n to the top directory of your Seafile installation path. For example, /data/haiwen.\n\n\n\n\n\n\nRun sqlite2mysql.sh\n\n\n\n\n\n\n  chmod +x sqlite2mysql.sh\n  ./sqlite2mysql.sh\n\n\n\n\nThis script will produce three files(ccnet-db.sql, seafile-db.sql, seahub-db.sql).\n\n\n\n\nCreate 3 databases named \nccnet-db\n, \nseafile-db\n, \nseahub-db\n.\n\n\n\n\n  create database `ccnet-db` character set = 'utf8';\n  create database `seafile-db` character set = 'utf8';\n  create database `seahub-db` character set = 'utf8';\n\n\n\n\n\n\nLoads the sql files to your MySQL databases. For example:\n\n\n\n\n  mysql\n use `ccnet-db`\n  mysql\n source ccnet-db.sql\n  mysql\n use `seafile-db`\n  mysql\n source seafile-db.sql\n  mysql\n use `seahub-db`\n  mysql\n source seahub-db.sql\n\n\n\n\n\n\nModify configure files\n\n\n\n\nAppend following lines to \nccnet.conf\n:\n\n\n    [Database]\n    ENGINE=mysql\n    HOST=127.0.0.1\n    USER=root\n    PASSWD=root\n    DB=ccnet-db\n    CONNECTION_CHARSET=utf8\n\nNote: Use `127.0.0.1`, don't use `localhost`.\n\nReplace the database section in `seafile.conf` with following lines:\n\n    [database]\n    type=mysql\n    host=127.0.0.1\n    user=root\n    password=root\n    db_name=seafile-db\n    CONNECTION_CHARSET=utf8\n\nAppend following lines to `seahub_settings.py`:\n\n    DATABASES = {\n        'default': {\n            'ENGINE': 'django.db.backends.mysql',\n            'USER' : 'root',\n            'PASSWORD' : 'root',\n            'NAME' : 'seahub-db',\n            'HOST' : '127.0.0.1',\n            'OPTIONS': {\n                \"init_command\": \"SET storage_engine=INNODB\",\n            }\n        }\n    }\n\n\n\n\n\nRestart seafile and seahub\n\n\n\n\nNOTE\n\n\nUser notifications will be cleared during migration due to the slight difference between MySQL and SQLite, if you only see the busy icon when click the notitfications button beside your avatar, please remove \nuser_notitfications\n table manually by:\n\n\nuse seahub-db\ndelete from notifications_usernotification;", 
            "title": "Migrate From SQLite to MySQL"
        }, 
        {
            "location": "/deploy/migrate_from_sqlite_to_mysql/#migrate-from-sqlite-to-mysql", 
            "text": "First make sure the python module for MySQL is installed. On Ubuntu, use  apt-get install python-mysqldb  to install it.  Steps to migrate Seafile from SQLite to MySQL:    Stop seafile and seahub    Download  sqlite2mysql.sh  and  sqlite2mysql.py  to the top directory of your Seafile installation path. For example, /data/haiwen.    Run sqlite2mysql.sh      chmod +x sqlite2mysql.sh\n  ./sqlite2mysql.sh  This script will produce three files(ccnet-db.sql, seafile-db.sql, seahub-db.sql).   Create 3 databases named  ccnet-db ,  seafile-db ,  seahub-db .     create database `ccnet-db` character set = 'utf8';\n  create database `seafile-db` character set = 'utf8';\n  create database `seahub-db` character set = 'utf8';   Loads the sql files to your MySQL databases. For example:     mysql  use `ccnet-db`\n  mysql  source ccnet-db.sql\n  mysql  use `seafile-db`\n  mysql  source seafile-db.sql\n  mysql  use `seahub-db`\n  mysql  source seahub-db.sql   Modify configure files   Append following lines to  ccnet.conf :      [Database]\n    ENGINE=mysql\n    HOST=127.0.0.1\n    USER=root\n    PASSWD=root\n    DB=ccnet-db\n    CONNECTION_CHARSET=utf8\n\nNote: Use `127.0.0.1`, don't use `localhost`.\n\nReplace the database section in `seafile.conf` with following lines:\n\n    [database]\n    type=mysql\n    host=127.0.0.1\n    user=root\n    password=root\n    db_name=seafile-db\n    CONNECTION_CHARSET=utf8\n\nAppend following lines to `seahub_settings.py`:\n\n    DATABASES = {\n        'default': {\n            'ENGINE': 'django.db.backends.mysql',\n            'USER' : 'root',\n            'PASSWORD' : 'root',\n            'NAME' : 'seahub-db',\n            'HOST' : '127.0.0.1',\n            'OPTIONS': {\n                \"init_command\": \"SET storage_engine=INNODB\",\n            }\n        }\n    }   Restart seafile and seahub   NOTE  User notifications will be cleared during migration due to the slight difference between MySQL and SQLite, if you only see the busy icon when click the notitfications button beside your avatar, please remove  user_notitfications  table manually by:  use seahub-db\ndelete from notifications_usernotification;", 
            "title": "Migrate From SQLite to MySQL"
        }, 
        {
            "location": "/faq/", 
            "text": "FAQ\n\n\nQuestions about file syncing\n\n\nWhen downloading a library, the client hangs at \"connecting server\"\n\n\nFirst, you can check the Seafile client log (\n~/.ccnet/logs/seafile.log\n for Linux, \nC:/users/your_name/ccnet/logs/seafile.log\n for Windows) to see what's wrong.\n\n\nPossible reasons:\n\n\n\n\nFirewall: Ensure the firewall is configured properly. See \nFirewall Settings for Seafile Server\n\n\n\n\nHow to add more verbose log information at the client\n\n\nSet environment variable \nSEAFILE_DEBUG = all\n before running Seafile desktop client. On Linux, you can open a terminal and type: \n\n\nexport SEAFILE_DEBUG=all\n./seafile-applet\n\n\n\n\nQuestions about server setup\n\n\nFailed to upload/download file online\n\n\n\n\nMake sure you firewall for seafile fileserver is opened.\n\n\nMake \nSERVICE_URL\n in ccnet.conf and \nFILE_SERVER_ROOT\n in seahub_settings.py are set correctly.\n\n\nUsing chrome/firefox debug mode to find which link is given when click download button and what's wrong with this link\n\n\n\n\nDoes Seafile server support Python 3?\n\n\nNo, You must have python 2.6.5+ or 2.7 installed on your server.\n\n\nCan Seafile server run on FreeBSD?\n\n\nThere was an unconfirmed solution on the internet, which later has vanished.\n(Please explain the installation routine if you successfully set up Seafile in FreeBSD.)\n\n\nWebsite displays \"Page unavailable\", what can I do?\n\n\n\n\n\n\nYou can check the back trace in seahub log files(\ninstallation folder/logs/seahub_django_request.log\n)\n\n\n\n\n\n\nYou can also turn on debug by adding \nDEBUG = True\n to seahub_settings.py and restart seahub by \n./seahub.sh restart\n, then refresh that page, all the debug infomations will be displayed. Make sure ./seahub.sh was started as: ./seahub.sh start-fastcgi\n\n\n\n\n\n\nAvatar pictures vanished after upgrading server, what can I do?\n\n\n\n\n\n\nYou need to check whether the \"avatars\" symbolic link under seahub/media/ is correctly link to ../../../seahub-data/avatars. If not, you need to correct the link according to the \"minor upgrade\" section in \nUpgrading-Seafile-Server\n\n\n\n\n\n\nIf your avatars link is correctly linked, and avatars are still broken, you may refresh seahub cache by \nrm -rf /tmp/seahub_cache/*\n\n\n\n\n\n\nHow to change seafile-data location after setup?\n\n\nModify file seafile.ini under ccnet. This file contains the location of seafile-data. Move seafile-data to another place, like \n/opt/new/seafile-data\n. Then modify the file accordingly.\n\n\nFailed to send email, what can I do?\n\n\nPlease check logs/seahub.log.\n\n\nThere are some common mistakes:\n\n\n\n\nCheck whether there are some typos in the config, e.g., forget single quote, \nEMAIL_HOST_USER = XXX\n, which should be \nEMAIL_HOST_USER = 'XXX'\n\n\nYour mail server is not available.\n\n\n\n\nAfter upgrade Web UI is broken because CSS files can't be loaded\n\n\nPlease remove the cache and try again, \nrm -rf /tmp/seahub_cache/*\n. If you configured memecached, restart memcached, then restart Seahub.\n\n\nIf the problem is not fixed, check whether seafile-server-latest point to the right folder. Then check whether \nseafile-server-latest/seahub/media/CACHE\n is correctly generated (it should contain the auto-generated CSS file). \n\n\nQuestions about Clustering\n\n\nPage layout broken because seahub/media/CACHE is created only on first node\n\n\nPlease add\n\n\nCOMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'\n\n\n\nto seahub_settings.py as documented http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html\n\n\nThis will tell every node to generate the CSS CACHE in its local folder.\n\n\nQuestions about server maintenance\n\n\nHow to migrate libraries and groups from one account to another?\n\n\nSince version 4.4.2, system admin can migrate libraries and groups from one account to another existing account using \nRESTful web api\n.\n\n\nSeafile GC shows errors, FSCK can\u2019t fix them\n\n\nGC scans the history. But FSCK only scan the currently version. You can ignore the error. It is a minor issue.\n\n\nQuestions about LDAP and User management\n\n\nHow to restrict Seafile access to a certain accounts in AD\n\n\nYou can use FILTER field in LDAP configuration in \nccnet.conf\n. For example, the following filter restricts the access to Seafile to members of a group.\n\n\nFILTER = (memberOf=cn=group,cn=users,DC=x)\n\n\n\nAD also supports groups within group. The following filter restricts the access to Seafile to members/groups of a group.\n\n\nFILTER = (memberOf:1.2.840.113556.1.4.1941:=cn=group,cn=users,DC=x)\n\n\n\nFor more information on the Filter syntax, see http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx", 
            "title": "Common Problems for Setting up Server"
        }, 
        {
            "location": "/faq/#faq", 
            "text": "", 
            "title": "FAQ"
        }, 
        {
            "location": "/faq/#questions-about-file-syncing", 
            "text": "", 
            "title": "Questions about file syncing"
        }, 
        {
            "location": "/faq/#when-downloading-a-library-the-client-hangs-at-connecting-server", 
            "text": "First, you can check the Seafile client log ( ~/.ccnet/logs/seafile.log  for Linux,  C:/users/your_name/ccnet/logs/seafile.log  for Windows) to see what's wrong.  Possible reasons:   Firewall: Ensure the firewall is configured properly. See  Firewall Settings for Seafile Server", 
            "title": "When downloading a library, the client hangs at \"connecting server\""
        }, 
        {
            "location": "/faq/#how-to-add-more-verbose-log-information-at-the-client", 
            "text": "Set environment variable  SEAFILE_DEBUG = all  before running Seafile desktop client. On Linux, you can open a terminal and type:   export SEAFILE_DEBUG=all\n./seafile-applet", 
            "title": "How to add more verbose log information at the client"
        }, 
        {
            "location": "/faq/#questions-about-server-setup", 
            "text": "", 
            "title": "Questions about server setup"
        }, 
        {
            "location": "/faq/#failed-to-uploaddownload-file-online", 
            "text": "Make sure you firewall for seafile fileserver is opened.  Make  SERVICE_URL  in ccnet.conf and  FILE_SERVER_ROOT  in seahub_settings.py are set correctly.  Using chrome/firefox debug mode to find which link is given when click download button and what's wrong with this link", 
            "title": "Failed to upload/download file online"
        }, 
        {
            "location": "/faq/#does-seafile-server-support-python-3", 
            "text": "No, You must have python 2.6.5+ or 2.7 installed on your server.", 
            "title": "Does Seafile server support Python 3?"
        }, 
        {
            "location": "/faq/#can-seafile-server-run-on-freebsd", 
            "text": "There was an unconfirmed solution on the internet, which later has vanished.\n(Please explain the installation routine if you successfully set up Seafile in FreeBSD.)", 
            "title": "Can Seafile server run on FreeBSD?"
        }, 
        {
            "location": "/faq/#website-displays-page-unavailable-what-can-i-do", 
            "text": "You can check the back trace in seahub log files( installation folder/logs/seahub_django_request.log )    You can also turn on debug by adding  DEBUG = True  to seahub_settings.py and restart seahub by  ./seahub.sh restart , then refresh that page, all the debug infomations will be displayed. Make sure ./seahub.sh was started as: ./seahub.sh start-fastcgi", 
            "title": "Website displays \"Page unavailable\", what can I do?"
        }, 
        {
            "location": "/faq/#avatar-pictures-vanished-after-upgrading-server-what-can-i-do", 
            "text": "You need to check whether the \"avatars\" symbolic link under seahub/media/ is correctly link to ../../../seahub-data/avatars. If not, you need to correct the link according to the \"minor upgrade\" section in  Upgrading-Seafile-Server    If your avatars link is correctly linked, and avatars are still broken, you may refresh seahub cache by  rm -rf /tmp/seahub_cache/*", 
            "title": "Avatar pictures vanished after upgrading server, what can I do?"
        }, 
        {
            "location": "/faq/#how-to-change-seafile-data-location-after-setup", 
            "text": "Modify file seafile.ini under ccnet. This file contains the location of seafile-data. Move seafile-data to another place, like  /opt/new/seafile-data . Then modify the file accordingly.", 
            "title": "How to change seafile-data location after setup?"
        }, 
        {
            "location": "/faq/#failed-to-send-email-what-can-i-do", 
            "text": "Please check logs/seahub.log.  There are some common mistakes:   Check whether there are some typos in the config, e.g., forget single quote,  EMAIL_HOST_USER = XXX , which should be  EMAIL_HOST_USER = 'XXX'  Your mail server is not available.", 
            "title": "Failed to send email, what can I do?"
        }, 
        {
            "location": "/faq/#after-upgrade-web-ui-is-broken-because-css-files-cant-be-loaded", 
            "text": "Please remove the cache and try again,  rm -rf /tmp/seahub_cache/* . If you configured memecached, restart memcached, then restart Seahub.  If the problem is not fixed, check whether seafile-server-latest point to the right folder. Then check whether  seafile-server-latest/seahub/media/CACHE  is correctly generated (it should contain the auto-generated CSS file).", 
            "title": "After upgrade Web UI is broken because CSS files can't be loaded"
        }, 
        {
            "location": "/faq/#questions-about-clustering", 
            "text": "", 
            "title": "Questions about Clustering"
        }, 
        {
            "location": "/faq/#page-layout-broken-because-seahubmediacache-is-created-only-on-first-node", 
            "text": "Please add  COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'  to seahub_settings.py as documented http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html  This will tell every node to generate the CSS CACHE in its local folder.", 
            "title": "Page layout broken because seahub/media/CACHE is created only on first node"
        }, 
        {
            "location": "/faq/#questions-about-server-maintenance", 
            "text": "", 
            "title": "Questions about server maintenance"
        }, 
        {
            "location": "/faq/#how-to-migrate-libraries-and-groups-from-one-account-to-another", 
            "text": "Since version 4.4.2, system admin can migrate libraries and groups from one account to another existing account using  RESTful web api .", 
            "title": "How to migrate libraries and groups from one account to another?"
        }, 
        {
            "location": "/faq/#seafile-gc-shows-errors-fsck-cant-fix-them", 
            "text": "GC scans the history. But FSCK only scan the currently version. You can ignore the error. It is a minor issue.", 
            "title": "Seafile GC shows errors, FSCK can\u2019t fix them"
        }, 
        {
            "location": "/faq/#questions-about-ldap-and-user-management", 
            "text": "", 
            "title": "Questions about LDAP and User management"
        }, 
        {
            "location": "/faq/#how-to-restrict-seafile-access-to-a-certain-accounts-in-ad", 
            "text": "You can use FILTER field in LDAP configuration in  ccnet.conf . For example, the following filter restricts the access to Seafile to members of a group.  FILTER = (memberOf=cn=group,cn=users,DC=x)  AD also supports groups within group. The following filter restricts the access to Seafile to members/groups of a group.  FILTER = (memberOf:1.2.840.113556.1.4.1941:=cn=group,cn=users,DC=x)  For more information on the Filter syntax, see http://msdn.microsoft.com/en-us/library/aa746475%28VS.85%29.aspx", 
            "title": "How to restrict Seafile access to a certain accounts in AD"
        }, 
        {
            "location": "/deploy/new_directory_layout_5_0_0/", 
            "text": "Config files location change in Seafile Server 5.0.0\n\n\nSeafile server has various components, each of them has its own config files. These files used to be in different directories, which is inconvenient to manage.\n\n\nThis is the layout before Seafile Server 5.0.0:\n\n\n\u2514\u2500\u2500 seahub_settings.py\n\u2514\u2500\u2500 ccnet/\n    \u2514\u2500\u2500 ccnet.conf\n\u2514\u2500\u2500 seafile/\n    \u2514\u2500\u2500 seafile.conf\n\u2514\u2500\u2500 conf/\n    \u2514\u2500\u2500 seafdav.conf\n\u2514\u2500\u2500 pro-data/\n    \u2514\u2500\u2500 seafevents.conf # (professional edition only)\n\u2514\u2500\u2500 seafile-server-latest/\n\n\n\n\nSince Seafile Server 5.0.0, all config files are moved to the \nconf\n folder:\n\n\n\u2514\u2500\u2500 conf/\n    \u2514\u2500\u2500 ccnet.conf\n    \u2514\u2500\u2500 seafile.conf\n    \u2514\u2500\u2500 seafdav.conf\n    \u2514\u2500\u2500 seahub_settings.py\n    \u2514\u2500\u2500 seafevents.conf # (professional edition only)\n\u2514\u2500\u2500 ccnet/\n\u2514\u2500\u2500 seafile/\n\u2514\u2500\u2500 pro-data/\n\n\n\n\nThis way, it's much easier to manage the configurations since all files can be found in the same place.\n\n\nWhen you upgrading to seafile 5.0.0, the upgrade script would move these files to the central \nconf/\n folder for you.", 
            "title": "New Directory Layout in Seafile Server 5.0.0"
        }, 
        {
            "location": "/deploy/new_directory_layout_5_0_0/#config-files-location-change-in-seafile-server-500", 
            "text": "Seafile server has various components, each of them has its own config files. These files used to be in different directories, which is inconvenient to manage.  This is the layout before Seafile Server 5.0.0:  \u2514\u2500\u2500 seahub_settings.py\n\u2514\u2500\u2500 ccnet/\n    \u2514\u2500\u2500 ccnet.conf\n\u2514\u2500\u2500 seafile/\n    \u2514\u2500\u2500 seafile.conf\n\u2514\u2500\u2500 conf/\n    \u2514\u2500\u2500 seafdav.conf\n\u2514\u2500\u2500 pro-data/\n    \u2514\u2500\u2500 seafevents.conf # (professional edition only)\n\u2514\u2500\u2500 seafile-server-latest/  Since Seafile Server 5.0.0, all config files are moved to the  conf  folder:  \u2514\u2500\u2500 conf/\n    \u2514\u2500\u2500 ccnet.conf\n    \u2514\u2500\u2500 seafile.conf\n    \u2514\u2500\u2500 seafdav.conf\n    \u2514\u2500\u2500 seahub_settings.py\n    \u2514\u2500\u2500 seafevents.conf # (professional edition only)\n\u2514\u2500\u2500 ccnet/\n\u2514\u2500\u2500 seafile/\n\u2514\u2500\u2500 pro-data/  This way, it's much easier to manage the configurations since all files can be found in the same place.  When you upgrading to seafile 5.0.0, the upgrade script would move these files to the central  conf/  folder for you.", 
            "title": "Config files location change in Seafile Server 5.0.0"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/", 
            "text": "Deploy with Windows\n\n\nSetup and Upgrade\n\n\nSeafile Windows Community Edition supports SQLite/MySQL database.\n\n\n\n\nDownload and Setup Seafile Windows Server\n\n\nDeploy Seafile with MySQL\n\n\nDeploy Seafile with Apache\n\n\nDeploy Seafile with Nginx\n\n\nLDAP Integration\n\n\nInstall Seafile Server as a Windows Service\n\n\nPorts used by Seafile Windows Server\n\n\nUpgrading Seafile Windows Server\n\n\nOptions \n Customization\n\n\n\n\nFor more information on Seafile server, check the documents on \nSeafile Linux version\n\n\nServer Administration\n\n\n\n\nGarbage Collecting Unused Blocks on Seafile Server\n\n\nRunning seaf-fsck on corrupted repositories\n\n\n\n\nCommon Issues\n\n\nIf you failed to set up Seafile server, first check seafserv-applet.log.\n\n\n\"ERROR: D:/seafile-server\\seahub.db not found\"\n\n\nThis file is created during Seafile initialization. Please:\n\n\n\n\nCheck whether your Python and the \nPATH\n for Python is correctly set.\n\n\nPut Seafile server package in a simple path, like \nC:\\seafile-packages\n.\n\n\n\n\nFailed to create seahub.db\n\n\nUse python version 2.7.4 32bit, do not use python 3+.\n\n\nCan not upload/download files in the Web interface\n\n\nMake sure you have modified \nSERVICE_URL\n in ccnet.conf.\n\n\nThe browser can't get the css and javascript files\n\n\n\n\nUse python 2.7.4 32bit. If you have installed other python version, uninstall it and install python 2.7.4. Restart seafile server to see whether the problem has gone.\n\n\nDelete non-ASCII keys from the registry path \nHKEY_CLASSES_ROOT\\MIME\\Database\\Content\n Type, and try again.", 
            "title": "Deploy with windows"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#deploy-with-windows", 
            "text": "", 
            "title": "Deploy with Windows"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#setup-and-upgrade", 
            "text": "Seafile Windows Community Edition supports SQLite/MySQL database.   Download and Setup Seafile Windows Server  Deploy Seafile with MySQL  Deploy Seafile with Apache  Deploy Seafile with Nginx  LDAP Integration  Install Seafile Server as a Windows Service  Ports used by Seafile Windows Server  Upgrading Seafile Windows Server  Options   Customization   For more information on Seafile server, check the documents on  Seafile Linux version", 
            "title": "Setup and Upgrade"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#server-administration", 
            "text": "Garbage Collecting Unused Blocks on Seafile Server  Running seaf-fsck on corrupted repositories", 
            "title": "Server Administration"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#common-issues", 
            "text": "If you failed to set up Seafile server, first check seafserv-applet.log.", 
            "title": "Common Issues"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#error-dseafile-serverseahubdb-not-found", 
            "text": "This file is created during Seafile initialization. Please:   Check whether your Python and the  PATH  for Python is correctly set.  Put Seafile server package in a simple path, like  C:\\seafile-packages .", 
            "title": "\"ERROR: D:/seafile-server\\seahub.db not found\""
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#failed-to-create-seahubdb", 
            "text": "Use python version 2.7.4 32bit, do not use python 3+.", 
            "title": "Failed to create seahub.db"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#can-not-uploaddownload-files-in-the-web-interface", 
            "text": "Make sure you have modified  SERVICE_URL  in ccnet.conf.", 
            "title": "Can not upload/download files in the Web interface"
        }, 
        {
            "location": "/deploy_windows/deploy_with_windows/#the-browser-cant-get-the-css-and-javascript-files", 
            "text": "Use python 2.7.4 32bit. If you have installed other python version, uninstall it and install python 2.7.4. Restart seafile server to see whether the problem has gone.  Delete non-ASCII keys from the registry path  HKEY_CLASSES_ROOT\\MIME\\Database\\Content  Type, and try again.", 
            "title": "The browser can't get the css and javascript files"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/", 
            "text": "Download and Setup Seafile Windows Server\n\n\nDownload/Uncompress\n\n\nInstall Python 2.7.4 32bit\n\n\n\n\nDownload and install \npython 2.7.4 32bit\n\n\nAdd the installation path of python2.7 to the system PATH environment variable. If you installed python 2.7 to \nC:\\Python27\n add \nC:\\Python27\n to the PATH environment variable\n\n\n\n\nWarning\n: Be sure to use Python 2.7.4 32bit. 64 bit and other versions can't work.\n\n\nDownload/Uncompress Seafile Server\n\n\n\n\nGet the latest version of Seafile Server program\n\n\nCreate a new folder to store seafile program, such as \nC:\\SeafileProgram\\\n. Please remember the location of the folder, we'll use it later.\n\n\nUncompress \nseafile-server_5.0.3_win32.tar.gz\n to \nC:\\SeafileProgram\\\n\n\n\n\nNow you have a folder like this:\n\n\nC:\\SeafileProgram\n         |__ seafile-server-5.0.3\n\n\n\n\nStart/Initialization\n\n\nStart Seafile Server\n\n\nGo to the folder \nC:\\SeafileProgram\\seafile-server-5.0.3\\\n, and double click run.bat to start Seafile Server. You should notice a seafile icon appears in the system tray.\nChoose a disk to store Seafile Server data\n\n\nNow you'll be prompted a dialog to choose a disk to store the data of seafile server\n\n\n\n\nPlease choose a disk with enough free space\n\n\nOnce you clicked the OK button, Seafile would create a folder named seafile-server under the disk you choosed. That would be the data folder of Seafile Server. If you choose disk D, your data folder would be \nD:\\seafile-server\n\n\n\n\nAdd an admin account\n\n\nRight click the tray icon of Seafile Server, choose \nAdd an admin\n. Input your admin username and password in the prompted dialog.\n\n\nIf the operation is successful, the tray icon would show a bubble saying \nSuccessully added the admin acount\n\n\nConfigure Seafile Server\n\n\nAfter initialization, there are some options need to be configured:\n\n\n\n\nRight click the tray icon, choose \nOpen seafile-server folder\n. Your seafile-server data folder would be opened.\n\n\nEdit the file \nconf/ccnet.conf\n. Modify the following line of \nccnet.conf\n:\n\n\n\n\nSERVICE_URL = XXX\n\n\n\n\n\n\nChange the value of \nSERVICE_URL\n to \nhttp://\nyour ip address\n:8000\n. Say the ip address of your windows server is 192.168.1.100, then change it to \nSERVICE_URL = http://192.168.1.100:8000\n\n\n\n\nAfter the edit, right click tray icon, choose \nRestart seafile\n\n\nVisit Seahub\n\n\nOpen your browser, and visit \nhttp://127.0.0.1:8000\n. Login with the admin account. If you can login, the initialization is successful.\nConfiguration done\n\n\nSeafile Server configuration is finished. See Seafile Client Manual for how to use the client\n\n\nYou may also want to read about:\n\n\n\n\nDeploy Seafile with MySQL\n\n\nDeploy Seafile with Apache\n\n\nDeploy Seafile with Nginx\n\n\nLDAP Integration\n\n\nInstall Seafile Server as a Windows Service\n\n\nPorts used by Seafile Windows Server\n\n\nUpgrading Seafile Windows Server\n\n\nOptions \n Customization", 
            "title": "Download and Setup Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#download-and-setup-seafile-windows-server", 
            "text": "", 
            "title": "Download and Setup Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#downloaduncompress", 
            "text": "", 
            "title": "Download/Uncompress"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#install-python-274-32bit", 
            "text": "Download and install  python 2.7.4 32bit  Add the installation path of python2.7 to the system PATH environment variable. If you installed python 2.7 to  C:\\Python27  add  C:\\Python27  to the PATH environment variable   Warning : Be sure to use Python 2.7.4 32bit. 64 bit and other versions can't work.", 
            "title": "Install Python 2.7.4 32bit"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#downloaduncompress-seafile-server", 
            "text": "Get the latest version of Seafile Server program  Create a new folder to store seafile program, such as  C:\\SeafileProgram\\ . Please remember the location of the folder, we'll use it later.  Uncompress  seafile-server_5.0.3_win32.tar.gz  to  C:\\SeafileProgram\\   Now you have a folder like this:  C:\\SeafileProgram\n         |__ seafile-server-5.0.3", 
            "title": "Download/Uncompress Seafile Server"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#startinitialization", 
            "text": "", 
            "title": "Start/Initialization"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#start-seafile-server", 
            "text": "Go to the folder  C:\\SeafileProgram\\seafile-server-5.0.3\\ , and double click run.bat to start Seafile Server. You should notice a seafile icon appears in the system tray.\nChoose a disk to store Seafile Server data  Now you'll be prompted a dialog to choose a disk to store the data of seafile server   Please choose a disk with enough free space  Once you clicked the OK button, Seafile would create a folder named seafile-server under the disk you choosed. That would be the data folder of Seafile Server. If you choose disk D, your data folder would be  D:\\seafile-server", 
            "title": "Start Seafile Server"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#add-an-admin-account", 
            "text": "Right click the tray icon of Seafile Server, choose  Add an admin . Input your admin username and password in the prompted dialog.  If the operation is successful, the tray icon would show a bubble saying  Successully added the admin acount", 
            "title": "Add an admin account"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#configure-seafile-server", 
            "text": "After initialization, there are some options need to be configured:   Right click the tray icon, choose  Open seafile-server folder . Your seafile-server data folder would be opened.  Edit the file  conf/ccnet.conf . Modify the following line of  ccnet.conf :   SERVICE_URL = XXX   Change the value of  SERVICE_URL  to  http:// your ip address :8000 . Say the ip address of your windows server is 192.168.1.100, then change it to  SERVICE_URL = http://192.168.1.100:8000   After the edit, right click tray icon, choose  Restart seafile", 
            "title": "Configure Seafile Server"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#visit-seahub", 
            "text": "Open your browser, and visit  http://127.0.0.1:8000 . Login with the admin account. If you can login, the initialization is successful.\nConfiguration done  Seafile Server configuration is finished. See Seafile Client Manual for how to use the client", 
            "title": "Visit Seahub"
        }, 
        {
            "location": "/deploy_windows/download_and_setup_seafile_windows_server/#you-may-also-want-to-read-about", 
            "text": "Deploy Seafile with MySQL  Deploy Seafile with Apache  Deploy Seafile with Nginx  LDAP Integration  Install Seafile Server as a Windows Service  Ports used by Seafile Windows Server  Upgrading Seafile Windows Server  Options   Customization", 
            "title": "You may also want to read about:"
        }, 
        {
            "location": "/deploy_windows/using_ldap/", 
            "text": "Configure Seafile to use LDAP\n\n\nNote: This documentation is for the Community Edition. If you're using Pro Edition, please refer to [the Seafile Pro documentation|../deploy_pro/using_ldap_pro.md].\n\n\nHow does LDAP User Management Works in Seafile\n\n\nWhen Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:\n\n\n\n\nUsers within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:\n\n\nNative users: these users are created by the admin on Seafile's system admin interface. These users are stored in the \nEmailUser\n table of the \nccnet\n database.\n\n\nUsers imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the \nLDAPUsers\n table of the \nccnet\n database.\n\n\n\n\n\n\nUsers in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.\n\n\n\n\nWhen Seafile counts the user number in the system, it only counts the \nactivated\n users in its internal database.\n\n\nWhen Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, it can log into the system.\n\n\nBasic LDAP/AD Integration\n\n\nThe only requirement for Seafile to use LDAP/AD for authentication is that, there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:\n\n\n\n\nEmail address: this is the most common choice. Most organizations assign unique email address for each member.\n\n\nUserPrincipalName: this is a user attribute only available in Active Directory. It's format is \nuser-login-name@domain-name\n, e.g. \njohn@example.com\n. It's not a real email address, but it works fine as the unique identifier.\n\n\n\n\nConnecting to Active Directory\n\n\nTo use AD to authenticate user, please add the following lines to ccnet.conf.\n\n\nIf you choose email address as unique identifier:\n\n\n[LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nIf you choose UserPrincipalName as unique identifier:\n\n\n[LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName\n\n\n\nMeaning of each config options:\n\n\n\n\nHOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.\n\n\nBASE: The root distinguished name (DN) to use when running queries against the directory server. \nYou cannot use the root DN (e.g. dc=example,dc=com) as BASE\n.\n\n\nUSER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.\n\n\nPASSWORD: Password of the above user.\n\n\nLOGIN_ATTR: The attribute used for user's unique identifier. Use \nmail\n or \nuserPrincipalName\n.\n\n\n\n\nTips for choosing BASE and USER_DN:\n\n\n\n\nTo determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.\n\n\nIf you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).\n\n\nIf you want to limit users to a certain OU (Organization Unit), you run \ndsquery\n command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found \nhere\n.\n\n\n\n\n\n\nAD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use \ndsquery\n command to find out user's DN. For example, if the user name is 'seafileuser', run \ndsquery user -name seafileuser\n. More information \nhere\n.\n\n\n\n\nConnecting to other LDAP servers\n\n\nPlease add the following options to ccnet.conf:\n\n\n[LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nThe meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use \nmail\n attribute as user's unique identifier.\n\n\nAdvanced LDAP/AD Integration Options\n\n\nMultiple BASE\n\n\nMultiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g. \nou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com\n\n\nAdditional Search Filter\n\n\nSearch filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).\n\n\nThe final filter used for searching for users is \n(\n($LOGIN_ATTR=*)($FILTER))\n. \n$LOGIN_ATTR\n and \n$FILTER\n will be replaced by your option values.\n\n\nFor example, add the following line to LDAP config:\n\n\nFILTER = memberOf=CN=group,CN=developers,DC=example,DC=com\n\n\n\n\nThe final search filter would be \n(\n(mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))\n\n\nNote that the cases in the above example is significant. The \nmemberOf\n attribute is only available in Active Directory.\n\n\nLimiting Seafile Users to a Group in Active Directory\n\n\nYou can use the FILTER option to limit user scope to a certain AD group.\n\n\n\n\nFirst, you should find out the DN for the group. Again, we'll use \ndsquery\n command on the domain controller. For example, if group name is 'seafilegroup', run \ndsquery group -name seafilegroup\n.\n\n\nAdd following line to LDAP config:\n\n\n\n\nFILTER = memberOf={output of dsquery command}", 
            "title": "Configure Seafile to use LDAP on Windows"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#configure-seafile-to-use-ldap", 
            "text": "Note: This documentation is for the Community Edition. If you're using Pro Edition, please refer to [the Seafile Pro documentation|../deploy_pro/using_ldap_pro.md].", 
            "title": "Configure Seafile to use LDAP"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#how-does-ldap-user-management-works-in-seafile", 
            "text": "When Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:   Users within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:  Native users: these users are created by the admin on Seafile's system admin interface. These users are stored in the  EmailUser  table of the  ccnet  database.  Users imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the  LDAPUsers  table of the  ccnet  database.    Users in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.   When Seafile counts the user number in the system, it only counts the  activated  users in its internal database.  When Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, it can log into the system.", 
            "title": "How does LDAP User Management Works in Seafile"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#basic-ldapad-integration", 
            "text": "The only requirement for Seafile to use LDAP/AD for authentication is that, there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:   Email address: this is the most common choice. Most organizations assign unique email address for each member.  UserPrincipalName: this is a user attribute only available in Active Directory. It's format is  user-login-name@domain-name , e.g.  john@example.com . It's not a real email address, but it works fine as the unique identifier.", 
            "title": "Basic LDAP/AD Integration"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#connecting-to-active-directory", 
            "text": "To use AD to authenticate user, please add the following lines to ccnet.conf.  If you choose email address as unique identifier:  [LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail  If you choose UserPrincipalName as unique identifier:  [LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName  Meaning of each config options:   HOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.  BASE: The root distinguished name (DN) to use when running queries against the directory server.  You cannot use the root DN (e.g. dc=example,dc=com) as BASE .  USER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.  PASSWORD: Password of the above user.  LOGIN_ATTR: The attribute used for user's unique identifier. Use  mail  or  userPrincipalName .   Tips for choosing BASE and USER_DN:   To determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.  If you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).  If you want to limit users to a certain OU (Organization Unit), you run  dsquery  command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found  here .    AD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use  dsquery  command to find out user's DN. For example, if the user name is 'seafileuser', run  dsquery user -name seafileuser . More information  here .", 
            "title": "Connecting to Active Directory"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#connecting-to-other-ldap-servers", 
            "text": "Please add the following options to ccnet.conf:  [LDAP]\nHOST = 192.168.1.123\nUSE_SSL = false\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail  The meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use  mail  attribute as user's unique identifier.", 
            "title": "Connecting to other LDAP servers"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#advanced-ldapad-integration-options", 
            "text": "", 
            "title": "Advanced LDAP/AD Integration Options"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#multiple-base", 
            "text": "Multiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g.  ou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com", 
            "title": "Multiple BASE"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#additional-search-filter", 
            "text": "Search filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  The final filter used for searching for users is  ( ($LOGIN_ATTR=*)($FILTER)) .  $LOGIN_ATTR  and  $FILTER  will be replaced by your option values.  For example, add the following line to LDAP config:  FILTER = memberOf=CN=group,CN=developers,DC=example,DC=com  The final search filter would be  ( (mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))  Note that the cases in the above example is significant. The  memberOf  attribute is only available in Active Directory.", 
            "title": "Additional Search Filter"
        }, 
        {
            "location": "/deploy_windows/using_ldap/#limiting-seafile-users-to-a-group-in-active-directory", 
            "text": "You can use the FILTER option to limit user scope to a certain AD group.   First, you should find out the DN for the group. Again, we'll use  dsquery  command on the domain controller. For example, if group name is 'seafilegroup', run  dsquery group -name seafilegroup .  Add following line to LDAP config:   FILTER = memberOf={output of dsquery command}", 
            "title": "Limiting Seafile Users to a Group in Active Directory"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/", 
            "text": "Deploy Seafile Windows Server With MySQL\n\n\nPreparation\n\n\n\n\nDownload and Setup Seafile Windows Server\n\n\nStop seafile windows server\n\n\nRight click the seafile server tray icon\n\n\nChoose \"Quit and shutdown Seafile Server\"\n\n\nMake sure your MySQL server is running\n\n\n\n\nInstall MySQL-python Library\n\n\n\n\ndownload the windows installer from https://pypi.python.org/pypi/MySQL-python/1.2.4\n\n\ninstall it by double clicking the downloaded exe file\n\n\n\n\nCreate MySQL Databases\n\n\nYou need to create:\n\n\n\n\ndatabases for ccnet/seafile/seahub\n\n\na new user to access these databases\n\n\n\n\nOpen a termial (cmd, Win + R, cmd) and login to mysql with a privileged user:\n\n\nmysql -u root -p\n\n\n\n\nExecute these SQL setences on your mysql server:\n\n\ncreate database `ccnet-db` character set = 'utf8';\ncreate database `seafile-db` character set = 'utf8';\ncreate database `seahub-db` character set = 'utf8';\n\ncreate user 'seafile'@'localhost' identified by 'your secure password';\n\nGRANT ALL PRIVILEGES ON `ccnet-db`.* to `seafile`;\nGRANT ALL PRIVILEGES ON `seafile-db`.* to `seafile`;\nGRANT ALL PRIVILEGES ON `seahub-db`.* to `seafile`;\n\n\n\n\nModify Your Seafile Configuations\n\n\n\n\nAppend the following lines to \nccnet/ccnet.conf\n:\n\n\n\n\n[Database]\nENGINE=mysql\nHOST=localhost\nUSER=seafile\nPASSWD=your secure password\nDB=ccnet-db\n\n\n\n\n\n\nEdit the \ndatabase\n section of \nseafile-data/seafile.conf\n:\n\n\n\n\n[database]\ntype=mysql\nhost=localhost\nuser=seafile\npassword=your secure password\ndb_name=seafile-db\n\n\n\n\n\n\nAppend following lines to \nseahub_settings.py\n\n\n\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME' : 'seahub-db',\n        'USER' : 'seafile',\n        'PASSWORD' : 'your secure password',\n        'HOST' : 'localhost',\n    }\n}\n\n\n\n\nCreate Database Tables for Seahub\n\n\nNow we create the database tables for seahub.\n\n\nAssume you have uncompressed seafile server to \nC:/SeafileProgram/seafile-pro-server-3.1.3\n,\n\n\nOpen a window command line prompt, and execute the following command:\n\n\nmysql -u seafile -p seahub-db \n C:/SeafileProgram/seafile-server-3.1.3/seahub/sql/mysql.sql\n\n\n\n\nDone\n\n\nNow you can start your seafile server.", 
            "title": "Deploy Seafile with MySQL"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#deploy-seafile-windows-server-with-mysql", 
            "text": "", 
            "title": "Deploy Seafile Windows Server With MySQL"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#preparation", 
            "text": "Download and Setup Seafile Windows Server  Stop seafile windows server  Right click the seafile server tray icon  Choose \"Quit and shutdown Seafile Server\"  Make sure your MySQL server is running", 
            "title": "Preparation"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#install-mysql-python-library", 
            "text": "download the windows installer from https://pypi.python.org/pypi/MySQL-python/1.2.4  install it by double clicking the downloaded exe file", 
            "title": "Install MySQL-python Library"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#create-mysql-databases", 
            "text": "You need to create:   databases for ccnet/seafile/seahub  a new user to access these databases   Open a termial (cmd, Win + R, cmd) and login to mysql with a privileged user:  mysql -u root -p  Execute these SQL setences on your mysql server:  create database `ccnet-db` character set = 'utf8';\ncreate database `seafile-db` character set = 'utf8';\ncreate database `seahub-db` character set = 'utf8';\n\ncreate user 'seafile'@'localhost' identified by 'your secure password';\n\nGRANT ALL PRIVILEGES ON `ccnet-db`.* to `seafile`;\nGRANT ALL PRIVILEGES ON `seafile-db`.* to `seafile`;\nGRANT ALL PRIVILEGES ON `seahub-db`.* to `seafile`;", 
            "title": "Create MySQL Databases"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#modify-your-seafile-configuations", 
            "text": "Append the following lines to  ccnet/ccnet.conf :   [Database]\nENGINE=mysql\nHOST=localhost\nUSER=seafile\nPASSWD=your secure password\nDB=ccnet-db   Edit the  database  section of  seafile-data/seafile.conf :   [database]\ntype=mysql\nhost=localhost\nuser=seafile\npassword=your secure password\ndb_name=seafile-db   Append following lines to  seahub_settings.py   DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME' : 'seahub-db',\n        'USER' : 'seafile',\n        'PASSWORD' : 'your secure password',\n        'HOST' : 'localhost',\n    }\n}", 
            "title": "Modify Your Seafile Configuations"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#create-database-tables-for-seahub", 
            "text": "Now we create the database tables for seahub.  Assume you have uncompressed seafile server to  C:/SeafileProgram/seafile-pro-server-3.1.3 ,  Open a window command line prompt, and execute the following command:  mysql -u seafile -p seahub-db   C:/SeafileProgram/seafile-server-3.1.3/seahub/sql/mysql.sql", 
            "title": "Create Database Tables for Seahub"
        }, 
        {
            "location": "/deploy_windows/deploy_with_mysql/#done", 
            "text": "Now you can start your seafile server.", 
            "title": "Done"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/", 
            "text": "Deploy Seafile with Apache\n\n\nPreparation\n\n\nInstall mod_fastcgi\n\n\nDownload [mod_fastcgi-*.dll] (http://fastcgi.com/dist/) first, and put it into the \nmodules/\n directory of your Apache installation.\n\n\nNote\n: You must download the right version of \nmod_fastcgi\n DLL according for your Apache. For example:\n\n\n\n\nIf you are using Apache 2.2, you should download http://fastcgi.com/dist/mod_fastcgi-2.4.6-AP22.dll. The \nAP22\n part of the dll indicate it's for Apache \n2.2\n.\n\n\nIf you are using Apache 2.0, you should download http://fastcgi.com/dist/old/mod_fastcgi-2.4.2-AP20.dll\n\n\n\n\nDeploy Seahub/FileServer With Apache\n\n\nSeahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.\n\n\nHere we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.\n\n\nEdit httpd.conf\n\n\nFirst edit your \nhttpd.conf\n. Add the following lines to \nthe end of the file\n:\n\n\nLoadModule fastcgi_module modules/mod_fastcgi-2.4.6-AP22.dll\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nInclude conf/extra/httpd-vhosts.conf\n\n\n\n\nThen add this line (substitute \nYourDocumentRoot\n with the value of your apache \nDocumentRoot\n)\n\n\nFastCGIExternalServer \nYourDocumentRoot/seahub.fcgi\n -host 127.0.0.1:8000\n\n\n\n\nNote, \nseahub.fcgi\n is just a placeholder, you don't need to actually have this file in your system.\n\n\nEdit your httpd-vhosts.conf\n\n\nAssume you have uncompresssed seafile server into \nC:/SeafileProgram/seafile-pro-server-2.1.4\n.\n\n\nVirtualHost *:80\n\n  ServerName www.myseafile.com\n  Alias /media  \nC:/SeafileProgram/seafile-pro-server-2.1.4/seahub/media\n\n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]\n  RewriteCond %{REQUEST_FILENAME} !-f\n  RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]\n\n/VirtualHost\n\n\n\nDirectory \nC:/SeafileProgram/seafile-pro-server-2.1.4/seahub/media\n\n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    Allow from all\n\n/Directory\n\n\n\n\n\nModify Configurations\n\n\nModify ccnet.conf\n\n\nSERVICE_URL = http://www.myseafile.com\n\n\n\n\nNote: If you later change the domain assigned to seahub, you also need to change the value of  \nSERVICE_URL\n.\n\n\nModify seafile-data/seafile.conf\n\n\nModify the \nseahub\n section of \nseafile-data/seafile.conf\n:\n\n\n[seahub]\nport=8000\nfastcgi=true\n\n\n\n\nModify seahub_settings.py\n\n\nYou need to add a line in \nseahub_settings.py\n to set the value of \nFILE_SERVER_ROOT\n\n\nFILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'\n\n\n\n\nNotes when Upgrading Seafile Server\n\n\nWhen upgrading seafile server, besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your apache configuration'''. For example, assume your are upgrading seafile server 2.1.4 to 2.1.5, then:\n\n\nVirtualHost *:80\n\n  ...\n  Alias /media  \nC:/SeafileProgram/seafile-pro-server-2.1.5/seahub/media\n\n  ...\n\n/VirtualHost\n\n\n\nDirectory \nC:/SeafileProgram/seafile-pro-server-2.1.5/seahub/media\n\n  ...\n\n/Directory", 
            "title": "Deploy Seafile with Apache"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#deploy-seafile-with-apache", 
            "text": "", 
            "title": "Deploy Seafile with Apache"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#preparation", 
            "text": "", 
            "title": "Preparation"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#install-mod_fastcgi", 
            "text": "Download [mod_fastcgi-*.dll] (http://fastcgi.com/dist/) first, and put it into the  modules/  directory of your Apache installation.  Note : You must download the right version of  mod_fastcgi  DLL according for your Apache. For example:   If you are using Apache 2.2, you should download http://fastcgi.com/dist/mod_fastcgi-2.4.6-AP22.dll. The  AP22  part of the dll indicate it's for Apache  2.2 .  If you are using Apache 2.0, you should download http://fastcgi.com/dist/old/mod_fastcgi-2.4.2-AP20.dll", 
            "title": "Install mod_fastcgi"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#deploy-seahubfileserver-with-apache", 
            "text": "Seahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.  Here we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.", 
            "title": "Deploy Seahub/FileServer With Apache"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#edit-httpdconf", 
            "text": "First edit your  httpd.conf . Add the following lines to  the end of the file :  LoadModule fastcgi_module modules/mod_fastcgi-2.4.6-AP22.dll\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\nInclude conf/extra/httpd-vhosts.conf  Then add this line (substitute  YourDocumentRoot  with the value of your apache  DocumentRoot )  FastCGIExternalServer  YourDocumentRoot/seahub.fcgi  -host 127.0.0.1:8000  Note,  seahub.fcgi  is just a placeholder, you don't need to actually have this file in your system.", 
            "title": "Edit httpd.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#edit-your-httpd-vhostsconf", 
            "text": "Assume you have uncompresssed seafile server into  C:/SeafileProgram/seafile-pro-server-2.1.4 .  VirtualHost *:80 \n  ServerName www.myseafile.com\n  Alias /media   C:/SeafileProgram/seafile-pro-server-2.1.4/seahub/media \n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # seahub\n  #\n  RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]\n  RewriteCond %{REQUEST_FILENAME} !-f\n  RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}] /VirtualHost  Directory  C:/SeafileProgram/seafile-pro-server-2.1.4/seahub/media \n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Order allow,deny\n    Allow from all /Directory", 
            "title": "Edit your httpd-vhosts.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#modify-configurations", 
            "text": "", 
            "title": "Modify Configurations"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#modify-ccnetconf", 
            "text": "SERVICE_URL = http://www.myseafile.com  Note: If you later change the domain assigned to seahub, you also need to change the value of   SERVICE_URL .", 
            "title": "Modify ccnet.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#modify-seafile-dataseafileconf", 
            "text": "Modify the  seahub  section of  seafile-data/seafile.conf :  [seahub]\nport=8000\nfastcgi=true", 
            "title": "Modify seafile-data/seafile.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#modify-seahub_settingspy", 
            "text": "You need to add a line in  seahub_settings.py  to set the value of  FILE_SERVER_ROOT  FILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'", 
            "title": "Modify seahub_settings.py"
        }, 
        {
            "location": "/deploy_windows/deploy_with_apache/#notes-when-upgrading-seafile-server", 
            "text": "When upgrading seafile server, besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your apache configuration'''. For example, assume your are upgrading seafile server 2.1.4 to 2.1.5, then:  VirtualHost *:80 \n  ...\n  Alias /media   C:/SeafileProgram/seafile-pro-server-2.1.5/seahub/media \n  ... /VirtualHost  Directory  C:/SeafileProgram/seafile-pro-server-2.1.5/seahub/media \n  ... /Directory", 
            "title": "Notes when Upgrading Seafile Server"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/", 
            "text": "Deploy Seafile with Nginx\n\n\nDeploy Seahub/FileServer with Nginx\n\n\nSeahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.\n\n\nHere we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.\n\n\nThis is a sample Nginx config file.\n\n\nserver {\n    listen 80;\n    server_name www.myseafile.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location / {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n        fastcgi_param   REMOTE_ADDR         $remote_addr;\n\n        access_log      logs/seahub.access.log;\n        error_log       logs/seahub.error.log;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n    }\n\n    location /media {\n        root C:/SeafileProgram/seafile-pro-server-2.1.4/seahub;\n    }\n}\n\n\n\n\nModify Configurations\n\n\nModify ccnet.conf\n\n\nSERVICE_URL = http://www.myseafile.com\n\n\n\n\nNote: If you later change the domain assigned to seahub, you also need to change the value of  \nSERVICE_URL\n.\n\n\nModify seafile-data/seafile.conf\n\n\nModify the \nseahub\n section of \nseafile-data/seafile.conf\n:\n\n\n[seahub]\nport=8000\nfastcgi=true\n\n\n\n\nModify seahub_settings.py\n\n\nYou need to add a line in \nseahub_settings.py\n to set the value of \nFILE_SERVER_ROOT\n\n\nFILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'\n\n\n\n\nNotes when Upgrading Seafile Server\n\n\nWhen upgrading seafile server, besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your nginx configuration'''. For example, assume your are upgrading seafile server 2.1.0 to 2.1.1, then:\n\n\n    location /media {\n        root C:/SeafileProgram/seafile-pro-server-2.1.1/seahub;\n    }", 
            "title": "Deploy Seafile with Nginx"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#deploy-seafile-with-nginx", 
            "text": "", 
            "title": "Deploy Seafile with Nginx"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#deploy-seahubfileserver-with-nginx", 
            "text": "Seahub is the web interface of Seafile server. FileServer is used to handle raw file uploading/downloading through browsers. By default, it listens on port 8082 for HTTP request.  Here we deploy Seahub using fastcgi, and deploy FileServer with reverse proxy. We assume you are running Seahub using domain '''www.myseafile.com'''.  This is a sample Nginx config file.  server {\n    listen 80;\n    server_name www.myseafile.com;\n\n    proxy_set_header X-Forwarded-For $remote_addr;\n\n    location / {\n        fastcgi_pass    127.0.0.1:8000;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n        fastcgi_param   REMOTE_ADDR         $remote_addr;\n\n        access_log      logs/seahub.access.log;\n        error_log       logs/seahub.error.log;\n    }\n\n    location /seafhttp {\n        rewrite ^/seafhttp(.*)$ $1 break;\n        proxy_pass http://127.0.0.1:8082;\n        client_max_body_size 0;\n    }\n\n    location /media {\n        root C:/SeafileProgram/seafile-pro-server-2.1.4/seahub;\n    }\n}", 
            "title": "Deploy Seahub/FileServer with Nginx"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#modify-configurations", 
            "text": "", 
            "title": "Modify Configurations"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#modify-ccnetconf", 
            "text": "SERVICE_URL = http://www.myseafile.com  Note: If you later change the domain assigned to seahub, you also need to change the value of   SERVICE_URL .", 
            "title": "Modify ccnet.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#modify-seafile-dataseafileconf", 
            "text": "Modify the  seahub  section of  seafile-data/seafile.conf :  [seahub]\nport=8000\nfastcgi=true", 
            "title": "Modify seafile-data/seafile.conf"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#modify-seahub_settingspy", 
            "text": "You need to add a line in  seahub_settings.py  to set the value of  FILE_SERVER_ROOT  FILE_SERVER_ROOT = 'http://www.myseafile.com/seafhttp'", 
            "title": "Modify seahub_settings.py"
        }, 
        {
            "location": "/deploy_windows/deploy_with_nginx/#notes-when-upgrading-seafile-server", 
            "text": "When upgrading seafile server, besides the normal steps you should take, there is one extra step to do: '''Update the path of the static files in your nginx configuration'''. For example, assume your are upgrading seafile server 2.1.0 to 2.1.1, then:      location /media {\n        root C:/SeafileProgram/seafile-pro-server-2.1.1/seahub;\n    }", 
            "title": "Notes when Upgrading Seafile Server"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/", 
            "text": "Install Seafile Server as a Windows Service\n\n\nWhy you may want to install Seafile Server as a Windows service\n\n\n\n\nSeafile Server can keep on running after all users logout\n\n\nWhen system boots up, Seafile Server would start running even if no user has logged in\n\n\n\n\nInstall as a service\n\n\n\n\nRight click the tray icon, choose \nInstall as a Windows service\n\n\nChoose \nyes\n in the propmted dialog\n\n\n\n\nIf the operation succeeds, A dialog would be prompted saying \nSuccessully installed seafile service\n.\n\n\nVerify Seafile Server already running as a Windows service\n\n\n\n\nLogout the current user\n\n\nVisit seahub from another computer. If the seahub website can still be visited, Seafile server is already running as a Windows server\n\n\n\n\nHow to start the tray icon after installing as a service\n\n\nIf you have installed seafile server as a service, it would run automatically in the background the next time you boot your system. However, the tray icon would not appear automatically when a user logins in.\n\n\nTo start the tray icon, just doule click the \nrun.bat\n file in the folder \nC:\\SeafileProgram\\seafile-server-1.7.0\n\nUninstall Seafile Server Windows service\n\n\nIf you want to uninstall the Seafile Server service:\n\n\n\n\nRight click the tray icon, choose \"Uninstall Windows service\"\n\n\nChoose \"yes\" in the propmted dialog", 
            "title": "Install Seafile Server as a Windows Service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#install-seafile-server-as-a-windows-service", 
            "text": "", 
            "title": "Install Seafile Server as a Windows Service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#why-you-may-want-to-install-seafile-server-as-a-windows-service", 
            "text": "Seafile Server can keep on running after all users logout  When system boots up, Seafile Server would start running even if no user has logged in", 
            "title": "Why you may want to install Seafile Server as a Windows service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#install-as-a-service", 
            "text": "Right click the tray icon, choose  Install as a Windows service  Choose  yes  in the propmted dialog   If the operation succeeds, A dialog would be prompted saying  Successully installed seafile service .", 
            "title": "Install as a service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#verify-seafile-server-already-running-as-a-windows-service", 
            "text": "Logout the current user  Visit seahub from another computer. If the seahub website can still be visited, Seafile server is already running as a Windows server", 
            "title": "Verify Seafile Server already running as a Windows service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#how-to-start-the-tray-icon-after-installing-as-a-service", 
            "text": "If you have installed seafile server as a service, it would run automatically in the background the next time you boot your system. However, the tray icon would not appear automatically when a user logins in.  To start the tray icon, just doule click the  run.bat  file in the folder  C:\\SeafileProgram\\seafile-server-1.7.0 \nUninstall Seafile Server Windows service", 
            "title": "How to start the tray icon after installing as a service"
        }, 
        {
            "location": "/deploy_windows/install_seafile_server_as_a_windows_service/#if-you-want-to-uninstall-the-seafile-server-service", 
            "text": "Right click the tray icon, choose \"Uninstall Windows service\"  Choose \"yes\" in the propmted dialog", 
            "title": "If you want to uninstall the Seafile Server service:"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/", 
            "text": "Ports used by Seafile Windows Server\n\n\nSeafile server has two components, so two TCP ports are used.\n\n\nThe two configuration files\n\n\nAll ports related configuration are recorded in \nccnet.conf\n and \nseafile.conf\n.\n\n\nHow to open \nccnet.conf\n\n\n\n\nRight click the seafile server trayicon, choose \nOpen seafile-server folder\n\n\nOpen the folder \nccnet\n under \nseafile-server\n folder. The file \nccnet.conf\n is there.\n\n\n\n\nHow to open \nseafile.conf\n\n\n\n\nRight click the seafile server trayicon, choose \nOpen seafile-server folder\n\n\nOpen the folder \nseafile-data\n under \nseafile-server\n folder. The file \nseafile.conf\n is there.\n\n\n\n\nIn the following section we list the TCP ports used by each of seafile components, as well as how to change them (For example, some port may have already been used by some other application).\n\n\nNote\n: If you change any of the ports, you have to restart seafile server.\n\n\nseafile fileserver\n\n\nseafile fileserver handles raw file upload/download for Seahub\n\n\n\n\ndefault: 8082\n\n\nHow to change: The Seafile desktop client will try to connect this port for file syncing. Don't change this port.\n\n\n\n\nseahub\n\n\nseahub is the web interface of seafile server.\n\n\nNote\n: If you change the port of seahub, you need to change the \nSERVICE_URL\n in \nccnet.conf\n.\n\n\n\n\ndefault: 8000\n\n\nHow to change: Edit the file \nseafile.conf\n. Change the value of port under the seahub section. (This is added in Seafile Windows Server 1.7.0.1)\n\n\n\n\n[seahub]\nport=8000\n\n\n\n\n\n\nEdit the file \nccnet.conf\n, modify the value of \nSERVICE_URL\n accordingly. For example, if you have changed the port to 8001, then modify the value of \nSERVICE_URL\n accordingly:\n\n\n\n\n[General]\nSERVICE_URL = \nYour IP OR DOMAIN\n:8001", 
            "title": "Ports used by Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#ports-used-by-seafile-windows-server", 
            "text": "Seafile server has two components, so two TCP ports are used.", 
            "title": "Ports used by Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#the-two-configuration-files", 
            "text": "All ports related configuration are recorded in  ccnet.conf  and  seafile.conf .", 
            "title": "The two configuration files"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#how-to-open-ccnetconf", 
            "text": "Right click the seafile server trayicon, choose  Open seafile-server folder  Open the folder  ccnet  under  seafile-server  folder. The file  ccnet.conf  is there.", 
            "title": "How to open ccnet.conf"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#how-to-open-seafileconf", 
            "text": "Right click the seafile server trayicon, choose  Open seafile-server folder  Open the folder  seafile-data  under  seafile-server  folder. The file  seafile.conf  is there.   In the following section we list the TCP ports used by each of seafile components, as well as how to change them (For example, some port may have already been used by some other application).  Note : If you change any of the ports, you have to restart seafile server.", 
            "title": "How to open seafile.conf"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#seafile-fileserver", 
            "text": "seafile fileserver handles raw file upload/download for Seahub   default: 8082  How to change: The Seafile desktop client will try to connect this port for file syncing. Don't change this port.", 
            "title": "seafile fileserver"
        }, 
        {
            "location": "/deploy_windows/ports_used_by_seafile_windows_server/#seahub", 
            "text": "seahub is the web interface of seafile server.  Note : If you change the port of seahub, you need to change the  SERVICE_URL  in  ccnet.conf .   default: 8000  How to change: Edit the file  seafile.conf . Change the value of port under the seahub section. (This is added in Seafile Windows Server 1.7.0.1)   [seahub]\nport=8000   Edit the file  ccnet.conf , modify the value of  SERVICE_URL  accordingly. For example, if you have changed the port to 8001, then modify the value of  SERVICE_URL  accordingly:   [General]\nSERVICE_URL =  Your IP OR DOMAIN :8001", 
            "title": "seahub"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/", 
            "text": "Upgrading Seafile Windows Server\n\n\n\n\nMinor Upgrade\n\n\nMajor Upgrade\n\n\nUpgrade Windows Service\n\n\n\n\nNote\n\uff1aYou must shutdown seafile server before you upgrade.\n\n\nUncompress the new version of Seafile Server\n\n\nBefore you upgrade, assume you have:\n\n\nC:/SeafileProgram\n             |______ seafile-server-3.0.0/\n\n\n\n\nThen the first step is to download the new version of Seafile Server and uncompress it to \nC:/SeafileProgram\n. After this you should have:\n\n\nC:/SeafileProgram\n             |______ seafile-server-3.0.0/\n             |______ seafile-server-3.1.0/\n\n\n\n\nMinor upgrade (like upgrade from 3.0.0 to 3.0.1)\n\n\nNow assume you are upgrading from Seafile Windows Server 3.0.0 to 3.0.1\n\n\nMove the contents of the avatars folder\n\n\nGo to the folder \nseafile-server-3.0.0/seahub/media/avatars\n\n\nThe \navatars\n folder contains all the avatars uploaded by seafile users.\n\n\nIf you have a user \nfoo@foo.com\n, then in this folder, you will find a subfolder \nfoo@foo.com\n. This subfolder contains the avatar pictures of the user \nfoo@foo.com\n.\n\n\nCopy all subfolders like \nfoo@foo.com\n to \nseafile-server-3.0.1/seahub/media/avatars\n. So that when you start the new seafile 3.0.1 server, these avatars can be load correctly.\n\n\nMajor upgrade (like upgrade from 3.0.0 to 3.1.0)\n\n\nNow assume you are upgrading from Seafile Windows Server 3.0.x to 3.1.y:\n\n\nRun the major upgrade script\n\n\nRun the database upgrade script\n\n\n\n\nGo to seafile-server-3.1.y/upgrade\n\n\nRight click the file \nupgrade_3.0_3.1.bat\n\n\nChoose \"run as administrator\"\n\n\n\n\nIf you're using MySQL, you need to manually upgrade the database yourself:\n\n\n\n\nGo to the folder seafile-server-3.1.y/upgrade/sql/3.1.0/mysql/\n\n\nIf there are a file \nccnet.sql\n, run it with the \nccnet-db\n database\n\n\n\n\nmysql ccnet-db \n ccnet.sql\n\n\n\n\n\n\nIf there are a file \nseafile.sql\n, run it with the \nseafile-db\n database\n\n\n\n\nmysql ccnet-db \n seafile.sql\n\n\n\n\n\n\nIf there are a file \nseahub.sql\n, run it with the \nseahub-db\n database\n\n\n\n\nmysql seahub-db \n seafile.sql\n\n\n\n\nCopy avatars\n\n\nCopy all subfolders of \nseafile-server-3.0.0/seahub/media/avatars\n to \nseafile-server-3.1.0/seahub/media/avatars\n\n\nUpgrading Windows Service\n\n\nIf you have installed Seafile server as a Windows Service, you need to:\n\n\n\n\nRun the old version of seafile windows server, right click the tray icon, and choose uninstall windows service in the menu\n\n\nExit the old version of seafile windows server\n\n\nStart the new version of seafile windows server, right click the tray icon, and choose install as windows service in the menu", 
            "title": "Upgrading Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#upgrading-seafile-windows-server", 
            "text": "Minor Upgrade  Major Upgrade  Upgrade Windows Service   Note \uff1aYou must shutdown seafile server before you upgrade.", 
            "title": "Upgrading Seafile Windows Server"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#uncompress-the-new-version-of-seafile-server", 
            "text": "Before you upgrade, assume you have:  C:/SeafileProgram\n             |______ seafile-server-3.0.0/  Then the first step is to download the new version of Seafile Server and uncompress it to  C:/SeafileProgram . After this you should have:  C:/SeafileProgram\n             |______ seafile-server-3.0.0/\n             |______ seafile-server-3.1.0/", 
            "title": "Uncompress the new version of Seafile Server"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#minor-upgrade-like-upgrade-from-300-to-301", 
            "text": "Now assume you are upgrading from Seafile Windows Server 3.0.0 to 3.0.1", 
            "title": "Minor upgrade (like upgrade from 3.0.0 to 3.0.1)"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#move-the-contents-of-the-avatars-folder", 
            "text": "Go to the folder  seafile-server-3.0.0/seahub/media/avatars  The  avatars  folder contains all the avatars uploaded by seafile users.  If you have a user  foo@foo.com , then in this folder, you will find a subfolder  foo@foo.com . This subfolder contains the avatar pictures of the user  foo@foo.com .  Copy all subfolders like  foo@foo.com  to  seafile-server-3.0.1/seahub/media/avatars . So that when you start the new seafile 3.0.1 server, these avatars can be load correctly.", 
            "title": "Move the contents of the avatars folder"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#major-upgrade-like-upgrade-from-300-to-310", 
            "text": "Now assume you are upgrading from Seafile Windows Server 3.0.x to 3.1.y:", 
            "title": "Major upgrade (like upgrade from 3.0.0 to 3.1.0)"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#run-the-major-upgrade-script", 
            "text": "Run the database upgrade script   Go to seafile-server-3.1.y/upgrade  Right click the file  upgrade_3.0_3.1.bat  Choose \"run as administrator\"   If you're using MySQL, you need to manually upgrade the database yourself:   Go to the folder seafile-server-3.1.y/upgrade/sql/3.1.0/mysql/  If there are a file  ccnet.sql , run it with the  ccnet-db  database   mysql ccnet-db   ccnet.sql   If there are a file  seafile.sql , run it with the  seafile-db  database   mysql ccnet-db   seafile.sql   If there are a file  seahub.sql , run it with the  seahub-db  database   mysql seahub-db   seafile.sql", 
            "title": "Run the major upgrade script"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#copy-avatars", 
            "text": "Copy all subfolders of  seafile-server-3.0.0/seahub/media/avatars  to  seafile-server-3.1.0/seahub/media/avatars", 
            "title": "Copy avatars"
        }, 
        {
            "location": "/deploy_windows/upgrading_seafile_windows_server/#upgrading-windows-service", 
            "text": "If you have installed Seafile server as a Windows Service, you need to:   Run the old version of seafile windows server, right click the tray icon, and choose uninstall windows service in the menu  Exit the old version of seafile windows server  Start the new version of seafile windows server, right click the tray icon, and choose install as windows service in the menu", 
            "title": "Upgrading Windows Service"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/", 
            "text": "Migrate From Windows to Linux\n\n\nThis tutorial show you how to migrate Seafile form Windows(using SQLite) to Linux.\n\n\n1. Deploying Seafile Under Linux\n\n\nFirst, you should \nDeploy Seafile with SQLite\n. And we assume that you deploy Seafile under \n/home/haiwen/\n directory.\n\n\n2. Replace Config Files And Databases\n\n\nDelete config files and databases in Linux\n\n\nrm /home/haiwen/seahub_settings.py\nrm /home/haiwen/seahub.db\nrm -r /home/haiwen/seafile-data\ncp /home/haiwen/ccnet/seafile.ini /home/haiwen/seafile.ini\nrm -r /home/haiwen/ccnet\n\n\n\n\n\n\nNote: \nseafile.ini\n is used to record the path to \nseafile-data\n, we will use it later, so we just copy it out, not delete it.\n\n\n\n\nCopy config files and databases to Linux\n\n\n\n\n\n\ncopy file \nseahub_settings.py\n from Windows \nseafile-server\n to Linux \n/home/haiwen/\n;\n\n\n\n\n\n\ncopy file \nseahub.db\n from Windows \nseafile-server\n to Linux \n/home/haiwen/\n;\n\n\n\n\n\n\ncopy sub-directory \nseafile-data\n from Windows \nseafile-server\n to Linux \n/home/haiwen/\n;\n\n\n\n\n\n\ncopy sub-directory \nccnet\n from Windows \nseafile-server\n to Linux \n/home/haiwen/\n;\n\n\n\n\n\n\ncopy \n/home/haiwen/seafile.ini\n to new Linux \nccnet\n directory.\n\n\n\n\n\n\nStart Seafile\n\n\n./seafile.sh start\n./seahub.sh start", 
            "title": "Migrate Seafile From Windows To Linux"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#migrate-from-windows-to-linux", 
            "text": "This tutorial show you how to migrate Seafile form Windows(using SQLite) to Linux.", 
            "title": "Migrate From Windows to Linux"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#1-deploying-seafile-under-linux", 
            "text": "First, you should  Deploy Seafile with SQLite . And we assume that you deploy Seafile under  /home/haiwen/  directory.", 
            "title": "1. Deploying Seafile Under Linux"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#2-replace-config-files-and-databases", 
            "text": "", 
            "title": "2. Replace Config Files And Databases"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#delete-config-files-and-databases-in-linux", 
            "text": "rm /home/haiwen/seahub_settings.py\nrm /home/haiwen/seahub.db\nrm -r /home/haiwen/seafile-data\ncp /home/haiwen/ccnet/seafile.ini /home/haiwen/seafile.ini\nrm -r /home/haiwen/ccnet   Note:  seafile.ini  is used to record the path to  seafile-data , we will use it later, so we just copy it out, not delete it.", 
            "title": "Delete config files and databases in Linux"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#copy-config-files-and-databases-to-linux", 
            "text": "copy file  seahub_settings.py  from Windows  seafile-server  to Linux  /home/haiwen/ ;    copy file  seahub.db  from Windows  seafile-server  to Linux  /home/haiwen/ ;    copy sub-directory  seafile-data  from Windows  seafile-server  to Linux  /home/haiwen/ ;    copy sub-directory  ccnet  from Windows  seafile-server  to Linux  /home/haiwen/ ;    copy  /home/haiwen/seafile.ini  to new Linux  ccnet  directory.", 
            "title": "Copy config files and databases to Linux"
        }, 
        {
            "location": "/deploy_windows/migrate_from_win_to_linux/#start-seafile", 
            "text": "./seafile.sh start\n./seahub.sh start", 
            "title": "Start Seafile"
        }, 
        {
            "location": "/deploy_windows/windows_gc/", 
            "text": "Garbage Collecting Unused Blocks on Seafile Server\n\n\n\n\nStop your seafile server by right clicking the server tray icon, and choose \nQuit and shutdown Seafile Server\n\n\nIn file explorer, navigate to the seafile program folder \nseafile-server-3.x.x\n\n\nRight click the file \ngc.bat\n, and choose \nRun with admin privileges\n\n\n\n\nThe garbage collection program would run and remove all unused blocks.", 
            "title": "Garbage Collecting Unused Blocks on Seafile Server"
        }, 
        {
            "location": "/deploy_windows/windows_gc/#garbage-collecting-unused-blocks-on-seafile-server", 
            "text": "Stop your seafile server by right clicking the server tray icon, and choose  Quit and shutdown Seafile Server  In file explorer, navigate to the seafile program folder  seafile-server-3.x.x  Right click the file  gc.bat , and choose  Run with admin privileges   The garbage collection program would run and remove all unused blocks.", 
            "title": "Garbage Collecting Unused Blocks on Seafile Server"
        }, 
        {
            "location": "/deploy_windows/windows_fsck/", 
            "text": "Running seaf-fsck on corrupted repositories\n\n\nFor the time being there is no batch file available for running \nseaf-fsck.exe\n in a Windows environment.\nTo manually run \nseaf-fsck.exe\n, follow the following procedure (assuming you've installed Seafile server to \nX:\\Seafile\\\n:\n\n\n\n\nOpen a command prompt by following \neither\n of these steps\n\n\nClick \nStart\n, \nRun\n, enter \ncmd.exe\n and then navigate to the binary folder by entering \ncd /d X:\\Seafile\\seafile-server-5.x.x\\seafile\\bin\n\n\nOr, using the file explorer:\n\n\nNavigate to the folder where the binaries are located (\nX:\\Seafile\\seafile-server-5.x.x\\seafile\\bin\n)\n\n\nHold shift and right click in free space to bring up the context menu, then select \nOpen command window here\n\n\n\n\n\n\nEnter the following inside the opened command prompt: \nseaf-fsck.exe --repair -c Y:\\seafile-user\\ccnet -d Y:\\seafile-user\\seafile-data -F Y:\\seafile-user\\conf\n\n\nseafile-user\n is the folder your Seafile data is stored in\n\n\nMake sure you are pointing \nseaf-fsck.exe\n towards the correct directory: \nccnet\n, \nseafile-data\n and \nconf\n folders must be present\n\n\nseaf-fsck\n should be running now\n\n\n\n\nFor information on \nseaf-fsck\n, its usage and syntax, see the chapter \nSeafile FSCK\n.", 
            "title": "Running seaf-fsck on corrupted repositories"
        }, 
        {
            "location": "/deploy_windows/windows_fsck/#running-seaf-fsck-on-corrupted-repositories", 
            "text": "For the time being there is no batch file available for running  seaf-fsck.exe  in a Windows environment.\nTo manually run  seaf-fsck.exe , follow the following procedure (assuming you've installed Seafile server to  X:\\Seafile\\ :   Open a command prompt by following  either  of these steps  Click  Start ,  Run , enter  cmd.exe  and then navigate to the binary folder by entering  cd /d X:\\Seafile\\seafile-server-5.x.x\\seafile\\bin  Or, using the file explorer:  Navigate to the folder where the binaries are located ( X:\\Seafile\\seafile-server-5.x.x\\seafile\\bin )  Hold shift and right click in free space to bring up the context menu, then select  Open command window here    Enter the following inside the opened command prompt:  seaf-fsck.exe --repair -c Y:\\seafile-user\\ccnet -d Y:\\seafile-user\\seafile-data -F Y:\\seafile-user\\conf  seafile-user  is the folder your Seafile data is stored in  Make sure you are pointing  seaf-fsck.exe  towards the correct directory:  ccnet ,  seafile-data  and  conf  folders must be present  seaf-fsck  should be running now   For information on  seaf-fsck , its usage and syntax, see the chapter  Seafile FSCK .", 
            "title": "Running seaf-fsck on corrupted repositories"
        }, 
        {
            "location": "/deploy_pro/README/", 
            "text": "Deploy Seafile Pro Edition\n\n\nInstall Seafile Pro Edition\n\n\n\n\nMethod 1 (For Debian and CentOS 7): \nDeploy Seafile with an installation script\n. The installer offer a quick and easy way to set up a production ready Seafile Server using MariaDB, Memcached and NGINX as a reverse proxy in under 5 minutes.\n\n\nMethod 2:  \nDownload and Setup Seafile Professional Server Step by Step\n\n\n\n\nLDAP/AD Integration for Pro:\n\n\n\n\nConfigure LDAP in Seafile Pro\n\n\nSyncing Groups from LDAP/AD\n\n\n\n\nMigration and Upgrading\n\n\n\n\nMigrate from Seafile Community Server\n\n\nUpgrade Seafile Professional Server\n\n\n\n\nS3/OpenSwift/Ceph\n\n\n\n\nSetup Seafile Professional Server With Amazon S3\n\n\nSetup Seafile Professional Server With OpenStack Swift\n\n\nSetup Seafile Professional Server With Ceph\n\n\n\n\nConfig Options\n\n\n\n\nSeafile Professional Server Configurable Options\n\n\n\n\nSearch\n\n\n\n\nDetails about File Search\n\n\n\n\nPreview office files\n\n\n\n\nEnable Office/PDF Documents Online Preview\n\n\n\n\nOffice Web App\n\n\n\n\nIntegrating with Office Web App\n\n\n\n\nCluster\n\n\n\n\nDeploy seafile servers in a cluster\n\n\nEnable search and background tasks in a cluster\n\n\n\n\nBackup\n\n\n\n\nReal-time Backup Server\n\n\n\n\nFAQ\n\n\n\n\nFAQ For Seafile Professional Server\n\n\n\n\nLicense\n\n\n\n\nSeafile Professional Edition Software License Agreement", 
            "title": "README"
        }, 
        {
            "location": "/deploy_pro/README/#deploy-seafile-pro-edition", 
            "text": "Install Seafile Pro Edition   Method 1 (For Debian and CentOS 7):  Deploy Seafile with an installation script . The installer offer a quick and easy way to set up a production ready Seafile Server using MariaDB, Memcached and NGINX as a reverse proxy in under 5 minutes.  Method 2:   Download and Setup Seafile Professional Server Step by Step   LDAP/AD Integration for Pro:   Configure LDAP in Seafile Pro  Syncing Groups from LDAP/AD   Migration and Upgrading   Migrate from Seafile Community Server  Upgrade Seafile Professional Server   S3/OpenSwift/Ceph   Setup Seafile Professional Server With Amazon S3  Setup Seafile Professional Server With OpenStack Swift  Setup Seafile Professional Server With Ceph   Config Options   Seafile Professional Server Configurable Options", 
            "title": "Deploy Seafile Pro Edition"
        }, 
        {
            "location": "/deploy_pro/README/#search", 
            "text": "Details about File Search", 
            "title": "Search"
        }, 
        {
            "location": "/deploy_pro/README/#preview-office-files", 
            "text": "Enable Office/PDF Documents Online Preview", 
            "title": "Preview office files"
        }, 
        {
            "location": "/deploy_pro/README/#office-web-app", 
            "text": "Integrating with Office Web App", 
            "title": "Office Web App"
        }, 
        {
            "location": "/deploy_pro/README/#cluster", 
            "text": "Deploy seafile servers in a cluster  Enable search and background tasks in a cluster", 
            "title": "Cluster"
        }, 
        {
            "location": "/deploy_pro/README/#backup", 
            "text": "Real-time Backup Server", 
            "title": "Backup"
        }, 
        {
            "location": "/deploy_pro/README/#faq", 
            "text": "FAQ For Seafile Professional Server", 
            "title": "FAQ"
        }, 
        {
            "location": "/deploy_pro/README/#license", 
            "text": "Seafile Professional Edition Software License Agreement", 
            "title": "License"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/", 
            "text": "Download and Setup Seafile Professional Server\n\n\nPreparation\n\n\nThe following document is tested in Ubuntu 14.04 and CentOS 7. We recommend that you use Ubuntu 14.04 or CentOS 7 as your server.\n\n\n\n\nNOTE:\n\n\nIf you are using Ubuntu 14.04, you can use the following command to install all the dependency that Seafile requires at one time.\n\n\n```\nsudo apt-get install openjdk-7-jre poppler-utils libpython2.7 python-pip \\\nmysql-server python-setuptools python-imaging python-mysqldb python-memcache python-ldap\n\n\nsudo pip install boto\n```\n\n\nCentOS 7:\n\n\n```\nwget https://bootstrap.pypa.io/get-pip.py\nsudo python get-pip.py\nsudo yum install java-1.7.0-openjdk poppler-utils python-dev python-setuptools \\\npython-imaging MySQL-python mysql-server.x86_64 python-memcached python-ldap\n\n\nsudo pip install boto\nsudo /etc/init.d/mysqld start\n```\n\n\nFor more information please see bellow.\n\n\n\n\nMinimum System Requirement\n\n\n\n\nA Linux server with 2GB RAM\n\n\n\n\nInstall Java Runtime Environment (JRE)\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install openjdk-7-jre\n\n\n\n\nOn CentOS/Red Hat:\n\n\nsudo yum install java-1.7.0-openjdk\n\n\n\n\nInstall poppler-utils\n\n\nWe need poppler-utils for full text search of pdf files.\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install poppler-utils\n\n\n\n\nOn CentOS/Red Hat:\n\n\nsudo yum install poppler-utils\n\n\n\n\nInstall Python libraries\n\n\nFirst make sure your have installed python 2.7\n\n\nsudo easy_install pip\nsudo pip install boto\n\n\n\n\nIf you receive an error about \"Wheel installs require setuptools \n= ...\", run this between the pip and boto lines above\n\n\nsudo pip install setuptools --no-use-wheel --upgrade\n\n\n\n\nInstall libpython2.7 if you use Ubuntu 14.04\n\n\nsudo apt-get install libpython2.7\n\n\n\n\nInstall other libraries as required in the community edition\n\n\nSee \nDownload and Setup Seafile Server With MySQL\n.\n\n\nDownload and Setup Seafile Professional Server\n\n\nGet the license\n\n\nPut the license you get under the top level diretory. In our wiki, we use the diretory \n/data/haiwen/\n as the top level directory.\n\n\nDownload/Uncompress Seafile Professional Server\n\n\ntar xf seafile-pro-server_1.8.0_x86-64.tar.gz\n\n\n\n\nNow you have:\n\n\nhaiwen\n\u251c\u2500\u2500 seafile-license.txt\n\u2514\u2500\u2500 seafile-pro-server-1.8.0/\n\n\n\n\n\n\nYou should notice the difference between the names of the Community Server and Professional Server. Take the 1.8.0 64bit version as an example:\n\n\n\n\nSeafile Community Server tarball is \nseafile-server_1.8.0_x86-86.tar.gz\n; After uncompressing, the folder is \nseafile-server-1.7.0\n\n\nSeafile Professional Server tarball is \nseafile-pro-server_1.8.0_x86-86.tar.gz\n; After uncompressing, the folder is \nseafile-pro-server-1.7.0\n\n\n\n\n\n\nSetup\n\n\nThe setup process of Seafile Professional Server is the same as the Seafile Community Server. See \nDownload and Setup Seafile Server With MySQL\n.\n\n\nIf you have any problem in setting up the service, please check \nCommon problems in setting up Seafile server\n.\n\n\nAfter you have succesfully setup Seafile Professional Server, you would have a directory layout like this:\n\n\n#tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 seafile-license.txt # license file\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502   \u251c\u2500\u2500 mykey.peer\n\u2502   \u251c\u2500\u2500 PeerMgr\n\u2502   \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u2502   \u2514\u2500\u2500 seafevents.conf\n\u251c\u2500\u2500 pro-data            # data specific for professional version\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-pro-server-1.8.0\n\u2502   \u251c\u2500\u2500 reset-admin.sh\n\u2502   \u251c\u2500\u2500 runtime\n\u2502   \u251c\u2500\u2500 seafile\n\u2502   \u251c\u2500\u2500 seafile.sh\n\u2502   \u251c\u2500\u2500 seahub\n\u2502   \u251c\u2500\u2500 seahub-extra\n\u2502   \u251c\u2500\u2500 seahub.sh\n\u2502   \u251c\u2500\u2500 setup-seafile.sh\n\u2502   \u251c\u2500\u2500 setup-seafile-mysql.py\n\u2502   \u251c\u2500\u2500 setup-seafile-mysql.sh\n\u2502   \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seahub-data\n\u2502   \u2514\u2500\u2500 avatars         # for user avatars\n\u251c\u2500\u2500 seahub.db\n\n\n\n\nPerformance turning\n\n\nIf you have more than 50 users in your Seafile system, we highly recommand you to \nadd memcached\n. This will make the web 10x faster.  \n\n\nDone\n\n\nAt this point, the basic setup of Seafile Professional Server is done.\n\n\nYou may want to read more about Seafile Professional Server:\n\n\n\n\nFAQ For Seafile Professional Server", 
            "title": "Download and Setup Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#download-and-setup-seafile-professional-server", 
            "text": "", 
            "title": "Download and Setup Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#minimum-system-requirement", 
            "text": "A Linux server with 2GB RAM", 
            "title": "Minimum System Requirement"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#install-java-runtime-environment-jre", 
            "text": "On Ubuntu/Debian:  sudo apt-get install openjdk-7-jre  On CentOS/Red Hat:  sudo yum install java-1.7.0-openjdk", 
            "title": "Install Java Runtime Environment (JRE)"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#install-poppler-utils", 
            "text": "We need poppler-utils for full text search of pdf files.  On Ubuntu/Debian:  sudo apt-get install poppler-utils  On CentOS/Red Hat:  sudo yum install poppler-utils", 
            "title": "Install poppler-utils"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#install-python-libraries", 
            "text": "First make sure your have installed python 2.7  sudo easy_install pip\nsudo pip install boto  If you receive an error about \"Wheel installs require setuptools  = ...\", run this between the pip and boto lines above  sudo pip install setuptools --no-use-wheel --upgrade", 
            "title": "Install Python libraries"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#install-libpython27-if-you-use-ubuntu-1404", 
            "text": "sudo apt-get install libpython2.7", 
            "title": "Install libpython2.7 if you use Ubuntu 14.04"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#install-other-libraries-as-required-in-the-community-edition", 
            "text": "See  Download and Setup Seafile Server With MySQL .", 
            "title": "Install other libraries as required in the community edition"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#get-the-license", 
            "text": "Put the license you get under the top level diretory. In our wiki, we use the diretory  /data/haiwen/  as the top level directory.", 
            "title": "Get the license"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#setup", 
            "text": "The setup process of Seafile Professional Server is the same as the Seafile Community Server. See  Download and Setup Seafile Server With MySQL .  If you have any problem in setting up the service, please check  Common problems in setting up Seafile server .  After you have succesfully setup Seafile Professional Server, you would have a directory layout like this:  #tree haiwen -L 2\nhaiwen\n\u251c\u2500\u2500 seafile-license.txt # license file\n\u251c\u2500\u2500 ccnet               # configuration files\n\u2502   \u251c\u2500\u2500 mykey.peer\n\u2502   \u251c\u2500\u2500 PeerMgr\n\u2502   \u2514\u2500\u2500 seafile.ini\n\u251c\u2500\u2500 conf\n\u2502   \u2514\u2500\u2500 ccnet.conf\n\u2502   \u2514\u2500\u2500 seafile.conf\n\u2502   \u2514\u2500\u2500 seahub_settings.py\n\u2502   \u2514\u2500\u2500 seafevents.conf\n\u251c\u2500\u2500 pro-data            # data specific for professional version\n\u251c\u2500\u2500 seafile-data\n\u251c\u2500\u2500 seafile-pro-server-1.8.0\n\u2502   \u251c\u2500\u2500 reset-admin.sh\n\u2502   \u251c\u2500\u2500 runtime\n\u2502   \u251c\u2500\u2500 seafile\n\u2502   \u251c\u2500\u2500 seafile.sh\n\u2502   \u251c\u2500\u2500 seahub\n\u2502   \u251c\u2500\u2500 seahub-extra\n\u2502   \u251c\u2500\u2500 seahub.sh\n\u2502   \u251c\u2500\u2500 setup-seafile.sh\n\u2502   \u251c\u2500\u2500 setup-seafile-mysql.py\n\u2502   \u251c\u2500\u2500 setup-seafile-mysql.sh\n\u2502   \u2514\u2500\u2500 upgrade\n\u251c\u2500\u2500 seahub-data\n\u2502   \u2514\u2500\u2500 avatars         # for user avatars\n\u251c\u2500\u2500 seahub.db", 
            "title": "Setup"
        }, 
        {
            "location": "/deploy_pro/download_and_setup_seafile_professional_server/#performance-turning", 
            "text": "If you have more than 50 users in your Seafile system, we highly recommand you to  add memcached . This will make the web 10x faster.", 
            "title": "Performance turning"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/", 
            "text": "Migrate from Seafile Community Server\n\n\nRestriction\n\n\nIt's quite likely you have deployed the Seafile Community Server and want to switch to the \nProfessional Server\n, or vice versa. But there is some restriction:\n\n\n\n\nYou can only switch between Community Server and Professional Server of the same minor version.\n\n\n\n\nThat is, if you are using Community Server 1.6, and want to switch to the Professional Server 1.7, you must first upgrade to Community Server 1.7, and then follow the guides below to switch to the Professional Server 1.7. (The last tiny version number in 1.7.x is not important.)\n\n\nPreparation\n\n\nInstall Java Runtime Environment (JRE)\n\n\nJava 7 or higher is required.\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install openjdk-7-jre\n\n\n\n\nOn CentOS/Red Hat:\n\n\nsudo yum install java-1.7.0-openjdk\n\n\n\n\nNote\n: Since version 3.1.12, java 1.7 is required, please check your java version by \njava -version\n. If not, please \nchange the default java version\n.\n\n\nInstall poppler-utils\n\n\nWe need poppler-utils for full text search of pdf files.\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install poppler-utils\n\n\n\n\nOn CentOS/Red Hat:\n\n\nsudo yum install poppler-utils\n\n\n\n\nDo the migration\n\n\nWe assume you have already deployed Seafile Community Server 1.8.0 under \n/data/haiwen/seafile-server-1.8.0\n. \n\n\nGet the license\n\n\nPut the license you get under the top level directory of your Seafile installation. In our example, it is \n/data/haiwen/\n.\n\n\nDownload/Uncompress Seafile Professional Server\n\n\nYou should uncompress the tarball to the top level directory of your installation, in our example, \n/data/haiwen\n.\n\n\ntar xf seafile-pro-server_1.8.0_x86-64.tar.gz\n\n\n\n\nNow you have:\n\n\nhaiwen\n\u251c\u2500\u2500 seafile-license.txt\n\u251c\u2500\u2500 seafile-pro-server-1.8.0/\n\u251c\u2500\u2500 seafile-server-1.8.0/\n\u251c\u2500\u2500 ccnet/\n\u251c\u2500\u2500 seafile-data/\n\u251c\u2500\u2500 seahub-data/\n\u251c\u2500\u2500 seahub.db\n\u2514\u2500\u2500 seahub_settings.py\n\n\n\n\n\n\n\n\nYou should notice the difference between the names of the Community Server and Professional Server. Take the 1.8.0 64bit version as an example:\n\n\n\n\nSeafile Community Server tarball is \nseafile-server_1.8.0_x86-86.tar.gz\n; After uncompressing, the folder is \nseafile-server-1.8.0\n\n\nSeafile Professional Server tarball is \nseafile-pro-server_1.8.0_x86-86.tar.gz\n; After uncompressing, the folder is \nseafile-pro-server-1.8.0\n\n\n\n\n\n\nDo the migration\n\n\n\n\nStop Seafile Community Server if it's running\n\n\n\n\ncd haiwen/seafile-server-1.8.0\n./seafile.sh stop\n./seahub.sh stop\n\n\n\n\n\n\nRun the migration script \n\n\n\n\ncd haiwen/seafile-pro-server-1.8.0/\n./pro/pro.py setup --migrate\n\n\n\n\nThe migration script would do the following for you:\n\n\n\n\nensure your have all the prerequisites met\n\n\ncreate necessary extra configurations\n\n\nupdate the avatar directory\n\n\ncreate extra database tables  \n\n\n\n\nNow you have:\n\n\n\nhaiwen\n\n\u251c\u2500\u2500 seafile-license.txt\n\n\u251c\u2500\u2500 seafile-pro-server-1.8.0/\n\n\u251c\u2500\u2500 seafile-server-1.8.0/\n\n\u251c\u2500\u2500 ccnet/\n\n\u251c\u2500\u2500 seafile-data/\n\n\u251c\u2500\u2500 seahub-data/\n\n\u251c\u2500\u2500 seahub.db\n\n\u251c\u2500\u2500 seahub_settings.py\n\n\u2514\u2500\u2500 \npro-data/\n\n\n\n\n\nStart Seafile Professional Server\n\n\ncd haiwen/seafile-pro-server-1.8.0\n./seafile.sh start\n./seahub.sh start\n\n\n\n\nSwitch Back to Community Server\n\n\n\n\nStop Seafile Professional Server if it's running\n\n\n\n\ncd haiwen/seafile-pro-server-1.8.0/\n./seafile.sh stop\n./seahub.sh stop\n\n\n\n\n\n\nUpdate the avatar directory link just like in \nMinor Upgrade\n\n\n\n\ncd haiwen/seafile-server-1.8.0/\n./upgrade/minor-upgrade.sh\n\n\n\n\n\n\nStart Seafile Community Server\n\n\n\n\ncd haiwen/seafile-server-1.8.0/\n./seafile.sh start\n./seahub.sh start", 
            "title": "Migrate from Seafile Community Server"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#migrate-from-seafile-community-server", 
            "text": "", 
            "title": "Migrate from Seafile Community Server"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#install-java-runtime-environment-jre", 
            "text": "Java 7 or higher is required.  On Ubuntu/Debian:  sudo apt-get install openjdk-7-jre  On CentOS/Red Hat:  sudo yum install java-1.7.0-openjdk  Note : Since version 3.1.12, java 1.7 is required, please check your java version by  java -version . If not, please  change the default java version .", 
            "title": "Install Java Runtime Environment (JRE)"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#install-poppler-utils", 
            "text": "We need poppler-utils for full text search of pdf files.  On Ubuntu/Debian:  sudo apt-get install poppler-utils  On CentOS/Red Hat:  sudo yum install poppler-utils", 
            "title": "Install poppler-utils"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#get-the-license", 
            "text": "Put the license you get under the top level directory of your Seafile installation. In our example, it is  /data/haiwen/ .", 
            "title": "Get the license"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#do-the-migration_1", 
            "text": "Stop Seafile Community Server if it's running   cd haiwen/seafile-server-1.8.0\n./seafile.sh stop\n./seahub.sh stop   Run the migration script    cd haiwen/seafile-pro-server-1.8.0/\n./pro/pro.py setup --migrate  The migration script would do the following for you:   ensure your have all the prerequisites met  create necessary extra configurations  update the avatar directory  create extra database tables     Now you have:  \nhaiwen \n\u251c\u2500\u2500 seafile-license.txt \n\u251c\u2500\u2500 seafile-pro-server-1.8.0/ \n\u251c\u2500\u2500 seafile-server-1.8.0/ \n\u251c\u2500\u2500 ccnet/ \n\u251c\u2500\u2500 seafile-data/ \n\u251c\u2500\u2500 seahub-data/ \n\u251c\u2500\u2500 seahub.db \n\u251c\u2500\u2500 seahub_settings.py \n\u2514\u2500\u2500  pro-data/", 
            "title": "Do the migration"
        }, 
        {
            "location": "/deploy_pro/migrate_from_seafile_community_server/#start-seafile-professional-server", 
            "text": "cd haiwen/seafile-pro-server-1.8.0\n./seafile.sh start\n./seahub.sh start", 
            "title": "Start Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/upgrading_seafile_professional_server/", 
            "text": "Upgrading Seafile Professional Server\n\n\nUpgrading pro server is the same as \nupgrading a community server", 
            "title": "Upgrading Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/upgrading_seafile_professional_server/#upgrading-seafile-professional-server", 
            "text": "Upgrading pro server is the same as  upgrading a community server", 
            "title": "Upgrading Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/", 
            "text": "Configure Seafile Pro Edition to use LDAP\n\n\nHow does LDAP User Management Works in Seafile\n\n\nWhen Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:\n\n\n\n\nUsers within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:\n\n\nNative users: these users are created by the admin on Seafile's system admin interface. These users are stored in the \nEmailUser\n table of the \nccnet\n database.\n\n\nUsers imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the \nLDAPUsers\n table of the \nccnet\n database.\n\n\n\n\n\n\nUsers in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.\n\n\n\n\nWhen Seafile counts the user number in the system, it only counts the \nactivated\n users in its internal database.\n\n\nWhen Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, he/she can log into the system.\n\n\nBasic LDAP/AD Integration\n\n\nThe only requirement for Seafile to use LDAP/AD for authentication is that, there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:\n\n\n\n\nEmail address: this is the most common choice. Most organizations assign unique email address for each member.\n\n\nUserPrincipalName: this is a user attribute only available in Active Directory. It's format is \nuser-login-name@domain-name\n, e.g. \njohn@example.com\n. It's not a real email address, but it works fine as the unique identifier.\n\n\n\n\nConnecting to Active Directory\n\n\nTo use AD to authenticate user, please add the following lines to ccnet.conf.\n\n\nIf you choose email address as unique identifier:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nIf you choose UserPrincipalName as unique identifier:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName\n\n\n\nMeaning of each config options:\n\n\n\n\nHOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.\n\n\nBASE: The root distinguished name (DN) to use when running queries against the directory server. \nYou cannot use the root DN (e.g. dc=example,dc=com) as BASE\n.\n\n\nUSER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.\n\n\nPASSWORD: Password of the above user.\n\n\nLOGIN_ATTR: The attribute used for user's unique identifier. Use \nmail\n or \nuserPrincipalName\n.\n\n\n\n\nTips for choosing BASE and USER_DN:\n\n\n\n\nTo determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.\n\n\nIf you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).\n\n\nIf you want to limit users to a certain OU (Organization Unit), you run \ndsquery\n command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found \nhere\n.\n\n\n\n\n\n\nAD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use \ndsquery\n command to find out user's DN. For example, if the user name is 'seafileuser', run \ndsquery user -name seafileuser\n. More information \nhere\n.\n\n\n\n\nConnecting to other LDAP servers\n\n\nPlease add the following options to ccnet.conf:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n\n\nThe meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use \nmail\n attribute as user's unique identifier.\n\n\nTesting Your LDAP Configuration\n\n\nSince 5.0.0 Pro Edition, we provide a command line tool for checking your LDAP configuration.\n\n\nTo use this tool, make sure you have \npython-ldap\n package installed on your system.\n\n\nsudo apt-get install python-ldap\n\n\n\n\nThen you can run the test:\n\n\ncd seafile-server-latest\n./pro/pro.py ldapsync --test\n\n\n\n\nThe test script will test your LDAP settings under the \n[LDAP]\n section of ccnet.conf. If everything works, it'll print the first ten users in the search results. Otherwise, it'll print out possible errors in your config.\n\n\nSetting Up LADP/AD User Sync (Optional)\n\n\nIn Seafile Pro, except for importing users into internal database when they log in, you can also configure Seafile to periodically sync user information from LDAP/AD server into the internal database.\n\n\n\n\nUser's full name, department, contact email address can be synced to internal database. Users can use this information to more easily search for specific user.\n\n\nUser's Windows or Unix login id can be synced the internal database. This allows the user to log in with his/her familiar login id.\n\n\nWhen a user is removed from LDAP/AD, the corresponding user in Seafile will be deactivated. Otherwise, he/she can still sync files with Seafile client or access the web interface.\n\n\n\n\nAfter syncing is complete, you can see the user's full name, department and contact email on the user's profile page.\n\n\nActive Directory\n\n\nIf you're using Active Directory, add the following options to ccnet.conf:\n\n\n[LDAP]\n......\n\n[LDAP_SYNC]\nENABLE_USER_SYNC = true\nSYNC_INTERVAL = 60\nUSER_OBJECT_CLASS = person\nENABLE_EXTRA_USER_INFO_SYNC = true\nFIRST_NAME_ATTR = givenName\nLAST_NAME_ATTR = sn\nDEPT_ATTR = department\nUID_ATTR = sAMAccountName\n\n\n\n\nMeaning of each options:\n\n\n\n\nENABLE_USER_SYNC\n: set to \"true\" if you want to enable ldap user syncing\n\n\nSYNC_INTERVAL\n: The interval to sync. Unit is minutes. Default to 60 minutes.\n\n\nUSER_OBJECT_CLASS\n: This is the name of the class used to search for user objects. In Active Directory, it's usually \"person\". The default value is \"person\".\n\n\nENABLE_EXTRA_USER_INFO_SYNC\n: Enable syncing additional user information, including user full name, department, and Windows login name, etc.\n\n\nFIRST_NAME_ATTR\n: Attribute for user's first name. It's \"givenName\" by default.\n\n\nLAST_NAME_ATTR\n: Attribute for user's last name. It's \"sn\" by default.\n\n\nUSER_NAME_REVERSE\n: In some laguages, such as Chinese, the display order of first name and last name is reversed. Set this option if you need it.\n\n\nDEPT_ATTR\n: Attribute for user's department. It's \"department\" by default.\n\n\nUID_ATTR\n: Attribute for Windows login name. If this is synced, users can also log in with their Windows login name. In AD, the attribute \nsAMAccountName\n can be used as \nUID_ATTR\n.\n\n\n\n\nIf you choose \nuserPrincipalName\n as the unique identifier for user, Seafile cannot use that as real email address to send notification emails to user. If the users in AD also have email address attributes, you can sync these email addresses into Seafile's internal database. Seafile can then use them to send emails. The configuration option is:\n- \nCONTACT_EMAIL_ATTR\n: usually you can set it to the \nmail\n attribute.\n\n\nOther LDAP servers\n\n\nAdd the following options to ccnet.conf:\n\n\n[LDAP]\n......\n\n[LDAP_SYNC]\nENABLE_USER_SYNC = true\nSYNC_INTERVAL = 60\nUSER_OBJECT_CLASS = userOfNames\nENABLE_EXTRA_USER_INFO_SYNC = true\nFIRST_NAME_ATTR = givenName\nLAST_NAME_ATTR = sn\nDEPT_ATTR = department\nUID_ATTR = uid\n\n\n\n\nMeaning of each options:\n\n\n\n\nENABLE_USER_SYNC\n: set to \"true\" if you want to enable ldap user syncing\n\n\nSYNC_INTERVAL\n: The interval to sync. Unit is minutes. Default to 60 minutes.\n\n\nUSER_OBJECT_CLASS\n: This is the name of the class used to search for user objects. In OpenLDAP, you can use \"userOfNames\". The default value is \"person\".\n\n\nENABLE_EXTRA_USER_INFO_SYNC\n: Enable syncing additional user information, including user full name, department, and Windows/Unix login name, etc.\n\n\nFIRST_NAME_ATTR\n: Attribute for user's first name. It's \"givenName\" by default.\n\n\nLAST_NAME_ATTR\n: Attribute for user's last name. It's \"sn\" by default.\n\n\nUSER_NAME_REVERSE\n: In some laguages, such as Chinese, the display order of first name and last name is reversed. Set this option if you need it.\n\n\nDEPT_ATTR\n: Attribute for user's department. It's \"department\" by default.\n\n\nUID_ATTR\n: Attribute for Windows/Unix login name. If this is synced, users can also log in with their Windows/Unix login name. In OpenLDAP, the attribute \nuid\n or something similar can be used.\n\n\n\n\nManually Trigger Syncing\n\n\nTo test your LDAP sync configuration, you can run the sync command manually.\n\n\nTo trigger LDAP sync manually,\n\n\ncd seafile-server-lastest\n./pro/pro.py ldapsync\n\n\n\n\nDon't Import New Users in LDAP Sync\n\n\nBy default, when LDAP sync process detects that a new user is added in the LDAP server, it'll automatically sync that user into internal database. And the new users will be activated by default. This will consume one more user license. \n\n\nLet's consider the following situation: you have a lot of users in the LDAP server, but you don't buy enough licenses to add all these users into Seafile. Enabling LDAP sync will consume all the licenses you buy and make your Seafile installation unusable. The ideal solution would be: new users are only added to Seafile when they log in for the first time. And LDAP sync only sync information from LDAP server for existing users. The following option is for this exact purpose:\n\n\n[LDAP_SYNC]\nIMPORT_NEW_USER = false\n\n\n\n\nAdvanced LDAP/AD Integration Options\n\n\nMultiple BASE\n\n\nMultiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g. \nou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com\n\n\nAdditional Search Filter\n\n\nSearch filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).\n\n\nThe final filter used for searching for users is \n(\n($LOGIN_ATTR=*)($FILTER))\n. \n$LOGIN_ATTR\n and \n$FILTER\n will be replaced by your option values.\n\n\nFor example, add the following line to LDAP config:\n\n\nFILTER = memberOf=CN=group,CN=developers,DC=example,DC=com\n\n\n\n\nThe final search filter would be \n(\n(mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))\n\n\nNote that the cases in the above example is significant. The \nmemberOf\n attribute is only available in Active Directory.\n\n\nLimiting Seafile Users to a Group in Active Directory\n\n\nYou can use the FILTER option to limit user scope to a certain AD group.\n\n\n\n\nFirst, you should find out the DN for the group. Again, we'll use \ndsquery\n command on the domain controller. For example, if group name is 'seafilegroup', run \ndsquery group -name seafilegroup\n.\n\n\nAdd following line to LDAP config:\n\n\n\n\nFILTER = memberOf={output of dsquery command}\n\n\n\n\nUsing TLS connection to LDAP/AD server\n\n\nTo use TLS connection to the directory server, you should install a valid SSL certificate on the directory server.\n\n\nThe current version of Seafile Linux server package is compiled on CentOS. We include the ldap client library in the package to maintain compatibility with older Linux distributions. But since different Linux distributions have different path or configuration for OpenSSL library, sometimes Seafile is unable to connect to the directory server with TLS.\n\n\nThe ldap library (libldap) bundled in the Seafile package is of version 2.4. If your Linux distribution is new enough (like CentOS 6, Debian 7 or Ubuntu 12.04 or above), you can use system's libldap instead.\n\n\nOn Ubuntu 14.04 and Debian 7/8, moving the bundled ldap related libraries out of the library path should make TLS connection work.\n\n\ncd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv liblber-2.4.so.2 libldap-2.4.so.2 libsasl2.so.2 libldap_r-2.4.so.2 disabled_libs_use_local_ones_instead/\n\n\n\n\nOn CentOS 6, you have to move the libnssutil library:\n\n\ncd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv libnssutil3.so disabled_libs_use_local_ones_instead/\n\n\n\n\nThis effectively removes the bundled libraries from the library search path. \nWhen the server starts, it'll instead find and use the system libraries (if they are installed). \nThis change has to be repeated after each update of the Seafile installation.\n\n\nUse paged results extension\n\n\nLDAP protocol version 3 supports \"paged results\" (PR) extension. When you have large number of users, this option can greatly improve the performance of listing users. Most directory server nowadays support this extension.\n\n\nIn Seafile Pro Edition, add this option to LDAP section of ccnet.conf to enable PR:\n\n\nUSE_PAGED_RESULT = true\n\n\n\n\nFollow referrals\n\n\nStarting from Pro Edition 4.0.4, Seafile supports auto following referrals in LDAP search. This is useful for partitioned LDAP or AD servers, where users may be spreaded on multiple directory servers. For more information about referrals, you can refer to \nthis article\n.\n\n\nTo configure, add following option to ccnet.conf in the [LDAP] section:\n\n\nFOLLOW_REFERRALS = true", 
            "title": "LDAP Configuration for Seafile Pro"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#configure-seafile-pro-edition-to-use-ldap", 
            "text": "", 
            "title": "Configure Seafile Pro Edition to use LDAP"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#how-does-ldap-user-management-works-in-seafile", 
            "text": "When Seafile is integrated with LDAP/AD, users in the system can be divided into two tiers:   Users within Seafile's internal user database. Some attributes are attached to these users, such as whether it's a system admin user, whether it's activated. This tier includes two types of users:  Native users: these users are created by the admin on Seafile's system admin interface. These users are stored in the  EmailUser  table of the  ccnet  database.  Users imported from LDAP/AD server: When a user in LDAP/AD logs into Seafile, its information will be imported from LDAP/AD server into Seafile's database. These users are stored in the  LDAPUsers  table of the  ccnet  database.    Users in LDAP/AD server. These are all the intended users of Seafile inside the LDAP server. Seafile doesn't manipulate these users directly. It has to import them into its internal database before setting attributes on them.   When Seafile counts the user number in the system, it only counts the  activated  users in its internal database.  When Seafile is integrated with LDAP/AD, it'll look up users from both the internal database and LDAP server. As long as the user exists in one of these two sources, he/she can log into the system.", 
            "title": "How does LDAP User Management Works in Seafile"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#basic-ldapad-integration", 
            "text": "The only requirement for Seafile to use LDAP/AD for authentication is that, there must be a unique identifier for each user in the LDAP/AD server. Seafile can only use email-address-format user identifiers. So there are usually only two options for this unique identifier:   Email address: this is the most common choice. Most organizations assign unique email address for each member.  UserPrincipalName: this is a user attribute only available in Active Directory. It's format is  user-login-name@domain-name , e.g.  john@example.com . It's not a real email address, but it works fine as the unique identifier.", 
            "title": "Basic LDAP/AD Integration"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#connecting-to-active-directory", 
            "text": "To use AD to authenticate user, please add the following lines to ccnet.conf.  If you choose email address as unique identifier:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail  If you choose UserPrincipalName as unique identifier:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = userPrincipalName  Meaning of each config options:   HOST: LDAP URL for the host. ldap://, ldaps:// and ldapi:// are supported. You can also include port number in the URL, like ldap://ldap.example.com:389. To use TLS, you should configure the LDAP server to listen on LDAPS port and specify ldaps:// here. More details about TLS will be covered below.  BASE: The root distinguished name (DN) to use when running queries against the directory server.  You cannot use the root DN (e.g. dc=example,dc=com) as BASE .  USER_DN: The distinguished name of the user that Seafile will use when connecting to the directory server. This user should have sufficient privilege to access all the nodes under BASE. It's recommended to use a user in the administrator group.  PASSWORD: Password of the above user.  LOGIN_ATTR: The attribute used for user's unique identifier. Use  mail  or  userPrincipalName .   Tips for choosing BASE and USER_DN:   To determine the BASE, you first have to navigate your organization hierachy on the domain controller GUI.  If you want to allow all users to use Seafile, you can use 'cn=users,dc=yourdomain,dc=com' as BASE (with proper adjustment for your own needs).  If you want to limit users to a certain OU (Organization Unit), you run  dsquery  command on the domain controller to find out the DN for this OU. For example, if the OU is 'staffs', you can run 'dsquery ou -name staff'. More information can be found  here .    AD supports 'user@domain.name' format for the USER_DN option. For example you can use administrator@example.com for USER_DN. Sometime the domain controller doesn't recognize this format. You can still use  dsquery  command to find out user's DN. For example, if the user name is 'seafileuser', run  dsquery user -name seafileuser . More information  here .", 
            "title": "Connecting to Active Directory"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#connecting-to-other-ldap-servers", 
            "text": "Please add the following options to ccnet.conf:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail  The meaning of the options are the same as described in the previous section. With other LDAP servers, you can only use  mail  attribute as user's unique identifier.", 
            "title": "Connecting to other LDAP servers"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#testing-your-ldap-configuration", 
            "text": "Since 5.0.0 Pro Edition, we provide a command line tool for checking your LDAP configuration.  To use this tool, make sure you have  python-ldap  package installed on your system.  sudo apt-get install python-ldap  Then you can run the test:  cd seafile-server-latest\n./pro/pro.py ldapsync --test  The test script will test your LDAP settings under the  [LDAP]  section of ccnet.conf. If everything works, it'll print the first ten users in the search results. Otherwise, it'll print out possible errors in your config.", 
            "title": "Testing Your LDAP Configuration"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#setting-up-ladpad-user-sync-optional", 
            "text": "In Seafile Pro, except for importing users into internal database when they log in, you can also configure Seafile to periodically sync user information from LDAP/AD server into the internal database.   User's full name, department, contact email address can be synced to internal database. Users can use this information to more easily search for specific user.  User's Windows or Unix login id can be synced the internal database. This allows the user to log in with his/her familiar login id.  When a user is removed from LDAP/AD, the corresponding user in Seafile will be deactivated. Otherwise, he/she can still sync files with Seafile client or access the web interface.   After syncing is complete, you can see the user's full name, department and contact email on the user's profile page.", 
            "title": "Setting Up LADP/AD User Sync (Optional)"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#active-directory", 
            "text": "If you're using Active Directory, add the following options to ccnet.conf:  [LDAP]\n......\n\n[LDAP_SYNC]\nENABLE_USER_SYNC = true\nSYNC_INTERVAL = 60\nUSER_OBJECT_CLASS = person\nENABLE_EXTRA_USER_INFO_SYNC = true\nFIRST_NAME_ATTR = givenName\nLAST_NAME_ATTR = sn\nDEPT_ATTR = department\nUID_ATTR = sAMAccountName  Meaning of each options:   ENABLE_USER_SYNC : set to \"true\" if you want to enable ldap user syncing  SYNC_INTERVAL : The interval to sync. Unit is minutes. Default to 60 minutes.  USER_OBJECT_CLASS : This is the name of the class used to search for user objects. In Active Directory, it's usually \"person\". The default value is \"person\".  ENABLE_EXTRA_USER_INFO_SYNC : Enable syncing additional user information, including user full name, department, and Windows login name, etc.  FIRST_NAME_ATTR : Attribute for user's first name. It's \"givenName\" by default.  LAST_NAME_ATTR : Attribute for user's last name. It's \"sn\" by default.  USER_NAME_REVERSE : In some laguages, such as Chinese, the display order of first name and last name is reversed. Set this option if you need it.  DEPT_ATTR : Attribute for user's department. It's \"department\" by default.  UID_ATTR : Attribute for Windows login name. If this is synced, users can also log in with their Windows login name. In AD, the attribute  sAMAccountName  can be used as  UID_ATTR .   If you choose  userPrincipalName  as the unique identifier for user, Seafile cannot use that as real email address to send notification emails to user. If the users in AD also have email address attributes, you can sync these email addresses into Seafile's internal database. Seafile can then use them to send emails. The configuration option is:\n-  CONTACT_EMAIL_ATTR : usually you can set it to the  mail  attribute.", 
            "title": "Active Directory"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#other-ldap-servers", 
            "text": "Add the following options to ccnet.conf:  [LDAP]\n......\n\n[LDAP_SYNC]\nENABLE_USER_SYNC = true\nSYNC_INTERVAL = 60\nUSER_OBJECT_CLASS = userOfNames\nENABLE_EXTRA_USER_INFO_SYNC = true\nFIRST_NAME_ATTR = givenName\nLAST_NAME_ATTR = sn\nDEPT_ATTR = department\nUID_ATTR = uid  Meaning of each options:   ENABLE_USER_SYNC : set to \"true\" if you want to enable ldap user syncing  SYNC_INTERVAL : The interval to sync. Unit is minutes. Default to 60 minutes.  USER_OBJECT_CLASS : This is the name of the class used to search for user objects. In OpenLDAP, you can use \"userOfNames\". The default value is \"person\".  ENABLE_EXTRA_USER_INFO_SYNC : Enable syncing additional user information, including user full name, department, and Windows/Unix login name, etc.  FIRST_NAME_ATTR : Attribute for user's first name. It's \"givenName\" by default.  LAST_NAME_ATTR : Attribute for user's last name. It's \"sn\" by default.  USER_NAME_REVERSE : In some laguages, such as Chinese, the display order of first name and last name is reversed. Set this option if you need it.  DEPT_ATTR : Attribute for user's department. It's \"department\" by default.  UID_ATTR : Attribute for Windows/Unix login name. If this is synced, users can also log in with their Windows/Unix login name. In OpenLDAP, the attribute  uid  or something similar can be used.", 
            "title": "Other LDAP servers"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#manually-trigger-syncing", 
            "text": "To test your LDAP sync configuration, you can run the sync command manually.  To trigger LDAP sync manually,  cd seafile-server-lastest\n./pro/pro.py ldapsync", 
            "title": "Manually Trigger Syncing"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#dont-import-new-users-in-ldap-sync", 
            "text": "By default, when LDAP sync process detects that a new user is added in the LDAP server, it'll automatically sync that user into internal database. And the new users will be activated by default. This will consume one more user license.   Let's consider the following situation: you have a lot of users in the LDAP server, but you don't buy enough licenses to add all these users into Seafile. Enabling LDAP sync will consume all the licenses you buy and make your Seafile installation unusable. The ideal solution would be: new users are only added to Seafile when they log in for the first time. And LDAP sync only sync information from LDAP server for existing users. The following option is for this exact purpose:  [LDAP_SYNC]\nIMPORT_NEW_USER = false", 
            "title": "Don't Import New Users in LDAP Sync"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#advanced-ldapad-integration-options", 
            "text": "", 
            "title": "Advanced LDAP/AD Integration Options"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#multiple-base", 
            "text": "Multiple base DN is useful when your company has more than one OUs to use Seafile. You can specify a list of base DN in the \"BASE\" config. The DNs are separated by \";\", e.g.  ou=developers,dc=example,dc=com;ou=marketing,dc=example,dc=com", 
            "title": "Multiple BASE"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#additional-search-filter", 
            "text": "Search filter is very useful when you have a large organization but only a portion of people want to use Seafile. The filter can be given by setting \"FILTER\" config. The value of this option follows standard LDAP search filter syntax (https://msdn.microsoft.com/en-us/library/aa746475(v=vs.85).aspx).  The final filter used for searching for users is  ( ($LOGIN_ATTR=*)($FILTER)) .  $LOGIN_ATTR  and  $FILTER  will be replaced by your option values.  For example, add the following line to LDAP config:  FILTER = memberOf=CN=group,CN=developers,DC=example,DC=com  The final search filter would be  ( (mail=*)(memberOf=CN=group,CN=developers,DC=example,DC=com))  Note that the cases in the above example is significant. The  memberOf  attribute is only available in Active Directory.", 
            "title": "Additional Search Filter"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#limiting-seafile-users-to-a-group-in-active-directory", 
            "text": "You can use the FILTER option to limit user scope to a certain AD group.   First, you should find out the DN for the group. Again, we'll use  dsquery  command on the domain controller. For example, if group name is 'seafilegroup', run  dsquery group -name seafilegroup .  Add following line to LDAP config:   FILTER = memberOf={output of dsquery command}", 
            "title": "Limiting Seafile Users to a Group in Active Directory"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#using-tls-connection-to-ldapad-server", 
            "text": "To use TLS connection to the directory server, you should install a valid SSL certificate on the directory server.  The current version of Seafile Linux server package is compiled on CentOS. We include the ldap client library in the package to maintain compatibility with older Linux distributions. But since different Linux distributions have different path or configuration for OpenSSL library, sometimes Seafile is unable to connect to the directory server with TLS.  The ldap library (libldap) bundled in the Seafile package is of version 2.4. If your Linux distribution is new enough (like CentOS 6, Debian 7 or Ubuntu 12.04 or above), you can use system's libldap instead.  On Ubuntu 14.04 and Debian 7/8, moving the bundled ldap related libraries out of the library path should make TLS connection work.  cd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv liblber-2.4.so.2 libldap-2.4.so.2 libsasl2.so.2 libldap_r-2.4.so.2 disabled_libs_use_local_ones_instead/  On CentOS 6, you have to move the libnssutil library:  cd ${SEAFILE_INSTALLATION_DIR}/seafile-server-latest/seafile/lib\nmkdir disabled_libs_use_local_ones_instead\nmv libnssutil3.so disabled_libs_use_local_ones_instead/  This effectively removes the bundled libraries from the library search path. \nWhen the server starts, it'll instead find and use the system libraries (if they are installed). \nThis change has to be repeated after each update of the Seafile installation.", 
            "title": "Using TLS connection to LDAP/AD server"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#use-paged-results-extension", 
            "text": "LDAP protocol version 3 supports \"paged results\" (PR) extension. When you have large number of users, this option can greatly improve the performance of listing users. Most directory server nowadays support this extension.  In Seafile Pro Edition, add this option to LDAP section of ccnet.conf to enable PR:  USE_PAGED_RESULT = true", 
            "title": "Use paged results extension"
        }, 
        {
            "location": "/deploy_pro/using_ldap_pro/#follow-referrals", 
            "text": "Starting from Pro Edition 4.0.4, Seafile supports auto following referrals in LDAP search. This is useful for partitioned LDAP or AD servers, where users may be spreaded on multiple directory servers. For more information about referrals, you can refer to  this article .  To configure, add following option to ccnet.conf in the [LDAP] section:  FOLLOW_REFERRALS = true", 
            "title": "Follow referrals"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/", 
            "text": "Importing Groups from LDAP/AD\n\n\nSince version 4.1.0, the Pro Edition supports importing (syncing) groups from LDAP or Active Directory.\n\n\nHow It Works\n\n\nThe importing or syncing process maps groups from LDAP directory server to groups in Seafile's internal database. This process is one-way.\n\n\n\n\nAny changes to groups in the database won't propagate back to LDAP;\n\n\nAny changes to groups in the database, except for \"setting a member as group admin\", will be overwritten in the next LDAP sync operation. If you want to add or delete members, you can only do that on LDAP server.\n\n\nThe creator of imported groups will be set to the system admin.\n\n\n\n\nSome LDAP servers, such as AD, allows setting a group as member of another group. This is called \"nested group\". Our process supports syncing nested groups. Supposed group B is a member of group A, the result would be: every member of group B will be imported as a member of both group A and group B.\n\n\nThere are two modes of operation:\n\n\n\n\nPeriodical: the syncing process will be executed in a fixed interval\n\n\nManual: there is a script you can run to trigger the syncing once\n\n\n\n\nPrerequisite\n\n\nYou have to install python-ldap library in your system.\n\n\nFor Debian or Ubuntu\n\n\nsudo apt-get install python-ldap\n\n\n\n\nFor CentOS or RedHat\n\n\nsudo yum install python-ldap\n\n\n\n\nConfiguration\n\n\nBefore enabling LDAP group sync, you should have configured LDAP authentication. See \nConfigure Seafile to use LDAP\n for details.\n\n\nThe following are LDAP group sync related options. They're in the \"[LDAP_SYNC]\" section of \nccnet.conf\n.\n\n\n\n\nENABLE_GROUP_SYNC\n: set to \"true\" if you want to enable ldap group syncing\n\n\nSYNC_INTERVAL\n: The interval to sync. Unit is minutes. Default to 60 minutes.\n\n\nGROUP_OBJECT_CLASS\n: This is the name of the class used to search for group objects. In Active Directory, it's usually \"group\"; in OpenLDAP or others, you may use \"groupOfNames\" or \"groupOfUniqueNames\", depends on your LDAP server. The default value is \"group\".\n\n\nGROUP_FILTER\n: An additional filter to use when searching group objects. If it's set, the final filter used to run search is \"(\n(objectClass=GROUP_OBJECT_CLASS)(GROUP_FILTER))\"; otherwise the final filter would be \"(objectClass=GROUP_OBJECT_CLASS)\".\n\n\nGROUP_MEMBER_ATTR\n: The attribute field to use when loading the group's members. For most directory servers, the attributes is \"member\", which is the default value.\n\n\n\n\nThe search base for groups is the \"BASE_DN\" set in \"[LDAP]\" section of ccnet.conf. \n\n\nHere is an example configuration for Active Directory:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n[LDAP_SYNC]\nENABLE_GROUP_SYNC = true\nSYNC_INTERVAL = 60\n\n\n\n\nFor AD, you usually don't need to configure other options except for \"ENABLE_GROUP_SYNC\". That's because the default values for other options are the usual values for AD. If you have special settings in your LDAP server, just set the corresponding options.\n\n\nHere is an example configuration for OpenLDAP:\n\n\n[LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n[LDAP_SYNC]\nENABLE_GROUP_SYNC = true\nSYNC_INTERVAL = 60\nGROUP_OBJECT_CLASS = groupOfNames\n\n\n\n\nNOTE\n Periodical sync won't happen immediately after you restart seafile server. It gets scheduled after the first sync interval. For example if you set sync interval to 30 minutes, the first auto sync will happen after 30 minutes you restarts. To sync immediately, you need to manually trigger it. This is covered in the next section.\n\n\nAfter the sync is run, you should see log messages like the following in logs/seafevents.log. And you should be able to see the groups in system admin page.\n\n\n[2015-03-30 18:15:05,109] [DEBUG] create group 1, and add dn pair CN=DnsUpdateProxy,CN=Users,DC=Seafile,DC=local\n-\n1 success.\n[2015-03-30 18:15:05,145] [DEBUG] create group 2, and add dn pair CN=Domain Computers,CN=Users,DC=Seafile,DC=local\n-\n2 success.\n[2015-03-30 18:15:05,154] [DEBUG] create group 3, and add dn pair CN=Domain Users,CN=Users,DC=Seafile,DC=local\n-\n3 success.\n[2015-03-30 18:15:05,164] [DEBUG] create group 4, and add dn pair CN=Domain Admins,CN=Users,DC=Seafile,DC=local\n-\n4 success.\n[2015-03-30 18:15:05,176] [DEBUG] create group 5, and add dn pair CN=RAS and IAS Servers,CN=Users,DC=Seafile,DC=local\n-\n5 success.\n[2015-03-30 18:15:05,186] [DEBUG] create group 6, and add dn pair CN=Enterprise Admins,CN=Users,DC=Seafile,DC=local\n-\n6 success.\n[2015-03-30 18:15:05,197] [DEBUG] create group 7, and add dn pair CN=dev,CN=Users,DC=Seafile,DC=local\n-\n7 success.\n\n\n\n\nManually Trigger Syncing\n\n\nTo trigger LDAP sync manually,\n\n\ncd seafile-server-lastest\n./pro/pro.py ldapsync", 
            "title": "Importing Groups from LDAP"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/#importing-groups-from-ldapad", 
            "text": "Since version 4.1.0, the Pro Edition supports importing (syncing) groups from LDAP or Active Directory.", 
            "title": "Importing Groups from LDAP/AD"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/#how-it-works", 
            "text": "The importing or syncing process maps groups from LDAP directory server to groups in Seafile's internal database. This process is one-way.   Any changes to groups in the database won't propagate back to LDAP;  Any changes to groups in the database, except for \"setting a member as group admin\", will be overwritten in the next LDAP sync operation. If you want to add or delete members, you can only do that on LDAP server.  The creator of imported groups will be set to the system admin.   Some LDAP servers, such as AD, allows setting a group as member of another group. This is called \"nested group\". Our process supports syncing nested groups. Supposed group B is a member of group A, the result would be: every member of group B will be imported as a member of both group A and group B.  There are two modes of operation:   Periodical: the syncing process will be executed in a fixed interval  Manual: there is a script you can run to trigger the syncing once", 
            "title": "How It Works"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/#prerequisite", 
            "text": "You have to install python-ldap library in your system.  For Debian or Ubuntu  sudo apt-get install python-ldap  For CentOS or RedHat  sudo yum install python-ldap", 
            "title": "Prerequisite"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/#configuration", 
            "text": "Before enabling LDAP group sync, you should have configured LDAP authentication. See  Configure Seafile to use LDAP  for details.  The following are LDAP group sync related options. They're in the \"[LDAP_SYNC]\" section of  ccnet.conf .   ENABLE_GROUP_SYNC : set to \"true\" if you want to enable ldap group syncing  SYNC_INTERVAL : The interval to sync. Unit is minutes. Default to 60 minutes.  GROUP_OBJECT_CLASS : This is the name of the class used to search for group objects. In Active Directory, it's usually \"group\"; in OpenLDAP or others, you may use \"groupOfNames\" or \"groupOfUniqueNames\", depends on your LDAP server. The default value is \"group\".  GROUP_FILTER : An additional filter to use when searching group objects. If it's set, the final filter used to run search is \"( (objectClass=GROUP_OBJECT_CLASS)(GROUP_FILTER))\"; otherwise the final filter would be \"(objectClass=GROUP_OBJECT_CLASS)\".  GROUP_MEMBER_ATTR : The attribute field to use when loading the group's members. For most directory servers, the attributes is \"member\", which is the default value.   The search base for groups is the \"BASE_DN\" set in \"[LDAP]\" section of ccnet.conf.   Here is an example configuration for Active Directory:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = cn=users,dc=example,dc=com\nUSER_DN = administrator@example.local\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n[LDAP_SYNC]\nENABLE_GROUP_SYNC = true\nSYNC_INTERVAL = 60  For AD, you usually don't need to configure other options except for \"ENABLE_GROUP_SYNC\". That's because the default values for other options are the usual values for AD. If you have special settings in your LDAP server, just set the corresponding options.  Here is an example configuration for OpenLDAP:  [LDAP]\nHOST = ldap://192.168.1.123/\nBASE = ou=users,dc=example,dc=com\nUSER_DN = cn=admin,dc=example,dc=com\nPASSWORD = secret\nLOGIN_ATTR = mail\n\n[LDAP_SYNC]\nENABLE_GROUP_SYNC = true\nSYNC_INTERVAL = 60\nGROUP_OBJECT_CLASS = groupOfNames  NOTE  Periodical sync won't happen immediately after you restart seafile server. It gets scheduled after the first sync interval. For example if you set sync interval to 30 minutes, the first auto sync will happen after 30 minutes you restarts. To sync immediately, you need to manually trigger it. This is covered in the next section.  After the sync is run, you should see log messages like the following in logs/seafevents.log. And you should be able to see the groups in system admin page.  [2015-03-30 18:15:05,109] [DEBUG] create group 1, and add dn pair CN=DnsUpdateProxy,CN=Users,DC=Seafile,DC=local - 1 success.\n[2015-03-30 18:15:05,145] [DEBUG] create group 2, and add dn pair CN=Domain Computers,CN=Users,DC=Seafile,DC=local - 2 success.\n[2015-03-30 18:15:05,154] [DEBUG] create group 3, and add dn pair CN=Domain Users,CN=Users,DC=Seafile,DC=local - 3 success.\n[2015-03-30 18:15:05,164] [DEBUG] create group 4, and add dn pair CN=Domain Admins,CN=Users,DC=Seafile,DC=local - 4 success.\n[2015-03-30 18:15:05,176] [DEBUG] create group 5, and add dn pair CN=RAS and IAS Servers,CN=Users,DC=Seafile,DC=local - 5 success.\n[2015-03-30 18:15:05,186] [DEBUG] create group 6, and add dn pair CN=Enterprise Admins,CN=Users,DC=Seafile,DC=local - 6 success.\n[2015-03-30 18:15:05,197] [DEBUG] create group 7, and add dn pair CN=dev,CN=Users,DC=Seafile,DC=local - 7 success.", 
            "title": "Configuration"
        }, 
        {
            "location": "/deploy_pro/ldap_group_sync/#manually-trigger-syncing", 
            "text": "To trigger LDAP sync manually,  cd seafile-server-lastest\n./pro/pro.py ldapsync", 
            "title": "Manually Trigger Syncing"
        }, 
        {
            "location": "/deploy_pro/multi_institutions/", 
            "text": "Multiple Organization/Institution User Management\n\n\nStart from version 5.1, you can add institutions into Seafile and assign users into institutions. Each institution can have one or more administrators. This feature is to ease user administration when multiple organizations (universities) share a single Seafile instance. Unlike multi-tenancy, the users are not-isolated. An user from one institution can share files with another institution.\n\n\nTurn on the feature\n\n\nIn \nseahub_settings.py\n, add \nMULTI_INSTITUTION = True\n to enable multi-institution feature. And add\n\n\nEXTRA_MIDDLEWARE_CLASSES += (\n    'seahub.institutions.middleware.InstitutionMiddleware',\n)\n\n\n\n\nor\n\n\nEXTRA_MIDDLEWARE_CLASSES = (\n    'seahub.institutions.middleware.InstitutionMiddleware',\n)\n\n\n\n\nif \nEXTRA_MIDDLEWARE_CLASSES\n is not defined.\n\n\nAdd institutions and institution admins\n\n\nAfter restart service, system admin can add institutions by adding institution name in admin panel. He can also click into an institution, which will list all users whose \nprofile.institution\n match the name.\n\n\nAssign users to institutions\n\n\nIf you are using Shibboleth, you can map a Shibboleth attribute into institution. For example, the following configuration map organization attribute to institution.\n\n\nSHIBBOLETH_ATTRIBUTE_MAP = {\n    \ngivenname\n: (False, \ngivenname\n),\n    \nsn\n: (False, \nsurname\n),\n    \nmail\n: (False, \ncontact_email\n),\n    \norganization\n: (False, \ninstitution\n),\n}", 
            "title": "Multi-Institutions Support"
        }, 
        {
            "location": "/deploy_pro/multi_institutions/#multiple-organizationinstitution-user-management", 
            "text": "Start from version 5.1, you can add institutions into Seafile and assign users into institutions. Each institution can have one or more administrators. This feature is to ease user administration when multiple organizations (universities) share a single Seafile instance. Unlike multi-tenancy, the users are not-isolated. An user from one institution can share files with another institution.", 
            "title": "Multiple Organization/Institution User Management"
        }, 
        {
            "location": "/deploy_pro/multi_institutions/#turn-on-the-feature", 
            "text": "In  seahub_settings.py , add  MULTI_INSTITUTION = True  to enable multi-institution feature. And add  EXTRA_MIDDLEWARE_CLASSES += (\n    'seahub.institutions.middleware.InstitutionMiddleware',\n)  or  EXTRA_MIDDLEWARE_CLASSES = (\n    'seahub.institutions.middleware.InstitutionMiddleware',\n)  if  EXTRA_MIDDLEWARE_CLASSES  is not defined.", 
            "title": "Turn on the feature"
        }, 
        {
            "location": "/deploy_pro/multi_institutions/#add-institutions-and-institution-admins", 
            "text": "After restart service, system admin can add institutions by adding institution name in admin panel. He can also click into an institution, which will list all users whose  profile.institution  match the name.", 
            "title": "Add institutions and institution admins"
        }, 
        {
            "location": "/deploy_pro/multi_institutions/#assign-users-to-institutions", 
            "text": "If you are using Shibboleth, you can map a Shibboleth attribute into institution. For example, the following configuration map organization attribute to institution.  SHIBBOLETH_ATTRIBUTE_MAP = {\n     givenname : (False,  givenname ),\n     sn : (False,  surname ),\n     mail : (False,  contact_email ),\n     organization : (False,  institution ),\n}", 
            "title": "Assign users to institutions"
        }, 
        {
            "location": "/deploy_pro/office_documents_preview/", 
            "text": "Seafile Professional server supports previewing office/pdf documents online, to use it you need to follow the steps described on this page.\n\n\nInstall Libreoffice/UNO\n\n\nLibreoffice 4.1+ and Python-uno library are needed to enable office files online preview.\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install libreoffice libreoffice-script-provider-python\n\n\n\n\n\n\nFor older version of Ubuntu: \nsudo apt-get install libreoffice python-uno\n\n\n\n\nOn Centos/RHEL:\n\n\nsudo yum install libreoffice libreoffice-headless libreoffice-pyuno\n\n\n\n\nFor other Linux distro: \nInstallation of LibreOffice on Linux\n\n\nAlso, you may need to install fonts for your language, especially for Asians, otherwise the  office/pdf document may not display correctly.\n\n\nFor example, Chinese users may wish to install the WenQuanYi series of truetype fonts:\n\n\n# For ubuntu/debian\nsudo apt-get install ttf-wqy-microhei ttf-wqy-zenhei xfonts-wqy\n\n\n\n\nEnable Office Preview\n\n\n\n\nOpen file \nseafevents.conf\n, in the \nOFFICE CONVERTER\n section:\n\n\n\n\n[OFFICE CONVERTER]\nenabled = true\n\n\n\n\n\n\nAfter modifying and saving \nseafevents.conf\n, restart seafile server by \n./seafile.sh restart\n\n\nOpen a doc/ppt/xls/pdf file on seahub, you should be about the previewing it in your browser.\n\n\n\n\nOther Configurable Options\n\n\nHere are full list of options you can fine tune:\n\n\n[OFFICE CONVERTER]\n\n## must be \ntrue\n to enable office/pdf file online preview\nenabled = true\n\n## How many libreoffice worker processes to run concurrenlty\nworkers = 1\n\n## where to store the converted office/pdf files. Deafult is /tmp/.\noutputdir = /tmp/\n\n## how many pages are allowed to be previewed online. Default is 50 pages\nmax-pages = 50\n\n## the max size of documents to allow to be previewed online, in MB. Default is 2 MB\n## Preview a large file (for example \n30M) online will freeze the browser.\nmax-size = 2\n\n\n\n\n\nFAQ about Office/PDF document preview\n\n\n\n\n\n\nDocument preview doesn't work, where to find more information?\n\n\nYou can check the log at logs/seafevents.log\n\n\n\n\n\n\nHow can I change max size and max pages of documents that can be previewed online ?\n\n\n\n\n\n\nLocate the \nOFFICE CONVERTER\n section in \nseafevents.conf\n.\n\n\n\n\nAppend following lines to the section\n\n\n\n\n# the max size of documents to allow to be previewed online, in MB. Default is 2 MB\nmax-size = 2\n# how many pages are allowed to be previewed online. Default is 50 pages\nmax-pages = 50\n\n\n\n\nThen, restart seafile server\n\n\ncd /data/haiwen/seafile-server-latest/\n./seafile.sh restart\n./seahub.sh restart\n\n\n\n\n\n\nDocument preview doesn't work on my Ubuntu/Debian server, what can I do?\n\n\n\n\nCurrent office online preview works with libreoffice 4.0-4.2. If the version of libreoffice installed by \napt-get\n is too old or too new, you can solve this by:\n\n\n\n\nRemove the installed libreoffice:\n\n\n\n\nsudo apt-get remove libreoffice* python-uno python3-uno\n\n\n\n\n\n\n\n\nDownload libreoffice packages from \nlibreoffice official site\n\n\n\n\n\n\nInstall the downloaded pacakges:\n\n\n\n\n\n\ntar xf LibreOffice_4.1.6_Linux_x86-64_deb.tar.gz\ncd LibreOffice_4.1.6.2_Linux_x86-64_deb\ncd DEBS\nsudo dpkg -i *.deb\n\n\n\n\n\n\nRestart your seafile server and try again. It should work now.\n\n\n\n\n./seafile.sh restart", 
            "title": "Enable Office/PDF Documents Online Preview"
        }, 
        {
            "location": "/deploy_pro/office_documents_preview/#install-libreofficeuno", 
            "text": "Libreoffice 4.1+ and Python-uno library are needed to enable office files online preview.  On Ubuntu/Debian:  sudo apt-get install libreoffice libreoffice-script-provider-python   For older version of Ubuntu:  sudo apt-get install libreoffice python-uno   On Centos/RHEL:  sudo yum install libreoffice libreoffice-headless libreoffice-pyuno  For other Linux distro:  Installation of LibreOffice on Linux  Also, you may need to install fonts for your language, especially for Asians, otherwise the  office/pdf document may not display correctly.  For example, Chinese users may wish to install the WenQuanYi series of truetype fonts:  # For ubuntu/debian\nsudo apt-get install ttf-wqy-microhei ttf-wqy-zenhei xfonts-wqy", 
            "title": "Install Libreoffice/UNO"
        }, 
        {
            "location": "/deploy_pro/office_documents_preview/#enable-office-preview", 
            "text": "Open file  seafevents.conf , in the  OFFICE CONVERTER  section:   [OFFICE CONVERTER]\nenabled = true   After modifying and saving  seafevents.conf , restart seafile server by  ./seafile.sh restart  Open a doc/ppt/xls/pdf file on seahub, you should be about the previewing it in your browser.", 
            "title": "Enable Office Preview"
        }, 
        {
            "location": "/deploy_pro/office_documents_preview/#other-configurable-options", 
            "text": "Here are full list of options you can fine tune:  [OFFICE CONVERTER]\n\n## must be  true  to enable office/pdf file online preview\nenabled = true\n\n## How many libreoffice worker processes to run concurrenlty\nworkers = 1\n\n## where to store the converted office/pdf files. Deafult is /tmp/.\noutputdir = /tmp/\n\n## how many pages are allowed to be previewed online. Default is 50 pages\nmax-pages = 50\n\n## the max size of documents to allow to be previewed online, in MB. Default is 2 MB\n## Preview a large file (for example  30M) online will freeze the browser.\nmax-size = 2", 
            "title": "Other Configurable Options"
        }, 
        {
            "location": "/deploy_pro/office_web_app/", 
            "text": "Office Web app\n\n\nIn pro version 4.4.0(or above), you can use Microsoft Office Web App to preview document online. Office Web App provides the best preview for all Office format files. For organizations with Microsoft Office Volume License, it's free to use Office Web App. For more information about Office Web App and how to deploy it, please refer to https://technet.microsoft.com/en-us/library/jj219456.aspx .\n\n\nSeafile's own Office file preview is still the default. To use Office Web App for preview, please add following config to seahub_settings.py.\n\n\n# Enable Office Web App\nENABLE_OFFICE_WEB_APP = True\n\n# Url of Office Web App's discovery page\n# The discovery page tells Seafile how to interact with Office Web App when view file online\n# You should change `http://example.office-web-app.com` to your actual Office Web App server address\nOFFICE_WEB_APP_BASE_URL = 'http://example.office-web-app.com/hosting/discovery'\n\n# Expiration of WOPI access token\n# WOPI access token is a string used by Seafile to determine the file's\n# identity and permissions when use Office Web App view it online\n# And for security reason, this token should expire after a set time period\nWOPI_ACCESS_TOKEN_EXPIRATION = 30 * 60 # seconds\n\n# Tuple of file format that you want to view through Office Web App\n# You can change this value according to your preferences\n# And of course you should make sure your Office Web App support to preview\n# the specified extension file you add below\nOFFICE_WEB_APP_FILE_EXTENSION = ('ods', 'xls', 'xlsb', 'xlsm', 'xlsx','ppsx', 'ppt',\n    'pptm', 'pptx', 'doc', 'docm', 'docx')\n\n# Enable edit file through Office Web App\nENABLE_OFFICE_WEB_APP_EDIT = True\n\n# Currently we only support `xlsx` and `pptx`\n# type of file editing through Office Web App\nOFFICE_WEB_APP_EDIT_FILE_EXTENSION = ('xlsx', 'pptx')\n\n\n\n\n\nThen restart\n\n\n./seafile.sh restart\n./seahub.sh restart\n\n\n\n\nAfter you click the document you specified in seahub_settings.py, you will see the new preview page.\n\n\n\n\nTrouble shooting\n\n\nUnderstanding how the web app integration work will help you debug the problem. When a user visit a file page:\n\n\n\n\n(seahub-\nbrowser) Seahub will generate a page containing an iframe and send to the browser\n\n\n(broswer-\noffice web app) With the iframe, the browser will try to load the file preview page from the office web app\n\n\n(office web app-\nseahub) Office web app receives the request and send a request to Seahub to get the file content\n\n\n(office web app-\nbrowser) Office web app send the file preview page to the browser.\n\n\n\n\nPlease check the Nginx log for Seahub (for step 3) and Office Web App to see which step is wrong.", 
            "title": "Integrating with Office Web App"
        }, 
        {
            "location": "/deploy_pro/office_web_app/#office-web-app", 
            "text": "In pro version 4.4.0(or above), you can use Microsoft Office Web App to preview document online. Office Web App provides the best preview for all Office format files. For organizations with Microsoft Office Volume License, it's free to use Office Web App. For more information about Office Web App and how to deploy it, please refer to https://technet.microsoft.com/en-us/library/jj219456.aspx .  Seafile's own Office file preview is still the default. To use Office Web App for preview, please add following config to seahub_settings.py.  # Enable Office Web App\nENABLE_OFFICE_WEB_APP = True\n\n# Url of Office Web App's discovery page\n# The discovery page tells Seafile how to interact with Office Web App when view file online\n# You should change `http://example.office-web-app.com` to your actual Office Web App server address\nOFFICE_WEB_APP_BASE_URL = 'http://example.office-web-app.com/hosting/discovery'\n\n# Expiration of WOPI access token\n# WOPI access token is a string used by Seafile to determine the file's\n# identity and permissions when use Office Web App view it online\n# And for security reason, this token should expire after a set time period\nWOPI_ACCESS_TOKEN_EXPIRATION = 30 * 60 # seconds\n\n# Tuple of file format that you want to view through Office Web App\n# You can change this value according to your preferences\n# And of course you should make sure your Office Web App support to preview\n# the specified extension file you add below\nOFFICE_WEB_APP_FILE_EXTENSION = ('ods', 'xls', 'xlsb', 'xlsm', 'xlsx','ppsx', 'ppt',\n    'pptm', 'pptx', 'doc', 'docm', 'docx')\n\n# Enable edit file through Office Web App\nENABLE_OFFICE_WEB_APP_EDIT = True\n\n# Currently we only support `xlsx` and `pptx`\n# type of file editing through Office Web App\nOFFICE_WEB_APP_EDIT_FILE_EXTENSION = ('xlsx', 'pptx')  Then restart  ./seafile.sh restart\n./seahub.sh restart  After you click the document you specified in seahub_settings.py, you will see the new preview page.", 
            "title": "Office Web app"
        }, 
        {
            "location": "/deploy_pro/office_web_app/#trouble-shooting", 
            "text": "Understanding how the web app integration work will help you debug the problem. When a user visit a file page:   (seahub- browser) Seahub will generate a page containing an iframe and send to the browser  (broswer- office web app) With the iframe, the browser will try to load the file preview page from the office web app  (office web app- seahub) Office web app receives the request and send a request to Seahub to get the file content  (office web app- browser) Office web app send the file preview page to the browser.   Please check the Nginx log for Seahub (for step 3) and Office Web App to see which step is wrong.", 
            "title": "Trouble shooting"
        }, 
        {
            "location": "/deploy_pro/details_about_file_search/", 
            "text": "Details about File Search\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nSearch Options\n\n\nFollowing options should be set in file \nseafevents.conf\n, and need to restart seafile and seahub to take effect.\n\n\n[INDEX FILES]\n...\n# Enable full-text search for PDF/Word/PPT\nindex_office_pdf = false\n\n\n\n\n\nUse existing ElasticSearch server\n\n\nThe search module use an elasticsearch server bundled within the seafile pro server tarball. However, you may have an existing ElasticSearch server or cluster running in your company. In this situation, you can change the config file to use your existing ES server or cluster.\n\n\nThis feature is added since \nSeafile Professional Server 2.0.5\n.\n\n\nNotes\n\n\n\n\nYour ES cluster must have thrift transport plugin installed. If not, install it:\n\n\n\n\nbin/plugin -install elasticsearch/elasticsearch-transport-thrift/1.6.0\n\n\n\n\nRestart your ES server after this.\n\n\n\n\nCurrently the seafile search module use the default analyzer in your ES server settings. \n\n\n\n\nChange the config file\n\n\n\n\nEdit \nseafevents.conf\n, add settings in the section \n[INDEX FILES]\n to specify your ES server host and port:\n\n\n\n\nvim seafevents.conf\n\n\n\n\n[INDEX FILES]\n...\nes_host = 192.168.1.101\nes_port = 9500\n\n\n\n\n\n\nes_host\n: The ip address of your ES server\n\n\nes_port\n: The listening port of the Thrift transport module. By default it should be \n9500\n\n\n\n\nCommon problems\n\n\nHow to rebuild index if something goes wrong\n\n\nYou can rebuild search index by:\n\n\n./pro/pro.py search --clear\n./pro/pro.py search --update\n\n\n\n\nIf this not work, you can try the following steps:\n\n\n\n\nStop Seafile\n\n\nRemove old search index \nrm -rf pro-data/search\n\n\nRestart Seafile\n\n\nWait one minute then run \n./pro/pro.py search --update\n\n\n\n\nI get no result when I search a keyword\n\n\nThe search index is updated every 10 minutes by default. So before the first index update is performed, you get nothing no matter what you search.\n\n\nTo be able to search immediately,\n\n\n\n\nMake sure you have started seafile server\n\n\nUpdate the search index manually:\n\n\n\n\n      cd haiwen/seafile-pro-server-2.0.4\n     ./pro/pro.py search --update\n\n\n\n\nEncrypted files cannot be searched\n\n\nThis is because the server can't index encrypted files, since, they are encrypted.", 
            "title": "Details about File Search"
        }, 
        {
            "location": "/deploy_pro/details_about_file_search/#details-about-file-search", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .", 
            "title": "Details about File Search"
        }, 
        {
            "location": "/deploy_pro/details_about_file_search/#use-existing-elasticsearch-server", 
            "text": "The search module use an elasticsearch server bundled within the seafile pro server tarball. However, you may have an existing ElasticSearch server or cluster running in your company. In this situation, you can change the config file to use your existing ES server or cluster.  This feature is added since  Seafile Professional Server 2.0.5 .", 
            "title": "Use existing ElasticSearch server"
        }, 
        {
            "location": "/deploy_pro/details_about_file_search/#notes", 
            "text": "Your ES cluster must have thrift transport plugin installed. If not, install it:   bin/plugin -install elasticsearch/elasticsearch-transport-thrift/1.6.0  Restart your ES server after this.   Currently the seafile search module use the default analyzer in your ES server settings.", 
            "title": "Notes"
        }, 
        {
            "location": "/deploy_pro/details_about_file_search/#change-the-config-file", 
            "text": "Edit  seafevents.conf , add settings in the section  [INDEX FILES]  to specify your ES server host and port:   vim seafevents.conf  [INDEX FILES]\n...\nes_host = 192.168.1.101\nes_port = 9500   es_host : The ip address of your ES server  es_port : The listening port of the Thrift transport module. By default it should be  9500", 
            "title": "Change the config file"
        }, 
        {
            "location": "/deploy_pro/virus_scan/", 
            "text": "Virus Scan\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nIn Seafile Pro Edition 4.4.0 (or above), Seafile can scan virus for uploaded files in the background. When configured to run periodically, the scan process scans all existing libraries on the server. In each scan, the process only scans newly uploaded/updated files since the last scan. For each file, the process executes a user-specified virus scan command to check whether the file is a virus or not. Most anti-virus programs provide command line utility for Linux.\n\n\nTo enable this feature, add the following options to \nseafile.conf\n:\n\n\n[virus_scan]\nscan_command = (command for checking virus)\nvirus_code = (command exit codes when file is virus)\nnonvirus_code = (command exit codes when file is not virus)\nscan_interval = (scanning interval, in unit of minutes, default to 60 minutes)\n\n\n\n\nMore details about the options:\n\n\n\n\nOn Linux/Unix, most virus scan commands returns specific exit codes for virus and non-virus. You should consult the manual of your anti-virus program for more information.\n\n\n\n\nAn example for ClamAV (http://www.clamav.net/) is provided below:\n\n\n[virus_scan]\nscan_command = clamscan\nvirus_code = 1\nnonvirus_code = 0\n\n\n\n\nTo test whether your configuration works, you can trigger a scan manually:\n\n\ncd seafile-server-latest\n./pro/pro.py virus_scan\n\n\n\n\nIf virus is detected, you can see scan records and delete infected files in Virus Scan page.", 
            "title": "Virus scan"
        }, 
        {
            "location": "/deploy_pro/virus_scan/#virus-scan", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  In Seafile Pro Edition 4.4.0 (or above), Seafile can scan virus for uploaded files in the background. When configured to run periodically, the scan process scans all existing libraries on the server. In each scan, the process only scans newly uploaded/updated files since the last scan. For each file, the process executes a user-specified virus scan command to check whether the file is a virus or not. Most anti-virus programs provide command line utility for Linux.  To enable this feature, add the following options to  seafile.conf :  [virus_scan]\nscan_command = (command for checking virus)\nvirus_code = (command exit codes when file is virus)\nnonvirus_code = (command exit codes when file is not virus)\nscan_interval = (scanning interval, in unit of minutes, default to 60 minutes)  More details about the options:   On Linux/Unix, most virus scan commands returns specific exit codes for virus and non-virus. You should consult the manual of your anti-virus program for more information.   An example for ClamAV (http://www.clamav.net/) is provided below:  [virus_scan]\nscan_command = clamscan\nvirus_code = 1\nnonvirus_code = 0  To test whether your configuration works, you can trigger a scan manually:  cd seafile-server-latest\n./pro/pro.py virus_scan  If virus is detected, you can see scan records and delete infected files in Virus Scan page.", 
            "title": "Virus Scan"
        }, 
        {
            "location": "/deploy_pro/virus_scan_with_kav4fs/", 
            "text": "Virus Scan with kav4fs\n\n\nPrerequisite\n\n\nAssume you have installed Kaspersky Anti-Virus for Linux File Server in Seafile server machine.\n\n\nIf the user that runs Seafile server is not root, it should have sudoers privilege to avoid writing password when running kav4fs-control. Add following content to /etc/sudoers:\n\n\nuser of running seafile server\n    ALL=(ALL:ALL) ALL\n\nuser of running seafile server\n ALL=NOPASSWD: /opt/kaspersky/kav4fs/bin/kav4fs-control\n\n\n\n\nScript\n\n\nAs the return code of kav4fs can not reflect the file scan result, we use a shell script to parse\nthe scan output and based on the parse result to return different return code to reflect the scan result.\n\n\nSave following contents to a file such as \nkav4fs_scan.sh\n:\n\n\n#!/bin/bash\n\nTEMP_LOG_FILE=`mktemp /tmp/XXXXXXXXXX`\nVIRUS_FOUND=1\nCLEAN=0\nUNDEFINED=2\nKAV4FS='/opt/kaspersky/kav4fs/bin/kav4fs-control'\nif [ ! -x $KAV4FS ]\nthen\n    echo \nBinary not executable\n\n    exit $UNDEFINED\nfi\n\nsudo $KAV4FS --scan-file $1 \n $TEMP_LOG_FILE\nif [ \n$?\n -ne 0 ]\nthen\n    echo \nError due to check file '$1'\n\n    exit 3\nfi\nTHREATS_C=`grep 'Threats found:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nRISKWARE_C=`grep 'Riskware found:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nINFECTED=`grep 'Infected:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nSUSPICIOUS=`grep 'Suspicious:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nSCAN_ERRORS_C=`grep 'Scan errors:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nPASSWORD_PROTECTED=`grep 'Password protected:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nCORRUPTED=`grep 'Corrupted:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\n\nrm -f $TEMP_LOG_FILE\n\nif [ $THREATS_C -gt 0 -o $RISKWARE_C -gt 0 -o $INFECTED -gt 0 -o $SUSPICIOUS -gt 0 ]\nthen\n    exit $VIRUS_FOUND\nelif [ $SCAN_ERRORS_C -gt 0 -o $PASSWORD_PROTECTED -gt 0 -o $CORRUPTED -gt 0 ]\nthen\n    exit $UNDEFINED\nelse\n    exit $CLEAN\nfi\n\n\n\n\nGrant executable privilege to the script:\n\n\nchmod u+x kav4fs_scan.sh\n\n\n\n\nThe meaing of the script return code:\n\n\n1: found virus\n0: no virus\nother: scan failed\n\n\n\n\nconfiguration\n\n\nAdd following content to \nseafile.conf\n:\n\n\n[virus_scan]\nscan_command = \nabsolute path of kav4fs_scan.sh\n\nvirus_code = 1\nnonvirus_code = 0\nscan_interval = \nscanning interval, in unit of minutes, default to 60 minutes", 
            "title": "Virus Scan With Kav4fs"
        }, 
        {
            "location": "/deploy_pro/virus_scan_with_kav4fs/#virus-scan-with-kav4fs", 
            "text": "", 
            "title": "Virus Scan with kav4fs"
        }, 
        {
            "location": "/deploy_pro/virus_scan_with_kav4fs/#prerequisite", 
            "text": "Assume you have installed Kaspersky Anti-Virus for Linux File Server in Seafile server machine.  If the user that runs Seafile server is not root, it should have sudoers privilege to avoid writing password when running kav4fs-control. Add following content to /etc/sudoers:  user of running seafile server     ALL=(ALL:ALL) ALL user of running seafile server  ALL=NOPASSWD: /opt/kaspersky/kav4fs/bin/kav4fs-control", 
            "title": "Prerequisite"
        }, 
        {
            "location": "/deploy_pro/virus_scan_with_kav4fs/#script", 
            "text": "As the return code of kav4fs can not reflect the file scan result, we use a shell script to parse\nthe scan output and based on the parse result to return different return code to reflect the scan result.  Save following contents to a file such as  kav4fs_scan.sh :  #!/bin/bash\n\nTEMP_LOG_FILE=`mktemp /tmp/XXXXXXXXXX`\nVIRUS_FOUND=1\nCLEAN=0\nUNDEFINED=2\nKAV4FS='/opt/kaspersky/kav4fs/bin/kav4fs-control'\nif [ ! -x $KAV4FS ]\nthen\n    echo  Binary not executable \n    exit $UNDEFINED\nfi\n\nsudo $KAV4FS --scan-file $1   $TEMP_LOG_FILE\nif [  $?  -ne 0 ]\nthen\n    echo  Error due to check file '$1' \n    exit 3\nfi\nTHREATS_C=`grep 'Threats found:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nRISKWARE_C=`grep 'Riskware found:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nINFECTED=`grep 'Infected:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nSUSPICIOUS=`grep 'Suspicious:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nSCAN_ERRORS_C=`grep 'Scan errors:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nPASSWORD_PROTECTED=`grep 'Password protected:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\nCORRUPTED=`grep 'Corrupted:' $TEMP_LOG_FILE|cut -d':' -f 2|sed 's/ //g'`\n\nrm -f $TEMP_LOG_FILE\n\nif [ $THREATS_C -gt 0 -o $RISKWARE_C -gt 0 -o $INFECTED -gt 0 -o $SUSPICIOUS -gt 0 ]\nthen\n    exit $VIRUS_FOUND\nelif [ $SCAN_ERRORS_C -gt 0 -o $PASSWORD_PROTECTED -gt 0 -o $CORRUPTED -gt 0 ]\nthen\n    exit $UNDEFINED\nelse\n    exit $CLEAN\nfi  Grant executable privilege to the script:  chmod u+x kav4fs_scan.sh  The meaing of the script return code:  1: found virus\n0: no virus\nother: scan failed", 
            "title": "Script"
        }, 
        {
            "location": "/deploy_pro/virus_scan_with_kav4fs/#configuration", 
            "text": "Add following content to  seafile.conf :  [virus_scan]\nscan_command =  absolute path of kav4fs_scan.sh \nvirus_code = 1\nnonvirus_code = 0\nscan_interval =  scanning interval, in unit of minutes, default to 60 minutes", 
            "title": "configuration"
        }, 
        {
            "location": "/deploy_pro/web_resumable_upload/", 
            "text": "Web Resumable File Upload\n\n\nWhen upload a large file in the web interface, if the network is unreliable, the upload is often interrupted. It's convenient if the upload can be resumed from where it stopped last time. In Seafile Pro Edition 4.4.0 and above, this feature is supported.\n\n\nThis feature works as following:\n\n\n\n\nA user uploads a large file on the web interface, and the connection is interrupted after some part of the file is uploaded.\n\n\nThe server remembers where the upload stopped.\n\n\nWhen the same file is uploaded to the same library and folder, the server tells the browser where to start the upload.\n\n\n\n\nLimitations:\n\n\n\n\nOnly supports resumble upload. File update and folder upload is not resumable.\n\n\nOnly supports Chrome, Firefox, IE 10+.\n\n\n\n\nTo enable this feature, add following options to seahub_settings.py:\n\n\nENABLE_RESUMABLE_FILEUPLOAD = True\n\n\n\n\nIn Seafile cluster, in order to make this feature function normally, one of the following two special configuration must be done:\n\n\n\n\nseafile-server-latest/seafile-data/httptemp folder should be shared amoung all front end Seafile server via NFS.\n\n\nOr, configure the load balancer to always send requests from the same IP address to a fixed back end server.", 
            "title": "Web Resumable File Upload"
        }, 
        {
            "location": "/deploy_pro/web_resumable_upload/#web-resumable-file-upload", 
            "text": "When upload a large file in the web interface, if the network is unreliable, the upload is often interrupted. It's convenient if the upload can be resumed from where it stopped last time. In Seafile Pro Edition 4.4.0 and above, this feature is supported.  This feature works as following:   A user uploads a large file on the web interface, and the connection is interrupted after some part of the file is uploaded.  The server remembers where the upload stopped.  When the same file is uploaded to the same library and folder, the server tells the browser where to start the upload.   Limitations:   Only supports resumble upload. File update and folder upload is not resumable.  Only supports Chrome, Firefox, IE 10+.   To enable this feature, add following options to seahub_settings.py:  ENABLE_RESUMABLE_FILEUPLOAD = True  In Seafile cluster, in order to make this feature function normally, one of the following two special configuration must be done:   seafile-server-latest/seafile-data/httptemp folder should be shared amoung all front end Seafile server via NFS.  Or, configure the load balancer to always send requests from the same IP address to a fixed back end server.", 
            "title": "Web Resumable File Upload"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/", 
            "text": "Setup With Amazon S3\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nPrepare\n\n\nTo setup Seafile Professional Server with Amazon S3:\n\n\n\n\nSetup the basic Seafile Professional Server following the guide on \nDownload and setup Seafile Professional Server\n\n\nInstall the python \nboto\n library. It's needed to access S3 service.\n\n\n\n\nsudo easy_install boto\n\n\n\n\n\n\nInstall and configure memcached. For best performance, Seafile requires install memcached and enable memcache for objects. We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf\n\n\n\n\n# Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128\n\n\n\n\nModify Seafile.conf\n\n\nEdit \nseafile.conf\n, add the following lines:\n\n\n[commit_object_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-commit-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-fs-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[block_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-block-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nIt's recommended to create separate buckets for commit, fs, and block objects.\nThe key_id and key are required to authenticate you to S3. You can find the key_id and key in the \"security credentials\" section on your AWS account page.\n\n\nWhen creating your buckets on S3, please first read \nS3 bucket naming rules\n. Note especially not to use \nUPPERCASE\n letters in bucket names (don't use camel style names, such as MyCommitOjbects).\n\n\nUse S3 in newer regions\n\n\nAfter Januaray 2014, new regions of AWS will only support authentication signature version 4 for S3. At this time, new region includes Frankfurt and China.\n\n\nTo use S3 backend in these regions, add following options to commit_object_backend, fs_object_backend and block_backend section in seafile.conf\n\n\nuse_v4_signature = true\n# eu-central-1 for Frankfurt region\naws_region = eu-central-1\n\n\n\n\nFor file search and webdav to work with the v4 signature mechanism, you need to add following lines to ~/.boto\n\n\n[s3]\nuse-sigv4 = True\n\n\n\n\nUsing memcached cluster\n\n\nIn a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf\n\n\nmemcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nUse HTTPS connections to S3\n\n\nSince Pro 5.0.4, you can use HTTPS connections to S3. Add the following options to seafile.conf:\n\n\n[commit_object_backend]\nname = s3\n......\nuse_https = true\n\n[fs_object_backend]\nname = s3\n......\nuse_https = true\n\n[block_backend]\nname = s3\n......\nuse_https = true\n\n\n\n\nBecause the server package is built on CentOS 6, if you're using Debian/Ubuntu, you have to copy the system CA bundle to CentOS's CA bundle path. Otherwise Seafile can't find the CA bundle so that the SSL connection will fail.\n\n\nsudo mkdir -p /etc/pki/tls/certs\nsudo cp /etc/ssl/certs/ca-certificates.crt /etc/pki/tls/certs/ca-bundle.crt\nsudo ln -s /etc/pki/tls/certs/ca-bundle.crt /etc/pki/tls/cert.pem\n\n\n\n\nAnother important note is that you \nmust not use '.' in your bucket names\n. Otherwise the wildcard certificate for AWS S3 cannot be resolved. This is a limitation on AWS.\n\n\nUse S3-compatible Object Storage\n\n\nMany object storage systems are now compatible with the S3 API, such as OpenStack Swift and Ceph's RADOS Gateway. You can use these S3-compatible storage systems as backend for Seafile. Here is an example config:\n\n\n[commit_object_backend]\nname = s3\nbucket = my-commit-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = s3\nbucket = my-fs-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[block_backend]\nname = s3\nbucket = my-block-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nhost\n is the address and port of the S3-compatible service. You cannot prepend \"http\" or \"https\" to the \nhost\n option. By default it'll use http connections. If you want to use https connection, please set \nuse_https = true\n option.\n\n\npath_style_request\n asks Seafile to use URLs like \nhttps://192.168.1.123:8080/bucketname/object\n to access objects. In Amazon S3, the default URL format is in virtual host style, such as \nhttps://bucketname.s3.amazonaws.com/object\n. But this style relies on advanced DNS server setup. So most S3-compatible storage systems only implement the path style format.\n\n\nRun and Test\n\n\nNow you can start Seafile by \n./seafile.sh start\n and \n./seahub.sh start\n and visit the website.", 
            "title": "Amazon S3 Backend"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#setup-with-amazon-s3", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .", 
            "title": "Setup With Amazon S3"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#prepare", 
            "text": "To setup Seafile Professional Server with Amazon S3:   Setup the basic Seafile Professional Server following the guide on  Download and setup Seafile Professional Server  Install the python  boto  library. It's needed to access S3 service.   sudo easy_install boto   Install and configure memcached. For best performance, Seafile requires install memcached and enable memcache for objects. We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf   # Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128", 
            "title": "Prepare"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#modify-seafileconf", 
            "text": "Edit  seafile.conf , add the following lines:  [commit_object_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-commit-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-fs-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[block_backend]\nname = s3\n# bucket name can only use lowercase characters, numbers, periods and dashes. Period cannot be used in Frankfurt region.\nbucket = my-block-objects\nkey_id = your-key-id\nkey = your-secret-key\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100  It's recommended to create separate buckets for commit, fs, and block objects.\nThe key_id and key are required to authenticate you to S3. You can find the key_id and key in the \"security credentials\" section on your AWS account page.  When creating your buckets on S3, please first read  S3 bucket naming rules . Note especially not to use  UPPERCASE  letters in bucket names (don't use camel style names, such as MyCommitOjbects).", 
            "title": "Modify Seafile.conf"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#use-s3-in-newer-regions", 
            "text": "After Januaray 2014, new regions of AWS will only support authentication signature version 4 for S3. At this time, new region includes Frankfurt and China.  To use S3 backend in these regions, add following options to commit_object_backend, fs_object_backend and block_backend section in seafile.conf  use_v4_signature = true\n# eu-central-1 for Frankfurt region\naws_region = eu-central-1  For file search and webdav to work with the v4 signature mechanism, you need to add following lines to ~/.boto  [s3]\nuse-sigv4 = True", 
            "title": "Use S3 in newer regions"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#using-memcached-cluster", 
            "text": "In a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf  memcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100", 
            "title": "Using memcached cluster"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#use-https-connections-to-s3", 
            "text": "Since Pro 5.0.4, you can use HTTPS connections to S3. Add the following options to seafile.conf:  [commit_object_backend]\nname = s3\n......\nuse_https = true\n\n[fs_object_backend]\nname = s3\n......\nuse_https = true\n\n[block_backend]\nname = s3\n......\nuse_https = true  Because the server package is built on CentOS 6, if you're using Debian/Ubuntu, you have to copy the system CA bundle to CentOS's CA bundle path. Otherwise Seafile can't find the CA bundle so that the SSL connection will fail.  sudo mkdir -p /etc/pki/tls/certs\nsudo cp /etc/ssl/certs/ca-certificates.crt /etc/pki/tls/certs/ca-bundle.crt\nsudo ln -s /etc/pki/tls/certs/ca-bundle.crt /etc/pki/tls/cert.pem  Another important note is that you  must not use '.' in your bucket names . Otherwise the wildcard certificate for AWS S3 cannot be resolved. This is a limitation on AWS.", 
            "title": "Use HTTPS connections to S3"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#use-s3-compatible-object-storage", 
            "text": "Many object storage systems are now compatible with the S3 API, such as OpenStack Swift and Ceph's RADOS Gateway. You can use these S3-compatible storage systems as backend for Seafile. Here is an example config:  [commit_object_backend]\nname = s3\nbucket = my-commit-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = s3\nbucket = my-fs-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[block_backend]\nname = s3\nbucket = my-block-objects\nkey_id = your-key-id\nkey = your-secret-key\nhost = 192.168.1.123:8080\npath_style_request = true\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100  host  is the address and port of the S3-compatible service. You cannot prepend \"http\" or \"https\" to the  host  option. By default it'll use http connections. If you want to use https connection, please set  use_https = true  option.  path_style_request  asks Seafile to use URLs like  https://192.168.1.123:8080/bucketname/object  to access objects. In Amazon S3, the default URL format is in virtual host style, such as  https://bucketname.s3.amazonaws.com/object . But this style relies on advanced DNS server setup. So most S3-compatible storage systems only implement the path style format.", 
            "title": "Use S3-compatible Object Storage"
        }, 
        {
            "location": "/deploy_pro/setup_with_amazon_s3/#run-and-test", 
            "text": "Now you can start Seafile by  ./seafile.sh start  and  ./seahub.sh start  and visit the website.", 
            "title": "Run and Test"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/", 
            "text": "Setup With Ceph\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nCeph is a scalable distributed storage system. Seafile can use Ceph's RADOS object storage layer for storage backend.\n\n\nCopy ceph conf file and client keyring\n\n\nSeafile acts as a client to Ceph/RADOS, so it needs to access ceph cluster's conf file and keyring. You have to copy these files from a ceph admin node's /etc/ceph directory to the seafile machine.\n\n\nseafile-machine# sudo scp user@ceph-admin-node:/etc/ceph/ /etc\n\n\n\n\nInstall and enable memcached\n\n\nFor best performance, Seafile requires install memcached and enable memcache for objects. \n\n\nWe recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf\n\n\n# Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128\n\n\n\n\nInstall Python Ceph Library\n\n\nFile search and WebDAV functions rely on Python Ceph library installed in the system.\n\n\nOn Debian/Ubuntu:\n\n\nsudo apt-get install python-ceph\n\n\n\n\nOn RedHat/CentOS:\n\n\nsudo yum install python-rados\n\n\n\n\nEdit seafile configuration\n\n\nEdit \nseafile.conf\n, add the following lines:\n\n\n[block_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-blocks\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-commits\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-fs\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nIt's recommended to create separate pools for commit, fs, and block objects.\n\n\nceph-admin-node# rados mkpool seafile-blocks\nceph-admin-node# rados mkpool seafile-commits\nceph-admin-node# rados mkpool seafile-fs\n\n\n\n\nUsing memcached cluster\n\n\nIn a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf\n\n\nmemcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nUse arbitary Ceph user\n\n\nThe above configuration will use the default (client.admin) user to connect to Ceph.\nYou may want to use some other Ceph user to connect. This is supported in Seafile.\nTo specify the Ceph user, you have to add a \nceph_client_id\n option to seafile.conf, as the following:\n\n\n[block_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-blocks\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-commits\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-fs\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nYou also have to add this user's keyring path to /etc/ceph/ceph.conf:\n\n\n[client.seafile]\nkeyring = \npath to user's keyring file", 
            "title": "Ceph Backend"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#setup-with-ceph", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  Ceph is a scalable distributed storage system. Seafile can use Ceph's RADOS object storage layer for storage backend.", 
            "title": "Setup With Ceph"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#copy-ceph-conf-file-and-client-keyring", 
            "text": "Seafile acts as a client to Ceph/RADOS, so it needs to access ceph cluster's conf file and keyring. You have to copy these files from a ceph admin node's /etc/ceph directory to the seafile machine.  seafile-machine# sudo scp user@ceph-admin-node:/etc/ceph/ /etc", 
            "title": "Copy ceph conf file and client keyring"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#install-and-enable-memcached", 
            "text": "For best performance, Seafile requires install memcached and enable memcache for objects.   We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf  # Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128", 
            "title": "Install and enable memcached"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#install-python-ceph-library", 
            "text": "File search and WebDAV functions rely on Python Ceph library installed in the system.  On Debian/Ubuntu:  sudo apt-get install python-ceph  On RedHat/CentOS:  sudo yum install python-rados", 
            "title": "Install Python Ceph Library"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#edit-seafile-configuration", 
            "text": "Edit  seafile.conf , add the following lines:  [block_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-blocks\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-commits\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\npool = seafile-fs\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100  It's recommended to create separate pools for commit, fs, and block objects.  ceph-admin-node# rados mkpool seafile-blocks\nceph-admin-node# rados mkpool seafile-commits\nceph-admin-node# rados mkpool seafile-fs", 
            "title": "Edit seafile configuration"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#using-memcached-cluster", 
            "text": "In a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf  memcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100", 
            "title": "Using memcached cluster"
        }, 
        {
            "location": "/deploy_pro/setup_with_ceph/#use-arbitary-ceph-user", 
            "text": "The above configuration will use the default (client.admin) user to connect to Ceph.\nYou may want to use some other Ceph user to connect. This is supported in Seafile.\nTo specify the Ceph user, you have to add a  ceph_client_id  option to seafile.conf, as the following:  [block_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-blocks\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-commits\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = ceph\nceph_config = /etc/ceph/ceph.conf\n# Sepcify Ceph user for Seafile here\nceph_client_id = seafile\npool = seafile-fs\nmemcached_options = --SERVER=localhost --POOL-MIN=10 --POOL-MAX=100  You also have to add this user's keyring path to /etc/ceph/ceph.conf:  [client.seafile]\nkeyring =  path to user's keyring file", 
            "title": "Use arbitary Ceph user"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/", 
            "text": "Setup With OpenStack Swift\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nSeafile supports OpenStack Swift as storage backend since 5.1.0. This backend uses the native Swift API. Previously users can only use the S3-compatibility layer of Swift. That way is obsolete now. The old documentation is still available \nhere\n.\n\n\nPrepare\n\n\nTo setup Seafile Professional Server with Swift:\n\n\n\n\nSetup the basic Seafile Professional Server following the guide on \nDownload and setup Seafile Professional Server\n\n\nInstall and configure memcached. For best performance, Seafile requires install memcached and enable memcache for objects. We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf\n\n\n\n\n# Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128\n\n\n\n\nModify Seafile.conf\n\n\nEdit \nseafile.conf\n, add the following lines:\n\n\n[block_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-blocks\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-commits\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-fs\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nThe above config is just an example. You should replace the options according to your own environment.\n\n\nSeafile only supports Swift with Keystone as authentication mechanism. Currently only the v2.0 auth protocol is supported. The \nauth_host\n option is the address and port of Keystone service.\n\n\nIt's recommended to create separate containers for commit, fs, and block objects.\n\n\nUsing memcached cluster\n\n\nIn a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf\n\n\nmemcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nUse HTTPS connections to Swift\n\n\nSince Pro 5.0.4, you can use HTTPS connections to Swift. Add the following options to seafile.conf:\n\n\n[commit_object_backend]\nname = swift\n......\nuse_https = true\n\n[fs_object_backend]\nname = swift\n......\nuse_https = true\n\n[block_backend]\nname = swift\n......\nuse_https = true\n\n\n\n\nBecause the server package is built on CentOS 6, if you're using Debian/Ubuntu, you have to copy the system CA bundle to CentOS's CA bundle path. Otherwise Seafile can't find the CA bundle so that the SSL connection will fail.\n\n\nsudo mkdir -p /etc/pki/tls/certs\nsudo cp /etc/ssl/certs/ca-certificates.crt /etc/pki/tls/certs/ca-bundle.crt\nsudo ln -s /etc/pki/tls/certs/ca-bundle.crt /etc/pki/tls/cert.pem\n\n\n\n\nRun and Test\n\n\nNow you can start Seafile by \n./seafile.sh start\n and \n./seahub.sh start\n and visit the website.", 
            "title": "OpenStack Swift Backend"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#setup-with-openstack-swift", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  Seafile supports OpenStack Swift as storage backend since 5.1.0. This backend uses the native Swift API. Previously users can only use the S3-compatibility layer of Swift. That way is obsolete now. The old documentation is still available  here .", 
            "title": "Setup With OpenStack Swift"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#prepare", 
            "text": "To setup Seafile Professional Server with Swift:   Setup the basic Seafile Professional Server following the guide on  Download and setup Seafile Professional Server  Install and configure memcached. For best performance, Seafile requires install memcached and enable memcache for objects. We recommend to allocate 128MB memory for memcached. Edit /etc/memcached.conf   # Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n# -m 64\n-m 128", 
            "title": "Prepare"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#modify-seafileconf", 
            "text": "Edit  seafile.conf , add the following lines:  [block_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-blocks\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100\n\n[commit_object_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-commits\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100\n\n[fs_object_backend]\nname = swift\ntenant = yourTenant\nuser_name = user\npassword = secret\ncontainer = seafile-fs\nauth_host = 192.168.56.31:5000\nauth_ver = v2.0\nmemcached_options = --SERVER=192.168.1.134:11211 --POOL-MIN=10 --POOL-MAX=100  The above config is just an example. You should replace the options according to your own environment.  Seafile only supports Swift with Keystone as authentication mechanism. Currently only the v2.0 auth protocol is supported. The  auth_host  option is the address and port of Keystone service.  It's recommended to create separate containers for commit, fs, and block objects.", 
            "title": "Modify Seafile.conf"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#using-memcached-cluster", 
            "text": "In a cluster environment, you may want to use a memcached cluster. In the above configuration, you have to specify all the memcached server node addresses in seafile.conf  memcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100", 
            "title": "Using memcached cluster"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#use-https-connections-to-swift", 
            "text": "Since Pro 5.0.4, you can use HTTPS connections to Swift. Add the following options to seafile.conf:  [commit_object_backend]\nname = swift\n......\nuse_https = true\n\n[fs_object_backend]\nname = swift\n......\nuse_https = true\n\n[block_backend]\nname = swift\n......\nuse_https = true  Because the server package is built on CentOS 6, if you're using Debian/Ubuntu, you have to copy the system CA bundle to CentOS's CA bundle path. Otherwise Seafile can't find the CA bundle so that the SSL connection will fail.  sudo mkdir -p /etc/pki/tls/certs\nsudo cp /etc/ssl/certs/ca-certificates.crt /etc/pki/tls/certs/ca-bundle.crt\nsudo ln -s /etc/pki/tls/certs/ca-bundle.crt /etc/pki/tls/cert.pem", 
            "title": "Use HTTPS connections to Swift"
        }, 
        {
            "location": "/deploy_pro/setup_with_swift/#run-and-test", 
            "text": "Now you can start Seafile by  ./seafile.sh start  and  ./seahub.sh start  and visit the website.", 
            "title": "Run and Test"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/", 
            "text": "Deploy in a cluster\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\n Architecture\n\n\nThe Seafile cluster solution employs a 3-tier architecture:\n\n\n\n\nLoad balancer tier: Distribute incoming traffic to Seafile servers. HA can be achieved by deploying multiple load balancer instances.\n\n\nSeafile server cluster: a cluster of Seafile server instances. If one instance fails, the load balancer will stop handing traffic to it. So HA is achieved.\n\n\nBackend storage: Distributed storage cluster, such as S3, Openstack Swift, Ceph.\n\n\n\n\nThis architecture scales horizontally. That is, you can handle more traffic by adding more machines. The architecture is presented in the following picture.\n\n\n\n\nThere are two main components on the Seafile server node: web server (Nginx/Apache) and Seafile app server. The web server passes requests from the clients to Seafile app server. The Seafile app servers work independently. They don't know about each other's state. That means each app server can fail independently without affecting other app server instances. The load balancer is responsible for detecting failure and re-routing requests.\n\n\nEven though Seafile app servers work independently, they still have to share some session information. All shared session information are stored in memcached. So all Seafile app servers have to connect to the same memcached (cluster). More details about memcached configuration will discussed later.\n\n\nAll Seafile app servers access the same set of user data. The user data has two parts: in MySQL database and in backend storage cluster (S3, Ceph etc.). All app servers serve the data equally to the clients.\n\n\nFor database, all app servers have to connect to the same database or database cluster. We recommend to use MariaDB Galera Cluster if you need a database cluster.\n\n\nThere are a few steps to deploy a Seafile cluster:\n\n\n\n\nPrepare hardware, operating systems, memcached and database\n\n\nSetup a single Seafile server node\n\n\nCopy the deployment to other Seafile nodes\n\n\nSetup Nginx/Apache and firewall rules\n\n\nSetup load balancer\n\n\nSetup backgroup task node\n\n\n\n\nPreparation\n\n\nHardware\n\n\nAt least 2 Linux server with at least 2GB RAM.\n\n\nInstall Python libraries\n\n\nOn each mode, you need to install some python libraries.\n\n\nFirst make sure your have installed python 2.6 or 2.7, then:\n\n\nsudo easy_install pip\nsudo pip install boto\n\n\n\n\nIf you receive an error about \"Wheel installs require setuptools \n= ...\", run this between the pip and boto lines above\n\n\nsudo pip install setuptools --no-use-wheel --upgrade\n\n\n\n\nSetup Memcached\n\n\nAll seafile server instances will share the same memcached servers. Let's assume that the address of memcached server is 192.168.1.134, listening on port 11211 (the default).\n\n\nBy default, memcached only listen on 127.0.0.1. So you should modify memcached.conf and restart memcached.\n\n\n# Specify which IP address to listen on. The default is to listen on all IP addresses\n# This parameter is one of the only security measures that memcached has, so make sure\n# it's listening on a firewalled interface.\n-l 0.0.0.0\n\n\n\n\nIt's also recommended to set a higher limit for memcached's memory, such as 256MB.\n\n\n# Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n-m 256\n\n\n\n\nSeafile servers share session information within memcached. If you set up a memcached cluster, please make sure all the seafile server nodes connects to all the memcached nodes.\n\n\nWhen setting up a memcached cluster, you can either run one memcached instance on each Seafile server node, or set up separate machines for the memcached cluster. It usually saves you some money if you run memcached on Seafile server nodes.\n\n\n(Optional) Setup MariaDB Cluster\n\n\nMariaDB cluster helps you to remove single point of failure from the cluster architecture. Every update in the database cluster is synchronously replicated to all instances.\n\n\nIt's recommended that you run one database instance on each Seafile server node. There are a few benefits about this approach:\n\n\n\n\nThe Seafile app server always access its local database intance, which is faster.\n\n\nYou don't have to set up another load balancer for the database instances.\n\n\n\n\nThis architecture should scale well for a few tens of database nodes, since Seafile has no much write operations to the db. For bigger deployment, you'd better use more sophiscated load balancing techiques for the databases.\n\n\nDetails about setting up MariaDB cluster is covered in \nthis document\n.\n\n\n Configure a Single Node\n\n\nYou should make sure the config files on every Seafile server are consistent. \nIt's critical that you don't set up seafile server on each machine separately. You should set up seafile server on one machine then copy the config directory to the other machines.\n\n\nGet the license\n\n\nPut the license you get under the top level diretory. In our wiki, we use the diretory \n/data/haiwen/\n as the top level directory.\n\n\nDownload/Uncompress Seafile Professional Server\n\n\ntar xf seafile-pro-server_2.1.3_x86-64.tar.gz\n\n\n\n\nNow you have:\n\n\nhaiwen\n\u251c\u2500\u2500 seafile-license.txt\n\u2514\u2500\u2500 seafile-pro-server-2.1.3/\n\n\n\n\nSetup Seafile Config\n\n\nThe setup process of Seafile Professional Server is the same as the Seafile Community Server. See \nDownload and Setup Seafile Server With MySQL\n in the community wiki.\n\n\nNote: \nUse the load balancer's address or domain name for the server address. Don't use the local IP address of each Seafile server machine. This assures the user will always access your service via the load balancers.\n\n\nAfter the setup process is done, you still have to do a few manually changes to the config files.\n\n\nseafile.conf\n\n\nYou have to add the following configuration to \nseafile.conf\n\n\n[cluster]\nenabled = true\nmemcached_options = --SERVER=192.168.1.134 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\nIf you have a memcached cluster, you need to specify all the memcached server addresses in seafile.conf. The format is\n\n\n[cluster]\nenabled = true\nmemcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100\n\n\n\n\n(Optional) The Seafile server also opens a port for the load balancers to run health checks. Seafile by default use port 11001. You can change this by adding the following config to \nseafile.conf\n\n\n[cluster]\nhealth_check_port = 12345\n\n\n\n\nseahub_settings.py\n\n\nInstall python memcache library.\n\n\nOn Debian/Ubuntu:\n\n\nsudo apt-get install python-memcache\n\n\n\n\nOn CentOS/RedHat:\n\n\nsudo yum install python-memcached\n\n\n\n\nAdd following configuration to \nseahub_settings.py\n. These settings tell Seahub to store avatar in database and cache avatar in memcached, and store css CACHE to local memory of every node.\n\n\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '192.168.1.134:11211',\n    }\n}\n\nAVATAR_FILE_STORAGE = 'seahub.base.database_storage.DatabaseStorage'\n\nCOMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'\n\n\n\n\n\nIf you use memcached cluster, please replace the \nCACHES\n variable with the following:\n\n\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': ['192.168.1.134:11211', '192.168.1.135:11211', '192.168.1.136:11211',],\n    }\n}\n\n\n\n\nIf you enable thumbnail feature, you'd better set thumbnail storage path to a \nShared Folder\n, so that every node will create/get thumbnail through the same \nShared Folder\n.\n\n\nTHUMBNAIL_ROOT = 'path/to/shared/folder/'\n\n\n\n\nseafevents.conf\n\n\nAdd following to \nseafevents.conf\n to disable file indexing service on the local server. The file indexing service should be started on a dedicated background server.\n\n\n[INDEX FILES]\nexternal_es_server = true\n\n\n\n\nUpdate Seahub Database\n\n\nIn cluster environment, we have to store avatars in the database instead of in a local disk.\n\n\nCREATE TABLE `avatar_uploaded` (`filename` TEXT NOT NULL, `filename_md5` CHAR(32) NOT NULL PRIMARY KEY, `data` MEDIUMTEXT NOT NULL, `size` INTEGER NOT NULL, `mtime` datetime NOT NULL);\n\n\n\n\nBackend Storage Settings\n\n\nYou also need to add the settings for backend cloud storage systems to the config files.\n\n\n\n\nFor NFS: \nSetup Seafile cluster with NFS\n\n\nFor S3: \nSetup With Amazon S3\n\n\nFor OpenStack Swift: \nSetup With OpenStackSwift\n\n\nFor Ceph: \nSetup With Ceph\n\n\n\n\nRun and Test the Single Node\n\n\nOnce you have finished configuring this single node, start it to test if it can run correctly:\n\n\ncd /data/haiwen/seafile-server-latest\n./seafile.sh start\n./seahub.sh start\n\n\n\n\nNote:\n The first time you start seahub, the script would prompt you to create an admin account for your seafile server. \n\n\nOpen your browser and visit http://ip-address-of-this-node:8000, login with the admin account.\n\n\n Configure other nodes\n\n\nNow you have one node working fine, let's continue to configure other nodes.\n\n\nCopy the config to all Seafile servers\n\n\nSupposed your seafile installation directory is \n/data/haiwen\n, compress this whole directory into a tar ball and copy the tar ball to all other Seafile server machines. You can simply uncompress the tar ball and use it.\n\n\nOn each node, run \n./seafile.sh\n and \n./seahub.sh\n to start seafile server.\n\n\nSetup Nginx/Apache and Https\n\n\nYou'll usually want to use Nginx/Apache and https for web access. You need to set it up on each machine running Seafile server. \nMake sure the certificate on all the servers are the same.\n\n\n\n\nFor Nginx:\n\n\nConfig Seahub with Nginx\n\n\nEnabling Https with Nginx\n\n\nFor Apache:\n\n\nConfig Seahub with Apache\n\n\nEnabling Https with Apache\n\n\n\n\nFirewall Settings\n\n\nBeside \nstandard ports of a seafile server\n, there are 2 firewall rule changes for Seafile cluster:\n\n\n\n\nOn each Seafile server machine, you should open the health check port (default 11001);\n\n\nOn the memcached server, you should open the port 11211. For security, only the Seafile servers should be allow to access this port.\n\n\n\n\nLoad Balancer Setting\n\n\nNow that your cluster is already running, fire up the load balancer and welcome your users.\n\n\nAWS Elastic Load Balancer (ELB)\n\n\nIn the AWS ELB management console, after you've added the Seafile server instances to the instance list, you should do two more configurations.\n\n\nFirst you should setup TCP listeners\n\n\n\n\nThen you setup health check\n\n\n\n\nHAProxy\n\n\nThis is a sample \n/etc/haproxy/haproxy.cfg\n:\n\n\n(Assume your health check port is \n11001\n)\n\n\nglobal\n    log 127.0.0.1 local1 notice\n    maxconn 4096\n    user haproxy\n    group haproxy\n\ndefaults\n    log global\n    mode http\n    retries 3\n    maxconn 2000\n    timeout connect 10000\n    timeout client 300000\n    timeout server 300000\n\nlisten seahub 0.0.0.0:80\n    mode http\n    option httplog\n    option dontlognull\n    option forwardfor\n    server seahubserver01 192.168.1.165:80 check port 11001\n    server seahubserver02 192.168.1.200:80 check port 11001\n\nlisten seahub-https 0.0.0.0:443\n    mode tcp\n    option tcplog\n    option dontlognull\n    server seahubserver01 192.168.1.165:443 check port 11001\n    server seahubserver02 192.168.1.200:443 check port 11001\n\n\n\n\nSee how it runs\n\n\nNow you should be able to test your cluster. Open https://seafile.example.com in your browser and enjoy. You can also sync file with Seafile clients.\n\n\nIf the above works, the next step would be \nEnable search and background tasks in a cluster\n.", 
            "title": "Deploy in a cluster"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#deploy-in-a-cluster", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .", 
            "title": "Deploy in a cluster"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#hardware", 
            "text": "At least 2 Linux server with at least 2GB RAM.", 
            "title": "Hardware"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#install-python-libraries", 
            "text": "On each mode, you need to install some python libraries.  First make sure your have installed python 2.6 or 2.7, then:  sudo easy_install pip\nsudo pip install boto  If you receive an error about \"Wheel installs require setuptools  = ...\", run this between the pip and boto lines above  sudo pip install setuptools --no-use-wheel --upgrade", 
            "title": "Install Python libraries"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#setup-memcached", 
            "text": "All seafile server instances will share the same memcached servers. Let's assume that the address of memcached server is 192.168.1.134, listening on port 11211 (the default).  By default, memcached only listen on 127.0.0.1. So you should modify memcached.conf and restart memcached.  # Specify which IP address to listen on. The default is to listen on all IP addresses\n# This parameter is one of the only security measures that memcached has, so make sure\n# it's listening on a firewalled interface.\n-l 0.0.0.0  It's also recommended to set a higher limit for memcached's memory, such as 256MB.  # Start with a cap of 64 megs of memory. It's reasonable, and the daemon default\n# Note that the daemon will grow to this size, but does not start out holding this much\n# memory\n-m 256  Seafile servers share session information within memcached. If you set up a memcached cluster, please make sure all the seafile server nodes connects to all the memcached nodes.  When setting up a memcached cluster, you can either run one memcached instance on each Seafile server node, or set up separate machines for the memcached cluster. It usually saves you some money if you run memcached on Seafile server nodes.", 
            "title": "Setup Memcached"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#optional-setup-mariadb-cluster", 
            "text": "MariaDB cluster helps you to remove single point of failure from the cluster architecture. Every update in the database cluster is synchronously replicated to all instances.  It's recommended that you run one database instance on each Seafile server node. There are a few benefits about this approach:   The Seafile app server always access its local database intance, which is faster.  You don't have to set up another load balancer for the database instances.   This architecture should scale well for a few tens of database nodes, since Seafile has no much write operations to the db. For bigger deployment, you'd better use more sophiscated load balancing techiques for the databases.  Details about setting up MariaDB cluster is covered in  this document .", 
            "title": "(Optional) Setup MariaDB Cluster"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#get-the-license", 
            "text": "Put the license you get under the top level diretory. In our wiki, we use the diretory  /data/haiwen/  as the top level directory.", 
            "title": "Get the license"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#downloaduncompress-seafile-professional-server", 
            "text": "tar xf seafile-pro-server_2.1.3_x86-64.tar.gz  Now you have:  haiwen\n\u251c\u2500\u2500 seafile-license.txt\n\u2514\u2500\u2500 seafile-pro-server-2.1.3/", 
            "title": "Download/Uncompress Seafile Professional Server"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#setup-seafile-config", 
            "text": "The setup process of Seafile Professional Server is the same as the Seafile Community Server. See  Download and Setup Seafile Server With MySQL  in the community wiki.  Note:  Use the load balancer's address or domain name for the server address. Don't use the local IP address of each Seafile server machine. This assures the user will always access your service via the load balancers.  After the setup process is done, you still have to do a few manually changes to the config files.", 
            "title": "Setup Seafile Config"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#seafileconf", 
            "text": "You have to add the following configuration to  seafile.conf  [cluster]\nenabled = true\nmemcached_options = --SERVER=192.168.1.134 --POOL-MIN=10 --POOL-MAX=100  If you have a memcached cluster, you need to specify all the memcached server addresses in seafile.conf. The format is  [cluster]\nenabled = true\nmemcached_options = --SERVER=192.168.1.134 --SERVER=192.168.1.135 --SERVER=192.168.1.136 --POOL-MIN=10 --POOL-MAX=100  (Optional) The Seafile server also opens a port for the load balancers to run health checks. Seafile by default use port 11001. You can change this by adding the following config to  seafile.conf  [cluster]\nhealth_check_port = 12345", 
            "title": "seafile.conf"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#seahub_settingspy", 
            "text": "Install python memcache library.  On Debian/Ubuntu:  sudo apt-get install python-memcache  On CentOS/RedHat:  sudo yum install python-memcached  Add following configuration to  seahub_settings.py . These settings tell Seahub to store avatar in database and cache avatar in memcached, and store css CACHE to local memory of every node.  CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '192.168.1.134:11211',\n    }\n}\n\nAVATAR_FILE_STORAGE = 'seahub.base.database_storage.DatabaseStorage'\n\nCOMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'  If you use memcached cluster, please replace the  CACHES  variable with the following:  CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': ['192.168.1.134:11211', '192.168.1.135:11211', '192.168.1.136:11211',],\n    }\n}  If you enable thumbnail feature, you'd better set thumbnail storage path to a  Shared Folder , so that every node will create/get thumbnail through the same  Shared Folder .  THUMBNAIL_ROOT = 'path/to/shared/folder/'", 
            "title": "seahub_settings.py"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#seafeventsconf", 
            "text": "Add following to  seafevents.conf  to disable file indexing service on the local server. The file indexing service should be started on a dedicated background server.  [INDEX FILES]\nexternal_es_server = true", 
            "title": "seafevents.conf"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#update-seahub-database", 
            "text": "In cluster environment, we have to store avatars in the database instead of in a local disk.  CREATE TABLE `avatar_uploaded` (`filename` TEXT NOT NULL, `filename_md5` CHAR(32) NOT NULL PRIMARY KEY, `data` MEDIUMTEXT NOT NULL, `size` INTEGER NOT NULL, `mtime` datetime NOT NULL);", 
            "title": "Update Seahub Database"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#backend-storage-settings", 
            "text": "You also need to add the settings for backend cloud storage systems to the config files.   For NFS:  Setup Seafile cluster with NFS  For S3:  Setup With Amazon S3  For OpenStack Swift:  Setup With OpenStackSwift  For Ceph:  Setup With Ceph", 
            "title": "Backend Storage Settings"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#run-and-test-the-single-node", 
            "text": "Once you have finished configuring this single node, start it to test if it can run correctly:  cd /data/haiwen/seafile-server-latest\n./seafile.sh start\n./seahub.sh start  Note:  The first time you start seahub, the script would prompt you to create an admin account for your seafile server.   Open your browser and visit http://ip-address-of-this-node:8000, login with the admin account.", 
            "title": "Run and Test the Single Node"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#copy-the-config-to-all-seafile-servers", 
            "text": "Supposed your seafile installation directory is  /data/haiwen , compress this whole directory into a tar ball and copy the tar ball to all other Seafile server machines. You can simply uncompress the tar ball and use it.  On each node, run  ./seafile.sh  and  ./seahub.sh  to start seafile server.", 
            "title": "Copy the config to all Seafile servers"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#setup-nginxapache-and-https", 
            "text": "You'll usually want to use Nginx/Apache and https for web access. You need to set it up on each machine running Seafile server.  Make sure the certificate on all the servers are the same.   For Nginx:  Config Seahub with Nginx  Enabling Https with Nginx  For Apache:  Config Seahub with Apache  Enabling Https with Apache", 
            "title": "Setup Nginx/Apache and Https"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#firewall-settings", 
            "text": "Beside  standard ports of a seafile server , there are 2 firewall rule changes for Seafile cluster:   On each Seafile server machine, you should open the health check port (default 11001);  On the memcached server, you should open the port 11211. For security, only the Seafile servers should be allow to access this port.", 
            "title": "Firewall Settings"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#aws-elastic-load-balancer-elb", 
            "text": "In the AWS ELB management console, after you've added the Seafile server instances to the instance list, you should do two more configurations.  First you should setup TCP listeners   Then you setup health check", 
            "title": "AWS Elastic Load Balancer (ELB)"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#haproxy", 
            "text": "This is a sample  /etc/haproxy/haproxy.cfg :  (Assume your health check port is  11001 )  global\n    log 127.0.0.1 local1 notice\n    maxconn 4096\n    user haproxy\n    group haproxy\n\ndefaults\n    log global\n    mode http\n    retries 3\n    maxconn 2000\n    timeout connect 10000\n    timeout client 300000\n    timeout server 300000\n\nlisten seahub 0.0.0.0:80\n    mode http\n    option httplog\n    option dontlognull\n    option forwardfor\n    server seahubserver01 192.168.1.165:80 check port 11001\n    server seahubserver02 192.168.1.200:80 check port 11001\n\nlisten seahub-https 0.0.0.0:443\n    mode tcp\n    option tcplog\n    option dontlognull\n    server seahubserver01 192.168.1.165:443 check port 11001\n    server seahubserver02 192.168.1.200:443 check port 11001", 
            "title": "HAProxy"
        }, 
        {
            "location": "/deploy_pro/deploy_in_a_cluster/#see-how-it-runs", 
            "text": "Now you should be able to test your cluster. Open https://seafile.example.com in your browser and enjoy. You can also sync file with Seafile clients.  If the above works, the next step would be  Enable search and background tasks in a cluster .", 
            "title": "See how it runs"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/", 
            "text": "Seafile Clustering with MariaDB and Ceph\n\n\nIn this document we describe the detailed solution of deploying a high scalable Seafile cluster with MariaDB and Ceph. The document is not a finished one. We will improve it continuously as our knowledge grow with several on going projects.\n\n\nBackgrounds\n\n\nSeafile organizes files into libraries. Each library is a GIT repository like file system tree with each file and folder identified by a unique hash value. These unique IDs are used in the syncing algorithm and there is no need to storing syncing state for each file in the database. Tranditional database like MySQL are not scalable to tens of millions of records, while object storages like Ceph and Swift are highly scalable. So in theory, Seafile is capable to storing billions of files for syncing and sharing.\n\n\nWhile files are saved into object storage, other information like sharing and permission has to be stored in database. MariaDB Galera can be used to provide a scalable and reliable database storage.\n\n\nHardware and system requirement\n\n\nIn the minimum, we use three machines to setup the cluster. Each machine should be of\n\n\n\n\n4 cores with 8GB or more memory.\n\n\n1 SSD disk to storing Ceph journal.\n\n\n1 SATA disk to storing the operating system\n\n\n1 SATA disk to storing MariaDB database\n\n\n4 or more SATA disk to store Ceph data\n\n\n\n\nWe use Ubuntu 14.04 server as the operating system. In the following, we denote the three server as node1, node2 and node3.\n\n\nSetup Ceph cluster\n\n\nPreparation\n\n\nChoose one node (say, node1) as admin node for installation. Install ceph-deploy on it.\n\n\n\n\nAdd the release key:  \n\n\n\n\nwget -q -O- 'https://ceph.com/git/?p=ceph.git;a=blob_plain;f=keys/release.asc' | sudo apt-key add -\n\n\n\n\n\n\nAdd the Ceph packages to your repository. Replace {ceph-stable-release} with a stable Ceph release (e.g., emperor, firefly, giant etc.). The latest stable release is 'giant'.\n\n\n\n\necho deb http://ceph.com/debian-{ceph-stable-release}/ $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/ceph.list\n\n\n\n\n\n\nUpdate your repository and install ceph-deploy:  \n\n\n\n\nsudo apt-get update \n sudo apt-get install ceph-deploy\n\n\n\n\nInstall ntp on all nodes, and restart ntp  \n\n\nsudo apt-get install ntp\nsudo service ntp restart\n\n\n\nInstall openssh on all nodes\n\n\nsudo apt-get install openssh-server\n\n\n\nWe'll use a non-root user for installation. Make sure this user has password-less sudo privileges.\n\n\necho \"{username} ALL = (root) NOPASSWD:ALL\" | sudo tee /etc/sudoers.d/{username}\nsudo chmod 0440 /etc/sudoers.d/{username}\n\n\n\nGenerate ssh public key for the installation user on node1. Then copy that public key to other nodes \n~/.ssh/authorized_keys\n.\n\n\nCreate Ceph Cluster\n\n\nCreate a \nceph-cluster\n directory on node1 for storing the generated config files. All commands should be run under this directory.\n\n\nInstall Ceph on all nodes\n\n\nceph-deploy install node1 node2 node3\n\n\n\nCreate the cluster  \n\n\nceph-deploy new node1 node2 node3\n\n\n\nCreate Ceph monitors. You should open port 6789 on all nodes.\n\n\nceph-deploy mon create node1 node2 node3\n\n\n\nGather keys\n\n\nceph-deploy gatherkeys node1\n\n\n\nAdd OSDs\n\n\nIn Ceph, every OSD daemon manages one disk. The OSDs can share one SSD disk for journal.\nSuppose the SSD disk for journal is \n/dev/sdb\n and the SATA disks are \n/dev/sdc\n, \n/dev/sdd\n, etc. Add OSDs by the following commands:\n\n\nceph-deploy osd create node1:/dev/sdc:/dev/sdb\nceph-deploy osd create node2:/dev/sdc:/dev/sdb\nceph-deploy osd create node3:/dev/sdc:/dev/sdb\nceph-deploy osd create node1:/dev/sdd:/dev/sdb\nceph-deploy osd create node2:/dev/sdd:/dev/sdb\nceph-deploy osd create node3:/dev/sdd:/dev/sdb\n\n\n\nnote\n By default Ceph uses a journal partition of size 5GB. The creation of OSD will fail if your journal disk is too small. You can add the following config to /etc/ceph/ceph.conf:\n\n\n[osd]\n    # set journal size to 4GB\n        osd journal size = 4000\n\n\n\n\nCheck Cluster Status\n\n\nCeph cluster setup is done. You can check cluster status by \nsudo ceph -s\n.\n\n\nReferences\n\n\nhttp://ceph.com/docs/master/rados/deployment/\n\n\nSetup MariaDB cluster\n\n\nInstall MariaDB and Galera\n\n\nFirst, set apt source for MariaDB and Galera. Choose a repository for 5.5 in \nthis page\n.\nThen you can install mariadb and galera.\n\n\nsudo apt-get install mariadb-galera-server galera\nsudo apt-get install rsync\n\n\n\nConfig MariaDB\n\n\nIn \n/etc/mysql/conf.d/cluster.cnf\n\n\n[mysqld]\n\nquery_cache_size=0\nbinlog_format=ROW\ndefault-storage-engine=innodb\ninnodb_autoinc_lock_mode=2\nquery_cache_type=0\nbind-address=0.0.0.0\n\n# Galera Provider Configuration\nwsrep_provider=/usr/lib/galera/libgalera_smm.so\n#wsrep_provider_options=\"gcache.size=32G\"\n\n# Galera Cluster Configuration\nwsrep_cluster_name=\"test_cluster\"\nwsrep_cluster_address=\"gcomm://first_ip,second_ip,third_ip\n\n# Galera Synchronization Congifuration\nwsrep_sst_method=rsync\n#wsrep_sst_auth=user:pass\n\n# Galera Node Configuration\nwsrep_node_address=\"this_node_ip\"\nwsrep_node_name=\"this_node_name\"\n\n\n\nHere first_ip, second_ip and third_ip are corresponding to the IP address of node1, node2 and node3.\n\n\nChange the data directory for MariaDB\n\n\nWe want to store the database data in a separate disk. Supposed the disk is mounted to the path \n/mysql\n.\n\n\nStop MariaDB using the following command:\n\n\nsudo /etc/init.d/mysql stop\n\n\n\nCopy the existing data directory (default located in /var/lib/mysql) using the following command:\n\n\nsudo cp -R -p /var/lib/mysql/* /mysql\n\n\n\nEdit /etc/mysql/my.cnf, update \ndatadir\n option to \n/mysql\n.\n\n\nRestart MariaDB with the command:\n\n\nsudo /etc/init.d/mysql restart\n\n\n\nStart\n\n\nBefore staring the MariaDB cluster, make sure port 3456 and 4444 are open on all database nodes.\n\n\nIn node1:\n\n\nnode1# sudo service mysql start --wsrep-new-cluster\n\n\n\nIn node2 and node3:\n\n\nnode2# sudo service mysql start\nnode3# sudo service mysql start\n\n\n\nReferences\n\n\nhttps://www.digitalocean.com/community/tutorials/how-to-configure-a-galera-cluster-with-mariadb-on-ubuntu-12-04-servers\n\n\nSetup Seafile cluster\n\n\nPlease follow http://manual.seafile.com/deploy_pro/setup_with_ceph.html to set seafile with Ceph and follow http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html for setup Seafile cluster.", 
            "title": "Setup with MariaDB and Ceph"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#seafile-clustering-with-mariadb-and-ceph", 
            "text": "In this document we describe the detailed solution of deploying a high scalable Seafile cluster with MariaDB and Ceph. The document is not a finished one. We will improve it continuously as our knowledge grow with several on going projects.", 
            "title": "Seafile Clustering with MariaDB and Ceph"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#backgrounds", 
            "text": "Seafile organizes files into libraries. Each library is a GIT repository like file system tree with each file and folder identified by a unique hash value. These unique IDs are used in the syncing algorithm and there is no need to storing syncing state for each file in the database. Tranditional database like MySQL are not scalable to tens of millions of records, while object storages like Ceph and Swift are highly scalable. So in theory, Seafile is capable to storing billions of files for syncing and sharing.  While files are saved into object storage, other information like sharing and permission has to be stored in database. MariaDB Galera can be used to provide a scalable and reliable database storage.", 
            "title": "Backgrounds"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#hardware-and-system-requirement", 
            "text": "In the minimum, we use three machines to setup the cluster. Each machine should be of   4 cores with 8GB or more memory.  1 SSD disk to storing Ceph journal.  1 SATA disk to storing the operating system  1 SATA disk to storing MariaDB database  4 or more SATA disk to store Ceph data   We use Ubuntu 14.04 server as the operating system. In the following, we denote the three server as node1, node2 and node3.", 
            "title": "Hardware and system requirement"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#setup-ceph-cluster", 
            "text": "", 
            "title": "Setup Ceph cluster"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#preparation", 
            "text": "Choose one node (say, node1) as admin node for installation. Install ceph-deploy on it.   Add the release key:     wget -q -O- 'https://ceph.com/git/?p=ceph.git;a=blob_plain;f=keys/release.asc' | sudo apt-key add -   Add the Ceph packages to your repository. Replace {ceph-stable-release} with a stable Ceph release (e.g., emperor, firefly, giant etc.). The latest stable release is 'giant'.   echo deb http://ceph.com/debian-{ceph-stable-release}/ $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/ceph.list   Update your repository and install ceph-deploy:     sudo apt-get update   sudo apt-get install ceph-deploy  Install ntp on all nodes, and restart ntp    sudo apt-get install ntp\nsudo service ntp restart  Install openssh on all nodes  sudo apt-get install openssh-server  We'll use a non-root user for installation. Make sure this user has password-less sudo privileges.  echo \"{username} ALL = (root) NOPASSWD:ALL\" | sudo tee /etc/sudoers.d/{username}\nsudo chmod 0440 /etc/sudoers.d/{username}  Generate ssh public key for the installation user on node1. Then copy that public key to other nodes  ~/.ssh/authorized_keys .", 
            "title": "Preparation"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#create-ceph-cluster", 
            "text": "Create a  ceph-cluster  directory on node1 for storing the generated config files. All commands should be run under this directory.  Install Ceph on all nodes  ceph-deploy install node1 node2 node3  Create the cluster    ceph-deploy new node1 node2 node3  Create Ceph monitors. You should open port 6789 on all nodes.  ceph-deploy mon create node1 node2 node3  Gather keys  ceph-deploy gatherkeys node1", 
            "title": "Create Ceph Cluster"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#add-osds", 
            "text": "In Ceph, every OSD daemon manages one disk. The OSDs can share one SSD disk for journal.\nSuppose the SSD disk for journal is  /dev/sdb  and the SATA disks are  /dev/sdc ,  /dev/sdd , etc. Add OSDs by the following commands:  ceph-deploy osd create node1:/dev/sdc:/dev/sdb\nceph-deploy osd create node2:/dev/sdc:/dev/sdb\nceph-deploy osd create node3:/dev/sdc:/dev/sdb\nceph-deploy osd create node1:/dev/sdd:/dev/sdb\nceph-deploy osd create node2:/dev/sdd:/dev/sdb\nceph-deploy osd create node3:/dev/sdd:/dev/sdb  note  By default Ceph uses a journal partition of size 5GB. The creation of OSD will fail if your journal disk is too small. You can add the following config to /etc/ceph/ceph.conf:  [osd]\n    # set journal size to 4GB\n        osd journal size = 4000", 
            "title": "Add OSDs"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#check-cluster-status", 
            "text": "Ceph cluster setup is done. You can check cluster status by  sudo ceph -s .", 
            "title": "Check Cluster Status"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#references", 
            "text": "http://ceph.com/docs/master/rados/deployment/", 
            "title": "References"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#setup-mariadb-cluster", 
            "text": "", 
            "title": "Setup MariaDB cluster"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#install-mariadb-and-galera", 
            "text": "First, set apt source for MariaDB and Galera. Choose a repository for 5.5 in  this page .\nThen you can install mariadb and galera.  sudo apt-get install mariadb-galera-server galera\nsudo apt-get install rsync", 
            "title": "Install MariaDB and Galera"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#config-mariadb", 
            "text": "In  /etc/mysql/conf.d/cluster.cnf  [mysqld]\n\nquery_cache_size=0\nbinlog_format=ROW\ndefault-storage-engine=innodb\ninnodb_autoinc_lock_mode=2\nquery_cache_type=0\nbind-address=0.0.0.0\n\n# Galera Provider Configuration\nwsrep_provider=/usr/lib/galera/libgalera_smm.so\n#wsrep_provider_options=\"gcache.size=32G\"\n\n# Galera Cluster Configuration\nwsrep_cluster_name=\"test_cluster\"\nwsrep_cluster_address=\"gcomm://first_ip,second_ip,third_ip\n\n# Galera Synchronization Congifuration\nwsrep_sst_method=rsync\n#wsrep_sst_auth=user:pass\n\n# Galera Node Configuration\nwsrep_node_address=\"this_node_ip\"\nwsrep_node_name=\"this_node_name\"  Here first_ip, second_ip and third_ip are corresponding to the IP address of node1, node2 and node3.", 
            "title": "Config MariaDB"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#change-the-data-directory-for-mariadb", 
            "text": "We want to store the database data in a separate disk. Supposed the disk is mounted to the path  /mysql .  Stop MariaDB using the following command:  sudo /etc/init.d/mysql stop  Copy the existing data directory (default located in /var/lib/mysql) using the following command:  sudo cp -R -p /var/lib/mysql/* /mysql  Edit /etc/mysql/my.cnf, update  datadir  option to  /mysql .  Restart MariaDB with the command:  sudo /etc/init.d/mysql restart", 
            "title": "Change the data directory for MariaDB"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#start", 
            "text": "Before staring the MariaDB cluster, make sure port 3456 and 4444 are open on all database nodes.  In node1:  node1# sudo service mysql start --wsrep-new-cluster  In node2 and node3:  node2# sudo service mysql start\nnode3# sudo service mysql start", 
            "title": "Start"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#references_1", 
            "text": "https://www.digitalocean.com/community/tutorials/how-to-configure-a-galera-cluster-with-mariadb-on-ubuntu-12-04-servers", 
            "title": "References"
        }, 
        {
            "location": "/deploy_pro/clustering_with_mariadb_ceph/#setup-seafile-cluster", 
            "text": "Please follow http://manual.seafile.com/deploy_pro/setup_with_ceph.html to set seafile with Ceph and follow http://manual.seafile.com/deploy_pro/deploy_in_a_cluster.html for setup Seafile cluster.", 
            "title": "Setup Seafile cluster"
        }, 
        {
            "location": "/deploy_pro/setup_seafile_cluster_with_nfs/", 
            "text": "Setup Seafile cluster with NFS\n\n\nIn a Seafile cluster, one common way to share data among the Seafile server instances is to use NFS. You should only share the files objects on NFS. Here we'll provide a tutorial about how and what to share.\n\n\nHow to setup nfs server and client is beyond the scope of this wiki. Here are few references:\n\n\n\n\nUbuntu: https://help.ubuntu.com/community/SettingUpNFSHowTo\n\n\nCentOS: http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-nfs.html\n\n\n\n\nSupposed your seafile server installation directory is \n/data/haiwen\n, after you run the setup script there should be a \nseafile-data\n directory in it. And supposed you mount the NFS drive on \n/seafile-nfs\n, you should follow a few steps:\n\n\n\n\nMove the \nseafile-data\n folder to \n/seafile-nfs\n:\n\n\n\n\nmv /data/haiwen/seafile-data /seafile-nfs/\n\n\n\n\n\n\nOn every node in the cluster, make a symbolic link to the shared seafile-data folder \n\n\n\n\ncd /data/haiwen\nln -s /seafile-nfs/seafile-data /data/haiwen/seafile-data\n\n\n\n\nThis way the instances will share the same \nseafile-data\n folder. All other config files and log files will remain independent.", 
            "title": "Setup Seafile cluster with NFS"
        }, 
        {
            "location": "/deploy_pro/setup_seafile_cluster_with_nfs/#setup-seafile-cluster-with-nfs", 
            "text": "In a Seafile cluster, one common way to share data among the Seafile server instances is to use NFS. You should only share the files objects on NFS. Here we'll provide a tutorial about how and what to share.  How to setup nfs server and client is beyond the scope of this wiki. Here are few references:   Ubuntu: https://help.ubuntu.com/community/SettingUpNFSHowTo  CentOS: http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-nfs.html   Supposed your seafile server installation directory is  /data/haiwen , after you run the setup script there should be a  seafile-data  directory in it. And supposed you mount the NFS drive on  /seafile-nfs , you should follow a few steps:   Move the  seafile-data  folder to  /seafile-nfs :   mv /data/haiwen/seafile-data /seafile-nfs/   On every node in the cluster, make a symbolic link to the shared seafile-data folder    cd /data/haiwen\nln -s /seafile-nfs/seafile-data /data/haiwen/seafile-data  This way the instances will share the same  seafile-data  folder. All other config files and log files will remain independent.", 
            "title": "Setup Seafile cluster with NFS"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/", 
            "text": "Note:\n Before you try to deploy file search office documents preview, make sure other parts of your seafile cluster are already working, e.g upload/download files in a web browser. Make sure memcached is configured as described in \n\"Deploy in a cluster\"\n.\n\n\nEnable search and background tasks in a cluster\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nIn the seafile cluster, only one server should run the background tasks, including:\n\n\n\n\nindexing files for search\n\n\nemail notification\n\n\noffice documents converts service\n\n\n\n\nLet's assume you have three nodes in your cluster: A, B, and C.\n\n\n\n\nNode A is backend node that run background tasks.\n\n\nNode B and C are frontend nodes that serving requests from clients.\n\n\n\n\n\n\nConfiguring Node A (the backend node)\n\n\nIf you following the steps on settings up a cluster, node B and node C should have already be configed as frontend node. You can copy the configuration of node B as a base for node A. Then do the following steps:\n\n\nInstall Dependencies (Java, LibreOffice, poppler)\n\n\nOn Ubuntu/Debian:\n\n\nsudo apt-get install openjdk-7-jre libreoffice poppler-utils python-uno # or python3-uno for ubuntu 14.04+\n\n\n\n\nOn CentOS/Red Hat:\n\n\nsudo yum install java-1.7.0-openjdk\nsudo yum install libreoffice libreoffice-headless libreoffice-pyuno\nsudo yum install poppler-utils\n\n\n\n\nEdit \nseafevents.conf\n and ensure this line does NOT exist:\n\n\nexternal_es_server = true\n\n\n\n\nEdit \nseahub_settings.py\n and add a line:\n\n\nOFFICE_CONVERTOR_NODE = True\n\n\n\n\nEdit the firewall rules\n\n\nIn your firewall rules for node A, you should open the port 9500 (for search requests).\n\n\nConfigure Other Nodes\n\n\nOn nodes B and C, you need to:\n\n\n\n\nEdit \nseafevents.conf\n, add the following lines:\n\n\n\n\n[INDEX FILES]\nexternal_es_server = true\nes_host = \nip of node A\n\nes_port = 9500\n\n\n\n\nEdit \nseahub_settings.py\n and add a line:\n\n\nOFFICE_CONVERTOR_ROOT = http://\nip of node A\n\n\n\n\n\nMake sure requests to http://\n is also handled by seahub. For example , you may need to add this nginx configuration in the background node:\n\n\nserver {\n      listen 80;\n      server_name \nIP of node A\n;\n      location / {\n          fastcgi_pass    127.0.0.1:8000;\n          ...\n  }\n\n\n\n\nAs a simple test, you can use this command to test if you set it up correctly.\n\n\ncurl -v http://\nIP of node A\n/office-convert/internal/status/\n\n\n\n\nIt should say \"400 Bad Request\" when you have nginx config updated.\n\n\nStart the background tasks\n\n\nBefore starting background tasks, you have to start seafile and seahub on the backend node, too.\n\n\n./seafile.sh start\n./seahub.sh start-fastcgi\n\n\n\n\nOn node A (the background tasks node), you can start/stop background tasks by:\n\n\n./seafile-background-tasks.sh { start | stop | restart }", 
            "title": "Enable search and background tasks in a cluster"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#enable-search-and-background-tasks-in-a-cluster", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  In the seafile cluster, only one server should run the background tasks, including:   indexing files for search  email notification  office documents converts service   Let's assume you have three nodes in your cluster: A, B, and C.   Node A is backend node that run background tasks.  Node B and C are frontend nodes that serving requests from clients.", 
            "title": "Enable search and background tasks in a cluster"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#configuring-node-a-the-backend-node", 
            "text": "If you following the steps on settings up a cluster, node B and node C should have already be configed as frontend node. You can copy the configuration of node B as a base for node A. Then do the following steps:", 
            "title": "Configuring Node A (the backend node)"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#install-dependencies-java-libreoffice-poppler", 
            "text": "On Ubuntu/Debian:  sudo apt-get install openjdk-7-jre libreoffice poppler-utils python-uno # or python3-uno for ubuntu 14.04+  On CentOS/Red Hat:  sudo yum install java-1.7.0-openjdk\nsudo yum install libreoffice libreoffice-headless libreoffice-pyuno\nsudo yum install poppler-utils  Edit  seafevents.conf  and ensure this line does NOT exist:  external_es_server = true  Edit  seahub_settings.py  and add a line:  OFFICE_CONVERTOR_NODE = True", 
            "title": "Install Dependencies (Java, LibreOffice, poppler)"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#edit-the-firewall-rules", 
            "text": "In your firewall rules for node A, you should open the port 9500 (for search requests).", 
            "title": "Edit the firewall rules"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#configure-other-nodes", 
            "text": "On nodes B and C, you need to:   Edit  seafevents.conf , add the following lines:   [INDEX FILES]\nexternal_es_server = true\nes_host =  ip of node A \nes_port = 9500  Edit  seahub_settings.py  and add a line:  OFFICE_CONVERTOR_ROOT = http:// ip of node A   Make sure requests to http://  is also handled by seahub. For example , you may need to add this nginx configuration in the background node:  server {\n      listen 80;\n      server_name  IP of node A ;\n      location / {\n          fastcgi_pass    127.0.0.1:8000;\n          ...\n  }  As a simple test, you can use this command to test if you set it up correctly.  curl -v http:// IP of node A /office-convert/internal/status/  It should say \"400 Bad Request\" when you have nginx config updated.", 
            "title": "Configure Other Nodes"
        }, 
        {
            "location": "/deploy_pro/enable_search_and_background_tasks_in_a_cluster/#start-the-background-tasks", 
            "text": "Before starting background tasks, you have to start seafile and seahub on the backend node, too.  ./seafile.sh start\n./seahub.sh start-fastcgi  On node A (the background tasks node), you can start/stop background tasks by:  ./seafile-background-tasks.sh { start | stop | restart }", 
            "title": "Start the background tasks"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/", 
            "text": "Upgrade a Seafile cluster\n\n\nMajor and minor version upgrade\n\n\nSeafile adds new features in major and minor versions. It is likely that some database tables need to be modified or the search index need to be updated. In general, upgrading a cluster contains the following steps:\n\n\n\n\nUpgrade the database\n\n\nUpdate symbolic link at frontend and backend nodes to point to the newest version\n\n\nUpdate configuration files at each node\n\n\nUpdate search index in the backend node\n\n\n\n\nIn general, to upgrade a cluster, you need:\n\n\n\n\nRun the upgrade script (for example, ./upgrade/upgrade_4_0_4_1.sh) in one frontend node\n\n\nRun the minor upgrade script (./upgrade/minor_upgrade.sh) in all other nodes to update symbolic link\n\n\nUpdate configuration files at each node according to the documentation for each version\n\n\nDelete old search index in the backend node if needed\n\n\n\n\nMaintanence upgrade\n\n\nDoing maintanence upgrading is simple, you only need to run the script \n./upgrade/minor_upgrade.sh\n at each node to update the symbolic link.\n\n\nSpecific instructions for each version\n\n\nFrom v5.0 to v5.1\n\n\nBecause Django is upgraded to 1.8, the COMPRESS_CACHE_BACKEND should be changed\n\n\n   -    COMPRESS_CACHE_BACKEND = 'locmem://'\n   +    COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'\n\n\n\n\nFrom v4.4 to v5.0\n\n\nv5.0 introduces some database schema change, and all configuration files (ccnet.conf, seafile.conf, seafevents.conf, seahub_settings.py) are moved to a central config directory.\n\n\nPerform the following steps to upgrade:\n\n\n\n\nRun the upgrade script at one fronend node to upgrade the database.\n\n\n\n\n./upgrade/upgrade_4.4_5.0.sh\n\n\n\n\n\n\nThen, on all other frontend nodes and the background node, run the upgrade script with \nSEAFILE_SKIP_DB_UPGRADE\n environmental variable turned on:\n\n\n\n\nSEAFILE_SKIP_DB_UPGRADE=1 ./upgrade/upgrade_4.4_5.0.sh\n\n\n\n\nAfter the upgrade, you should see the configuration files has been moved to the conf/ folder.\n\n\nconf/\n  |__ ccnet.conf\n  |__ seafile.conf\n  |__ seafevent.conf\n  |__ seafdav.conf\n  |__ seahub_settings.conf\n\n\n\n\nFrom v4.3 to v4.4\n\n\nThere are no database and search index upgrade from v4.3 to v4.4. Perform the following steps to upgrade:\n\n\n\n\nRun the minor upgrade script at frontend and backend nodes\n\n\n\n\nFrom v4.2 to v4.3\n\n\nv4.3 contains no database table change from v4.2. But the old search index will be deleted and regenerated.\n\n\nA new option COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache' should be added to seahub_settings.py\n\n\nThe secret key in seahub_settings.py need to be regenerated, the old secret key lack enough randomness.\n\n\nPerform the following steps to upgrade:\n\n\n\n\nRun the upgrade script at one fronend node to modify the seahub_settings.py\n\n\nModify seahub_settings.py at each node, replacing the old secret key with the new one and add option COMPRESS_CACHE_BACKEND\n\n\nRun the minor upgrade script at frontend and backend nodes\n\n\nDelete the old search index (the folder pro-data/search) at the backend node\n\n\nDelete the old office preview output folder (/tmp/seafile-office-output) at the backend node", 
            "title": "Upgrade a cluster"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#upgrade-a-seafile-cluster", 
            "text": "", 
            "title": "Upgrade a Seafile cluster"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#major-and-minor-version-upgrade", 
            "text": "Seafile adds new features in major and minor versions. It is likely that some database tables need to be modified or the search index need to be updated. In general, upgrading a cluster contains the following steps:   Upgrade the database  Update symbolic link at frontend and backend nodes to point to the newest version  Update configuration files at each node  Update search index in the backend node   In general, to upgrade a cluster, you need:   Run the upgrade script (for example, ./upgrade/upgrade_4_0_4_1.sh) in one frontend node  Run the minor upgrade script (./upgrade/minor_upgrade.sh) in all other nodes to update symbolic link  Update configuration files at each node according to the documentation for each version  Delete old search index in the backend node if needed", 
            "title": "Major and minor version upgrade"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#maintanence-upgrade", 
            "text": "Doing maintanence upgrading is simple, you only need to run the script  ./upgrade/minor_upgrade.sh  at each node to update the symbolic link.", 
            "title": "Maintanence upgrade"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#specific-instructions-for-each-version", 
            "text": "", 
            "title": "Specific instructions for each version"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#from-v50-to-v51", 
            "text": "Because Django is upgraded to 1.8, the COMPRESS_CACHE_BACKEND should be changed     -    COMPRESS_CACHE_BACKEND = 'locmem://'\n   +    COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache'", 
            "title": "From v5.0 to v5.1"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#from-v44-to-v50", 
            "text": "v5.0 introduces some database schema change, and all configuration files (ccnet.conf, seafile.conf, seafevents.conf, seahub_settings.py) are moved to a central config directory.  Perform the following steps to upgrade:   Run the upgrade script at one fronend node to upgrade the database.   ./upgrade/upgrade_4.4_5.0.sh   Then, on all other frontend nodes and the background node, run the upgrade script with  SEAFILE_SKIP_DB_UPGRADE  environmental variable turned on:   SEAFILE_SKIP_DB_UPGRADE=1 ./upgrade/upgrade_4.4_5.0.sh  After the upgrade, you should see the configuration files has been moved to the conf/ folder.  conf/\n  |__ ccnet.conf\n  |__ seafile.conf\n  |__ seafevent.conf\n  |__ seafdav.conf\n  |__ seahub_settings.conf", 
            "title": "From v4.4 to v5.0"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#from-v43-to-v44", 
            "text": "There are no database and search index upgrade from v4.3 to v4.4. Perform the following steps to upgrade:   Run the minor upgrade script at frontend and backend nodes", 
            "title": "From v4.3 to v4.4"
        }, 
        {
            "location": "/deploy_pro/upgrade_a_cluster/#from-v42-to-v43", 
            "text": "v4.3 contains no database table change from v4.2. But the old search index will be deleted and regenerated.  A new option COMPRESS_CACHE_BACKEND = 'django.core.cache.backends.locmem.LocMemCache' should be added to seahub_settings.py  The secret key in seahub_settings.py need to be regenerated, the old secret key lack enough randomness.  Perform the following steps to upgrade:   Run the upgrade script at one fronend node to modify the seahub_settings.py  Modify seahub_settings.py at each node, replacing the old secret key with the new one and add option COMPRESS_CACHE_BACKEND  Run the minor upgrade script at frontend and backend nodes  Delete the old search index (the folder pro-data/search) at the backend node  Delete the old office preview output folder (/tmp/seafile-office-output) at the backend node", 
            "title": "From v4.2 to v4.3"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/", 
            "text": "Seafile Real-Time Backup Server\n\n\nNOTE: The real-time backup feature is currently in beta state. It may have minor issues on the backup server side. But this feature will not affect the functionality or data integrity of the primary server.\n\n\nBackup is the procedure that copies data from a primary server (which is running production service) to a backup server.\n\n\nBackup is an important procedure to keep data safe. The basic backup procedure described in \nthis documentation\n has a few drawbacks:\n\n\n\n\nThe backup is done in fixed \"backup windows\" (once per day or a few times per day). The latest data written between two backup windows will be lost if the primary server storage is damaged.\n\n\nThe backup procedure backup database and data directory separately. In the backup server, some entries in the database may become inconsistent with the data directory. This causes some libraries become \"corrupted\" after restore.\n\n\n\n\nThe real-time backup server uses a syncing algorithm similar to the Seafile desktop client to retrieve data from the primary server. It works as follows:\n\n\n\n\nWhenever a library is updated, the primary server notifies the backup server to retrieve the changed data. With a delta syncing algorithm, this procedure runs quickly and updates the backup server in nearly real-time.\n\n\nThe backup server also checks all libraries on the primary server at a fixed period. Any new or updated libraries will be synced to the backup server. This will pick up any legged updates due to glitches in the above real-time sync procedure.\n\n\nThe backup server always keep the database and data directory consistent. So no libraries on the backup server will be in corrupted state (unless they're already corrupted on the primary server).\n\n\nThe full history of all libraries will be backed up. This is not like the desktop client, which only syncs the latest state of a library.\n\n\n\n\nThere are two sets of data that need to be backup:\n\n\n\n\nThe seafile-data directory and the core library metadata tables in the seafile database. This data is the core data structures of the libraries in Seafile. They're synced to the backup server with Seafile's syncing algorithm. In this procedure, the metadata tables are kept consistent with the seafile-data directory.\n\n\nAll other tables in the database (including seafile, ccnet and seahub databases) are backup with MySQL replication.\n\n\n\n\nConfigure Real-Time Backup Server\n\n\nWe assume you already have a primary server running, and now you want to setup a backup server.\n\n\nThe steps to setup the backup server are:\n\n\n\n\nInstall Seafile on the backup server\n\n\nConfigure MySQL replication between the primary server and the backup server\n\n\nConfigure Seafile syncing between the primary server and the backup server\n\n\n\n\nInstall Seafile on the Backup Server\n\n\nYou should install Seafile Pro Edition on the backup server according to \nthis documentation\n. Since the real-time backup feature is only available for 5.1.0 or later, you also have to upgrade your primary server to 5.1.0 version or later.\n\n\nWhen installing Seafile on the backup server, you have to notice:\n\n\n\n\nThe database names (ccnet, seafile and seahub database) should be the same as the names on the primary server.\n\n\nYou don't need to enable other Pro features, such as Office file preview, search indexing, file auditing etc.\n\n\n\n\nConfigure MySQL Replication\n\n\nMySQL replication asynchronously replicates database updates from a Master server (in our case, the primary server) to a Slave server (the backup server). To better understand how MySQL replication works and how to configure it, you should first read \nMySQL official documentation\n. The following steps are based on the steps in MySQL documentation, with some modifications for Seafile.\n\n\nIn the following discussion, we'll use \"primary server\" and \"master server\", \"backup server\" and \"slave server\" interchangeably.\n\n\nModify MySQL Server Configuration on Primary Server (my.cnf)\n\n\nOn the primary server, add following options to my.cnf:\n\n\n[mysqld]\nlog-bin=mysql-bin\nserver-id=1\n\n\n\n\nIn the my.cnf of the primary server, another important option is \nexpire_logs_days\n (\nreference\n). This option controls the retention time of the binary log, which is used for replication. The default value of this option is to keep binary log files forever. You can set this option to keep the binary log files for specific days. Binary log files older than the specified days will be deleted. So if the backup server is offline for more than \nexpire_logs_days\n, the replication cannot be resumed after the backup server is online. We recommend to set this option to a long enough time.\n\n\nAfter saving the changes, you should restart MySQL on primary server.\n\n\nCreate a User for Replication in MySQL\n\n\nOn the primary server, create a user dedicated for replication. In MySQL client prompt,\n\n\nCREATE USER 'repl'@'%' IDENTIFIED BY 'slavepass';\nGRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';\n\n\n\n\nReplace the user name and password with your own choice.\n\n\nObtain the Replication Master Binary Log Coordinates\n\n\nBefore running this step, you should stop Seafile service on the primary server, so that no update will be written into database.\n\n\nOn the primary (Master) server, in MySQL client prompt,\n\n\nFLUSH TABLES WITH READ LOCK;\nSHOW MASTER STATUS;\n\n\n\n\nYou'll get output similar to the following:\n\n\n+------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000002 |   368915 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+\n\n\n\n\nThe \nFile\n and \nPosition\n fields in output will be used to configure the backup server (replication Slave).\n\n\nExport Existing Data on the Primary Server\n\n\nExporting data from the databases on the primary server with mysqldump:\n\n\nmysqldump -u \nuser\n -p\npassword\n --databases \\\n--ignore-table=\nseafile_db\n.Repo --ignore-table=\nseafile_db\n.Branch --ignore-table=\nseafile_db\n.RepoHead \\\n--ignore-table=\nseahub_db\n.base_userlastlogin --ignore-table=\nseahub_db\n.django_session \\\n--ignore-table=\nseahub_db\n.sysadmin_extra_userloginlog --ignore-table=\nseahub_db\n.UserTrafficStat \\\n--ignore-table=\nseahub_db\n.FileAudit --ignore-table=\nseahub_db\n.FileUpdate --ignore-table=\nseahub_db\n.PermAudit \\\n--ignore-table=\nseahub_db\n.Event --ignore-table=\nseahub_db\n.UserEvent --ignore-table=\nseahub_db\n.avatar_avatar \\\n--ignore-table=\nseahub_db\n.avatar_groupavatar --ignore-table=\nseahub_db\n.avatar_uploaded \\\n--master-data \nseafile_db\n \nccnet_db\n \nseahub_db\n \n dbdump.sql\n\n\n\n\nYou should replace \nuser\n, \npassword\n with your MySQL admin user and password. You should replace \nseafile_db\n, \nseahub_db\n and \nccnet_db\n with your database names.\n\n\nModify MySQL Server Configuration on Backup Server (my.cnf)\n\n\nOn the backup server, add following options to my.cnf:\n\n\n[mysqld]\nserver-id=2\nreplicate-ignore-table = \nseafile db\n.Repo\nreplicate-ignore-table = \nseafile db\n.Branch\nreplicate-ignore-table = \nseafile db\n.RepoHead\nreplicate-ignore-table = \nseahub db\n.base_userlastlogin\nreplicate-ignore-table = \nseahub db\n.django_session\nreplicate-ignore-table = \nseahub db\n.sysadmin_extra_userloginlog\nreplicate-ignore-table = \nseahub db\n.UserTrafficStat\nreplicate-ignore-table = \nseahub db\n.FileAudit\nreplicate-ignore-table = \nseahub db\n.FileUpdate\nreplicate-ignore-table = \nseahub db\n.PermAudit\nreplicate-ignore-table = \nseahub db\n.avatar_avatar\nreplicate-ignore-table = \nseahub db\n.avatar_groupavatar\nreplicate-ignore-table = \nseahub db\n.avatar_uploaded\nreplicate-ignore-table = \nseahub db\n.Event\nreplicate-ignore-table = \nseahub db\n.UserEvent\n\n\n\n\nThe above configuration tells the backup server to ignore following tables on replication:\n\n\n\n\nThe library metadata tables in Seafile db\uff1aRepo, Branch, RepoHead\u3002These tables will be synced by Seafile backup server itself.\n\n\nLocal or temporary tables in Seahub database. When the admin logs into the backup server to view the data, these tables may be updated on the backup server. To avoid conflicts with the replicated entries, we ignore them on replication.\n\n\n\n\nNotes:\n\n\n\n\nThe \nserver-id\n for the primary and backup server must be different.\n\n\nYou should replace \nseafile db\n and \nseahub db\n with your database names.\n\n\n\n\nRestart MySQL server on backup server, with \n--skip-slave-start\n option so that replication does not start.\n\n\nsudo /etc/init.d/mysql start --skip-slave-start\n\n\n\n\nImport Existing Data into backup server\n\n\nImporting existing data into the backup server's MySQL:\n\n\nmysql -u \nusr\n -p\npas\n \n dbdump.sql\n\n\n\n\nReplace \nuser\n and \npass\n with your MySQL admin user name and password.\n\n\nStart Replication\n\n\nUnlock MySQL on the primary server. In MySQL client prompt,\n\n\nunlock tables;\n\n\n\n\nOn the backup server, setup replication start coordinates:\n\n\nCHANGE MASTER TO MASTER_HOST='primary-host', MASTER_USER='user', MASTER_PASSWORD='slavepass', MASTER_LOG_FILE='bin-log-file', MASTER_LOG_POS=position;\n\n\n\n\nReplace \nprimary-host\n with the MySQL master server address; Replace \nuser\n with the dedicated user for replication; Replace \nslavepass\n with the dedicated user's password; Replace \nbin-log-file\n and \nposition\n with the information you obtained in the \"Obtain the Replication Master Binary Log Coordinates\" section.\n\n\nStart replication on the backup server. In MySQL client prompt,\n\n\nstart slave;\n\n\n\n\nAfter staring replication, you should see some log messages in MySQL's error.log on the backup server, stating the replication is started. And the slave will catch up with any new updates on the master server.\n\n\nConfigure Real-time Backup in Seafile\n\n\nOn the primary server, add following options to seafile.conf:\n\n\n[backup]\nbackup_url = http://backup-server\nsync_token = c7a78c0210c2470e14a20a8244562ab8ad509734\n\n\n\n\nOn the backup server, add following options to seafile.conf:\n\n\n[backup]\nprimary_url = http://primary-server\nsync_token = c7a78c0210c2470e14a20a8244562ab8ad509734\nsync_poll_interval = 3\n\n\n\n\n\n\nbackup_url\n: the backup server's address in url format. You can use http or https.\n\n\nprimary_url\n: the primary server's address in url format.\n\n\nsync_token\n: a secret that shared between the primary and backup server. It's 40 character SHA1 generated by the system admin. You can use \nuuidgen | openssl sha1\n command to generate a random token.\n\n\nsync_poll_interval\n: The backup server polls all libraries of the primary server periodically. You can set the poll interval in the unit of hours. The default interval is 1 hour, which mean the backup server will poll the primary every hour. You should choose larger intervals if you have large number of libraries.\n\n\n\n\nAfter saving the configuration, restart seafile service on the primary and backup servers. The backup server will automatically start backup on restart.\n\n\nSetup Backup Server for Seafile Cluster\n\n\nIf your primary service runs as a Seafile cluster, you have two points to notice when setting up a backup server:\n\n\n\n\nYou should only use one MySQL instance as the replication master, if you're using MariaDB cluster.\n\n\nYou have to change seafile.conf and set the \nbackup_url\n and \nsync_token\n options on each Seafile node. The configuration on all primary Seafile node should be the same. They all point to the same backup server.\n\n\n\n\nCurrently you cannot deploy the backup service \nas\n a cluster. That is, you can only use a single node as backup server. This support may be added in the future.\n\n\nManaging the Real-time Backup Server\n\n\nOnce set up, the backup server is a fully working Seafile instance. The admin can manage the backup server in two ways:\n\n\n\n\nAccess the server via Seahub web interface, just like a normal Seafile instance.\n\n\nUse the \nseaf-backup-cmd.sh\n script in the server package to manage the backup function.\n\n\n\n\nThe \nseaf-backup-cmd.sh\n script provides the following commands:\n\n\nChecking Backup Status\n\n\nseaf-backup-cmd.sh\n provides \nstatus\n command to view the backup status. The output is like:\n\n\n# ./seaf-backup-cmd.sh status\nTotal number of libraries: xxx\nNumber of synchronized libraries: xxx\nNumber of libraries waiting for sync: xxx\nNumber of libraries syncing: xxx\nNumber of libraries failed to sync: xxx\n\nList of syncing libraries:\nxxx\nxxx\n\nList of libraries failed to sync:\nxxx\nxxx\n\n\n\n\nThere are a few reasons that may fail the backup of a library:\n\n\n\n\nSome data in the primary server is corrupted. The data may be in the latest state or in history. Since the backup procedure syncs the full history, corruption in history will fail the backup.\n\n\nThe primary server has run seaf-fsck, which may restore a library back to an older state.\n\n\n\n\nManually Trigger Syncing a Library\n\n\nYou can use the \nsync\n command to manually schedule backup of a library:\n\n\n# ./seaf-backup-cmd.sh sync \nlibrary id\n\n\n\n\n\nThe command will block until the backup is finished.\n\n\nHandling Backup Errors\n\n\nThe \n--force\n option of \nsync\n command can be used to force failing backup to complete. Permanent backup failures are usually caused by data corruption of a library in the primary server. The \n--force\n option asks the backup to skip corrupted objects and finish the backup.\n\n\nWhen you find a backup error, follow two steps:\n\n\n\n\nRun seaf-fsck on the primary server, for the failing libraries. Fsck fixes any corruption for the latest state of the libraries.\n\n\nRun \nseaf-backup-cmd.sh sync --force \nlibrary id\n on the backup server.\n\n\n\n\nRestore from the Backup Server\n\n\nSince the backup server is a fully workable Seafile instance, you can switch your service to the backup server after your primary is severely damaged. But you need to take a few points into consideration before switching to the backup server.\n\n\n\n\nYou should first try to repair the primary server as long as possible. Running seaf-fsck will fix most daily corruptions on the primary server.\n\n\nEven with the near real-time feature of the backup server, the data on the backup server may still be a bit older than the primary server. This is especially true for the libraries failed to backup.\n\n\n\n\nBefore switching to the backup server, you should first unsync all clients which is syncing with \"failed to backup\" libraries.\n\n\nSupposed the output of \nseaf-backup-cmd.sh status\n is as follows:\n\n\nList of libraries failed to sync:\nf690ea2c-fe4d-459a-ba1e-165cdc6df391\ne2df70b5-cd80-496f-98cf-c9f038cf1307\n\n\n\n\nYou run the following command within MySQL on the backup server:\n\n\nuse seafile-db;\ndelete from RepoUserToken where repo_id in ('f690ea2c-fe4d-459a-ba1e-165cdc6df391', 'e2df70b5-cd80-496f-98cf-c9f038cf1307');", 
            "title": "Real-time Backup Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#seafile-real-time-backup-server", 
            "text": "NOTE: The real-time backup feature is currently in beta state. It may have minor issues on the backup server side. But this feature will not affect the functionality or data integrity of the primary server.  Backup is the procedure that copies data from a primary server (which is running production service) to a backup server.  Backup is an important procedure to keep data safe. The basic backup procedure described in  this documentation  has a few drawbacks:   The backup is done in fixed \"backup windows\" (once per day or a few times per day). The latest data written between two backup windows will be lost if the primary server storage is damaged.  The backup procedure backup database and data directory separately. In the backup server, some entries in the database may become inconsistent with the data directory. This causes some libraries become \"corrupted\" after restore.   The real-time backup server uses a syncing algorithm similar to the Seafile desktop client to retrieve data from the primary server. It works as follows:   Whenever a library is updated, the primary server notifies the backup server to retrieve the changed data. With a delta syncing algorithm, this procedure runs quickly and updates the backup server in nearly real-time.  The backup server also checks all libraries on the primary server at a fixed period. Any new or updated libraries will be synced to the backup server. This will pick up any legged updates due to glitches in the above real-time sync procedure.  The backup server always keep the database and data directory consistent. So no libraries on the backup server will be in corrupted state (unless they're already corrupted on the primary server).  The full history of all libraries will be backed up. This is not like the desktop client, which only syncs the latest state of a library.   There are two sets of data that need to be backup:   The seafile-data directory and the core library metadata tables in the seafile database. This data is the core data structures of the libraries in Seafile. They're synced to the backup server with Seafile's syncing algorithm. In this procedure, the metadata tables are kept consistent with the seafile-data directory.  All other tables in the database (including seafile, ccnet and seahub databases) are backup with MySQL replication.", 
            "title": "Seafile Real-Time Backup Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#configure-real-time-backup-server", 
            "text": "We assume you already have a primary server running, and now you want to setup a backup server.  The steps to setup the backup server are:   Install Seafile on the backup server  Configure MySQL replication between the primary server and the backup server  Configure Seafile syncing between the primary server and the backup server", 
            "title": "Configure Real-Time Backup Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#install-seafile-on-the-backup-server", 
            "text": "You should install Seafile Pro Edition on the backup server according to  this documentation . Since the real-time backup feature is only available for 5.1.0 or later, you also have to upgrade your primary server to 5.1.0 version or later.  When installing Seafile on the backup server, you have to notice:   The database names (ccnet, seafile and seahub database) should be the same as the names on the primary server.  You don't need to enable other Pro features, such as Office file preview, search indexing, file auditing etc.", 
            "title": "Install Seafile on the Backup Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#configure-mysql-replication", 
            "text": "MySQL replication asynchronously replicates database updates from a Master server (in our case, the primary server) to a Slave server (the backup server). To better understand how MySQL replication works and how to configure it, you should first read  MySQL official documentation . The following steps are based on the steps in MySQL documentation, with some modifications for Seafile.  In the following discussion, we'll use \"primary server\" and \"master server\", \"backup server\" and \"slave server\" interchangeably.", 
            "title": "Configure MySQL Replication"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#modify-mysql-server-configuration-on-primary-server-mycnf", 
            "text": "On the primary server, add following options to my.cnf:  [mysqld]\nlog-bin=mysql-bin\nserver-id=1  In the my.cnf of the primary server, another important option is  expire_logs_days  ( reference ). This option controls the retention time of the binary log, which is used for replication. The default value of this option is to keep binary log files forever. You can set this option to keep the binary log files for specific days. Binary log files older than the specified days will be deleted. So if the backup server is offline for more than  expire_logs_days , the replication cannot be resumed after the backup server is online. We recommend to set this option to a long enough time.  After saving the changes, you should restart MySQL on primary server.", 
            "title": "Modify MySQL Server Configuration on Primary Server (my.cnf)"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#create-a-user-for-replication-in-mysql", 
            "text": "On the primary server, create a user dedicated for replication. In MySQL client prompt,  CREATE USER 'repl'@'%' IDENTIFIED BY 'slavepass';\nGRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';  Replace the user name and password with your own choice.", 
            "title": "Create a User for Replication in MySQL"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#obtain-the-replication-master-binary-log-coordinates", 
            "text": "Before running this step, you should stop Seafile service on the primary server, so that no update will be written into database.  On the primary (Master) server, in MySQL client prompt,  FLUSH TABLES WITH READ LOCK;\nSHOW MASTER STATUS;  You'll get output similar to the following:  +------------------+----------+--------------+------------------+-------------------+\n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |\n+------------------+----------+--------------+------------------+-------------------+\n| mysql-bin.000002 |   368915 |              |                  |                   |\n+------------------+----------+--------------+------------------+-------------------+  The  File  and  Position  fields in output will be used to configure the backup server (replication Slave).", 
            "title": "Obtain the Replication Master Binary Log Coordinates"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#export-existing-data-on-the-primary-server", 
            "text": "Exporting data from the databases on the primary server with mysqldump:  mysqldump -u  user  -p password  --databases \\\n--ignore-table= seafile_db .Repo --ignore-table= seafile_db .Branch --ignore-table= seafile_db .RepoHead \\\n--ignore-table= seahub_db .base_userlastlogin --ignore-table= seahub_db .django_session \\\n--ignore-table= seahub_db .sysadmin_extra_userloginlog --ignore-table= seahub_db .UserTrafficStat \\\n--ignore-table= seahub_db .FileAudit --ignore-table= seahub_db .FileUpdate --ignore-table= seahub_db .PermAudit \\\n--ignore-table= seahub_db .Event --ignore-table= seahub_db .UserEvent --ignore-table= seahub_db .avatar_avatar \\\n--ignore-table= seahub_db .avatar_groupavatar --ignore-table= seahub_db .avatar_uploaded \\\n--master-data  seafile_db   ccnet_db   seahub_db    dbdump.sql  You should replace  user ,  password  with your MySQL admin user and password. You should replace  seafile_db ,  seahub_db  and  ccnet_db  with your database names.", 
            "title": "Export Existing Data on the Primary Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#modify-mysql-server-configuration-on-backup-server-mycnf", 
            "text": "On the backup server, add following options to my.cnf:  [mysqld]\nserver-id=2\nreplicate-ignore-table =  seafile db .Repo\nreplicate-ignore-table =  seafile db .Branch\nreplicate-ignore-table =  seafile db .RepoHead\nreplicate-ignore-table =  seahub db .base_userlastlogin\nreplicate-ignore-table =  seahub db .django_session\nreplicate-ignore-table =  seahub db .sysadmin_extra_userloginlog\nreplicate-ignore-table =  seahub db .UserTrafficStat\nreplicate-ignore-table =  seahub db .FileAudit\nreplicate-ignore-table =  seahub db .FileUpdate\nreplicate-ignore-table =  seahub db .PermAudit\nreplicate-ignore-table =  seahub db .avatar_avatar\nreplicate-ignore-table =  seahub db .avatar_groupavatar\nreplicate-ignore-table =  seahub db .avatar_uploaded\nreplicate-ignore-table =  seahub db .Event\nreplicate-ignore-table =  seahub db .UserEvent  The above configuration tells the backup server to ignore following tables on replication:   The library metadata tables in Seafile db\uff1aRepo, Branch, RepoHead\u3002These tables will be synced by Seafile backup server itself.  Local or temporary tables in Seahub database. When the admin logs into the backup server to view the data, these tables may be updated on the backup server. To avoid conflicts with the replicated entries, we ignore them on replication.   Notes:   The  server-id  for the primary and backup server must be different.  You should replace  seafile db  and  seahub db  with your database names.   Restart MySQL server on backup server, with  --skip-slave-start  option so that replication does not start.  sudo /etc/init.d/mysql start --skip-slave-start", 
            "title": "Modify MySQL Server Configuration on Backup Server (my.cnf)"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#import-existing-data-into-backup-server", 
            "text": "Importing existing data into the backup server's MySQL:  mysql -u  usr  -p pas    dbdump.sql  Replace  user  and  pass  with your MySQL admin user name and password.", 
            "title": "Import Existing Data into backup server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#start-replication", 
            "text": "Unlock MySQL on the primary server. In MySQL client prompt,  unlock tables;  On the backup server, setup replication start coordinates:  CHANGE MASTER TO MASTER_HOST='primary-host', MASTER_USER='user', MASTER_PASSWORD='slavepass', MASTER_LOG_FILE='bin-log-file', MASTER_LOG_POS=position;  Replace  primary-host  with the MySQL master server address; Replace  user  with the dedicated user for replication; Replace  slavepass  with the dedicated user's password; Replace  bin-log-file  and  position  with the information you obtained in the \"Obtain the Replication Master Binary Log Coordinates\" section.  Start replication on the backup server. In MySQL client prompt,  start slave;  After staring replication, you should see some log messages in MySQL's error.log on the backup server, stating the replication is started. And the slave will catch up with any new updates on the master server.", 
            "title": "Start Replication"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#configure-real-time-backup-in-seafile", 
            "text": "On the primary server, add following options to seafile.conf:  [backup]\nbackup_url = http://backup-server\nsync_token = c7a78c0210c2470e14a20a8244562ab8ad509734  On the backup server, add following options to seafile.conf:  [backup]\nprimary_url = http://primary-server\nsync_token = c7a78c0210c2470e14a20a8244562ab8ad509734\nsync_poll_interval = 3   backup_url : the backup server's address in url format. You can use http or https.  primary_url : the primary server's address in url format.  sync_token : a secret that shared between the primary and backup server. It's 40 character SHA1 generated by the system admin. You can use  uuidgen | openssl sha1  command to generate a random token.  sync_poll_interval : The backup server polls all libraries of the primary server periodically. You can set the poll interval in the unit of hours. The default interval is 1 hour, which mean the backup server will poll the primary every hour. You should choose larger intervals if you have large number of libraries.   After saving the configuration, restart seafile service on the primary and backup servers. The backup server will automatically start backup on restart.", 
            "title": "Configure Real-time Backup in Seafile"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#setup-backup-server-for-seafile-cluster", 
            "text": "If your primary service runs as a Seafile cluster, you have two points to notice when setting up a backup server:   You should only use one MySQL instance as the replication master, if you're using MariaDB cluster.  You have to change seafile.conf and set the  backup_url  and  sync_token  options on each Seafile node. The configuration on all primary Seafile node should be the same. They all point to the same backup server.   Currently you cannot deploy the backup service  as  a cluster. That is, you can only use a single node as backup server. This support may be added in the future.", 
            "title": "Setup Backup Server for Seafile Cluster"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#managing-the-real-time-backup-server", 
            "text": "Once set up, the backup server is a fully working Seafile instance. The admin can manage the backup server in two ways:   Access the server via Seahub web interface, just like a normal Seafile instance.  Use the  seaf-backup-cmd.sh  script in the server package to manage the backup function.   The  seaf-backup-cmd.sh  script provides the following commands:", 
            "title": "Managing the Real-time Backup Server"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#checking-backup-status", 
            "text": "seaf-backup-cmd.sh  provides  status  command to view the backup status. The output is like:  # ./seaf-backup-cmd.sh status\nTotal number of libraries: xxx\nNumber of synchronized libraries: xxx\nNumber of libraries waiting for sync: xxx\nNumber of libraries syncing: xxx\nNumber of libraries failed to sync: xxx\n\nList of syncing libraries:\nxxx\nxxx\n\nList of libraries failed to sync:\nxxx\nxxx  There are a few reasons that may fail the backup of a library:   Some data in the primary server is corrupted. The data may be in the latest state or in history. Since the backup procedure syncs the full history, corruption in history will fail the backup.  The primary server has run seaf-fsck, which may restore a library back to an older state.", 
            "title": "Checking Backup Status"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#manually-trigger-syncing-a-library", 
            "text": "You can use the  sync  command to manually schedule backup of a library:  # ./seaf-backup-cmd.sh sync  library id   The command will block until the backup is finished.", 
            "title": "Manually Trigger Syncing a Library"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#handling-backup-errors", 
            "text": "The  --force  option of  sync  command can be used to force failing backup to complete. Permanent backup failures are usually caused by data corruption of a library in the primary server. The  --force  option asks the backup to skip corrupted objects and finish the backup.  When you find a backup error, follow two steps:   Run seaf-fsck on the primary server, for the failing libraries. Fsck fixes any corruption for the latest state of the libraries.  Run  seaf-backup-cmd.sh sync --force  library id  on the backup server.", 
            "title": "Handling Backup Errors"
        }, 
        {
            "location": "/deploy_pro/real_time_backup/#restore-from-the-backup-server", 
            "text": "Since the backup server is a fully workable Seafile instance, you can switch your service to the backup server after your primary is severely damaged. But you need to take a few points into consideration before switching to the backup server.   You should first try to repair the primary server as long as possible. Running seaf-fsck will fix most daily corruptions on the primary server.  Even with the near real-time feature of the backup server, the data on the backup server may still be a bit older than the primary server. This is especially true for the libraries failed to backup.   Before switching to the backup server, you should first unsync all clients which is syncing with \"failed to backup\" libraries.  Supposed the output of  seaf-backup-cmd.sh status  is as follows:  List of libraries failed to sync:\nf690ea2c-fe4d-459a-ba1e-165cdc6df391\ne2df70b5-cd80-496f-98cf-c9f038cf1307  You run the following command within MySQL on the backup server:  use seafile-db;\ndelete from RepoUserToken where repo_id in ('f690ea2c-fe4d-459a-ba1e-165cdc6df391', 'e2df70b5-cd80-496f-98cf-c9f038cf1307');", 
            "title": "Restore from the Backup Server"
        }, 
        {
            "location": "/deploy_pro/configurable_options/", 
            "text": "Configurable Options\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nIn the file \nseafevents.conf\n:\n\n\n[Audit]\n## Audit log is disabled default.\nenabled = true\n\n[INDEX FILES]\n## must be \ntrue\n to enable search\nenabled = true\n\n## The interval the search index is updated. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval=10m\n\n## If true, index the contents of office/pdf files while updating search index\n## Note: If you change this option from \nfalse\n to \ntrue\n, then you need to clear the search index and update the index again. See the FAQ for details.\nindex_office_pdf=false\n\n[SEAHUB EMAIL]\n\n## must be \ntrue\n to enable user email notifications when there are new new unread notifications\nenabled = true\n\n## interval of sending seahub email. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval = 30m\n\n\n[OFFICE CONVERTER]\n\n## must be \ntrue\n to enable office/pdf file online preview\nenabled = true\n\n## How many libreoffice worker processes to run concurrenlty\nworkers = 1\n\n## where to store the converted office/pdf files. Deafult is /tmp/.\noutputdir = /tmp/\n\n## how many pages are allowed to be previewed online. Default is 50 pages\nmax-pages = 50\n\n## the max size of documents to allow to be previewed online, in MB. Default is 2 MB\n## Preview a large file (for example \n30M) online will freeze the browser.\nmax-size = 2\n\n\n\n\n\nOptions you may want to modify\n\n\nThe section above listed all the options in \nseafevents.conf\n. Most of the time you can use the default settings. But you may want to modify some of them to fit your own use case.\n\n\nWe list them in the following table, as well as why we choose the default value.\n\n\n\n\n\n\nsection\n\n\noption\n\n\ndefault value\n\n\ndescription\n\n\n\n\n\n\n\nINDEX FILES\n\n\nindex_office_pdf\n\n\nfalse\n\n\n\nThe full text search of office/pdf documents is not enabled by default. This is because it may consume quite some space for the search index. To turn it on, set this value to \"true\" and recreate the search index. See the [FAQ For Seafile Professional Server](faq_for_seafile_pro_server.md) for detail.\n\n\n\n\n\n\n\n\nOFFICE CONVERTER\n\n\nmax-size\n\n\n2\n\n\n\nThe max file size allowed to be previewed online is 2MB. The preview is converted office/pdf to HTML and display it in the browser. If the file size is too large, the conversion may take too long time and consume much space\n\n\n\n\n\n\n\n\nOFFICE CONVERTER\n\n\nmax-pages\n\n\n50\n\n\n\nWhen previewing a office/pdf document online, the pages displayed is the first 50 pages. If the value is too large, the conversion may take too long time and consume much space.", 
            "title": "Configurable Options"
        }, 
        {
            "location": "/deploy_pro/configurable_options/#configurable-options", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  In the file  seafevents.conf :  [Audit]\n## Audit log is disabled default.\nenabled = true\n\n[INDEX FILES]\n## must be  true  to enable search\nenabled = true\n\n## The interval the search index is updated. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval=10m\n\n## If true, index the contents of office/pdf files while updating search index\n## Note: If you change this option from  false  to  true , then you need to clear the search index and update the index again. See the FAQ for details.\nindex_office_pdf=false\n\n[SEAHUB EMAIL]\n\n## must be  true  to enable user email notifications when there are new new unread notifications\nenabled = true\n\n## interval of sending seahub email. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval = 30m\n\n\n[OFFICE CONVERTER]\n\n## must be  true  to enable office/pdf file online preview\nenabled = true\n\n## How many libreoffice worker processes to run concurrenlty\nworkers = 1\n\n## where to store the converted office/pdf files. Deafult is /tmp/.\noutputdir = /tmp/\n\n## how many pages are allowed to be previewed online. Default is 50 pages\nmax-pages = 50\n\n## the max size of documents to allow to be previewed online, in MB. Default is 2 MB\n## Preview a large file (for example  30M) online will freeze the browser.\nmax-size = 2", 
            "title": "Configurable Options"
        }, 
        {
            "location": "/deploy_pro/faq_for_seafile_pro_server/", 
            "text": "FAQ\n\n\nFAQ about Search\n\n\n\n\nQ: However I tried, files in an encrypted library aren't listed in the search results\n\n\n\n\nA: This is because the server can't index encrypted files, since, they are encrypted.\n\n\n\n\nQ: I switched to Professional Server from Community Server, but whatever I search, I get no results\n\n\n\n\nA: The search index is updated every 10 minutes by default. So before the first index update is performed, you get nothing no matter what you search.\n\n\nTo be able to search immediately,\n\n\n\n\nMake sure you have started seafile server\n\n\nUpdate the search index manually:\n  \ncd haiwen/seafile-pro-server-1.7.0\n  ./pro/pro.py search --update\n\n\n\n\nIf you have lots of files, this process may take quite a while.\n\n\n\n\nQ: I want to enable full text search for office/pdf documents, so I set \nindex_office_pdf\n to \ntrue\n in the configuration file, but it doesn't work.\n\n\n\n\nA: In this case, you need to:\n  1. Edit the value of \nindex_office_pdf\n option in \nseafevents.conf\n to \ntrue\n\n  2. Restart seafile server\n  \ncd /data/haiwen/seafile-pro-server-1.7.0/\n  ./seafile.sh restart\n\n  3. Delete the existing search index\n  \n./pro/pro.py search --clear\n\n  4. Create and update the search index again\n  \n./pro/pro.py search --update\n\n\nFAQ about libreoffice-based office documents preview\n\n\n\n\nQ: The browser displays \"document conversion failed\", and in the logs I see messages like \n[WARNING] failed to convert xxx to ...\n, what should I do?\n\n\n\n\nA: Sometimes the libreoffice process need to be restarted, especially if it's the first time seafile server is running on the server.\n\n\nTry to kill the libreoffice process:\n  \nsh\n  pkill -f soffice.bin\n\n  Now try re-opening the preview page in the brower again.\n\n\nAlso if you are deploying seafile in cluster mode, make sure memcached is working on each server.\n\n\n\n\nQ: The above solution does not solve my problem.\n\n\n\n\nA: Please check whether the user you run Seafile can correctly start the libreoffice process. There may be permission problems. For example, if you use www-data user to run Seafile, make sure www-data has a home directory and can write to the home directory.", 
            "title": "FAQ"
        }, 
        {
            "location": "/deploy_pro/faq_for_seafile_pro_server/#faq", 
            "text": "", 
            "title": "FAQ"
        }, 
        {
            "location": "/deploy_pro/seafile_professional_sdition_software_license_agreement/", 
            "text": "Seafile Professional Edition Software License Agreement\n\n\nSeafile Professional Edition\nSOFTWARE LICENSE AGREEMENT\n\nNOTICE: READ THE FOLLOWING TERMS AND CONDITIONS CAREFULLY BEFORE YOU DOWNLOAD, INSTALL OR USE Seafile, Inc'S PROPRIETARY SOFTWARE. BY INSTALLING OR USING THE SOFTWARE, YOU AGREE TO BE BOUND BY THE FOLLOWING TERMS AND CONDITIONS. IF YOU DO NOT AGREE TO THE FOLLOWING TERMS AND CONDITIONS, DO NOT INSTALL OR USE THE SOFTWARE.\n\n1. DEFINITIONS\n\nSeafile, Inc\n means Seafile, Inc\n\n\nYou and Your\n means the party licensing the Software hereunder.\n\n\nSoftware\n means the computer programs provided under the terms of this license by Seafile, Inc together with any documentation provided therewith.\n\n2. GRANT OF RIGHTS\n2.1 General\nThe License granted for Software under this Agreement authorizes You on a non-exclusive basis to use the Software. The Software is licensed, not sold to You and Seafile, Inc reserves all rights not expressly granted to You in this Agreement. The License is personal to You and may not be assigned by You to any third party.\n\n2.2 License Provisions\nSubject to the receipt by Seafile, Inc of the applicable license fees, You have the right use the Software as follows:\n\n* You may use and install the Software on an unlimited number of computers that are owned, leased, or controlled by you.\n* Nothing in this Agreement shall permit you, or any third party to disclose or otherwise make available to any third party the licensed Software, source code or any portion thereof.\n* You agree to indemnify, hold harmless and defend Seafile, Inc from and against any claims or lawsuits, including attorney's fees, that arise as a result from the use of the Software;\n* You do not permit further redistribution of the Software by Your end-user customers\n\n5. NO DERIVATIVE WORKS\nThe inclusion of source code with the License is explicitly not for your use to customize a solution or re-use in your own projects or products. The benefit of including the source code is for purposes of security auditing. You may modify the code only for emergency bug fixes that impact security or performance and only for use within your enterprise. You may not create or distribute derivative works based on the Software or any part thereof. If you need enhancements to the software features, you should suggest them to Source Tree Solutions for version improvements.\n\n6. OWNERSHIP\nYou acknowledge that all copies of the Software in any form are the sole property of Seafile, Inc. You have no right, title or interest to any such Software or copies thereof except as provided in this Agreement.\n\n7. CONFIDENTIALITY\nYou hereby acknowledge and agreed that the Software constitute and contain valuable proprietary products and trade secrets of Seafile, Inc, embodying substantial creative efforts and confidential information, ideas, and expressions. You agree to treat, and take precautions to ensure that your employees and other third parties treat, the Software as confidential in accordance with the confidentiality requirements herein.\n\n8. DISCLAIMER OF WARRANTIES\nEXCEPT AS OTHERWISE SET FORTH IN THIS AGREEMENT THE SOFTWARE IS PROVIDED TO YOU \nAS IS\n, AND Seafile, Inc MAKES NO EXPRESS OR IMPLIED WARRANTIES WITH RESPECT TO ITS FUNCTIONALITY, CONDITION, PERFORMANCE, OPERABILITY OR USE. WITHOUT LIMITING THE FOREGOING, Seafile, Inc DISCLAIMS ALL IMPLIED WARRANTIES INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR FREEDOM FROM INFRINGEMENT. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES, SO THE ABOVE EXCLUSIONS MAY NOT APPLY TO YOU. THE LIMITED WARRANTY HEREIN GIVES YOU SPECIFIC LEGAL RIGHTS, AND YOU MAY ALSO HAVE OTHER RIGHTS THAT VARY FROM ONE JURISDICTION TO ANOTHER.\n\n9. LIMITATION OF LIABILITY\nYOU ACKNOWLEDGE AND AGREE THAT THE CONSIDERATION WHICH Seafile, Inc IS CHARGING HEREUNDER DOES NOT INCLUDE ANY CONSIDERATION FOR ASSUMPTION BY Seafile, Inc OF THE RISK OF YOUR CONSEQUENTIAL OR INCIDENTAL DAMAGES WHICH MAY ARISE IN CONNECTION WITH YOUR USE OF THE SOFTWARE. ACCORDINGLY, YOU AGREE THAT Seafile, Inc SHALL NOT BE RESPONSIBLE TO YOU OR ANY THIRD PARTY FOR ANY LOSS-OF-PROFIT, LOST SAVINGS, INDIRECT, INCIDENTAL, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF A LICENSING OR USE OF THE SOFTWARE.\n\n10. INDEMNIFICATION\nYou agree to defend, indemnify and hold Seafile, Inc and its employees, agents, representatives and assigns harmless from and against any claims, proceedings, damages, injuries, liabilities, costs, attorney's fees relating to or arising out of Your use of the Software or any breach of this Agreement.\n\n11. TERMINATION\nYour license is effective until terminated. You may terminate it at any time by destroying the Software or returning all copies of the Software to Seafile, Inc. Your license will terminate immediately without notice if You breach any of the terms and conditions of this Agreement, including non or incomplete payment of the license fee. Upon termination of this Agreement for any reason: You will uninstall all copies of the Software; You will immediately cease and desist all use of the Software; and will destroy all copies of the software in your possesion.\n\n12. UPDATES AND SUPPORT\nSeafile, Inc has the right, but no obligation, to periodically update the Software, at its complete discretion, without the consent or obligation to You or any licensee or user.\n\n13. TAXES AND OTHER CHARGES\nYou are responsible for paying all sales, use, excise valuated or other taxes or governmental charges in addition to freight, insurance and installation charges and import or export duties.\n\nYOU HEREBY ACKNOWLEDGE THAT YOU HAVE READ THIS AGREEMENT, UNDERSTAND IT AND AGREE TO BE BOUND BY ITS TERMS AND CONDITIONS.", 
            "title": "License"
        }, 
        {
            "location": "/deploy_pro/seafile_professional_sdition_software_license_agreement/#seafile-professional-edition-software-license-agreement", 
            "text": "Seafile Professional Edition\nSOFTWARE LICENSE AGREEMENT\n\nNOTICE: READ THE FOLLOWING TERMS AND CONDITIONS CAREFULLY BEFORE YOU DOWNLOAD, INSTALL OR USE Seafile, Inc'S PROPRIETARY SOFTWARE. BY INSTALLING OR USING THE SOFTWARE, YOU AGREE TO BE BOUND BY THE FOLLOWING TERMS AND CONDITIONS. IF YOU DO NOT AGREE TO THE FOLLOWING TERMS AND CONDITIONS, DO NOT INSTALL OR USE THE SOFTWARE.\n\n1. DEFINITIONS Seafile, Inc  means Seafile, Inc You and Your  means the party licensing the Software hereunder. Software  means the computer programs provided under the terms of this license by Seafile, Inc together with any documentation provided therewith.\n\n2. GRANT OF RIGHTS\n2.1 General\nThe License granted for Software under this Agreement authorizes You on a non-exclusive basis to use the Software. The Software is licensed, not sold to You and Seafile, Inc reserves all rights not expressly granted to You in this Agreement. The License is personal to You and may not be assigned by You to any third party.\n\n2.2 License Provisions\nSubject to the receipt by Seafile, Inc of the applicable license fees, You have the right use the Software as follows:\n\n* You may use and install the Software on an unlimited number of computers that are owned, leased, or controlled by you.\n* Nothing in this Agreement shall permit you, or any third party to disclose or otherwise make available to any third party the licensed Software, source code or any portion thereof.\n* You agree to indemnify, hold harmless and defend Seafile, Inc from and against any claims or lawsuits, including attorney's fees, that arise as a result from the use of the Software;\n* You do not permit further redistribution of the Software by Your end-user customers\n\n5. NO DERIVATIVE WORKS\nThe inclusion of source code with the License is explicitly not for your use to customize a solution or re-use in your own projects or products. The benefit of including the source code is for purposes of security auditing. You may modify the code only for emergency bug fixes that impact security or performance and only for use within your enterprise. You may not create or distribute derivative works based on the Software or any part thereof. If you need enhancements to the software features, you should suggest them to Source Tree Solutions for version improvements.\n\n6. OWNERSHIP\nYou acknowledge that all copies of the Software in any form are the sole property of Seafile, Inc. You have no right, title or interest to any such Software or copies thereof except as provided in this Agreement.\n\n7. CONFIDENTIALITY\nYou hereby acknowledge and agreed that the Software constitute and contain valuable proprietary products and trade secrets of Seafile, Inc, embodying substantial creative efforts and confidential information, ideas, and expressions. You agree to treat, and take precautions to ensure that your employees and other third parties treat, the Software as confidential in accordance with the confidentiality requirements herein.\n\n8. DISCLAIMER OF WARRANTIES\nEXCEPT AS OTHERWISE SET FORTH IN THIS AGREEMENT THE SOFTWARE IS PROVIDED TO YOU  AS IS , AND Seafile, Inc MAKES NO EXPRESS OR IMPLIED WARRANTIES WITH RESPECT TO ITS FUNCTIONALITY, CONDITION, PERFORMANCE, OPERABILITY OR USE. WITHOUT LIMITING THE FOREGOING, Seafile, Inc DISCLAIMS ALL IMPLIED WARRANTIES INCLUDING, WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR FREEDOM FROM INFRINGEMENT. SOME JURISDICTIONS DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES, SO THE ABOVE EXCLUSIONS MAY NOT APPLY TO YOU. THE LIMITED WARRANTY HEREIN GIVES YOU SPECIFIC LEGAL RIGHTS, AND YOU MAY ALSO HAVE OTHER RIGHTS THAT VARY FROM ONE JURISDICTION TO ANOTHER.\n\n9. LIMITATION OF LIABILITY\nYOU ACKNOWLEDGE AND AGREE THAT THE CONSIDERATION WHICH Seafile, Inc IS CHARGING HEREUNDER DOES NOT INCLUDE ANY CONSIDERATION FOR ASSUMPTION BY Seafile, Inc OF THE RISK OF YOUR CONSEQUENTIAL OR INCIDENTAL DAMAGES WHICH MAY ARISE IN CONNECTION WITH YOUR USE OF THE SOFTWARE. ACCORDINGLY, YOU AGREE THAT Seafile, Inc SHALL NOT BE RESPONSIBLE TO YOU OR ANY THIRD PARTY FOR ANY LOSS-OF-PROFIT, LOST SAVINGS, INDIRECT, INCIDENTAL, SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF A LICENSING OR USE OF THE SOFTWARE.\n\n10. INDEMNIFICATION\nYou agree to defend, indemnify and hold Seafile, Inc and its employees, agents, representatives and assigns harmless from and against any claims, proceedings, damages, injuries, liabilities, costs, attorney's fees relating to or arising out of Your use of the Software or any breach of this Agreement.\n\n11. TERMINATION\nYour license is effective until terminated. You may terminate it at any time by destroying the Software or returning all copies of the Software to Seafile, Inc. Your license will terminate immediately without notice if You breach any of the terms and conditions of this Agreement, including non or incomplete payment of the license fee. Upon termination of this Agreement for any reason: You will uninstall all copies of the Software; You will immediately cease and desist all use of the Software; and will destroy all copies of the software in your possesion.\n\n12. UPDATES AND SUPPORT\nSeafile, Inc has the right, but no obligation, to periodically update the Software, at its complete discretion, without the consent or obligation to You or any licensee or user.\n\n13. TAXES AND OTHER CHARGES\nYou are responsible for paying all sales, use, excise valuated or other taxes or governmental charges in addition to freight, insurance and installation charges and import or export duties.\n\nYOU HEREBY ACKNOWLEDGE THAT YOU HAVE READ THIS AGREEMENT, UNDERSTAND IT AND AGREE TO BE BOUND BY ITS TERMS AND CONDITIONS.", 
            "title": "Seafile Professional Edition Software License Agreement"
        }, 
        {
            "location": "/config/README/", 
            "text": "Server Configuration and Customization\n\n\nConfig Files\n\n\nImportant\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nThere are three config files in the community edition:\n\n\n\n\nccnet.conf\n: contains the LDAP settings\n\n\nseafile.conf\n: contains settings for seafile daemon and fileserver.\n\n\nseahub_settings.py\n: contains settings for Seahub\n\n\n\n\nThere is one additional config file in the pro edition:\n\n\n\n\nseafevents.conf\n: contains settings for search and documents preview\n\n\n\n\nNote: Since version 5.0.0, you can also modify most of the config items via web interface.The config items are saved in database table (seahub-dab/constance_config). They have a higher priority over the items in config files.\n\n\n\n\nConfig Items\n\n\nEmail:\n\n\n\n\nSending email notifications\n\n\nCustomize email notifications\n\n\n\n\nUser management\n\n\n\n\nUser management options\n\n\n\n\nUser quota and download/upload size limits\n\n\n\n\nUser quota and download/upload size limits options\n\n\n\n\nCustomize Web\n\n\n\n\nCustomize web inferface", 
            "title": "README"
        }, 
        {
            "location": "/config/README/#server-configuration-and-customization", 
            "text": "", 
            "title": "Server Configuration and Customization"
        }, 
        {
            "location": "/config/README/#config-files", 
            "text": "Important : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  There are three config files in the community edition:   ccnet.conf : contains the LDAP settings  seafile.conf : contains settings for seafile daemon and fileserver.  seahub_settings.py : contains settings for Seahub   There is one additional config file in the pro edition:   seafevents.conf : contains settings for search and documents preview   Note: Since version 5.0.0, you can also modify most of the config items via web interface.The config items are saved in database table (seahub-dab/constance_config). They have a higher priority over the items in config files.", 
            "title": "Config Files"
        }, 
        {
            "location": "/config/README/#config-items", 
            "text": "Email:   Sending email notifications  Customize email notifications   User management   User management options   User quota and download/upload size limits   User quota and download/upload size limits options", 
            "title": "Config Items"
        }, 
        {
            "location": "/config/README/#customize-web", 
            "text": "Customize web inferface", 
            "title": "Customize Web"
        }, 
        {
            "location": "/config/ccnet-conf/", 
            "text": "Seafile Network Configurations (ccnet.conf)\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nYou may change Seafile's network options by modifying \nccnet.conf\n file. Let's walk through the options by an example.\n\n\n\n[General]\n\n# Used internally. Don't delete.\nID=eb812fd276432eff33bcdde7506f896eb4769da0\n\n# Used internally. Don't delete.\nNAME=example\n\n# This is outside URL for Seahub(Seafile Web). \n# The domain part (i.e., www.example.com) will be used in generating share links and download/upload file via web.\n# Note: Outside URL means \"if you use Nginx, it should be the Nginx's address\"\nSERVICE_URL=http://www.example.com:8000\n\n\n[Network]\n# Not used anymore\nPORT=10001\n\n[Client]\n# Not used anymore\nPORT=13419\n\n\n\n\n\nNote\n: You should restart seafile so that your changes take effect.\n\n\n\ncd seafile-server\n./seafile.sh restart\n\n\n\n\nChanging MySQL Connection Pool Size\n\n\nWhen you configure ccnet to use MySQL, the default connection pool size is 100, which should be enough for most use cases. You can change this value by adding following options to ccnet.conf:\n\n\n[Database]\n......\n# Use larger connection pool\nMAX_CONNECTIONS = 200", 
            "title": "ccnet.conf"
        }, 
        {
            "location": "/config/ccnet-conf/#seafile-network-configurations-ccnetconf", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .  You may change Seafile's network options by modifying  ccnet.conf  file. Let's walk through the options by an example.  \n[General]\n\n# Used internally. Don't delete.\nID=eb812fd276432eff33bcdde7506f896eb4769da0\n\n# Used internally. Don't delete.\nNAME=example\n\n# This is outside URL for Seahub(Seafile Web). \n# The domain part (i.e., www.example.com) will be used in generating share links and download/upload file via web.\n# Note: Outside URL means \"if you use Nginx, it should be the Nginx's address\"\nSERVICE_URL=http://www.example.com:8000\n\n\n[Network]\n# Not used anymore\nPORT=10001\n\n[Client]\n# Not used anymore\nPORT=13419  Note : You should restart seafile so that your changes take effect.  \ncd seafile-server\n./seafile.sh restart", 
            "title": "Seafile Network Configurations (ccnet.conf)"
        }, 
        {
            "location": "/config/ccnet-conf/#changing-mysql-connection-pool-size", 
            "text": "When you configure ccnet to use MySQL, the default connection pool size is 100, which should be enough for most use cases. You can change this value by adding following options to ccnet.conf:  [Database]\n......\n# Use larger connection pool\nMAX_CONNECTIONS = 200", 
            "title": "Changing MySQL Connection Pool Size"
        }, 
        {
            "location": "/config/seafile-conf/", 
            "text": "Seafile.conf settings\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nStorage Quota Setting (seafile.conf)\n\n\nYou may set a default quota (e.g. 2GB) for all users. To do this, just add the following lines to \nseafile.conf\n file\n\n\n\n[quota]\n# default user quota in GB, integer only\ndefault = 2\n\n\n\n\nThis setting applies to all users. If you want to set quota for a specific user, you may log in to seahub website as administrator, then set it in \"System Admin\" page.\n\n\nDefault history length limit (seafile.conf)\n\n\nIf you don't want to keep all file revision history, you may set a default history length limit for all libraries.\n\n\n\n[history]\nkeep_days = days of history to keep\n\n\n\n\nSeafile fileserver configuration (seafile.conf)\n\n\nThe configuration of seafile fileserver is in the \n[fileserver]\n section of the file \nseafile.conf\n\n\n\n[fileserver]\n# bind address for fileserver, default to 0.0.0.0\nhost = 0.0.0.0\n# tcp port for fileserver\nport = 8082\n\n\n\n\nChange upload/download settings.\n\n\n\n[fileserver]\n# Set maximum upload file size to 200M.\nmax_upload_size=200\n\n# Set maximum download directory size to 200M.\nmax_download_dir_size=200\n\n\n\n\nAfter a file is uploaded via the web interface, or the cloud file browser in the client, it needs to be divided into fixed size blocks and stored into storage backend. We call this procedure \"indexing\". By default, the file server uses 1 thread to sequentially index the file and store the blocks one by one. This is suitable for most cases. But if you're using S3/Ceph/Swift backends, you may have more bandwidth in the storage backend for storing multiple blocks in parallel. We provide an option to define the number of concurrent threads in indexing:\n\n\n[fileserver]\nmax_indexing_threads = 10\n\n\n\n\nYou can download a folder as a zip archive from seahub, but some zip software on windows doesn't support UTF-8, in which case you can use the \"windows_encoding\" settings to solve it.\n\n\n[zip]\n\n\nThe file name encoding of the downloaded zip file.\n\n\nwindows_encoding = iso-8859-1\n\n\n\nChanging MySQL Connection Pool Size\n\n\nWhen you configure seafile server to use MySQL, the default connection pool size is 100, which should be enough for most use cases. You can change this value by adding following options to seafile.conf:\n\n\n[database]\n......\n# Use larger connection pool\nmax_connections = 200\n\n\n\n\nNote\n: You need to restart seafile and seahub so that your changes take effect.\n\n\n./seahub.sh restart\n./seafile.sh restart", 
            "title": "seafile.conf"
        }, 
        {
            "location": "/config/seafile-conf/#seafileconf-settings", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .", 
            "title": "Seafile.conf settings"
        }, 
        {
            "location": "/config/seafile-conf/#storage-quota-setting-seafileconf", 
            "text": "You may set a default quota (e.g. 2GB) for all users. To do this, just add the following lines to  seafile.conf  file  \n[quota]\n# default user quota in GB, integer only\ndefault = 2  This setting applies to all users. If you want to set quota for a specific user, you may log in to seahub website as administrator, then set it in \"System Admin\" page.", 
            "title": "Storage Quota Setting (seafile.conf)"
        }, 
        {
            "location": "/config/seafile-conf/#default-history-length-limit-seafileconf", 
            "text": "If you don't want to keep all file revision history, you may set a default history length limit for all libraries.  \n[history]\nkeep_days = days of history to keep", 
            "title": "Default history length limit (seafile.conf)"
        }, 
        {
            "location": "/config/seafile-conf/#seafile-fileserver-configuration-seafileconf", 
            "text": "The configuration of seafile fileserver is in the  [fileserver]  section of the file  seafile.conf  \n[fileserver]\n# bind address for fileserver, default to 0.0.0.0\nhost = 0.0.0.0\n# tcp port for fileserver\nport = 8082  Change upload/download settings.  \n[fileserver]\n# Set maximum upload file size to 200M.\nmax_upload_size=200\n\n# Set maximum download directory size to 200M.\nmax_download_dir_size=200  After a file is uploaded via the web interface, or the cloud file browser in the client, it needs to be divided into fixed size blocks and stored into storage backend. We call this procedure \"indexing\". By default, the file server uses 1 thread to sequentially index the file and store the blocks one by one. This is suitable for most cases. But if you're using S3/Ceph/Swift backends, you may have more bandwidth in the storage backend for storing multiple blocks in parallel. We provide an option to define the number of concurrent threads in indexing:  [fileserver]\nmax_indexing_threads = 10  You can download a folder as a zip archive from seahub, but some zip software on windows doesn't support UTF-8, in which case you can use the \"windows_encoding\" settings to solve it. \n[zip]", 
            "title": "Seafile fileserver configuration (seafile.conf)"
        }, 
        {
            "location": "/config/seafile-conf/#the-file-name-encoding-of-the-downloaded-zip-file", 
            "text": "windows_encoding = iso-8859-1", 
            "title": "The file name encoding of the downloaded zip file."
        }, 
        {
            "location": "/config/seafile-conf/#changing-mysql-connection-pool-size", 
            "text": "When you configure seafile server to use MySQL, the default connection pool size is 100, which should be enough for most use cases. You can change this value by adding following options to seafile.conf:  [database]\n......\n# Use larger connection pool\nmax_connections = 200  Note : You need to restart seafile and seahub so that your changes take effect. \n./seahub.sh restart\n./seafile.sh restart", 
            "title": "Changing MySQL Connection Pool Size"
        }, 
        {
            "location": "/config/seahub_settings_py/", 
            "text": "Seahub Settings\n\n\nNote: You can also modify most of the config items via web interface.The config items are saved in database table (seahub-dab/constance_config). They have a higher priority over the items in config files.\n\n\nSending Email Notifications on Seahub\n\n\nA few features work better if it can send email notifications, such as notifying users about new messages.\nIf you want to setup email notifications, please add the following lines to \nseahub_settings.py\n (and set your email server).\n\n\nEMAIL_USE_TLS = False\nEMAIL_HOST = 'smtp.example.com'        # smpt server\nEMAIL_HOST_USER = 'username@example.com'    # username and domain\nEMAIL_HOST_PASSWORD = 'password'    # password\nEMAIL_PORT = 25\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER\n\n\n\n\nIf you are using Gmail as email server, use following lines:\n\n\nEMAIL_USE_TLS = True\nEMAIL_HOST = 'smtp.gmail.com'\nEMAIL_HOST_USER = 'username@gmail.com'\nEMAIL_HOST_PASSWORD = 'password'\nEMAIL_PORT = 587\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER\n\n\n\n\nNote\n: If your Email service still can not work, you may checkout the log file \nlogs/seahub.log\n to see what may cause the problem. For complete email notification list, please refer to \nEmail notification list\n.\n\n\nNote2\n: If you want to use the Email service without authentication leaf \nEMAIL_HOST_PASSWORD\n \nblank\n (\n''\n).\n\n\nMemcached\n\n\nSeahub caches items(avatars, profiles, etc) on file system by default(/tmp/seahub_cache/). You can replace with Memcached.\nAfter install \npython-memcache\n, add the following lines to \nseahub_settings.py\n.\n\n\nCACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n    }\n}\n\n\n\n\nUser management options\n\n\nThe following options affect user registration, password and session.\n\n\n# Enalbe or disalbe registration on web. Default is `False`.\nENABLE_SIGNUP = False\n\n# Activate or deactivate user when registration complete. Default is `True`.\n# If set to `False`, new users need to be activated by admin in admin panel.\nACTIVATE_AFTER_REGISTRATION = False\n\n# Whether to send email when a system admin adding a new member. Default is `True`.\nSEND_EMAIL_ON_ADDING_SYSTEM_MEMBER = True\n\n# Whether to send email when a system admin resetting a user's password. Default is `True`.\nSEND_EMAIL_ON_RESETTING_USER_PASSWD = True\n\n# Remember days for login. Default is 7\nLOGIN_REMEMBER_DAYS = 7\n\n# Attempt limit before showing a captcha when login.\nLOGIN_ATTEMPT_LIMIT = 3\n\n# deactivate user account when login attempts exceed limit\n# Since version 5.1.2 or pro 5.1.3\nFREEZE_USER_ON_LOGIN_FAILED = False\n\n# mininum length for user's password\nUSER_PASSWORD_MIN_LENGTH = 6\n\n# LEVEL based on four types of input:\n# num, upper letter, lower letter, other symbols\n# '3' means password must have at least 3 types of the above.\nUSER_PASSWORD_STRENGTH_LEVEL = 3\n\n# default False, only check USER_PASSWORD_MIN_LENGTH\n# when True, check password strength level, STRONG(or above) is allowed\nUSER_STRONG_PASSWORD_REQUIRED = False\n\n# Force user to change password when admin add/reset a user.\n# Added in 5.1.1, deafults to True.\nFORCE_PASSWORD_CHANGE = True\n\n# Age of cookie, in seconds (default: 2 weeks).\nSESSION_COOKIE_AGE = 60 * 60 * 24 * 7 * 2\n\n# Whether a user's session cookie expires when the Web browser is closed.\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False\n\n# Whether to save the session data on every request. Default is `False`\nSESSION_SAVE_EVERY_REQUEST = False\n\n\n\n\n\nLibrary options\n\n\nOptions for libraries:\n\n\n# mininum length for password of encrypted library\nREPO_PASSWORD_MIN_LENGTH = 8\n\n# mininum length for password for share link (since version 4.4)\nSHARE_LINK_PASSWORD_MIN_LENGTH = 8\n\n# Disable sync with any folder. Default is `False`\n# NOTE: since version 4.2.4\nDISABLE_SYNC_WITH_ANY_FOLDER = True\n\n# Enable or disable library history setting\nENABLE_REPO_HISTORY_SETTING = True\n\n# Enable or disable normal user to create organization libraries\n# Since version 5.0.5\nENABLE_USER_CREATE_ORG_REPO = True\n\n\n\n\nOptions for online file preview:\n\n\n# Whether to use pdf.js to view pdf files online. Default is `True`,  you can turn it off.\n# NOTE: since version 1.4.\nUSE_PDFJS = True\n\n# Online preview maximum file size, defaults to 30M.\n# Note, this option controls files that can be previewed online, like pictures, txt, pdf.\n# In pro edition, for preview doc/ppt/excel/pdf, there is another option `max-size`\n# in seafevents.conf that controls the limit of files that can be previewed.\nFILE_PREVIEW_MAX_SIZE = 30 * 1024 * 1024\n\n# Enable or disable thumbnails\n# NOTE: since version 4.0.2\nENABLE_THUMBNAIL = True\n\n# Absolute filesystem path to the directory that will hold thumbnail files.\nTHUMBNAIL_ROOT = '/haiwen/seahub-data/thumbnail/thumb/'\n\n\n\n\nCloud Mode\n\n\nYou should enable cloud mode if you use Seafile with an unknown user base. It disables the organization tab in Seahub's website to ensure that users can't access the user list. Cloud mode provides some nice features like sharing content with unregistered users and sending invitations to them. Therefore you also want to enable user registration. Through the global address book (since version 4.2.3) you can do a search for every user account. So you probably want to disable it.\n\n\n# Enable cloude mode and hide `Organization` tab.\nCLOUD_MODE = True\n\n# Disable global address book\nENABLE_GLOBAL_ADDRESSBOOK = False\n\n\n\n\nOther options\n\n\n\n# Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'UTC'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\n# Default language for sending emails.\nLANGUAGE_CODE = 'en'\n\n# Set this to your website's name. This is contained in email notifications.\nSITE_NAME = 'example.com'\n\n# Set seahub website's title\nSITE_TITLE = 'Seafile'\n\n# If you don't want to run seahub website on your site's root path, set this option to your preferred path.\n# e.g. setting it to '/seahub/' would run seahub on http://example.com/seahub/.\nSITE_ROOT = '/'\n\n\n\n\nPro edition only options\n\n\n# Whether to show the used traffic in user's profile popup dialog. Default is True\nSHOW_TRAFFIC = True\n\n# Allow administrator to view user's file in UNENCRYPTED libraries\n# through Libraries page in System Admin. Default is False.\nENABLE_SYS_ADMIN_VIEW_REPO = True\n\n\n\n\nNote\n\n\n\n\nYou need to restart seahub so that your changes take effect.\n\n\nIf your changes don't take effect, You may need to delete 'seahub_setting.pyc'. (A cache file)\n\n\n\n\n./seahub.sh restart", 
            "title": "seahub_settings.py"
        }, 
        {
            "location": "/config/seahub_settings_py/#seahub-settings", 
            "text": "Note: You can also modify most of the config items via web interface.The config items are saved in database table (seahub-dab/constance_config). They have a higher priority over the items in config files.", 
            "title": "Seahub Settings"
        }, 
        {
            "location": "/config/seahub_settings_py/#sending-email-notifications-on-seahub", 
            "text": "A few features work better if it can send email notifications, such as notifying users about new messages.\nIf you want to setup email notifications, please add the following lines to  seahub_settings.py  (and set your email server).  EMAIL_USE_TLS = False\nEMAIL_HOST = 'smtp.example.com'        # smpt server\nEMAIL_HOST_USER = 'username@example.com'    # username and domain\nEMAIL_HOST_PASSWORD = 'password'    # password\nEMAIL_PORT = 25\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER  If you are using Gmail as email server, use following lines:  EMAIL_USE_TLS = True\nEMAIL_HOST = 'smtp.gmail.com'\nEMAIL_HOST_USER = 'username@gmail.com'\nEMAIL_HOST_PASSWORD = 'password'\nEMAIL_PORT = 587\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER  Note : If your Email service still can not work, you may checkout the log file  logs/seahub.log  to see what may cause the problem. For complete email notification list, please refer to  Email notification list .  Note2 : If you want to use the Email service without authentication leaf  EMAIL_HOST_PASSWORD   blank  ( '' ).", 
            "title": "Sending Email Notifications on Seahub"
        }, 
        {
            "location": "/config/seahub_settings_py/#memcached", 
            "text": "Seahub caches items(avatars, profiles, etc) on file system by default(/tmp/seahub_cache/). You can replace with Memcached.\nAfter install  python-memcache , add the following lines to  seahub_settings.py .  CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',\n        'LOCATION': '127.0.0.1:11211',\n    }\n}", 
            "title": "Memcached"
        }, 
        {
            "location": "/config/seahub_settings_py/#user-management-options", 
            "text": "The following options affect user registration, password and session.  # Enalbe or disalbe registration on web. Default is `False`.\nENABLE_SIGNUP = False\n\n# Activate or deactivate user when registration complete. Default is `True`.\n# If set to `False`, new users need to be activated by admin in admin panel.\nACTIVATE_AFTER_REGISTRATION = False\n\n# Whether to send email when a system admin adding a new member. Default is `True`.\nSEND_EMAIL_ON_ADDING_SYSTEM_MEMBER = True\n\n# Whether to send email when a system admin resetting a user's password. Default is `True`.\nSEND_EMAIL_ON_RESETTING_USER_PASSWD = True\n\n# Remember days for login. Default is 7\nLOGIN_REMEMBER_DAYS = 7\n\n# Attempt limit before showing a captcha when login.\nLOGIN_ATTEMPT_LIMIT = 3\n\n# deactivate user account when login attempts exceed limit\n# Since version 5.1.2 or pro 5.1.3\nFREEZE_USER_ON_LOGIN_FAILED = False\n\n# mininum length for user's password\nUSER_PASSWORD_MIN_LENGTH = 6\n\n# LEVEL based on four types of input:\n# num, upper letter, lower letter, other symbols\n# '3' means password must have at least 3 types of the above.\nUSER_PASSWORD_STRENGTH_LEVEL = 3\n\n# default False, only check USER_PASSWORD_MIN_LENGTH\n# when True, check password strength level, STRONG(or above) is allowed\nUSER_STRONG_PASSWORD_REQUIRED = False\n\n# Force user to change password when admin add/reset a user.\n# Added in 5.1.1, deafults to True.\nFORCE_PASSWORD_CHANGE = True\n\n# Age of cookie, in seconds (default: 2 weeks).\nSESSION_COOKIE_AGE = 60 * 60 * 24 * 7 * 2\n\n# Whether a user's session cookie expires when the Web browser is closed.\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False\n\n# Whether to save the session data on every request. Default is `False`\nSESSION_SAVE_EVERY_REQUEST = False", 
            "title": "User management options"
        }, 
        {
            "location": "/config/seahub_settings_py/#library-options", 
            "text": "Options for libraries:  # mininum length for password of encrypted library\nREPO_PASSWORD_MIN_LENGTH = 8\n\n# mininum length for password for share link (since version 4.4)\nSHARE_LINK_PASSWORD_MIN_LENGTH = 8\n\n# Disable sync with any folder. Default is `False`\n# NOTE: since version 4.2.4\nDISABLE_SYNC_WITH_ANY_FOLDER = True\n\n# Enable or disable library history setting\nENABLE_REPO_HISTORY_SETTING = True\n\n# Enable or disable normal user to create organization libraries\n# Since version 5.0.5\nENABLE_USER_CREATE_ORG_REPO = True  Options for online file preview:  # Whether to use pdf.js to view pdf files online. Default is `True`,  you can turn it off.\n# NOTE: since version 1.4.\nUSE_PDFJS = True\n\n# Online preview maximum file size, defaults to 30M.\n# Note, this option controls files that can be previewed online, like pictures, txt, pdf.\n# In pro edition, for preview doc/ppt/excel/pdf, there is another option `max-size`\n# in seafevents.conf that controls the limit of files that can be previewed.\nFILE_PREVIEW_MAX_SIZE = 30 * 1024 * 1024\n\n# Enable or disable thumbnails\n# NOTE: since version 4.0.2\nENABLE_THUMBNAIL = True\n\n# Absolute filesystem path to the directory that will hold thumbnail files.\nTHUMBNAIL_ROOT = '/haiwen/seahub-data/thumbnail/thumb/'", 
            "title": "Library options"
        }, 
        {
            "location": "/config/seahub_settings_py/#cloud-mode", 
            "text": "You should enable cloud mode if you use Seafile with an unknown user base. It disables the organization tab in Seahub's website to ensure that users can't access the user list. Cloud mode provides some nice features like sharing content with unregistered users and sending invitations to them. Therefore you also want to enable user registration. Through the global address book (since version 4.2.3) you can do a search for every user account. So you probably want to disable it.  # Enable cloude mode and hide `Organization` tab.\nCLOUD_MODE = True\n\n# Disable global address book\nENABLE_GLOBAL_ADDRESSBOOK = False", 
            "title": "Cloud Mode"
        }, 
        {
            "location": "/config/seahub_settings_py/#other-options", 
            "text": "# Choices can be found here:\n# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name\n# although not all choices may be available on all operating systems.\n# If running in a Windows environment this must be set to the same as your\n# system time zone.\nTIME_ZONE = 'UTC'\n\n# Language code for this installation. All choices can be found here:\n# http://www.i18nguy.com/unicode/language-identifiers.html\n# Default language for sending emails.\nLANGUAGE_CODE = 'en'\n\n# Set this to your website's name. This is contained in email notifications.\nSITE_NAME = 'example.com'\n\n# Set seahub website's title\nSITE_TITLE = 'Seafile'\n\n# If you don't want to run seahub website on your site's root path, set this option to your preferred path.\n# e.g. setting it to '/seahub/' would run seahub on http://example.com/seahub/.\nSITE_ROOT = '/'", 
            "title": "Other options"
        }, 
        {
            "location": "/config/seahub_settings_py/#pro-edition-only-options", 
            "text": "# Whether to show the used traffic in user's profile popup dialog. Default is True\nSHOW_TRAFFIC = True\n\n# Allow administrator to view user's file in UNENCRYPTED libraries\n# through Libraries page in System Admin. Default is False.\nENABLE_SYS_ADMIN_VIEW_REPO = True", 
            "title": "Pro edition only options"
        }, 
        {
            "location": "/config/seahub_settings_py/#note", 
            "text": "You need to restart seahub so that your changes take effect.  If your changes don't take effect, You may need to delete 'seahub_setting.pyc'. (A cache file)   ./seahub.sh restart", 
            "title": "Note"
        }, 
        {
            "location": "/config/seahub_customization/", 
            "text": "Seahub customization\n\n\nCustomize Seahub Logo and CSS\n\n\nCreate a folder \nseafile-install-path\n/seahub-data/custom\n. Create a symbolic link in \nseafile-server-latest/seahub/media\n by \nln -s ../../../seahub-data/custom custom\n.\n\n\nDuring upgrading, Seafile upgrade script will create symbolic link automatically to preserve your customization.\n\n\nCustomize Logo\n\n\n\n\nAdd your logo file to \ncustom/\n\n\nOverwrite \nLOGO_PATH\n in \nseahub_settings.py\n\n\n\n\npython\n   LOGO_PATH = 'custom/mylogo.png'\n\n\n\n\nDefault width and height for logo is 149px and 32px, you may need to change that according to yours.\n\n\n\n\npython\n   LOGO_WIDTH = 149\n   LOGO_HEIGHT = 32\n\n\nCustomize Seahub CSS\n\n\n\n\nAdd your css file to \ncustom/\n, for example, \ncustom.css\n\n\nOverwrite \nBRANDING_CSS\n in \nseahub_settings.py\n\n\n\n\npython\n   BRANDING_CSS = 'custom/custom.css'\n\n\nCustomize footer and other Seahub Pages\n\n\nNote:\n Since version 2.1.\n\n\nCreate a folder \ntemplates\n under \nseafile-install-path\n/seahub-data/custom\n\n\nCustomize footer\n\n\n\n\nCopy \nseahub/seahub/templates/footer.html\n to \nseahub-data/custom/templates\n.\n\n\nModify \nfooter.html\n.\n\n\n\n\nCustomize Download page\n\n\n\n\nCopy \nseahub/seahub/templates/download.html\n to \nseahub-data/custom/templates\n.\n\n\nModify \ndownload.html\n.\n\n\n\n\nCustomize Help page\n\n\n\n\nCopy \nseahub/seahub/help/templates/help\n to \nseahub-data/custom/templates/help\n.\n\n\nModify pages under \nhelp\n.", 
            "title": "Seahub customization"
        }, 
        {
            "location": "/config/seahub_customization/#seahub-customization", 
            "text": "", 
            "title": "Seahub customization"
        }, 
        {
            "location": "/config/seahub_customization/#customize-seahub-logo-and-css", 
            "text": "Create a folder  seafile-install-path /seahub-data/custom . Create a symbolic link in  seafile-server-latest/seahub/media  by  ln -s ../../../seahub-data/custom custom .  During upgrading, Seafile upgrade script will create symbolic link automatically to preserve your customization.", 
            "title": "Customize Seahub Logo and CSS"
        }, 
        {
            "location": "/config/seahub_customization/#customize-logo", 
            "text": "Add your logo file to  custom/  Overwrite  LOGO_PATH  in  seahub_settings.py   python\n   LOGO_PATH = 'custom/mylogo.png'   Default width and height for logo is 149px and 32px, you may need to change that according to yours.   python\n   LOGO_WIDTH = 149\n   LOGO_HEIGHT = 32", 
            "title": "Customize Logo"
        }, 
        {
            "location": "/config/seahub_customization/#customize-seahub-css", 
            "text": "Add your css file to  custom/ , for example,  custom.css  Overwrite  BRANDING_CSS  in  seahub_settings.py   python\n   BRANDING_CSS = 'custom/custom.css'", 
            "title": "Customize Seahub CSS"
        }, 
        {
            "location": "/config/seahub_customization/#customize-footer-and-other-seahub-pages", 
            "text": "Note:  Since version 2.1.  Create a folder  templates  under  seafile-install-path /seahub-data/custom", 
            "title": "Customize footer and other Seahub Pages"
        }, 
        {
            "location": "/config/seahub_customization/#customize-footer", 
            "text": "Copy  seahub/seahub/templates/footer.html  to  seahub-data/custom/templates .  Modify  footer.html .", 
            "title": "Customize footer"
        }, 
        {
            "location": "/config/seahub_customization/#customize-download-page", 
            "text": "Copy  seahub/seahub/templates/download.html  to  seahub-data/custom/templates .  Modify  download.html .", 
            "title": "Customize Download page"
        }, 
        {
            "location": "/config/seahub_customization/#customize-help-page", 
            "text": "Copy  seahub/seahub/help/templates/help  to  seahub-data/custom/templates/help .  Modify pages under  help .", 
            "title": "Customize Help page"
        }, 
        {
            "location": "/config/desktop_customization/", 
            "text": "Seafile Desktop customization\n\n\nCustomize the logo and name displayed on seafile desktop clients (Seafile Professional Only)\n\n\nNote: The feature is only available in seafile desktop client 4.4.0 and later.\n\n\nBy default, the text \"Seafile\" is displayed in the top of seafile desktop client window, along side with the seafile logo. To customize them, set \nDESKTOP_CUSTOM_LOGO\n and \nDESKTOP_CUSTOM_BRAND\n in \nseahub_settings.py\n.\n\n\n\n\nThe size of the image must be \n24x24\n, and generally you should put it in the \ncustom\n folder.\n\n\nDESKTOP_CUSTOM_LOGO = 'custom/desktop-custom-logo.png'\nDESKTOP_CUSTOM_BRAND = 'Seafile For My Company'\n\n\n\n\nAuto Install Seafile Client on All Windows PCs\n\n\nYou can setup a group policy object (GPO) in your Windows Domain Controller to auto install seafile client on all Windows PCs in your company network. The Seafile client is provided as an MSI installer. So you just need to following the instructioin on \nMicrosoft's documentation\n to auto install the client.\n\n\nPreconfigure Seafile Client for All Windows PCs\n\n\nSome behavior of the Seafile client can be configured via registry entries on Windows. So it's possible to control the client's behavior in a centralized way, via group policy objects (GPO).\n\n\nThe registry entries used to configure Seafile client are described in \nthis documentation\n. To setup GPO to set these registry entries on Windows, please refer to \nMicrosoft's documentation\n.", 
            "title": "Desktop client customization"
        }, 
        {
            "location": "/config/desktop_customization/#seafile-desktop-customization", 
            "text": "", 
            "title": "Seafile Desktop customization"
        }, 
        {
            "location": "/config/desktop_customization/#customize-the-logo-and-name-displayed-on-seafile-desktop-clients-seafile-professional-only", 
            "text": "Note: The feature is only available in seafile desktop client 4.4.0 and later.  By default, the text \"Seafile\" is displayed in the top of seafile desktop client window, along side with the seafile logo. To customize them, set  DESKTOP_CUSTOM_LOGO  and  DESKTOP_CUSTOM_BRAND  in  seahub_settings.py .   The size of the image must be  24x24 , and generally you should put it in the  custom  folder.  DESKTOP_CUSTOM_LOGO = 'custom/desktop-custom-logo.png'\nDESKTOP_CUSTOM_BRAND = 'Seafile For My Company'", 
            "title": "Customize the logo and name displayed on seafile desktop clients (Seafile Professional Only)"
        }, 
        {
            "location": "/config/desktop_customization/#auto-install-seafile-client-on-all-windows-pcs", 
            "text": "You can setup a group policy object (GPO) in your Windows Domain Controller to auto install seafile client on all Windows PCs in your company network. The Seafile client is provided as an MSI installer. So you just need to following the instructioin on  Microsoft's documentation  to auto install the client.", 
            "title": "Auto Install Seafile Client on All Windows PCs"
        }, 
        {
            "location": "/config/desktop_customization/#preconfigure-seafile-client-for-all-windows-pcs", 
            "text": "Some behavior of the Seafile client can be configured via registry entries on Windows. So it's possible to control the client's behavior in a centralized way, via group policy objects (GPO).  The registry entries used to configure Seafile client are described in  this documentation . To setup GPO to set these registry entries on Windows, please refer to  Microsoft's documentation .", 
            "title": "Preconfigure Seafile Client for All Windows PCs"
        }, 
        {
            "location": "/config/sending_email/", 
            "text": "Sending Email Notifications on Seahub\n\n\nTypes of email sending in Seafile\n\n\nThere are currently five types of Emails sent in Seafile:\n\n\n\n\nUser reset his/her password\n\n\nSystem admin add new member\n\n\nSystem admin reset user password\n\n\nUser send file/folder share link and upload link\n\n\n[pro] Reminder of unread notifications (It is sent by a background task which is pro edition only)\n\n\n\n\nThe first four types of Email are sent immediately. The last type is sent by a background task running periodically.\n\n\nOptions of email sending\n\n\nPlease add the following lines to seahub_settings.py to enable Email sending.\n\n\n\nEMAIL_USE_TLS = False\nEMAIL_HOST = 'smtp.example.com'        # smpt server\nEMAIL_HOST_USER = 'username@example.com'    # username and domain\nEMAIL_HOST_PASSWORD = 'password'    # password\nEMAIL_PORT = 25\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER\n\n\n\n\nIf you are using Gmail as email server, use following lines:\n\n\n\nEMAIL_USE_TLS = True\nEMAIL_HOST = 'smtp.gmail.com'\nEMAIL_HOST_USER = 'username@gmail.com'\nEMAIL_HOST_PASSWORD = 'password'\nEMAIL_PORT = 587\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER\n\n\n\n\nNote\n: If your Email service still can not work, you may checkout the log file \nlogs/seahub.log\n to see what may cause the problem. For complete email notification list, please refer to \nEmail notification list\n.\n\n\nNote2\n: If you want to use the Email service without authentication leaf \nEMAIL_HOST_USER\n and \nEMAIL_HOST_PASSWORD\n \nblank\n (\n''\n). (But notice that the emails then will be sent without a \nFrom:\n address.)\n\n\nNote3\n: About using SSL connection (using port 465)\n\n\nPort 587 is for using TLS connection to the Email server. Port 465 is for using SSL connection.  Starting from Django 1.8, it support both. But we are still using Django 1.5 in version 5.0, which only support  TLS connection. If your email server only support SSL connection, you can find a work around here: https://github.com/bancek/django-smtp-ssl.\n\n\nChange the \nsender\n and \nreply to\n of email\n\n\nYou can change the sender and reply to field of email by add the following settings to seahub_settings.py. This only affects email sending for file share link.\n\n\n\n# Replace default from email with user's email or not, defaults to ``False``\nREPLACE_FROM_EMAIL = True\n\n# Set reply-to header to user's email or not, defaults to ``False``. For details,\n# please refer to http://www.w3.org/Protocols/rfc822/\nADD_REPLY_TO_HEADER = True\n\n\n\n\nConfig background email sending task (Pro Edition Only)\n\n\nThe background task will run periodically to check whether an user have new unread notifications. If there are any, it will send a reminder email to that user. The background email sending task is controlled by \nseafevents.conf\n.\n\n\n[SEAHUB EMAIL]\n\n## must be \ntrue\n to enable user email notifications when there are new unread notifications\nenabled = true\n\n## interval of sending seahub email. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval = 30m\n\n\n\n\nCustomize Email messages\n\n\nThe simplest way to customize the Email message is setting the \nSITE_NAME\n variable in seahub_settings.py. If it is not enough for your case, you can customize the Email templates.\n\n\nNote:\n Subject line may vary between different releases, this is based on Release 5.0.0. Restart Seahub so that your changes take effect.\n\n\nThe Email base template\n\n\nseahub/seahub/templates/email_base.html\n\n\nNote: You can copy email_base.html to \nseahub-data/custom/templates/email_base.html\n and modify the new one. In this way, the customization will be maintained after upgrade.\n\n\nUser reset his/her password\n\n\nSubject\n\n\nseahub/seahub/auth/forms.py line:127\n\n\n        send_html_email(_(\nReset Password on %s\n) % site_name,\n                  email_template_name, c, None, [user.username])\n\n\n\n\nBody\n\n\nseahub/seahub/templates/registration/password_reset_email.html\n\n\nNote: You can copy password_reset_email.html to \nseahub-data/custom/templates/registration/password_reset_email.html\n and modify the new one. In this way, the customization will be maintained after upgrade.\n\n\nSystem admin add new member\n\n\nSubject\n\n\nseahub/seahub/views/sysadmin.py line:424\n\n\nsend_html_email(_(u'Password has been reset on %s') % SITE_NAME,\n            'sysadmin/user_reset_email.html', c, None, [email])\n\n\n\n\nBody\n\n\nseahub/seahub/templates/sysadmin/user_add_email.html\n\n\nNote: You can copy user_add_email.html to \nseahub-data/custom/templates/sysadmin/user_add_email.html\n and modify the new one. In this way, the customization will be maintained after upgrade.\n\n\nSystem admin reset user password\n\n\nSubject\n\n\nseahub/seahub/views/sysadmin.py line:1224\n\n\nsend_html_email(_(u'Password has been reset on %s') % SITE_NAME,\n            'sysadmin/user_reset_email.html', c, None, [email])\n\n\n\n\nBody\n\n\nseahub/seahub/templates/sysadmin/user_reset_email.html\n\n\nNote: You can copy user_reset_email.html to \nseahub-data/custom/templates/sysadmin/user_reset_email.html\n and modify the new one. In this way, the customization will be maintained after upgrade.\n\n\nUser send file/folder share link\n\n\nSubject\n\n\nseahub/seahub/share/views.py line:913\n\n\ntry:\n    if file_shared_type == 'f':\n        c['file_shared_type'] = _(u\nfile\n)\n        send_html_email(_(u'A file is shared to you on %s') % SITE_NAME,\n                        'shared_link_email.html',\n                        c, from_email, [to_email],\n                        reply_to=reply_to\n                        )\n    else:\n        c['file_shared_type'] = _(u\ndirectory\n)\n        send_html_email(_(u'A directory is shared to you on %s') % SITE_NAME,\n                        'shared_link_email.html',\n                        c, from_email, [to_email],\n                        reply_to=reply_to)\n\n\n\n\nBody\n\n\nseahub/seahub/templates/shared_link_email.html\n\n\nseahub/seahub/templates/shared_upload_link_email.html\n\n\nNote: You can copy shared_link_email.html to \nseahub-data/custom/templates/shared_link_email.html\n and modify the new one. In this way, the customization will be maintained after upgrade.\n\n\nReminder of unread notifications\n\n\nSubject\n\n\nsend_html_email(_('New notice on %s') % settings.SITE_NAME,\n                                'notifications/notice_email.html', c,\n                                None, [to_user])\n\n\n\n\nBody\n\n\nseahub/seahub/notifications/templates/notifications/notice_email.html", 
            "title": "Email Sending"
        }, 
        {
            "location": "/config/sending_email/#sending-email-notifications-on-seahub", 
            "text": "", 
            "title": "Sending Email Notifications on Seahub"
        }, 
        {
            "location": "/config/sending_email/#types-of-email-sending-in-seafile", 
            "text": "There are currently five types of Emails sent in Seafile:   User reset his/her password  System admin add new member  System admin reset user password  User send file/folder share link and upload link  [pro] Reminder of unread notifications (It is sent by a background task which is pro edition only)   The first four types of Email are sent immediately. The last type is sent by a background task running periodically.", 
            "title": "Types of email sending in Seafile"
        }, 
        {
            "location": "/config/sending_email/#options-of-email-sending", 
            "text": "Please add the following lines to seahub_settings.py to enable Email sending.  \nEMAIL_USE_TLS = False\nEMAIL_HOST = 'smtp.example.com'        # smpt server\nEMAIL_HOST_USER = 'username@example.com'    # username and domain\nEMAIL_HOST_PASSWORD = 'password'    # password\nEMAIL_PORT = 25\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER  If you are using Gmail as email server, use following lines:  \nEMAIL_USE_TLS = True\nEMAIL_HOST = 'smtp.gmail.com'\nEMAIL_HOST_USER = 'username@gmail.com'\nEMAIL_HOST_PASSWORD = 'password'\nEMAIL_PORT = 587\nDEFAULT_FROM_EMAIL = EMAIL_HOST_USER\nSERVER_EMAIL = EMAIL_HOST_USER  Note : If your Email service still can not work, you may checkout the log file  logs/seahub.log  to see what may cause the problem. For complete email notification list, please refer to  Email notification list .  Note2 : If you want to use the Email service without authentication leaf  EMAIL_HOST_USER  and  EMAIL_HOST_PASSWORD   blank  ( '' ). (But notice that the emails then will be sent without a  From:  address.)  Note3 : About using SSL connection (using port 465)  Port 587 is for using TLS connection to the Email server. Port 465 is for using SSL connection.  Starting from Django 1.8, it support both. But we are still using Django 1.5 in version 5.0, which only support  TLS connection. If your email server only support SSL connection, you can find a work around here: https://github.com/bancek/django-smtp-ssl.", 
            "title": "Options of email sending"
        }, 
        {
            "location": "/config/sending_email/#change-the-sender-and-reply-to-of-email", 
            "text": "You can change the sender and reply to field of email by add the following settings to seahub_settings.py. This only affects email sending for file share link.  \n# Replace default from email with user's email or not, defaults to ``False``\nREPLACE_FROM_EMAIL = True\n\n# Set reply-to header to user's email or not, defaults to ``False``. For details,\n# please refer to http://www.w3.org/Protocols/rfc822/\nADD_REPLY_TO_HEADER = True", 
            "title": "Change the sender and reply to of email"
        }, 
        {
            "location": "/config/sending_email/#config-background-email-sending-task-pro-edition-only", 
            "text": "The background task will run periodically to check whether an user have new unread notifications. If there are any, it will send a reminder email to that user. The background email sending task is controlled by  seafevents.conf .  [SEAHUB EMAIL]\n\n## must be  true  to enable user email notifications when there are new unread notifications\nenabled = true\n\n## interval of sending seahub email. Can be s(seconds), m(minutes), h(hours), d(days)\ninterval = 30m", 
            "title": "Config background email sending task (Pro Edition Only)"
        }, 
        {
            "location": "/config/sending_email/#customize-email-messages", 
            "text": "The simplest way to customize the Email message is setting the  SITE_NAME  variable in seahub_settings.py. If it is not enough for your case, you can customize the Email templates.  Note:  Subject line may vary between different releases, this is based on Release 5.0.0. Restart Seahub so that your changes take effect.", 
            "title": "Customize Email messages"
        }, 
        {
            "location": "/config/sending_email/#the-email-base-template", 
            "text": "seahub/seahub/templates/email_base.html  Note: You can copy email_base.html to  seahub-data/custom/templates/email_base.html  and modify the new one. In this way, the customization will be maintained after upgrade.", 
            "title": "The Email base template"
        }, 
        {
            "location": "/config/sending_email/#user-reset-hisher-password", 
            "text": "Subject  seahub/seahub/auth/forms.py line:127          send_html_email(_( Reset Password on %s ) % site_name,\n                  email_template_name, c, None, [user.username])  Body  seahub/seahub/templates/registration/password_reset_email.html  Note: You can copy password_reset_email.html to  seahub-data/custom/templates/registration/password_reset_email.html  and modify the new one. In this way, the customization will be maintained after upgrade.", 
            "title": "User reset his/her password"
        }, 
        {
            "location": "/config/sending_email/#system-admin-add-new-member", 
            "text": "Subject  seahub/seahub/views/sysadmin.py line:424  send_html_email(_(u'Password has been reset on %s') % SITE_NAME,\n            'sysadmin/user_reset_email.html', c, None, [email])  Body  seahub/seahub/templates/sysadmin/user_add_email.html  Note: You can copy user_add_email.html to  seahub-data/custom/templates/sysadmin/user_add_email.html  and modify the new one. In this way, the customization will be maintained after upgrade.", 
            "title": "System admin add new member"
        }, 
        {
            "location": "/config/sending_email/#system-admin-reset-user-password", 
            "text": "Subject  seahub/seahub/views/sysadmin.py line:1224  send_html_email(_(u'Password has been reset on %s') % SITE_NAME,\n            'sysadmin/user_reset_email.html', c, None, [email])  Body  seahub/seahub/templates/sysadmin/user_reset_email.html  Note: You can copy user_reset_email.html to  seahub-data/custom/templates/sysadmin/user_reset_email.html  and modify the new one. In this way, the customization will be maintained after upgrade.", 
            "title": "System admin reset user password"
        }, 
        {
            "location": "/config/sending_email/#user-send-filefolder-share-link", 
            "text": "Subject  seahub/seahub/share/views.py line:913  try:\n    if file_shared_type == 'f':\n        c['file_shared_type'] = _(u file )\n        send_html_email(_(u'A file is shared to you on %s') % SITE_NAME,\n                        'shared_link_email.html',\n                        c, from_email, [to_email],\n                        reply_to=reply_to\n                        )\n    else:\n        c['file_shared_type'] = _(u directory )\n        send_html_email(_(u'A directory is shared to you on %s') % SITE_NAME,\n                        'shared_link_email.html',\n                        c, from_email, [to_email],\n                        reply_to=reply_to)  Body  seahub/seahub/templates/shared_link_email.html  seahub/seahub/templates/shared_upload_link_email.html  Note: You can copy shared_link_email.html to  seahub-data/custom/templates/shared_link_email.html  and modify the new one. In this way, the customization will be maintained after upgrade.", 
            "title": "User send file/folder share link"
        }, 
        {
            "location": "/config/sending_email/#reminder-of-unread-notifications", 
            "text": "Subject  send_html_email(_('New notice on %s') % settings.SITE_NAME,\n                                'notifications/notice_email.html', c,\n                                None, [to_user])  Body  seahub/seahub/notifications/templates/notifications/notice_email.html", 
            "title": "Reminder of unread notifications"
        }, 
        {
            "location": "/config/user_options/", 
            "text": "Customize user management\n\n\nOptions for user management\n\n\nHere we summarize options related to user management in \nseahub_settings.py\n\n\n\n# Enalbe or disalbe registration on web. Default is `False`.\nENABLE_SIGNUP = False\n\n# Activate or deactivate user when registration complete. Default is `True`.\n# If set to `False`, new users need to be activated by admin in admin panel.\nACTIVATE_AFTER_REGISTRATION = False\n\n# Whether to send email when a system admin adding a new member. Default is `True`.\n# NOTE: since version 1.4.\nSEND_EMAIL_ON_ADDING_SYSTEM_MEMBER = True\n\n# Attempt limit before showing a captcha when login.\nLOGIN_ATTEMPT_LIMIT = 3\n\n# Whether a user's session cookie expires when the Web browser is closed.\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False", 
            "title": "User management options"
        }, 
        {
            "location": "/config/user_options/#customize-user-management", 
            "text": "", 
            "title": "Customize user management"
        }, 
        {
            "location": "/config/user_options/#options-for-user-management", 
            "text": "Here we summarize options related to user management in  seahub_settings.py  \n# Enalbe or disalbe registration on web. Default is `False`.\nENABLE_SIGNUP = False\n\n# Activate or deactivate user when registration complete. Default is `True`.\n# If set to `False`, new users need to be activated by admin in admin panel.\nACTIVATE_AFTER_REGISTRATION = False\n\n# Whether to send email when a system admin adding a new member. Default is `True`.\n# NOTE: since version 1.4.\nSEND_EMAIL_ON_ADDING_SYSTEM_MEMBER = True\n\n# Attempt limit before showing a captcha when login.\nLOGIN_ATTEMPT_LIMIT = 3\n\n# Whether a user's session cookie expires when the Web browser is closed.\nSESSION_EXPIRE_AT_BROWSER_CLOSE = False", 
            "title": "Options for user management"
        }, 
        {
            "location": "/config/quota_and_size_options/", 
            "text": "Quota and other options\n\n\nNote\n: Since Seafile Server 5.0.0, all config files are moved to the central \nconf\n folder. \nRead More\n.\n\n\nQuota\n\n\nYou may set a default quota (e.g. 2GB) for all users. To do this, just add the following lines to \nseafile.conf\n file\n\n\n\n[quota]\n# default user quota in GB, integer only\ndefault = 2\n\n\n\n\nAfter Community Edition 5.0.5, you can also set the default quota in KB, MB, GB or TB. For example,\n\n\n[quota]\ndefault = 200MB\n\n\n\n\nNote that 1TB = 1000GB = 1000*1000MB and so forth.\n\n\nThis setting applies to all users. If you want to set quota for a specific user, you may log in to seahub website as administrator, then set it in \"System Admin\" page.\n\n\nDefault history length limit (seafile.conf)\n\n\nIf you don't want to keep all file revision history, you may set a default history length limit for all libraries. In \nseafile.conf\n:\n\n\n\n[history]\nkeep_days = days of history to keep\n\n\n\n\nChange upload/download size limit.\n\n\nIn \nseafile.conf\n:\n\n\n\n[fileserver]\n# Set maximum upload file size to 200M.\nmax_upload_size=200\n\n# Set maximum download directory size to 200M.\nmax_download_dir_size=200", 
            "title": "Storage Quota and File size limits"
        }, 
        {
            "location": "/config/quota_and_size_options/#quota-and-other-options", 
            "text": "Note : Since Seafile Server 5.0.0, all config files are moved to the central  conf  folder.  Read More .", 
            "title": "Quota and other options"
        }, 
        {
            "location": "/config/quota_and_size_options/#quota", 
            "text": "You may set a default quota (e.g. 2GB) for all users. To do this, just add the following lines to  seafile.conf  file  \n[quota]\n# default user quota in GB, integer only\ndefault = 2  After Community Edition 5.0.5, you can also set the default quota in KB, MB, GB or TB. For example,  [quota]\ndefault = 200MB  Note that 1TB = 1000GB = 1000*1000MB and so forth.  This setting applies to all users. If you want to set quota for a specific user, you may log in to seahub website as administrator, then set it in \"System Admin\" page.", 
            "title": "Quota"
        }, 
        {
            "location": "/config/quota_and_size_options/#default-history-length-limit-seafileconf", 
            "text": "If you don't want to keep all file revision history, you may set a default history length limit for all libraries. In  seafile.conf :  \n[history]\nkeep_days = days of history to keep", 
            "title": "Default history length limit (seafile.conf)"
        }, 
        {
            "location": "/config/quota_and_size_options/#change-uploaddownload-size-limit", 
            "text": "In  seafile.conf :  \n[fileserver]\n# Set maximum upload file size to 200M.\nmax_upload_size=200\n\n# Set maximum download directory size to 200M.\nmax_download_dir_size=200", 
            "title": "Change upload/download size limit."
        }, 
        {
            "location": "/maintain/README/", 
            "text": "Administration\n\n\nEnter the admin panel\n\n\nAs the system admin, you can enter the admin panel by click the \ntools\n button at the top-right, beside the avatar:\n\n\n\n\nAfter clicking the button, you will get into the admin panel:\n\n\n\n\nAccount management\n\n\n\n\nAccount management\n\n\n\n\nLogs\n\n\n\n\nThe location of log files\n\n\n\n\nBackup and Recovery\n\n\nBackup and recovery:\n\n\n\n\nBackup and recovery\n\n\n\n\nRecover corrupt files after server hard shutdown or system crash:\n\n\n\n\nSeafile FSCK\n\n\n\n\nYou can run Seafile GC to remove unused files:\n\n\n\n\nSeafile GC\n\n\n\n\nClean database\n\n\n\n\nClean database", 
            "title": "README"
        }, 
        {
            "location": "/maintain/README/#administration", 
            "text": "", 
            "title": "Administration"
        }, 
        {
            "location": "/maintain/README/#enter-the-admin-panel", 
            "text": "As the system admin, you can enter the admin panel by click the  tools  button at the top-right, beside the avatar:   After clicking the button, you will get into the admin panel:", 
            "title": "Enter the admin panel"
        }, 
        {
            "location": "/maintain/README/#account-management", 
            "text": "Account management", 
            "title": "Account management"
        }, 
        {
            "location": "/maintain/README/#logs", 
            "text": "The location of log files", 
            "title": "Logs"
        }, 
        {
            "location": "/maintain/README/#backup-and-recovery", 
            "text": "Backup and recovery:   Backup and recovery   Recover corrupt files after server hard shutdown or system crash:   Seafile FSCK   You can run Seafile GC to remove unused files:   Seafile GC", 
            "title": "Backup and Recovery"
        }, 
        {
            "location": "/maintain/README/#clean-database", 
            "text": "Clean database", 
            "title": "Clean database"
        }, 
        {
            "location": "/maintain/account/", 
            "text": "Account Management\n\n\nUser Management\n\n\nWhen you setup seahub website, you should have setup a admin account. After you logged in a admin, you may add/delete users and file libraries.\n\n\nResetting User Password\n\n\nAdministrator can reset password for a user in \"System Admin\" page.\n\n\nIn a private server, the default settings doesn't support users to reset their password by email. If you want to enable this, you have first to \nset up notification email\n.\n\n\nForgot Admin Account or Password?\n\n\nYou may run \nreset-admin.sh\n script under seafile-server directory. This script would help you reset the admin account and password.", 
            "title": "Account management"
        }, 
        {
            "location": "/maintain/account/#account-management", 
            "text": "", 
            "title": "Account Management"
        }, 
        {
            "location": "/maintain/account/#user-management", 
            "text": "When you setup seahub website, you should have setup a admin account. After you logged in a admin, you may add/delete users and file libraries.", 
            "title": "User Management"
        }, 
        {
            "location": "/maintain/account/#resetting-user-password", 
            "text": "Administrator can reset password for a user in \"System Admin\" page.  In a private server, the default settings doesn't support users to reset their password by email. If you want to enable this, you have first to  set up notification email .", 
            "title": "Resetting User Password"
        }, 
        {
            "location": "/maintain/account/#forgot-admin-account-or-password", 
            "text": "You may run  reset-admin.sh  script under seafile-server directory. This script would help you reset the admin account and password.", 
            "title": "Forgot Admin Account or Password?"
        }, 
        {
            "location": "/maintain/logs/", 
            "text": "Logs\n\n\nLog files of seafile server:\n\n\n\n\nseafile.log: logs of Seafile server\n\n\ncontroller.log: logs of Controller\n\n\nseahub_django_request.log: logs of Seahub\n\n\nseahub.log: logs from Django framework and emails sending\n\n\nCcnet Log: logs/ccnet.log  (logs for internal RPC, not useful)\n\n\n\n\npro edition only:\n\n\n\n\nseafevents.log: logs for background tasks and office file convertion\n\n\nseahub_email_sender.log: logs for periodically email sending of background tasks\n\n\n\n\nLog files for seafile background node in cluster mode:\n\n\n\n\nseafile.log: logs of Seafile server\n\n\ncontroller.log: logs of Controller\n\n\nseahub_django_request.log: logs of Seahub\n\n\nseahub.log: logs from Django framework and emails sending\n\n\nseafevents.log: Empty\n\n\nseafile-background-tasks.log: logs for background tasks and office file convertion\n\n\nseahub_email_sender.log: logs for periodically email sending of background tasks\n\n\nCcnet Log: logs/ccnet.log  (logs for internal RPC, not useful)", 
            "title": "Logs"
        }, 
        {
            "location": "/maintain/logs/#logs", 
            "text": "", 
            "title": "Logs"
        }, 
        {
            "location": "/maintain/logs/#log-files-of-seafile-server", 
            "text": "seafile.log: logs of Seafile server  controller.log: logs of Controller  seahub_django_request.log: logs of Seahub  seahub.log: logs from Django framework and emails sending  Ccnet Log: logs/ccnet.log  (logs for internal RPC, not useful)   pro edition only:   seafevents.log: logs for background tasks and office file convertion  seahub_email_sender.log: logs for periodically email sending of background tasks", 
            "title": "Log files of seafile server:"
        }, 
        {
            "location": "/maintain/logs/#log-files-for-seafile-background-node-in-cluster-mode", 
            "text": "seafile.log: logs of Seafile server  controller.log: logs of Controller  seahub_django_request.log: logs of Seahub  seahub.log: logs from Django framework and emails sending  seafevents.log: Empty  seafile-background-tasks.log: logs for background tasks and office file convertion  seahub_email_sender.log: logs for periodically email sending of background tasks  Ccnet Log: logs/ccnet.log  (logs for internal RPC, not useful)", 
            "title": "Log files for seafile background node in cluster mode:"
        }, 
        {
            "location": "/maintain/backup_recovery/", 
            "text": "Overview\n\n\nThere are generally two parts of data to backup\n\n\n\n\nSeafile library data\n\n\nDatabases\n\n\n\n\nIf you setup seafile server according to our manual, you should have a directory layout like:\n\n\nhaiwen       # Replace the name with your organization name\n  --seafile-server-2.x.x # untar from seafile package\n  --seafile-data   # seafile configuration and data (if you choose the default)\n  --seahub-data    # seahub data\n  --ccnet          # ccnet configuration and data \n  --seahub.db      # sqlite3 database used by seahub\n  --seahub_settings.py # optional config file for seahub\n\n\n\nAll your library data is stored under the 'haiwen' directory.\n\n\nSeafile also stores some important metadata data in a few databases. The names and locations of these databases depends on which database software you use.\n\n\nFor SQLite, the database files are also under the 'haiwen' directory. The locations are:\n\n\n\n\nccnet/PeerMgr/usermgr.db: contains user information\n\n\nccnet/GroupMgr/groupmgr.db: contains group information\n\n\nseafile-data/seafile.db: contains library metadata\n\n\nseahub.db: contains tables used by the web front end (seahub)\n\n\n\n\nFor MySQL, the databases are created by the administrator, so the names can be different from one deployment to another. There are 3 databases:\n\n\n\n\nccnet-db: contains user and group information\n\n\nseafile-db: contains library metadata\n\n\nseahub.db: contains tables used by the web front end (seahub)\n\n\n\n\nBackup steps\n\n\nThe backup is a three step procedure:\n\n\n\n\nOptional: Stop Seafile server first if you're using SQLite as database.\n\n\nBackup the databases;\n\n\nBackup the seafile data directory;\n\n\n\n\nBackup Order: Database First or Data Directory First\n\n\n\n\nbackup data directory first, SQL later: When you're backing up data directory, some new objects are written and they're not backed up. Those new objects may be referenced in SQL database. So when you restore, some records in the database cannot find its object. So the library is corrupted.\n\n\nbackup SQL first, data directory later: Since you backup database first, all records in the database have valid objects to be referenced. So the libraries won't be corrupted. But new objects written to storage when you're backing up are not referenced by database records. So some libraries are out of date. When you restore, some new data are lost.\n\n\n\n\nThe second sequence is better in the sense that it avoids library corruption. Like other backup solutions, some new data can be lost in recovery. There is always a backup window.\nHowever, if your storage backup mechanism can finish quickly enough, using the first sequence can retain more data.\n\n\nWe assume your seafile data directory is in \n/data/haiwen\n. And you want to backup to \n/backup\n directory. The \n/backup\n can be an NFS or Windows share mount exported by another machine, or just an external disk. You can create a layout similar to the following in \n/backup\n directory:\n\n\n/backup\n---- databases/  contains database backup files\n---- data/  contains backups of the data directory\n\n\n\nBacking up Databases\n\n\nIt's recommended to backup the database to a separate file each time. Don't overwrite older database backups for at least a week.\n\n\nMySQL\n\n\nAssume your database names are \nccnet-db\n, \nseafile-db\n and \nseahub-db\n. mysqldump automatically locks the tables so you don't need to stop Seafile server when backing up MySQL databases. Since the database tables are usually very small, it won't take long to dump.\n\n\nmysqldump -h [mysqlhost] -u[username] -p[password] --opt ccnet-db \n /backup/databases/ccnet-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nmysqldump -h [mysqlhost] -u[username] -p[password] --opt seafile-db \n /backup/databases/seafile-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nmysqldump -h [mysqlhost] -u[username] -p[password] --opt seahub-db \n /backup/databases/seahub-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\n\n\nSQLite\n\n\nYou need to stop Seafile server first before backing up SQLite database.\n\n\nsqlite3 /data/haiwen/ccnet/GroupMgr/groupmgr.db .dump \n /backup/databases/groupmgr.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/ccnet/PeerMgr/usermgr.db .dump \n /backup/databases/usermgr.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/seafile-data/seafile.db .dump \n /backup/databases/seafile.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/seahub.db .dump \n /backup/databases/seahub.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\n\n\nBacking up Seafile library data\n\n\nThe data files are all stored in the \n/data/haiwen\n directory, so just back up the whole directory. You can directly copy the whole directory to the backup destination, or you can use rsync to do incremental backup. \n\n\nTo directly copy the whole data directory,\n\n\ncp -R /data/haiwen /backup/data/haiwen-`date +\"%Y-%m-%d-%H-%M-%S\"`\n\n\n\nThis produces a separate copy of the data directory each time. You can delete older backup copies after a new one is completed.\n\n\nIf you have a lot of data, copying the whole data directory would take long. You can use rsync to do incremental backup.\n\n\nrsync -az /data/haiwen /backup/data\n\n\n\nThis command backup the data directory to \n/backup/data/haiwen\n.\n\n\nRestore from backup\n\n\nNow supposed your primary seafile server is broken, you're switching to a new machine. Using the backup data to restore your Seafile instance:\n\n\n\n\nCopy \n/backup/data/haiwen\n to the new machine. Let's assume the seafile deployment location new machine is also \n/data/haiwen\n.\n\n\nRestore the database.\n\n\nSince database and data are backed up separately, they may become a little inconsistent with each other. To correct the potential inconsistency, run seaf-fsck tool to check data integrity on the new machine. See \nseaf-fsck documentation\n.\n\n\n\n\nRestore the databases\n\n\nNow with the latest valid database backup files at hand, you can restore them.\n\n\nMySQL\n\n\nmysql -u[username] -p[password] ccnet-db \n ccnet-db.sql.2013-10-19-16-00-05\nmysql -u[username] -p[password] seafile-db \n seafile-db.sql.2013-10-19-16-00-20\nmysql -u[username] -p[password] seahub-db \n seahub-db.sql.2013-10-19-16-01-05\n\n\n\nSQLite\n\n\ncd /data/haiwen\nmv ccnet/PeerMgr/usermgr.db ccnet/PeerMgr/usermgr.db.old\nmv ccnet/GroupMgr/groupmgr.db ccnet/GroupMgr/groupmgr.db.old\nmv seafile-data/seafile.db seafile-data/seafile.db.old\nmv seahub.db seahub.db.old\nsqlite3 ccnet/PeerMgr/usermgr.db \n usermgr.db.bak.xxxx\nsqlite3 ccnet/GroupMgr/groupmgr.db \n groupmgr.db.bak.xxxx\nsqlite3 seafile-data/seafile.db \n seafile.db.bak.xxxx\nsqlite3 seahub.db \n seahub.db.bak.xxxx", 
            "title": "Backup and Recovery"
        }, 
        {
            "location": "/maintain/backup_recovery/#overview", 
            "text": "There are generally two parts of data to backup   Seafile library data  Databases   If you setup seafile server according to our manual, you should have a directory layout like:  haiwen       # Replace the name with your organization name\n  --seafile-server-2.x.x # untar from seafile package\n  --seafile-data   # seafile configuration and data (if you choose the default)\n  --seahub-data    # seahub data\n  --ccnet          # ccnet configuration and data \n  --seahub.db      # sqlite3 database used by seahub\n  --seahub_settings.py # optional config file for seahub  All your library data is stored under the 'haiwen' directory.  Seafile also stores some important metadata data in a few databases. The names and locations of these databases depends on which database software you use.  For SQLite, the database files are also under the 'haiwen' directory. The locations are:   ccnet/PeerMgr/usermgr.db: contains user information  ccnet/GroupMgr/groupmgr.db: contains group information  seafile-data/seafile.db: contains library metadata  seahub.db: contains tables used by the web front end (seahub)   For MySQL, the databases are created by the administrator, so the names can be different from one deployment to another. There are 3 databases:   ccnet-db: contains user and group information  seafile-db: contains library metadata  seahub.db: contains tables used by the web front end (seahub)", 
            "title": "Overview"
        }, 
        {
            "location": "/maintain/backup_recovery/#backup-steps", 
            "text": "The backup is a three step procedure:   Optional: Stop Seafile server first if you're using SQLite as database.  Backup the databases;  Backup the seafile data directory;", 
            "title": "Backup steps"
        }, 
        {
            "location": "/maintain/backup_recovery/#backup-order-database-first-or-data-directory-first", 
            "text": "backup data directory first, SQL later: When you're backing up data directory, some new objects are written and they're not backed up. Those new objects may be referenced in SQL database. So when you restore, some records in the database cannot find its object. So the library is corrupted.  backup SQL first, data directory later: Since you backup database first, all records in the database have valid objects to be referenced. So the libraries won't be corrupted. But new objects written to storage when you're backing up are not referenced by database records. So some libraries are out of date. When you restore, some new data are lost.   The second sequence is better in the sense that it avoids library corruption. Like other backup solutions, some new data can be lost in recovery. There is always a backup window.\nHowever, if your storage backup mechanism can finish quickly enough, using the first sequence can retain more data.  We assume your seafile data directory is in  /data/haiwen . And you want to backup to  /backup  directory. The  /backup  can be an NFS or Windows share mount exported by another machine, or just an external disk. You can create a layout similar to the following in  /backup  directory:  /backup\n---- databases/  contains database backup files\n---- data/  contains backups of the data directory", 
            "title": "Backup Order: Database First or Data Directory First"
        }, 
        {
            "location": "/maintain/backup_recovery/#backing-up-databases", 
            "text": "It's recommended to backup the database to a separate file each time. Don't overwrite older database backups for at least a week.  MySQL  Assume your database names are  ccnet-db ,  seafile-db  and  seahub-db . mysqldump automatically locks the tables so you don't need to stop Seafile server when backing up MySQL databases. Since the database tables are usually very small, it won't take long to dump.  mysqldump -h [mysqlhost] -u[username] -p[password] --opt ccnet-db   /backup/databases/ccnet-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nmysqldump -h [mysqlhost] -u[username] -p[password] --opt seafile-db   /backup/databases/seafile-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nmysqldump -h [mysqlhost] -u[username] -p[password] --opt seahub-db   /backup/databases/seahub-db.sql.`date +\"%Y-%m-%d-%H-%M-%S\"`  SQLite  You need to stop Seafile server first before backing up SQLite database.  sqlite3 /data/haiwen/ccnet/GroupMgr/groupmgr.db .dump   /backup/databases/groupmgr.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/ccnet/PeerMgr/usermgr.db .dump   /backup/databases/usermgr.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/seafile-data/seafile.db .dump   /backup/databases/seafile.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`\n\nsqlite3 /data/haiwen/seahub.db .dump   /backup/databases/seahub.db.bak.`date +\"%Y-%m-%d-%H-%M-%S\"`", 
            "title": "Backing up Databases"
        }, 
        {
            "location": "/maintain/backup_recovery/#backing-up-seafile-library-data", 
            "text": "The data files are all stored in the  /data/haiwen  directory, so just back up the whole directory. You can directly copy the whole directory to the backup destination, or you can use rsync to do incremental backup.   To directly copy the whole data directory,  cp -R /data/haiwen /backup/data/haiwen-`date +\"%Y-%m-%d-%H-%M-%S\"`  This produces a separate copy of the data directory each time. You can delete older backup copies after a new one is completed.  If you have a lot of data, copying the whole data directory would take long. You can use rsync to do incremental backup.  rsync -az /data/haiwen /backup/data  This command backup the data directory to  /backup/data/haiwen .", 
            "title": "Backing up Seafile library data"
        }, 
        {
            "location": "/maintain/backup_recovery/#restore-from-backup", 
            "text": "Now supposed your primary seafile server is broken, you're switching to a new machine. Using the backup data to restore your Seafile instance:   Copy  /backup/data/haiwen  to the new machine. Let's assume the seafile deployment location new machine is also  /data/haiwen .  Restore the database.  Since database and data are backed up separately, they may become a little inconsistent with each other. To correct the potential inconsistency, run seaf-fsck tool to check data integrity on the new machine. See  seaf-fsck documentation .", 
            "title": "Restore from backup"
        }, 
        {
            "location": "/maintain/backup_recovery/#restore-the-databases", 
            "text": "Now with the latest valid database backup files at hand, you can restore them.  MySQL  mysql -u[username] -p[password] ccnet-db   ccnet-db.sql.2013-10-19-16-00-05\nmysql -u[username] -p[password] seafile-db   seafile-db.sql.2013-10-19-16-00-20\nmysql -u[username] -p[password] seahub-db   seahub-db.sql.2013-10-19-16-01-05  SQLite  cd /data/haiwen\nmv ccnet/PeerMgr/usermgr.db ccnet/PeerMgr/usermgr.db.old\nmv ccnet/GroupMgr/groupmgr.db ccnet/GroupMgr/groupmgr.db.old\nmv seafile-data/seafile.db seafile-data/seafile.db.old\nmv seahub.db seahub.db.old\nsqlite3 ccnet/PeerMgr/usermgr.db   usermgr.db.bak.xxxx\nsqlite3 ccnet/GroupMgr/groupmgr.db   groupmgr.db.bak.xxxx\nsqlite3 seafile-data/seafile.db   seafile.db.bak.xxxx\nsqlite3 seahub.db   seahub.db.bak.xxxx", 
            "title": "Restore the databases"
        }, 
        {
            "location": "/maintain/seafile_fsck/", 
            "text": "Seafile FSCK\n\n\nOn the server side, Seafile stores the files in the libraries in an internal format. Seafile has its own representation of directories and files (similar to Git).\n\n\nWith default installation, these internal objects are stored in the server's file system directly (such as Ext4, NTFS). But most file systems don't assure the integrity of file contents after a hard shutdown or system crash. So if new Seafile internal objects are being written when the system crashes, they can be corrupt after the system reboots. This will make part of the corresponding library not accessible.\n\n\nNote: If you store the seafile-data directory in a battery-backed NAS (like EMC or NetApp), or use S3 backend available in the Pro edition, the internal objects won't be corrupt.\n\n\nStarting from version 2.0, Seafile server comes with a seaf-fsck tool to help you recover from this corruption (similar to git-fsck tool). This tool recovers any corrupted library back to its last consistent and usable state.\n\n\nStarting from version 4.1, we provide a seaf-fsck.sh script. The seaf-fsck tool accepts the following arguments:\n\n\ncd seafile-server-latest\n./seaf-fsck.sh [--repair|-r] [--enable-sync|-e] [--export|-E export_path] [repo_id_1 [repo_id_2 ...]]\n\n\n\n\nThere are three modes of operation for seaf-fsck:\n\n\n\n\nchecking integrity of libraries.\n\n\nrepairing corrupted libraries.\n\n\nexporting libraries.\n\n\n\n\nChecking Integrity of Libraries\n\n\nRunning seaf-fsck.sh without any arguments will run a \nread-only\n integrity check for all libraries.\n\n\ncd seafile-server-latest\n./seaf-fsck.sh\n\n\n\n\nIf you want to check integrity for specific libraries, just append the library id's as arguments:\n\n\ncd seafile-server-latest\n./seaf-fsck.sh [library-id1] [library-id2] ...\n\n\n\n\nThe output looks like:\n\n\n[02/13/15 16:21:07] fsck.c(470): Running fsck for repo ca1a860d-e1c1-4a52-8123-0bf9def8697f.\n[02/13/15 16:21:07] fsck.c(413): Checking file system integrity of repo fsck(ca1a860d)...\n[02/13/15 16:21:07] fsck.c(35): Dir 9c09d937397b51e1283d68ee7590cd9ce01fe4c9 is missing.\n[02/13/15 16:21:07] fsck.c(200): Dir /bf/pk/(9c09d937) is curropted.\n[02/13/15 16:21:07] fsck.c(105): Block 36e3dd8757edeb97758b3b4d8530a4a8a045d3cb is corrupted.\n[02/13/15 16:21:07] fsck.c(178): File /bf/02.1.md(ef37e350) is curropted.\n[02/13/15 16:21:07] fsck.c(85): Block 650fb22495b0b199cff0f1e1ebf036e548fcb95a is missing.\n[02/13/15 16:21:07] fsck.c(178): File /01.2.md(4a73621f) is curropted.\n[02/13/15 16:21:07] fsck.c(514): Fsck finished for repo ca1a860d.\n\n\n\n\nThe corrupted files and directories are reported.\n\n\nSometimes you can see output like the following:\n\n\n[02/13/15 16:36:11] Commit 6259251e2b0dd9a8e99925ae6199cbf4c134ec10 is missing\n[02/13/15 16:36:11] fsck.c(476): Repo ca1a860d HEAD commit is corrupted, need to restore to an old version.\n[02/13/15 16:36:11] fsck.c(314): Scanning available commits...\n[02/13/15 16:36:11] fsck.c(376): Find available commit 1b26b13c(created at 2015-02-13 16:10:21) for repo ca1a860d.\n\n\n\n\nThis means the \"head commit\" (current state of the library) recorded in database is not consistent with the library data. In such case, fsck will try to find the last consistent state and check the integrity in that state.\n\n\nTips: \nIf you have many libraries, it's helpful to save the fsck output into a log file for later analysis.\n\n\nRepairing Corruption\n\n\nCorruption repair in seaf-fsck basically works in two steps:\n\n\n\n\nIf the library state (commit) recorded in database is not found in data directory, find the last available state from data directory.\n\n\nCheck data integrity in that specific state. If files or directories are corrupted, set them to empty files or empty directories. The corrupted paths will be reported, so that the user can recover them from somewhere else.\n\n\n\n\nRunning the following command repairs all the libraries:\n\n\ncd seafile-server-latest\n./seaf-fsck.sh --repair\n\n\n\n\nMost of time you run the read-only integrity check first, to find out which libraries are corrupted. And then you repair specific libraries with the following command:\n\n\ncd seafile-server-latest\n./seaf-fsck.sh --repair [library-id1] [library-id2] ...\n\n\n\n\nBecause corrupted files and directories are emptied after repair, syncing the library after repair may result in data lost in the clients. The good copies on the clients may be replaced by the empty copies. To prevent this from happening, the system prevents a \"repaired\" library from syncing to clients. The system admin should inform the users to recover the corrupted files and folders. And then run the following command to enable syncing for the library again:\n\n\ncd seafile-server-latest\n./seaf-fsck.sh --enable-sync [library-id1] [library-id2] ...\n\n\n\n\nChange after CE 5.0.3 and Pro 5.0.2\n\n\nSince community eidition 5.0.3 and Pro edition 5.0.2, we improved seaf-fsck repair operation. Two improvements are added:\n\n\n\n\nAfter running \"--repair\" operation, the system admin doesn't need to run \"--enable-sync\" command any more. Instead, seaf-fsck automatically disconnects all syncing clients to the library. So the users are forced to re-sync the library.\n\n\nIn the library history, seaf-fsck includes the list of files and folders that are corrupted. So it's much easier to located corrupted paths.\n\n\n\n\nBest Practice for Repairing a Library\n\n\nTo check all libraries and find out which library is corrupted, the system admin can run seaf-fsck.sh without any argument and save the output to a log file. Search for keyword \"Fail\" in the log file to locate corrupted libraries.\n\n\nWhen the system admin find a library is corrupted, he/she should run seaf-fsck.sh with \"--repair\" for the library. After the command fixes the library, the admin should inform user to recover files from other places. There are two ways:\n\n\n\n\nUpload corrupted files or folders via the web interface\n\n\nIf the library was synced to some desktop computer, and that computer has a correct version of the corrupted file, resyncing the library on that computer will upload the corrupted files to the server.\n\n\n\n\nExporting Libraries to File System\n\n\nSince version 4.2.0, you can use seaf-fsck to export all the files in libraries to external file system (such as Ext4). This procedure doesn't rely on the seafile database. As long as you have your seafile-data directory, you can always export your files from Seafile to external file system.\n\n\nThe command syntax is\n\n\ncd seafile-server-latest\n./seaf-fsck.sh --export top_export_path [library-id1] [library-id2] ...\n\n\n\n\nThe argument \ntop_export_path\n is a directory to place the exported files. Each library will be exported as a sub-directory of the export path. If you don't specify library ids, all libraries will be exported.\n\n\nCurrently only un-encrypted libraries can be exported. Encrypted libraries will be skipped.", 
            "title": "Seafile FSCK"
        }, 
        {
            "location": "/maintain/seafile_fsck/#seafile-fsck", 
            "text": "On the server side, Seafile stores the files in the libraries in an internal format. Seafile has its own representation of directories and files (similar to Git).  With default installation, these internal objects are stored in the server's file system directly (such as Ext4, NTFS). But most file systems don't assure the integrity of file contents after a hard shutdown or system crash. So if new Seafile internal objects are being written when the system crashes, they can be corrupt after the system reboots. This will make part of the corresponding library not accessible.  Note: If you store the seafile-data directory in a battery-backed NAS (like EMC or NetApp), or use S3 backend available in the Pro edition, the internal objects won't be corrupt.  Starting from version 2.0, Seafile server comes with a seaf-fsck tool to help you recover from this corruption (similar to git-fsck tool). This tool recovers any corrupted library back to its last consistent and usable state.  Starting from version 4.1, we provide a seaf-fsck.sh script. The seaf-fsck tool accepts the following arguments:  cd seafile-server-latest\n./seaf-fsck.sh [--repair|-r] [--enable-sync|-e] [--export|-E export_path] [repo_id_1 [repo_id_2 ...]]  There are three modes of operation for seaf-fsck:   checking integrity of libraries.  repairing corrupted libraries.  exporting libraries.", 
            "title": "Seafile FSCK"
        }, 
        {
            "location": "/maintain/seafile_fsck/#checking-integrity-of-libraries", 
            "text": "Running seaf-fsck.sh without any arguments will run a  read-only  integrity check for all libraries.  cd seafile-server-latest\n./seaf-fsck.sh  If you want to check integrity for specific libraries, just append the library id's as arguments:  cd seafile-server-latest\n./seaf-fsck.sh [library-id1] [library-id2] ...  The output looks like:  [02/13/15 16:21:07] fsck.c(470): Running fsck for repo ca1a860d-e1c1-4a52-8123-0bf9def8697f.\n[02/13/15 16:21:07] fsck.c(413): Checking file system integrity of repo fsck(ca1a860d)...\n[02/13/15 16:21:07] fsck.c(35): Dir 9c09d937397b51e1283d68ee7590cd9ce01fe4c9 is missing.\n[02/13/15 16:21:07] fsck.c(200): Dir /bf/pk/(9c09d937) is curropted.\n[02/13/15 16:21:07] fsck.c(105): Block 36e3dd8757edeb97758b3b4d8530a4a8a045d3cb is corrupted.\n[02/13/15 16:21:07] fsck.c(178): File /bf/02.1.md(ef37e350) is curropted.\n[02/13/15 16:21:07] fsck.c(85): Block 650fb22495b0b199cff0f1e1ebf036e548fcb95a is missing.\n[02/13/15 16:21:07] fsck.c(178): File /01.2.md(4a73621f) is curropted.\n[02/13/15 16:21:07] fsck.c(514): Fsck finished for repo ca1a860d.  The corrupted files and directories are reported.  Sometimes you can see output like the following:  [02/13/15 16:36:11] Commit 6259251e2b0dd9a8e99925ae6199cbf4c134ec10 is missing\n[02/13/15 16:36:11] fsck.c(476): Repo ca1a860d HEAD commit is corrupted, need to restore to an old version.\n[02/13/15 16:36:11] fsck.c(314): Scanning available commits...\n[02/13/15 16:36:11] fsck.c(376): Find available commit 1b26b13c(created at 2015-02-13 16:10:21) for repo ca1a860d.  This means the \"head commit\" (current state of the library) recorded in database is not consistent with the library data. In such case, fsck will try to find the last consistent state and check the integrity in that state.  Tips:  If you have many libraries, it's helpful to save the fsck output into a log file for later analysis.", 
            "title": "Checking Integrity of Libraries"
        }, 
        {
            "location": "/maintain/seafile_fsck/#repairing-corruption", 
            "text": "Corruption repair in seaf-fsck basically works in two steps:   If the library state (commit) recorded in database is not found in data directory, find the last available state from data directory.  Check data integrity in that specific state. If files or directories are corrupted, set them to empty files or empty directories. The corrupted paths will be reported, so that the user can recover them from somewhere else.   Running the following command repairs all the libraries:  cd seafile-server-latest\n./seaf-fsck.sh --repair  Most of time you run the read-only integrity check first, to find out which libraries are corrupted. And then you repair specific libraries with the following command:  cd seafile-server-latest\n./seaf-fsck.sh --repair [library-id1] [library-id2] ...  Because corrupted files and directories are emptied after repair, syncing the library after repair may result in data lost in the clients. The good copies on the clients may be replaced by the empty copies. To prevent this from happening, the system prevents a \"repaired\" library from syncing to clients. The system admin should inform the users to recover the corrupted files and folders. And then run the following command to enable syncing for the library again:  cd seafile-server-latest\n./seaf-fsck.sh --enable-sync [library-id1] [library-id2] ...", 
            "title": "Repairing Corruption"
        }, 
        {
            "location": "/maintain/seafile_fsck/#change-after-ce-503-and-pro-502", 
            "text": "Since community eidition 5.0.3 and Pro edition 5.0.2, we improved seaf-fsck repair operation. Two improvements are added:   After running \"--repair\" operation, the system admin doesn't need to run \"--enable-sync\" command any more. Instead, seaf-fsck automatically disconnects all syncing clients to the library. So the users are forced to re-sync the library.  In the library history, seaf-fsck includes the list of files and folders that are corrupted. So it's much easier to located corrupted paths.", 
            "title": "Change after CE 5.0.3 and Pro 5.0.2"
        }, 
        {
            "location": "/maintain/seafile_fsck/#best-practice-for-repairing-a-library", 
            "text": "To check all libraries and find out which library is corrupted, the system admin can run seaf-fsck.sh without any argument and save the output to a log file. Search for keyword \"Fail\" in the log file to locate corrupted libraries.  When the system admin find a library is corrupted, he/she should run seaf-fsck.sh with \"--repair\" for the library. After the command fixes the library, the admin should inform user to recover files from other places. There are two ways:   Upload corrupted files or folders via the web interface  If the library was synced to some desktop computer, and that computer has a correct version of the corrupted file, resyncing the library on that computer will upload the corrupted files to the server.", 
            "title": "Best Practice for Repairing a Library"
        }, 
        {
            "location": "/maintain/seafile_fsck/#exporting-libraries-to-file-system", 
            "text": "Since version 4.2.0, you can use seaf-fsck to export all the files in libraries to external file system (such as Ext4). This procedure doesn't rely on the seafile database. As long as you have your seafile-data directory, you can always export your files from Seafile to external file system.  The command syntax is  cd seafile-server-latest\n./seaf-fsck.sh --export top_export_path [library-id1] [library-id2] ...  The argument  top_export_path  is a directory to place the exported files. Each library will be exported as a sub-directory of the export path. If you don't specify library ids, all libraries will be exported.  Currently only un-encrypted libraries can be exported. Encrypted libraries will be skipped.", 
            "title": "Exporting Libraries to File System"
        }, 
        {
            "location": "/maintain/seafile_gc/", 
            "text": "Seafile GC\n\n\nSeafile uses storage de-duplication technology to reduce storage usage. The underlying data blocks will not be removed immediately after you delete a file or a library. As a result, the number of unused data blocks will increase on Seafile server.\n\n\nTo release the storage space occupied by unused blocks, you have to run a\n\"garbage collection\" program to clean up unused blocks on your server.\n\n\nThe GC program cleans up two types of unused blocks:\n\n\n\n\nBlocks that no library references to, that is, the blocks belong to deleted libraries;\n\n\nIf you set history length limit on some libraries, the out-dated blocks in those libraries will also be removed.\n\n\n\n\nBefore running GC, you must shutdown the Seafile program on your server if you use the community edition. For professional edition, from version 3.1.11, online GC operation is supported. If you use Professional edition, you don't need to shutdown the Seafile program if you are using MySQL or PostgreSQL as database.\n  This is because new blocks written into Seafile while GC is running may be mistakenly deleted by the GC program. \n\n\nRun GC in version 4.1.1 and later\n\n\nIn community edition 4.1.1 and Pro edition 4.1.0, GC program's command line and output are improved.\n\n\nDry-run Mode\n\n\nTo see how much garbage can be collected without actually removing any garbage, use the dry-run option:\n\n\nseaf-gc.sh --dry-run [repo-id1] [repo-id2] ...\n\n\n\n\nThe output should look like:\n\n\n[03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo My Library(ffa57d93)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 265.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo ffa57d93.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 5 commits, 265 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 265 blocks total, about 265 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo aa(f3d0a8d0)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 5.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo f3d0a8d0.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 8 commits, 5 blocks.\n[03/19/15 19:41:49] gc-core.c(264): Populating index for sub-repo 9217622a.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 4 commits, 4 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 5 blocks total, about 9 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo test2(e7d26d93)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 507.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo e7d26d93.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 577 commits, 507 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 507 blocks total, about 507 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:50] seafserv-gc.c(124): === Repos deleted by users ===\n[03/19/15 19:41:50] seafserv-gc.c(145): === GC is finished ===\n\n[03/19/15 19:41:50] Following repos have blocks to be removed:\nrepo-id1\nrepo-id2\nrepo-id3\n\n\n\n\nIf you give specific library ids, only those libraries will be checked; otherwise all libraries will be checked.\n\n\nNotice that at the end of the output there is a \"repos have blocks to be removed\" section. It contains the list of librareis that have garbage blocks. Later when you run GC without --dry-run option, you can use these libraris ids as input arguments to GC program.\n\n\nRemoving Garbage\n\n\nTo actually remove garbage blocks, run without the --dry-run option:\n\n\nseaf-gc.sh [repo-id1] [repo-id2] ...\n\n\n\n\nIf libraries ids are specified, only those libraries will be checked for garbage.\n\n\nAs described before, there are two types of garbage blocks to be removed. Sometimes just removing the first type (those belong to deleted libraries) of unused blocks is good enough. In this case, the GC program won't bother to check the libraries for outdated historic blocks. The \"-r\" option implements this feature:\n\n\nseaf-gc.sh -r\n\n\n\n\nIn Seafile version 4.1.1 and later, libraries deleted by the users are not immediately removed from the system. Instead, they're moved into a \"trash\" in the system admin page. Before they're cleared from the trash, their blocks won't be garbage collected.\n\n\nUsing Multiple Threads in GC\n\n\nSince Pro server 5.1.0, you can specify the thread number in GC. By default,\n\n\n\n\nIf storage backend is S3/Swift/Ceph, 10 threads are started to do the GC work.\n\n\nIf storage backend is file system, only 1 thread is started.\n\n\n\n\nYou can specify the thread number in with \"-t\" option. \"-t\" option can be used together with all other options. Each thread will do GC on one library. For example, the following command will use 20 threads to GC all libraries:\n\n\nseaf-gc.sh -t 20\n\n\n\n\nSince the threads are concurrent, the output of each thread may mix with each others. Library ID is printed in each line of output.\n\n\nRun GC in older versions (before 4.1.1)\n\n\nTo run GC program\n\n\n./seaf-gc.sh run\n\n\n\nIf you want to do sanity check before actually removing any data, you can use the --dry-run option\n\n\n./seaf-gc.sh dry-run\n\n\n\nIt will show you the total block number vs. the number of blocks to be removed.\n\n\nTo check data integrity after running GC, you can use \nseaf-fsck", 
            "title": "Seafile GC"
        }, 
        {
            "location": "/maintain/seafile_gc/#seafile-gc", 
            "text": "Seafile uses storage de-duplication technology to reduce storage usage. The underlying data blocks will not be removed immediately after you delete a file or a library. As a result, the number of unused data blocks will increase on Seafile server.  To release the storage space occupied by unused blocks, you have to run a\n\"garbage collection\" program to clean up unused blocks on your server.  The GC program cleans up two types of unused blocks:   Blocks that no library references to, that is, the blocks belong to deleted libraries;  If you set history length limit on some libraries, the out-dated blocks in those libraries will also be removed.   Before running GC, you must shutdown the Seafile program on your server if you use the community edition. For professional edition, from version 3.1.11, online GC operation is supported. If you use Professional edition, you don't need to shutdown the Seafile program if you are using MySQL or PostgreSQL as database.   This is because new blocks written into Seafile while GC is running may be mistakenly deleted by the GC program.", 
            "title": "Seafile GC"
        }, 
        {
            "location": "/maintain/seafile_gc/#run-gc-in-version-411-and-later", 
            "text": "In community edition 4.1.1 and Pro edition 4.1.0, GC program's command line and output are improved.", 
            "title": "Run GC in version 4.1.1 and later"
        }, 
        {
            "location": "/maintain/seafile_gc/#dry-run-mode", 
            "text": "To see how much garbage can be collected without actually removing any garbage, use the dry-run option:  seaf-gc.sh --dry-run [repo-id1] [repo-id2] ...  The output should look like:  [03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo My Library(ffa57d93)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 265.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo ffa57d93.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 5 commits, 265 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 265 blocks total, about 265 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo aa(f3d0a8d0)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 5.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo f3d0a8d0.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 8 commits, 5 blocks.\n[03/19/15 19:41:49] gc-core.c(264): Populating index for sub-repo 9217622a.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 4 commits, 4 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 5 blocks total, about 9 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:49] seafserv-gc.c(115): GC version 1 repo test2(e7d26d93)\n[03/19/15 19:41:49] gc-core.c(394): GC started. Total block number is 507.\n[03/19/15 19:41:49] gc-core.c(75): GC index size is 1024 Byte.\n[03/19/15 19:41:49] gc-core.c(408): Populating index.\n[03/19/15 19:41:49] gc-core.c(262): Populating index for repo e7d26d93.\n[03/19/15 19:41:49] gc-core.c(308): Traversed 577 commits, 507 blocks.\n[03/19/15 19:41:49] gc-core.c(440): Scanning unused blocks.\n[03/19/15 19:41:49] gc-core.c(472): GC finished. 507 blocks total, about 507 reachable blocks, 0 blocks can be removed.\n\n[03/19/15 19:41:50] seafserv-gc.c(124): === Repos deleted by users ===\n[03/19/15 19:41:50] seafserv-gc.c(145): === GC is finished ===\n\n[03/19/15 19:41:50] Following repos have blocks to be removed:\nrepo-id1\nrepo-id2\nrepo-id3  If you give specific library ids, only those libraries will be checked; otherwise all libraries will be checked.  Notice that at the end of the output there is a \"repos have blocks to be removed\" section. It contains the list of librareis that have garbage blocks. Later when you run GC without --dry-run option, you can use these libraris ids as input arguments to GC program.", 
            "title": "Dry-run Mode"
        }, 
        {
            "location": "/maintain/seafile_gc/#removing-garbage", 
            "text": "To actually remove garbage blocks, run without the --dry-run option:  seaf-gc.sh [repo-id1] [repo-id2] ...  If libraries ids are specified, only those libraries will be checked for garbage.  As described before, there are two types of garbage blocks to be removed. Sometimes just removing the first type (those belong to deleted libraries) of unused blocks is good enough. In this case, the GC program won't bother to check the libraries for outdated historic blocks. The \"-r\" option implements this feature:  seaf-gc.sh -r  In Seafile version 4.1.1 and later, libraries deleted by the users are not immediately removed from the system. Instead, they're moved into a \"trash\" in the system admin page. Before they're cleared from the trash, their blocks won't be garbage collected.", 
            "title": "Removing Garbage"
        }, 
        {
            "location": "/maintain/seafile_gc/#using-multiple-threads-in-gc", 
            "text": "Since Pro server 5.1.0, you can specify the thread number in GC. By default,   If storage backend is S3/Swift/Ceph, 10 threads are started to do the GC work.  If storage backend is file system, only 1 thread is started.   You can specify the thread number in with \"-t\" option. \"-t\" option can be used together with all other options. Each thread will do GC on one library. For example, the following command will use 20 threads to GC all libraries:  seaf-gc.sh -t 20  Since the threads are concurrent, the output of each thread may mix with each others. Library ID is printed in each line of output.", 
            "title": "Using Multiple Threads in GC"
        }, 
        {
            "location": "/maintain/seafile_gc/#run-gc-in-older-versions-before-411", 
            "text": "To run GC program  ./seaf-gc.sh run  If you want to do sanity check before actually removing any data, you can use the --dry-run option  ./seaf-gc.sh dry-run  It will show you the total block number vs. the number of blocks to be removed.  To check data integrity after running GC, you can use  seaf-fsck", 
            "title": "Run GC in older versions (before 4.1.1)"
        }, 
        {
            "location": "/maintain/clean_database/", 
            "text": "Clean Database\n\n\nSeahub\n\n\nSession\n\n\nSince version 5.0, we offered command to clear expired session records in seahub database.\n\n\ncd \ninstall-path\n/seafile-server-latest\n./seahub.sh clearsessions", 
            "title": "Clean database"
        }, 
        {
            "location": "/maintain/clean_database/#clean-database", 
            "text": "", 
            "title": "Clean Database"
        }, 
        {
            "location": "/maintain/clean_database/#seahub", 
            "text": "", 
            "title": "Seahub"
        }, 
        {
            "location": "/maintain/clean_database/#session", 
            "text": "Since version 5.0, we offered command to clear expired session records in seahub database.  cd  install-path /seafile-server-latest\n./seahub.sh clearsessions", 
            "title": "Session"
        }, 
        {
            "location": "/extension/README/", 
            "text": "WebDAV and FUSE extensions\n\n\nSeafile WebDAV and FUSE extensions make it easy for Seafile to work with third party applications. For example, you can use Documents App in iOS to access files in Seafile via WebDAV interface.", 
            "title": "README"
        }, 
        {
            "location": "/extension/README/#webdav-and-fuse-extensions", 
            "text": "Seafile WebDAV and FUSE extensions make it easy for Seafile to work with third party applications. For example, you can use Documents App in iOS to access files in Seafile via WebDAV interface.", 
            "title": "WebDAV and FUSE extensions"
        }, 
        {
            "location": "/extension/webdav/", 
            "text": "WebDAV extension\n\n\nSeafile WebDAV Server(SeafDAV) is added in seafile server 2.1.0.\n\n\nIn the wiki below, we assume your seafile installation folder is \n/data/haiwen\n.\n\n\nSeafDAV Configuration\n\n\nThe configuration file is \n/data/haiwen/conf/seafdav.conf\n. If it is not created already, you can just create the file.\n\n\n\n[WEBDAV]\n\n# Default is false. Change it to true to enable SeafDAV server.\nenabled = true\n\nport = 8080\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi = false\n\n# If you deploy SeafDAV behind nginx/apache, you need to modify \"share_name\".\nshare_name = /\n\n\n\n\nEvery time the configuration is modified, you need to restart seafile server to make it take effect.\n\n\n\n./seafile.sh restart\n\n\n\n\nSample Configuration 1: No nginx/apache\n\n\nYour WebDAV client would visit the Seafile WebDAV server at \nhttp://example.com:8080\n\n\n\n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = false\nshare_name = /\n\n\n\n\nSample Configuration 2: With Nginx\n\n\nYour WebDAV client would visit the Seafile WebDAV server at \nhttp://example.com/seafdav\n\n\n\n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = true\nshare_name = /seafdav\n\n\n\n\nIn the above config, the value of '''share_name''' is changed to '''/seafdav''', which is the address suffix you assign to SeafDAV server.\n\n\nNginx without HTTPS\n\n\nThe corresponding Nginx configuration is (without https):\n\n\n\n     location /seafdav {\n        fastcgi_pass    127.0.0.1:8080;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n\n        client_max_body_size 0;\n\n        # This option is only available for Nginx >= 1.8.0. See more details below.\n        proxy_request_buffering off;\n\n        access_log      /var/log/nginx/seafdav.access.log;\n        error_log       /var/log/nginx/seafdav.error.log;\n    }\n\n\n\n\nNginx with HTTPS\n\n\nNginx conf with https:\n\n\n\n     location /seafdav {\n        fastcgi_pass    127.0.0.1:8080;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n\n        fastcgi_param   HTTPS               on;\n\n        client_max_body_size 0;\n\n        # This option is only available for Nginx >= 1.8.0. See more details below.\n        proxy_request_buffering off;\n\n        access_log      /var/log/nginx/seafdav.access.log;\n        error_log       /var/log/nginx/seafdav.error.log;\n    }\n\n\n\n\nBy default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (SeafDAV in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version \n= 1.8.0 and add \nproxy_request_buffering off\n to Nginx configuration.\n\n\nSample Configuration 3: With Apache\n\n\nThe following configuratioin assumes you use Apache 2.4 or later.\n\n\nYour WebDAV client would visit the Seafile WebDAV server at \nhttp://example.com/seafdav\n\n\n\n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = false\nshare_name = /seafdav\n\n\n\n\nIn the above config, the value of '''share_name''' is changed to '''/seafdav''', which is the address suffix you assign to SeafDAV server. \nNote that we do not use fastcgi for Apache.\n\n\nModify Apache config file (site-enabled/000-default):\n\n\nApache without HTTPS\n\n\nBased on your apache configuration when you \ndeploy Seafile with Apache\n, add seafdav related config:\n\n\n\n\n\n\n    ServerName www.myseafile.com\n    # Use \"DocumentRoot /var/www/html\" for Centos/Fedora\n    # Use \"DocumentRoot /var/www\" for Ubuntu/Debian\n    DocumentRoot /var/www\n    Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n    RewriteEngine On\n\n    \n\n        Require all granted\n    \n\n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]\n\n    #\n    # WebDAV\n    # We use http proxy, since SeafDAV is incompatible with FCGI proxy in Apache 2.4.\n    #\n    ProxyPass /seafdav http://127.0.0.1:8080/seafdav\n    ProxyPassReverse /seafdav http://127.0.0.1:8080/seafdav\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/\n\n\n\n\n\n\n\nApache with HTTPS\n\n\nBased on your apache configuration when you \nEnable Https on Seafile web with Apache\n, add seafdav related config:\n\n\n\n\n\n\n  ServerName www.myseafile.com\n  DocumentRoot /var/www\n\n  SSLEngine On\n  SSLCertificateFile /path/to/cacert.pem\n  SSLCertificateKeyFile /path/to/privkey.pem\n\n  Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n  \n\n    ProxyPass !\n    Require all granted\n  \n\n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # WebDAV\n  # We use http proxy, since SeafDAV is incompatible with FCGI proxy in Apache 2.4.\n  #\n  ProxyPass /seafdav http://127.0.0.1:8080/seafdav\n  ProxyPassReverse /seafdav http://127.0.0.1:8080/seafdav\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n  ProxyPass / fcgi://127.0.0.1:8000/\n\n\n\n\n\n\n\nNotes on Clients\n\n\nPlease first note that, there are some known performance limitation when you map a Seafile webdav server as a local file system (or network drive).\n- Uploading large number of files at once is usually much slower than the syncing client. That's because each file needs to be committed separately.\n- The access to the webdav server may be slow sometimes. That's because the local file system driver sends a lot of unnecessary requests to get the files' attributes.\n\n\nSo WebDAV is more suitable for infrequent file access. If you want better performance, please use the sync client instead.\n\n\nWindows\n\n\nThe client recommendation for WebDAV depends on your Windows version:\n- For Windows XP: Only non-encryped HTTP connection is supported by the Windows Explorer. So for security, the only viable option is to use third-party clients, such as Cyberduck or Bitkinex.\n- For Vista and later versions: Windows Explorer supports HTTPS connection. But it requires a valid certificate on the server. It's generally recommended to use Windows Explorer to map a webdav server as network drive. If you use a self-signed certificate, you have to add the certificate's CA into Windows' system CA store.\n\n\nLinux\n\n\nOn Linux you have more choices. You can use file manager such as Nautilus to connect to webdav server. Or you can use davfs2 from the command line.\n\n\nTo use davfs2\n\n\n\nsudo apt-get install davfs2\nsudo mount -t davfs -o uid=\n https://example.com/seafdav /media/seafdav/\n\n\n\n\nThe -o option sets the owner of the mounted directory to \n so that it's writable for non-root users.\n\n\nIt's recommended to disable LOCK operation for davfs2. You have to edit /etc/davfs2/davfs2.conf\n\n\n\n use_locks       0\n\n\n\n\nMac OS X\n\n\nFinder's support for WebDAV is also not very stable and slow. So it is recommended to use a webdav client software such as Cyberduck.\n\n\nFrequently Asked Questions\n\n\nClients can't connect to SeafDAV server\n\n\nBy default, SeafDAV is disabled. Check whether you have \nenabled = true\n in \nseafdav.conf\n.\nIf not, modify it and restart seafile server.\n\n\nThe client gets \"Error: 404 Not Found\"\n\n\nIf you deploy SeafDAV behind Nginx/Apache, make sure to change the value of \nshare_name\n as the sample configuration above. Restart your seafile server and try again.\n\n\nWindows Explorer reports \"file size exceeds the limit allowed and cannot be saved\"\n\n\nThis happens when you map webdav as a network drive, and tries to copy a file larger than about 50MB from the network drive to a local folder.\n\n\nThis is because Windows Explorer has a limit of the file size downloaded from webdav server. To make this size large, change the registry entry on the client machine. There is a registry key named \nFileSizeLimitInBytes\n under \nHKEY_LOCAL_MACHINE -\n SYSTEM -\n CurrentControlSet -\n Services -\n WebClient -\n Parameters\n.", 
            "title": "WebDAV extension"
        }, 
        {
            "location": "/extension/webdav/#webdav-extension", 
            "text": "Seafile WebDAV Server(SeafDAV) is added in seafile server 2.1.0.  In the wiki below, we assume your seafile installation folder is  /data/haiwen .", 
            "title": "WebDAV extension"
        }, 
        {
            "location": "/extension/webdav/#seafdav-configuration", 
            "text": "The configuration file is  /data/haiwen/conf/seafdav.conf . If it is not created already, you can just create the file.  \n[WEBDAV]\n\n# Default is false. Change it to true to enable SeafDAV server.\nenabled = true\n\nport = 8080\n\n# Change the value of fastcgi to true if fastcgi is to be used\nfastcgi = false\n\n# If you deploy SeafDAV behind nginx/apache, you need to modify \"share_name\".\nshare_name = /  Every time the configuration is modified, you need to restart seafile server to make it take effect.  \n./seafile.sh restart", 
            "title": "SeafDAV Configuration"
        }, 
        {
            "location": "/extension/webdav/#sample-configuration-1-no-nginxapache", 
            "text": "Your WebDAV client would visit the Seafile WebDAV server at  http://example.com:8080  \n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = false\nshare_name = /", 
            "title": "Sample Configuration 1: No nginx/apache"
        }, 
        {
            "location": "/extension/webdav/#sample-configuration-2-with-nginx", 
            "text": "Your WebDAV client would visit the Seafile WebDAV server at  http://example.com/seafdav  \n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = true\nshare_name = /seafdav  In the above config, the value of '''share_name''' is changed to '''/seafdav''', which is the address suffix you assign to SeafDAV server.", 
            "title": "Sample Configuration 2: With Nginx"
        }, 
        {
            "location": "/extension/webdav/#nginx-without-https", 
            "text": "The corresponding Nginx configuration is (without https):  \n     location /seafdav {\n        fastcgi_pass    127.0.0.1:8080;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n\n        client_max_body_size 0;\n\n        # This option is only available for Nginx >= 1.8.0. See more details below.\n        proxy_request_buffering off;\n\n        access_log      /var/log/nginx/seafdav.access.log;\n        error_log       /var/log/nginx/seafdav.error.log;\n    }", 
            "title": "Nginx without HTTPS"
        }, 
        {
            "location": "/extension/webdav/#nginx-with-https", 
            "text": "Nginx conf with https:  \n     location /seafdav {\n        fastcgi_pass    127.0.0.1:8080;\n        fastcgi_param   SCRIPT_FILENAME     $document_root$fastcgi_script_name;\n        fastcgi_param   PATH_INFO           $fastcgi_script_name;\n\n        fastcgi_param   SERVER_PROTOCOL     $server_protocol;\n        fastcgi_param   QUERY_STRING        $query_string;\n        fastcgi_param   REQUEST_METHOD      $request_method;\n        fastcgi_param   CONTENT_TYPE        $content_type;\n        fastcgi_param   CONTENT_LENGTH      $content_length;\n        fastcgi_param   SERVER_ADDR         $server_addr;\n        fastcgi_param   SERVER_PORT         $server_port;\n        fastcgi_param   SERVER_NAME         $server_name;\n\n        fastcgi_param   HTTPS               on;\n\n        client_max_body_size 0;\n\n        # This option is only available for Nginx >= 1.8.0. See more details below.\n        proxy_request_buffering off;\n\n        access_log      /var/log/nginx/seafdav.access.log;\n        error_log       /var/log/nginx/seafdav.error.log;\n    }  By default Nginx will buffer large request body in temp file. After the body is completely received, Nginx will send the body to the upstream server (SeafDAV in our case). But it seems when file size is very large, the buffering mechanism dosen't work well. It may stop proxying the body in the middle. So if you want to support file upload larger for 4GB, we suggest you install Nginx version  = 1.8.0 and add  proxy_request_buffering off  to Nginx configuration.", 
            "title": "Nginx with HTTPS"
        }, 
        {
            "location": "/extension/webdav/#sample-configuration-3-with-apache", 
            "text": "The following configuratioin assumes you use Apache 2.4 or later.  Your WebDAV client would visit the Seafile WebDAV server at  http://example.com/seafdav  \n[WEBDAV]\nenabled = true\nport = 8080\nfastcgi = false\nshare_name = /seafdav  In the above config, the value of '''share_name''' is changed to '''/seafdav''', which is the address suffix you assign to SeafDAV server.  Note that we do not use fastcgi for Apache.  Modify Apache config file (site-enabled/000-default):", 
            "title": "Sample Configuration 3: With Apache"
        }, 
        {
            "location": "/extension/webdav/#apache-without-https", 
            "text": "Based on your apache configuration when you  deploy Seafile with Apache , add seafdav related config:   \n\n    ServerName www.myseafile.com\n    # Use \"DocumentRoot /var/www/html\" for Centos/Fedora\n    # Use \"DocumentRoot /var/www\" for Ubuntu/Debian\n    DocumentRoot /var/www\n    Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n    RewriteEngine On\n\n     \n        Require all granted\n     \n\n    #\n    # seafile fileserver\n    #\n    ProxyPass /seafhttp http://127.0.0.1:8082\n    ProxyPassReverse /seafhttp http://127.0.0.1:8082\n    RewriteRule ^/seafhttp - [QSA,L]\n\n    #\n    # WebDAV\n    # We use http proxy, since SeafDAV is incompatible with FCGI proxy in Apache 2.4.\n    #\n    ProxyPass /seafdav http://127.0.0.1:8080/seafdav\n    ProxyPassReverse /seafdav http://127.0.0.1:8080/seafdav\n\n    #\n    # seahub\n    #\n    SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n    SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n    ProxyPass / fcgi://127.0.0.1:8000/", 
            "title": "Apache without HTTPS"
        }, 
        {
            "location": "/extension/webdav/#apache-with-https", 
            "text": "Based on your apache configuration when you  Enable Https on Seafile web with Apache , add seafdav related config:   \n\n  ServerName www.myseafile.com\n  DocumentRoot /var/www\n\n  SSLEngine On\n  SSLCertificateFile /path/to/cacert.pem\n  SSLCertificateKeyFile /path/to/privkey.pem\n\n  Alias /media  /home/user/haiwen/seafile-server-latest/seahub/media\n\n   \n    ProxyPass !\n    Require all granted\n   \n\n  RewriteEngine On\n\n  #\n  # seafile fileserver\n  #\n  ProxyPass /seafhttp http://127.0.0.1:8082\n  ProxyPassReverse /seafhttp http://127.0.0.1:8082\n  RewriteRule ^/seafhttp - [QSA,L]\n\n  #\n  # WebDAV\n  # We use http proxy, since SeafDAV is incompatible with FCGI proxy in Apache 2.4.\n  #\n  ProxyPass /seafdav http://127.0.0.1:8080/seafdav\n  ProxyPassReverse /seafdav http://127.0.0.1:8080/seafdav\n\n  #\n  # seahub\n  #\n  SetEnvIf Request_URI . proxy-fcgi-pathinfo=unescape\n  SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1\n  ProxyPass / fcgi://127.0.0.1:8000/", 
            "title": "Apache with HTTPS"
        }, 
        {
            "location": "/extension/webdav/#notes-on-clients", 
            "text": "Please first note that, there are some known performance limitation when you map a Seafile webdav server as a local file system (or network drive).\n- Uploading large number of files at once is usually much slower than the syncing client. That's because each file needs to be committed separately.\n- The access to the webdav server may be slow sometimes. That's because the local file system driver sends a lot of unnecessary requests to get the files' attributes.  So WebDAV is more suitable for infrequent file access. If you want better performance, please use the sync client instead.", 
            "title": "Notes on Clients"
        }, 
        {
            "location": "/extension/webdav/#windows", 
            "text": "The client recommendation for WebDAV depends on your Windows version:\n- For Windows XP: Only non-encryped HTTP connection is supported by the Windows Explorer. So for security, the only viable option is to use third-party clients, such as Cyberduck or Bitkinex.\n- For Vista and later versions: Windows Explorer supports HTTPS connection. But it requires a valid certificate on the server. It's generally recommended to use Windows Explorer to map a webdav server as network drive. If you use a self-signed certificate, you have to add the certificate's CA into Windows' system CA store.", 
            "title": "Windows"
        }, 
        {
            "location": "/extension/webdav/#linux", 
            "text": "On Linux you have more choices. You can use file manager such as Nautilus to connect to webdav server. Or you can use davfs2 from the command line.  To use davfs2  \nsudo apt-get install davfs2\nsudo mount -t davfs -o uid=  https://example.com/seafdav /media/seafdav/  The -o option sets the owner of the mounted directory to   so that it's writable for non-root users.  It's recommended to disable LOCK operation for davfs2. You have to edit /etc/davfs2/davfs2.conf  \n use_locks       0", 
            "title": "Linux"
        }, 
        {
            "location": "/extension/webdav/#mac-os-x", 
            "text": "Finder's support for WebDAV is also not very stable and slow. So it is recommended to use a webdav client software such as Cyberduck.", 
            "title": "Mac OS X"
        }, 
        {
            "location": "/extension/webdav/#frequently-asked-questions", 
            "text": "", 
            "title": "Frequently Asked Questions"
        }, 
        {
            "location": "/extension/webdav/#clients-cant-connect-to-seafdav-server", 
            "text": "By default, SeafDAV is disabled. Check whether you have  enabled = true  in  seafdav.conf .\nIf not, modify it and restart seafile server.", 
            "title": "Clients can't connect to SeafDAV server"
        }, 
        {
            "location": "/extension/webdav/#the-client-gets-error-404-not-found", 
            "text": "If you deploy SeafDAV behind Nginx/Apache, make sure to change the value of  share_name  as the sample configuration above. Restart your seafile server and try again.", 
            "title": "The client gets \"Error: 404 Not Found\""
        }, 
        {
            "location": "/extension/webdav/#windows-explorer-reports-file-size-exceeds-the-limit-allowed-and-cannot-be-saved", 
            "text": "This happens when you map webdav as a network drive, and tries to copy a file larger than about 50MB from the network drive to a local folder.  This is because Windows Explorer has a limit of the file size downloaded from webdav server. To make this size large, change the registry entry on the client machine. There is a registry key named  FileSizeLimitInBytes  under  HKEY_LOCAL_MACHINE -  SYSTEM -  CurrentControlSet -  Services -  WebClient -  Parameters .", 
            "title": "Windows Explorer reports \"file size exceeds the limit allowed and cannot be saved\""
        }, 
        {
            "location": "/extension/fuse/", 
            "text": "FUSE extension\n\n\nFiles in the seafile system are split to blocks, which means what are stored on your seafile server are not complete files, but blocks. This design faciliates effective data deduplication.\n\n\nHowever, administrators sometimes want to access the files directly on the server. You can use seaf-fuse to do this.\n\n\nSeaf-fuse\n is an implementation of the \nFUSE\n virtual filesystem. In a word, it mounts all the seafile files to a folder (which is called the '''mount point'''), so that you can access all the files managed by seafile server, just as you access a normal folder on your server.\n\n\nNote:\n\n\n\n\nEncrypted folders can't be accessed by seaf-fuse.\n\n\nCurrently the implementation is '''read-only''', which means you can't modify the files through the mounted folder.\n\n\nOne debian/centos systems, you need to be in the \"fuse\" group to have the permission to mount a FUSE folder.\n\n\n\n\nHow to start seaf-fuse\n\n\nAssume we want to mount to \n/data/seafile-fuse\n.\n\n\nCreate the folder as the mount point\n\n\n\nmkdir -p /data/seafile-fuse\n\n\n\n\nStart seaf-fuse with the script\n\n\nNote: Before start seaf-fuse, you should have started seafile server with \n./seafile.sh start\n.\n\n\n\n./seaf-fuse.sh start /data/seafile-fuse\n\n\n\n\nSince Community server version 4.2.1 and Pro server 4.2.0, the script supports standard mount options for FUSE. For example, you can specify ownership for the mounted folder:\n\n\n./seaf-fuse.sh start -o uid=\nuid\n /data/seafile-fuse\n\n\n\n\nYou can find the complete list of supported options in \nman fuse\n.\n\n\nStop seaf-fuse\n\n\n\n./seaf-fuse.sh stop\n\n\n\n\nContents of the mounted folder\n\n\nThe top level folder\n\n\nNow you can list the content of \n/data/seafile-fuse\n.\n\n\n\n$ ls -lhp /data/seafile-fuse\n\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 abc@abc.com/\ndrwxr-xr-x 2 root root 4.0K Jan  4  2015 foo@foo.com/\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 plus@plus.com/\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 sharp@sharp.com/\ndrwxr-xr-x 2 root root 4.0K Jan  3  2015 test@test.com/\n\n\n\n\n\n\nThe top level folder contains many subfolders, each of which corresponds to a user\n\n\n\n\nThe folder for each user\n\n\n\n$ ls -lhp /data/seafile-fuse/abc@abc.com\n\ndrwxr-xr-x 2 root root  924 Jan  1  1970 5403ac56-5552-4e31-a4f1-1de4eb889a5f_Photos/\ndrwxr-xr-x 2 root root 1.6K Jan  1  1970 a09ab9fc-7bd0-49f1-929d-6abeb8491397_My Notes/\n\n\n\n\nFrom the above list you can see, under the folder of a user there are subfolders, each of which represents a library of that user, and has a name of this format: '''{library_id}-{library-name}'''.\n\n\nThe folder for a library\n\n\n\n$ ls -lhp /data/seafile-fuse/abc@abc.com/5403ac56-5552-4e31-a4f1-1de4eb889a5f_Photos/\n\n-rw-r--r-- 1 root root 501K Jan  1  2015 image.png\n-rw-r--r-- 1 root root 501K Jan  1  2015 sample.jpng\n\n\n\n\nIf you get a \"Permission denied\" error\n\n\nIf you get an error message saying \"Permission denied\" when running \n./seaf-fuse.sh start\n, most likely you are not in the \"fuse group\". You should:\n\n\n\n\n\n\nAdd yourself to the fuse group\n\n\nsudo usermod -a -G fuse \n\n\n\n\n\n\n\n\nLogout your shell and login again\n\n\n\n\nNow try \n./seaf-fuse.sh start \npath\nagain.", 
            "title": "FUSE extension"
        }, 
        {
            "location": "/extension/fuse/#fuse-extension", 
            "text": "Files in the seafile system are split to blocks, which means what are stored on your seafile server are not complete files, but blocks. This design faciliates effective data deduplication.  However, administrators sometimes want to access the files directly on the server. You can use seaf-fuse to do this.  Seaf-fuse  is an implementation of the  FUSE  virtual filesystem. In a word, it mounts all the seafile files to a folder (which is called the '''mount point'''), so that you can access all the files managed by seafile server, just as you access a normal folder on your server.  Note:   Encrypted folders can't be accessed by seaf-fuse.  Currently the implementation is '''read-only''', which means you can't modify the files through the mounted folder.  One debian/centos systems, you need to be in the \"fuse\" group to have the permission to mount a FUSE folder.", 
            "title": "FUSE extension"
        }, 
        {
            "location": "/extension/fuse/#how-to-start-seaf-fuse", 
            "text": "Assume we want to mount to  /data/seafile-fuse .", 
            "title": "How to start seaf-fuse"
        }, 
        {
            "location": "/extension/fuse/#create-the-folder-as-the-mount-point", 
            "text": "mkdir -p /data/seafile-fuse", 
            "title": "Create the folder as the mount point"
        }, 
        {
            "location": "/extension/fuse/#start-seaf-fuse-with-the-script", 
            "text": "Note: Before start seaf-fuse, you should have started seafile server with  ./seafile.sh start .  \n./seaf-fuse.sh start /data/seafile-fuse  Since Community server version 4.2.1 and Pro server 4.2.0, the script supports standard mount options for FUSE. For example, you can specify ownership for the mounted folder:  ./seaf-fuse.sh start -o uid= uid  /data/seafile-fuse  You can find the complete list of supported options in  man fuse .", 
            "title": "Start seaf-fuse with the script"
        }, 
        {
            "location": "/extension/fuse/#stop-seaf-fuse", 
            "text": "./seaf-fuse.sh stop", 
            "title": "Stop seaf-fuse"
        }, 
        {
            "location": "/extension/fuse/#contents-of-the-mounted-folder", 
            "text": "", 
            "title": "Contents of the mounted folder"
        }, 
        {
            "location": "/extension/fuse/#the-top-level-folder", 
            "text": "Now you can list the content of  /data/seafile-fuse .  \n$ ls -lhp /data/seafile-fuse\n\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 abc@abc.com/\ndrwxr-xr-x 2 root root 4.0K Jan  4  2015 foo@foo.com/\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 plus@plus.com/\ndrwxr-xr-x 2 root root 4.0K Jan  1  2015 sharp@sharp.com/\ndrwxr-xr-x 2 root root 4.0K Jan  3  2015 test@test.com/   The top level folder contains many subfolders, each of which corresponds to a user", 
            "title": "The top level folder"
        }, 
        {
            "location": "/extension/fuse/#the-folder-for-each-user", 
            "text": "$ ls -lhp /data/seafile-fuse/abc@abc.com\n\ndrwxr-xr-x 2 root root  924 Jan  1  1970 5403ac56-5552-4e31-a4f1-1de4eb889a5f_Photos/\ndrwxr-xr-x 2 root root 1.6K Jan  1  1970 a09ab9fc-7bd0-49f1-929d-6abeb8491397_My Notes/  From the above list you can see, under the folder of a user there are subfolders, each of which represents a library of that user, and has a name of this format: '''{library_id}-{library-name}'''.", 
            "title": "The folder for each user"
        }, 
        {
            "location": "/extension/fuse/#the-folder-for-a-library", 
            "text": "$ ls -lhp /data/seafile-fuse/abc@abc.com/5403ac56-5552-4e31-a4f1-1de4eb889a5f_Photos/\n\n-rw-r--r-- 1 root root 501K Jan  1  2015 image.png\n-rw-r--r-- 1 root root 501K Jan  1  2015 sample.jpng", 
            "title": "The folder for a library"
        }, 
        {
            "location": "/extension/fuse/#if-you-get-a-permission-denied-error", 
            "text": "If you get an error message saying \"Permission denied\" when running  ./seaf-fuse.sh start , most likely you are not in the \"fuse group\". You should:    Add yourself to the fuse group \nsudo usermod -a -G fuse      Logout your shell and login again   Now try  ./seaf-fuse.sh start  path again.", 
            "title": "If you get a \"Permission denied\" error"
        }, 
        {
            "location": "/security/README/", 
            "text": "Security and auditing\n\n\nSecurity features\n\n\n\n\nSecurity features\n\n\n\n\nAccess log and auditing\n\n\n\n\nAccess log and auditing", 
            "title": "README"
        }, 
        {
            "location": "/security/README/#security-and-auditing", 
            "text": "", 
            "title": "Security and auditing"
        }, 
        {
            "location": "/security/README/#security-features", 
            "text": "Security features", 
            "title": "Security features"
        }, 
        {
            "location": "/security/README/#access-log-and-auditing", 
            "text": "Access log and auditing", 
            "title": "Access log and auditing"
        }, 
        {
            "location": "/security/security_features/", 
            "text": "Security Questions\n\n\nHow is the connection between client and server encrypted?\n\n\nBefore version 4.0, Seafile only supports syncing via a self-designed protocol. Every seafile desktop client has a unique private key. When a client and a server connect, they will exchange public key and negotiate a session key. The session key is derived from cryptographically secure random number with PDKDF2 algorithm. And it's exchanged between the client and the server with RSA encryption. This session key will be used to encrypt the data transfer with AES-256/CBC algorithm. \n\n\nFrom version 4.0, Seafile supports syncing via HTTP(S) protocol, which is a more standard approach.\n\n\nFrom version 4.1, Seafile uses HTTP(S) syncing protocol by default.\n\n\nEncrypted Library\n\n\nSeafile provides a feature called encrypted library to protect your privacy. The file encryption/decryption is performed in the client-side when using the desktop client for file syncing. The password of an encrypted library is not stored in the server. \nEven the system admin of the server can't view the file contents - they can however view the metadata \nwhich are currently not encrypted\n.\n The metadata includes: the complete list of directory and file names, every file size, the history of who changed each file, when, and what byte ranges were altered.\n\n\nCAUTION: The client side encryption is not work currently for web browser and the cloud file browser of the desktop client. When you browsing encrypted libraries via the web browser and the cloud file browser, you will need to input the password. And the server will use the password to decrypt the \"file key\" for the library (see description below) and cache it in memory for 1 hour. The plain text password is never stored or cached on the server.\n\n\nUpdate: The client side encryption works on iOS client since version 2.1.6. The Android client doesn't support client side encryption yet. \n\n\nHow does an encrypted library work?\n\n\nWhen you create an encrypted library, you'll provide a password for it. All the data in that library will be encrypted with the password before uploading to the server.\n\n\nThe encryption procedure is:\n\n\n\n\nGenerate a 32-byte long cryptographically strong random number. This will be used as the file encryption key (\"file key\").\n\n\nEncrypt the file key with the user provided password. We first use PBKDF2 algorithm (1000 iteratioins of SHA256) to derive a key/iv pair from the password, then use AES 256/CBC to encrypt the file key. The result is called the \"encrypted file key\". This encrypted file key will be sent to and stored on the server. When you need to access the data, you can decrypt the file key from the encrypted file key.\n\n\nAll file data is encrypted by the file key with AES 256/CBC. We use PBKDF2 algorithm (1000 iterations of SHA256) to derive key/iv pair from the file key. After encryption, the data is uploaded to the server.\n\n\n\n\nThe above encryption procedure can be executed on the desktop and the mobile client. The Seahub browser client uses a different encryption procedure that happens at the server. Because of this your password will be transferred to the server.\n\n\nWhen you sync an encrypted library to the desktop, the client needs to verify your password. When you create the library, a \"magic token\" is derived from the password and library id. This token is stored with the library on the server side. The client use this token to check whether your password is correct before you sync the library. The magic token is generated by PBKDF2 algorithm with 1000 iterations of SHA256 hash.\n\n\nFor maximum security, the plain-text password won't be saved on the client side too. The client only saves the key/iv pair derived from the \"file key\", which is used to decrypt the data. So if you forget the password, you won't be able to recover it or access your data on the server.\n\n\nWhy fileserver delivers every content to everybody knowing the content URL of an unshared private file?\n\n\nWhen a file download link is clicked, a random URL is generated for user to access the file from fileserver. This url can only be access for once. After that, all access will be denied to the url. So even someone else happens to know about the url, he/she can't access it any more.\n\n\nHow does Seafile store user login password?\n\n\nUser login passwords are stored in hash form only. Note that user login password is different from the passwords used in encrypted libraries. In the database, it's format is\n\n\nPBKDF2SHA256$iterations$salt$hash\n\n\n\n\nThe record is divided into 4 parts by the $ sign.\n\n\n\n\nThe first part is the hash algorithm used. Currently we use PBKDF2 with SHA256. It can be changed to even stronger algorithm if needed.\n\n\nThe second part is the number of iterations of the hash algorithm\n\n\nThe third part is the random salt used for generating the hash\n\n\nThe fourth part is the final hash generated from the password\n\n\n\n\nThe calculate the hash,\n\n\n\n\nFirst, generate a 32-byte long cryptographically strong random number, use it as the salt.\n\n\nCalculate the hash with \nPBKDF2(password, salt, iterations)\n. The number of iterations is currently 10000.", 
            "title": "Security features"
        }, 
        {
            "location": "/security/security_features/#security-questions", 
            "text": "", 
            "title": "Security Questions"
        }, 
        {
            "location": "/security/security_features/#how-is-the-connection-between-client-and-server-encrypted", 
            "text": "Before version 4.0, Seafile only supports syncing via a self-designed protocol. Every seafile desktop client has a unique private key. When a client and a server connect, they will exchange public key and negotiate a session key. The session key is derived from cryptographically secure random number with PDKDF2 algorithm. And it's exchanged between the client and the server with RSA encryption. This session key will be used to encrypt the data transfer with AES-256/CBC algorithm.   From version 4.0, Seafile supports syncing via HTTP(S) protocol, which is a more standard approach.  From version 4.1, Seafile uses HTTP(S) syncing protocol by default.", 
            "title": "How is the connection between client and server encrypted?"
        }, 
        {
            "location": "/security/security_features/#encrypted-library", 
            "text": "Seafile provides a feature called encrypted library to protect your privacy. The file encryption/decryption is performed in the client-side when using the desktop client for file syncing. The password of an encrypted library is not stored in the server.  Even the system admin of the server can't view the file contents - they can however view the metadata  which are currently not encrypted .  The metadata includes: the complete list of directory and file names, every file size, the history of who changed each file, when, and what byte ranges were altered.  CAUTION: The client side encryption is not work currently for web browser and the cloud file browser of the desktop client. When you browsing encrypted libraries via the web browser and the cloud file browser, you will need to input the password. And the server will use the password to decrypt the \"file key\" for the library (see description below) and cache it in memory for 1 hour. The plain text password is never stored or cached on the server.  Update: The client side encryption works on iOS client since version 2.1.6. The Android client doesn't support client side encryption yet.", 
            "title": "Encrypted Library"
        }, 
        {
            "location": "/security/security_features/#how-does-an-encrypted-library-work", 
            "text": "When you create an encrypted library, you'll provide a password for it. All the data in that library will be encrypted with the password before uploading to the server.  The encryption procedure is:   Generate a 32-byte long cryptographically strong random number. This will be used as the file encryption key (\"file key\").  Encrypt the file key with the user provided password. We first use PBKDF2 algorithm (1000 iteratioins of SHA256) to derive a key/iv pair from the password, then use AES 256/CBC to encrypt the file key. The result is called the \"encrypted file key\". This encrypted file key will be sent to and stored on the server. When you need to access the data, you can decrypt the file key from the encrypted file key.  All file data is encrypted by the file key with AES 256/CBC. We use PBKDF2 algorithm (1000 iterations of SHA256) to derive key/iv pair from the file key. After encryption, the data is uploaded to the server.   The above encryption procedure can be executed on the desktop and the mobile client. The Seahub browser client uses a different encryption procedure that happens at the server. Because of this your password will be transferred to the server.  When you sync an encrypted library to the desktop, the client needs to verify your password. When you create the library, a \"magic token\" is derived from the password and library id. This token is stored with the library on the server side. The client use this token to check whether your password is correct before you sync the library. The magic token is generated by PBKDF2 algorithm with 1000 iterations of SHA256 hash.  For maximum security, the plain-text password won't be saved on the client side too. The client only saves the key/iv pair derived from the \"file key\", which is used to decrypt the data. So if you forget the password, you won't be able to recover it or access your data on the server.", 
            "title": "How does an encrypted library work?"
        }, 
        {
            "location": "/security/security_features/#why-fileserver-delivers-every-content-to-everybody-knowing-the-content-url-of-an-unshared-private-file", 
            "text": "When a file download link is clicked, a random URL is generated for user to access the file from fileserver. This url can only be access for once. After that, all access will be denied to the url. So even someone else happens to know about the url, he/she can't access it any more.", 
            "title": "Why fileserver delivers every content to everybody knowing the content URL of an unshared private file?"
        }, 
        {
            "location": "/security/security_features/#how-does-seafile-store-user-login-password", 
            "text": "User login passwords are stored in hash form only. Note that user login password is different from the passwords used in encrypted libraries. In the database, it's format is  PBKDF2SHA256$iterations$salt$hash  The record is divided into 4 parts by the $ sign.   The first part is the hash algorithm used. Currently we use PBKDF2 with SHA256. It can be changed to even stronger algorithm if needed.  The second part is the number of iterations of the hash algorithm  The third part is the random salt used for generating the hash  The fourth part is the final hash generated from the password   The calculate the hash,   First, generate a 32-byte long cryptographically strong random number, use it as the salt.  Calculate the hash with  PBKDF2(password, salt, iterations) . The number of iterations is currently 10000.", 
            "title": "How does Seafile store user login password?"
        }, 
        {
            "location": "/security/auditing/", 
            "text": "Access log and auditing\n\n\nIn pro edition, Seafile offers four auditing logs in system admin panel:\n\n\n\n\nLogin log\n\n\nFile access log\n\n\nFile update log\n\n\nPermission change log\n\n\n\n\n\n\nThe logging feature is turned off by default. See \nconfig options for pro edition\n for how to turn it on.", 
            "title": "Access logs and auditing"
        }, 
        {
            "location": "/security/auditing/#access-log-and-auditing", 
            "text": "In pro edition, Seafile offers four auditing logs in system admin panel:   Login log  File access log  File update log  Permission change log    The logging feature is turned off by default. See  config options for pro edition  for how to turn it on.", 
            "title": "Access log and auditing"
        }, 
        {
            "location": "/develop/README/", 
            "text": "Develop Documents\n\n\n\n\n\n\nHow to Build Seafile\n\n\n\n\n\n\nHow to Setup Develop Envirnoment\n\n\n\n\n\n\nSeafile Code Standard\n\n\n\n\n\n\nSeafile Open API\n\n\n\n\nSeafile Web API\n\n\nSeafile Python API\n\n\nSeafile PHP API\n\n\n\n\nSeafile Implement Detail\n\n\n\n\nSeafile Data Model\n\n\nSeafile Server Components\n\n\nSeafile Sync algorithm", 
            "title": "README"
        }, 
        {
            "location": "/develop/README/#develop-documents", 
            "text": "How to Build Seafile    How to Setup Develop Envirnoment    Seafile Code Standard    Seafile Open API   Seafile Web API  Seafile Python API  Seafile PHP API   Seafile Implement Detail   Seafile Data Model  Seafile Server Components  Seafile Sync algorithm", 
            "title": "Develop Documents"
        }, 
        {
            "location": "/build_seafile/README/", 
            "text": "How to Build Seafile\n\n\nYou can build Seafile from our source code package or from the Github repo directly.\n\n\nClient\n\n\n\n\nLinux\n\n\nMax OS X\n\n\n\n\nServer\n\n\n\n\nBuild Seafile server", 
            "title": "README"
        }, 
        {
            "location": "/build_seafile/README/#how-to-build-seafile", 
            "text": "You can build Seafile from our source code package or from the Github repo directly.  Client   Linux  Max OS X   Server   Build Seafile server", 
            "title": "How to Build Seafile"
        }, 
        {
            "location": "/build_seafile/linux/", 
            "text": "Linux\n\n\nPreparation\n\n\nThe following list is what you need to install on your development machine. \nYou should install all of them before you build seafile\n.\n\n\nPackage names are according to Ubuntu 14.04. For other Linux distros, please find their corresponding names yourself.\n\n\n\n\nautoconf/automake/libtool\n\n\nlibevent-dev ( 2.0 or later )\n\n\nlibcurl4-openssl-dev  (1.0.0 or later)\n\n\nlibgtk2.0-dev ( 2.24 or later)\n\n\nuuid-dev\n\n\nintltool (0.40 or later)\n\n\nlibsqlite3-dev (3.7 or later)\n\n\nvalac  (only needed if you build from git repo)\n\n\nlibjansson-dev\n\n\nqtchooser\n\n\nqtbase5-dev\n\n\nlibqt5webkit5-dev\n\n\nqttools5-dev\n\n\nqttools5-dev-tools\n\n\nvalac\n\n\ncmake\n\n\npython-simplejson (for seaf-cli)\n\n\n\n\nsudo apt-get install autoconf automake libtool libevent-dev libcurl4-openssl-dev libgtk2.0-dev uuid-dev intltool libsqlite3-dev valac libjansson-dev cmake qtchooser qtbase5-dev libqt5webkit5-dev qttools5-dev qttools5-dev-tools\n\n\n\n\nFor a fresh Fedora 20 installation, the following will install all dependencies via YUM:\n\n\n$ sudo yum install wget gcc libevent-devel openssl-devel gtk2-devel libuuid-devel sqlite-devel jansson-devel intltool cmake libtool vala gcc-c++ qt5-qtbase-devel qt5-qttools-devel qt5-qtwebkit-devel\n\n\n\n\nBuilding\n\n\nFirst you should get the latest source of libsearpc/ccnet/seafile/seafile-client:\n\n\nDownload the source tarball of the latest tag from\n\n\n\n\nhttps://github.com/haiwen/libsearpc/tags (use v3.0-latest)\n\n\nhttps://github.com/haiwen/ccnet/tags\n\n\nhttps://github.com/haiwen/seafile/tags\n\n\nhttps://github.com/haiwen/seafile-client/tags\n\n\n\n\nFor example, if the latest released seafile client is 5.0.7, then just use the \nv5.0.7\n tags of the four projects. You should get four tarballs:\n\n\n\n\nlibsearpc-v3.0-latest.tar.gz\n\n\nccnet-5.0.7.tar.gz\n\n\nseafile-5.0.7.tar.gz\n\n\nseafile-client-5.0.7.tar.gz\n\n\n\n\nexport version=5.0.7\nalias wget='wget --content-disposition -nc'\nwget https://github.com/haiwen/libsearpc/archive/v3.0-latest.tar.gz\nwget https://github.com/haiwen/ccnet/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile-client/archive/v${version}.tar.gz\n\n\n\n\nNow uncompress them:\n\n\ntar xf libsearpc-3.0-latest.tar.gz\ntar xf ccnet-${version}.tar.gz\ntar xf seafile-${version}.tar.gz\ntar xf seafile-client-${version}.tar.gz\n\n\n\n\nTo build Seafile client, you need first build \nlibsearpc\n and \nccnet\n, \nseafile\n.\n\n\nset paths\n\n\nexport PREFIX=/usr\nexport PKG_CONFIG_PATH=\n$PREFIX/lib/pkgconfig:$PKG_CONFIG_PATH\n\nexport PATH=\n$PREFIX/bin:$PATH\n\n\n\n\n\nlibsearpc\n\n\ncd libsearpc-3.0-latest\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\ncd ..\n\n\n\n\nccnet\n\n\ncd ccnet-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\ncd ..\n\n\n\n\nseafile\n\n\ncd seafile-${version}/\n./autogen.sh\n./configure --prefix=$PREFIX --disable-fuse\nmake\nsudo make install\ncd ..\n\n\n\n\nseafile-client\n\n\ncd seafile-client-${version}\ncmake -DUSE_QT5=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$PREFIX .\nmake\nsudo make install\ncd ..\n\n\n\n\ncustom prefix\n\n\nwhen installing to a custom \n$PREFIX\n, i.e. \n/opt\n, you may need a script to set the path variables correctly\n\n\ncat \n$PREFIX/bin/seafile-applet.sh \nEND\n#!/bin/bash\nexport LD_LIBRARY_PATH=\n$PREFIX/lib:$LD_LIBRARY_PATH\n\nexport PATH=\n$PREFIX/bin:$PATH\n\nexec seafile-applet $@\nEND\ncat \n$PREFIX/bin/seaf-cli.sh \nEND\nexport LD_LIBRARY_PATH=\n$PREFIX/lib:$LD_LIBRARY_PATH\n\nexport PATH=\n$PREFIX/bin:$PATH\n\nexport PYTHONPATH=$PREFIX/lib/python2.7/site-packages\nexec seaf-cli $@\nEND\nchmod +x $PREFIX/bin/seafile-applet.sh $PREFIX/bin/seaf-cli.sh\n\n\n\n\nyou can now start the client with \n$PREFIX/bin/seafile-applet.sh\n.", 
            "title": "Linux"
        }, 
        {
            "location": "/build_seafile/linux/#linux", 
            "text": "", 
            "title": "Linux"
        }, 
        {
            "location": "/build_seafile/linux/#preparation", 
            "text": "The following list is what you need to install on your development machine.  You should install all of them before you build seafile .  Package names are according to Ubuntu 14.04. For other Linux distros, please find their corresponding names yourself.   autoconf/automake/libtool  libevent-dev ( 2.0 or later )  libcurl4-openssl-dev  (1.0.0 or later)  libgtk2.0-dev ( 2.24 or later)  uuid-dev  intltool (0.40 or later)  libsqlite3-dev (3.7 or later)  valac  (only needed if you build from git repo)  libjansson-dev  qtchooser  qtbase5-dev  libqt5webkit5-dev  qttools5-dev  qttools5-dev-tools  valac  cmake  python-simplejson (for seaf-cli)   sudo apt-get install autoconf automake libtool libevent-dev libcurl4-openssl-dev libgtk2.0-dev uuid-dev intltool libsqlite3-dev valac libjansson-dev cmake qtchooser qtbase5-dev libqt5webkit5-dev qttools5-dev qttools5-dev-tools  For a fresh Fedora 20 installation, the following will install all dependencies via YUM:  $ sudo yum install wget gcc libevent-devel openssl-devel gtk2-devel libuuid-devel sqlite-devel jansson-devel intltool cmake libtool vala gcc-c++ qt5-qtbase-devel qt5-qttools-devel qt5-qtwebkit-devel", 
            "title": "Preparation"
        }, 
        {
            "location": "/build_seafile/linux/#building", 
            "text": "First you should get the latest source of libsearpc/ccnet/seafile/seafile-client:  Download the source tarball of the latest tag from   https://github.com/haiwen/libsearpc/tags (use v3.0-latest)  https://github.com/haiwen/ccnet/tags  https://github.com/haiwen/seafile/tags  https://github.com/haiwen/seafile-client/tags   For example, if the latest released seafile client is 5.0.7, then just use the  v5.0.7  tags of the four projects. You should get four tarballs:   libsearpc-v3.0-latest.tar.gz  ccnet-5.0.7.tar.gz  seafile-5.0.7.tar.gz  seafile-client-5.0.7.tar.gz   export version=5.0.7\nalias wget='wget --content-disposition -nc'\nwget https://github.com/haiwen/libsearpc/archive/v3.0-latest.tar.gz\nwget https://github.com/haiwen/ccnet/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile-client/archive/v${version}.tar.gz  Now uncompress them:  tar xf libsearpc-3.0-latest.tar.gz\ntar xf ccnet-${version}.tar.gz\ntar xf seafile-${version}.tar.gz\ntar xf seafile-client-${version}.tar.gz  To build Seafile client, you need first build  libsearpc  and  ccnet ,  seafile .", 
            "title": "Building"
        }, 
        {
            "location": "/build_seafile/linux/#set-paths", 
            "text": "export PREFIX=/usr\nexport PKG_CONFIG_PATH= $PREFIX/lib/pkgconfig:$PKG_CONFIG_PATH \nexport PATH= $PREFIX/bin:$PATH", 
            "title": "set paths"
        }, 
        {
            "location": "/build_seafile/linux/#libsearpc", 
            "text": "cd libsearpc-3.0-latest\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\ncd ..", 
            "title": "libsearpc"
        }, 
        {
            "location": "/build_seafile/linux/#ccnet", 
            "text": "cd ccnet-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\ncd ..", 
            "title": "ccnet"
        }, 
        {
            "location": "/build_seafile/linux/#seafile", 
            "text": "cd seafile-${version}/\n./autogen.sh\n./configure --prefix=$PREFIX --disable-fuse\nmake\nsudo make install\ncd ..", 
            "title": "seafile"
        }, 
        {
            "location": "/build_seafile/linux/#seafile-client", 
            "text": "cd seafile-client-${version}\ncmake -DUSE_QT5=ON -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$PREFIX .\nmake\nsudo make install\ncd ..", 
            "title": "seafile-client"
        }, 
        {
            "location": "/build_seafile/linux/#custom-prefix", 
            "text": "when installing to a custom  $PREFIX , i.e.  /opt , you may need a script to set the path variables correctly  cat  $PREFIX/bin/seafile-applet.sh  END\n#!/bin/bash\nexport LD_LIBRARY_PATH= $PREFIX/lib:$LD_LIBRARY_PATH \nexport PATH= $PREFIX/bin:$PATH \nexec seafile-applet $@\nEND\ncat  $PREFIX/bin/seaf-cli.sh  END\nexport LD_LIBRARY_PATH= $PREFIX/lib:$LD_LIBRARY_PATH \nexport PATH= $PREFIX/bin:$PATH \nexport PYTHONPATH=$PREFIX/lib/python2.7/site-packages\nexec seaf-cli $@\nEND\nchmod +x $PREFIX/bin/seafile-applet.sh $PREFIX/bin/seaf-cli.sh  you can now start the client with  $PREFIX/bin/seafile-applet.sh .", 
            "title": "custom prefix"
        }, 
        {
            "location": "/build_seafile/freebsd/", 
            "text": "FreeBSD\n\n\nPreparation\n\n\nsupport for FreeBSD\n is still under construction.\n\n\nThe following list is what you need to install on your development machine. \nYou should install all of them before you build seafile\n.\n\n\nPackage names are according to FreeBSD Ports. You might install your ports manually or via \npkgng\n.\n\n\n\n\ndevel/autoconf\n\n\ndevel/automake\n\n\ntextproc/intltool\n\n\ntextproc/gsed\n\n\ndevel/libtool\n\n\ndevel/libevent2\n\n\nftp/curl\n\n\ndevel/glib20\n\n\nmisc/ossp-uuid\n\n\ndatabases/sqlite3\n\n\ndevel/jansson\n\n\nlang/vala\n\n\ndevel/cmake\n\n\narchivers/libarchive\n\n\ndevel/py-simplejson (removed in furture release)\n\n\n\n\nGUI\n* devel/qt4\n\n\n#portmaster devel/autoconf devel/automake textproc/intltool textproc/gsed \\\ndevel/libtool devel/libevent2 ftp/curl devel/glib20 misc/ossp-uuid databases/sqlite3 \\\ndevel/jansson lang/vala devel/cmake devel/py-simplejson archivers/libarchive\n\n\n\n\nFor a fresh PkgNG users,\n\n\n#pkg install autoconf automake intltool gsed libtool libevent2 curl \\\n  glib20 ossp-uuid sqlite3 jansson vala cmake py-simplejson libarchive\n\n\n\n\nBuilding\n\n\nFirst you should get the latest source of libsearpc/ccnet/seafile/seafile-client:\n\n\nDownload the source tarball of the latest tag from\n\n\n\n\nhttps://github.com/haiwen/libsearpc/tags (use v3.0-latest)\n\n\nhttps://github.com/haiwen/ccnet/tags\n\n\nhttps://github.com/haiwen/seafile/tags\n\n\nhttps://github.com/haiwen/seafile-client/tags\n\n\n\n\nFor example, if the latest released seafile client is 3.1.0, then just use the \nv3.1.0\n tags of the four projects. You should get four tarballs:\n\n\n\n\nlibsearpc-v3.0-latest.tar.gz\n\n\nccnet-3.1.0.tar.gz\n\n\nseafile-3.1.0.tar.gz\n\n\nseafile-client-3.1.0.tar.gz\n\n\n\n\nexport version=3.1.0\nalias wget='wget --content-disposition -nc'\nwget https://github.com/haiwen/libsearpc/archive/v3.0-latest.tar.gz\nwget https://github.com/haiwen/ccnet/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile-client/archive/v${version}.tar.gz\n\n\n\n\nNow uncompress them:\n\n\ntar xf libsearpc-v3.0-latest.tar.gz\ntar xf ccnet-${version}.tar.gz\ntar xf seafile-${version}.tar.gz\ntar xf seafile-client-${version}.tar.gz\n\n\n\n\nTo build Seafile client, you need first build \nlibsearpc\n and \nccnet\n, \nseafile\n.\n\n\nset paths\n\n\nln -sfh ../libdata/pkgconfig /usr/local/lib/pkgconfig\n\n\n\n\nlibsearpc\n\n\ncd libsearpc-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\n\n\n\n\nccnet\n\n\nexport CFLAGS=\n-I/usr/local/include/ossp/uuid -I/usr/local/include/event2\n\nexport LDFLAGS=\n-L/usr/local/lib -L/usr/local/lib/event2\n\ncd ccnet-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\n\n\n\n\nseafile\n\n\ncd seafile-${version}/\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install\n\n\n\n\nseafile-client\n\n\ncd seafile-client-${version}\ncmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$PREFIX .\nmake\nsudo make install\n\n\n\n\ncustom prefix\n\n\nwhen installing to a custom \n$PREFIX\n, i.e. \n/opt\n, you may need a script to set the path variables correctly\n\n\ncat \n$PREFIX/bin/seafile-applet.sh \nEND\n#!/bin/bash\nexec seafile-applet $@\nEND\ncat \n$PREFIX/bin/seaf-cli.sh \nEND\nexport PYTHONPATH=/usr/local/lib/python2.7/site-packages\nexec seaf-cli $@\nEND\nchmod +x $PREFIX/bin/seafile-applet.sh $PREFIX/bin/seaf-cli.sh\n\n\n\n\nyou can now start the client with \n$PREFIX/bin/seafile-applet.sh\n.", 
            "title": "FreeBSD"
        }, 
        {
            "location": "/build_seafile/freebsd/#freebsd", 
            "text": "", 
            "title": "FreeBSD"
        }, 
        {
            "location": "/build_seafile/freebsd/#preparation", 
            "text": "support for FreeBSD  is still under construction.  The following list is what you need to install on your development machine.  You should install all of them before you build seafile .  Package names are according to FreeBSD Ports. You might install your ports manually or via  pkgng .   devel/autoconf  devel/automake  textproc/intltool  textproc/gsed  devel/libtool  devel/libevent2  ftp/curl  devel/glib20  misc/ossp-uuid  databases/sqlite3  devel/jansson  lang/vala  devel/cmake  archivers/libarchive  devel/py-simplejson (removed in furture release)   GUI\n* devel/qt4  #portmaster devel/autoconf devel/automake textproc/intltool textproc/gsed \\\ndevel/libtool devel/libevent2 ftp/curl devel/glib20 misc/ossp-uuid databases/sqlite3 \\\ndevel/jansson lang/vala devel/cmake devel/py-simplejson archivers/libarchive  For a fresh PkgNG users,  #pkg install autoconf automake intltool gsed libtool libevent2 curl \\\n  glib20 ossp-uuid sqlite3 jansson vala cmake py-simplejson libarchive", 
            "title": "Preparation"
        }, 
        {
            "location": "/build_seafile/freebsd/#building", 
            "text": "First you should get the latest source of libsearpc/ccnet/seafile/seafile-client:  Download the source tarball of the latest tag from   https://github.com/haiwen/libsearpc/tags (use v3.0-latest)  https://github.com/haiwen/ccnet/tags  https://github.com/haiwen/seafile/tags  https://github.com/haiwen/seafile-client/tags   For example, if the latest released seafile client is 3.1.0, then just use the  v3.1.0  tags of the four projects. You should get four tarballs:   libsearpc-v3.0-latest.tar.gz  ccnet-3.1.0.tar.gz  seafile-3.1.0.tar.gz  seafile-client-3.1.0.tar.gz   export version=3.1.0\nalias wget='wget --content-disposition -nc'\nwget https://github.com/haiwen/libsearpc/archive/v3.0-latest.tar.gz\nwget https://github.com/haiwen/ccnet/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile/archive/v${version}.tar.gz\nwget https://github.com/haiwen/seafile-client/archive/v${version}.tar.gz  Now uncompress them:  tar xf libsearpc-v3.0-latest.tar.gz\ntar xf ccnet-${version}.tar.gz\ntar xf seafile-${version}.tar.gz\ntar xf seafile-client-${version}.tar.gz  To build Seafile client, you need first build  libsearpc  and  ccnet ,  seafile .", 
            "title": "Building"
        }, 
        {
            "location": "/build_seafile/freebsd/#set-paths", 
            "text": "ln -sfh ../libdata/pkgconfig /usr/local/lib/pkgconfig", 
            "title": "set paths"
        }, 
        {
            "location": "/build_seafile/freebsd/#libsearpc", 
            "text": "cd libsearpc-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install", 
            "title": "libsearpc"
        }, 
        {
            "location": "/build_seafile/freebsd/#ccnet", 
            "text": "export CFLAGS= -I/usr/local/include/ossp/uuid -I/usr/local/include/event2 \nexport LDFLAGS= -L/usr/local/lib -L/usr/local/lib/event2 \ncd ccnet-${version}\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install", 
            "title": "ccnet"
        }, 
        {
            "location": "/build_seafile/freebsd/#seafile", 
            "text": "cd seafile-${version}/\n./autogen.sh\n./configure --prefix=$PREFIX\nmake\nsudo make install", 
            "title": "seafile"
        }, 
        {
            "location": "/build_seafile/freebsd/#seafile-client", 
            "text": "cd seafile-client-${version}\ncmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=$PREFIX .\nmake\nsudo make install", 
            "title": "seafile-client"
        }, 
        {
            "location": "/build_seafile/freebsd/#custom-prefix", 
            "text": "when installing to a custom  $PREFIX , i.e.  /opt , you may need a script to set the path variables correctly  cat  $PREFIX/bin/seafile-applet.sh  END\n#!/bin/bash\nexec seafile-applet $@\nEND\ncat  $PREFIX/bin/seaf-cli.sh  END\nexport PYTHONPATH=/usr/local/lib/python2.7/site-packages\nexec seaf-cli $@\nEND\nchmod +x $PREFIX/bin/seafile-applet.sh $PREFIX/bin/seaf-cli.sh  you can now start the client with  $PREFIX/bin/seafile-applet.sh .", 
            "title": "custom prefix"
        }, 
        {
            "location": "/build_seafile/windows/", 
            "text": "Windows", 
            "title": "Windows"
        }, 
        {
            "location": "/build_seafile/windows/#windows", 
            "text": "", 
            "title": "Windows"
        }, 
        {
            "location": "/build_seafile/osx/", 
            "text": "Mac OS X\n\n\nOption 1: Homebrew (conflicting with macports)\n\n\nSetup homebrew environment\n\n\n\n\n\n\nInstall xcode\n\n\n\n\n\n\nDownload Xcode from \nwebsite\n or \nApp Store\n\n\n\n\n\n\nXcode Command Line Utilities might be enough to build seafile, but it is left untested yet.\n\n\n\n\n\n\nInstall homebrew\n\n\n\n\n\n\nExecute this from Terminal\n  \n`ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n\n\n\nMake sure you have a clean homebrew environment. You can double-check it by \nbrew doctor\n\n\n\n\n\n\nvisit http://brew.sh/ for more\n\n\n\n\nThen install seafile from homebrew\n  \nbrew tap Chilledheart/seafile\n  brew install seafile-client\n\n\nIf you face any installation issue, please report it with your homebrew logs\n- \nHomebrew Troubleshooting\n\n\nIf it is an issue while using homebrewed seafile, please report it with your seafile logs\n- \nSeafile FAQ\n\n\nOption 2: Macports (conflicting with homebrew)\n\n\nSetup macports environment\n\n\n\n\nInstall xcode\n\n\n\n\nDownload Xcode from \nwebsite\n or \nApp Store\n\n\n\n\n\n\nInstall macports\n\n\n\n\n\n\nQuick start https://www.macports.org/install.php\n\n\n\n\n\n\n\n\nvisit https://www.macports.org/ for more\n\n\n\n\n\n\n\n\nInstall following libraries and tools using \nport\n\n\nsudo port install autoconf automake pkgconfig libtool glib2 \\\nlibevent vala openssl git qt4-mac jansson\n\n\n\n\n\n\n\nInstall python\n\n\nsudo port install python27\nsudo port select --set python python27\n\nsudo port install py27-pip\nsudo port select --set pip pip27\n\n\n\n\n\n\n\nSet pkg config environment\n\n\nexport PKG_CONFIG_PATH=/opt/local/lib/pkgconfig:/usr/local/lib/pkgconfig\nexport LIBTOOL=glibtool\nexport LIBTOOLIZE=glibtoolize\nexport CPPFLAGS=\"-I/opt/local/include\"\nexport LDFLAGS=\"-L/opt/local/lib -L/usr/local/lib -Wl,-headerpad_max_install_names\"\n\n\n\n\n\n\n\nCompiling libsearpc\n\n\nDownload \nlibsearpc\n, then:\n\n\n    ./autogen.sh\n    ./configure\n    make\n    sudo make install\n\n\n\nCompiling ccnet\n\n\nDownload \nccnet\n, then:\n\n\n    ./autogen.sh\n    ./configure\n    make\n    sudo make install\n\n\n\nCompiling seafile\n\n\n\n\nDownload \nseafile\n\n\nCompile\n./autogen.sh\n./configure --disable-fuse\nmake\nsudo make install\n\n\n\n\n\n\n\nCompiling seafile-client and packaging it\n\n\n\n\n\n\nexecute the building script:\n\n\n./scripts/build.py\n\n\n\n\n\n\n\nGo to Release directory and see if \nseafile-applet.app\n can run correctly.\n\n\n\n\n\n\nProblem you may encounter\n\n\n\n\nIf \ninstall_name_tool\n reports \"malformed object\" \"unknown load command\", It may be the version of xcode command line tools incompatible with \ninstall_name_tool\n.\n\n\nIf xcode can't find glib, Corrects xcode's \"build settings/search paths/header search\".", 
            "title": "Mac OS X"
        }, 
        {
            "location": "/build_seafile/osx/#mac-os-x", 
            "text": "", 
            "title": "Mac OS X"
        }, 
        {
            "location": "/build_seafile/osx/#option-1-homebrew-conflicting-with-macports", 
            "text": "", 
            "title": "Option 1: Homebrew (conflicting with macports)"
        }, 
        {
            "location": "/build_seafile/osx/#setup-homebrew-environment", 
            "text": "Install xcode    Download Xcode from  website  or  App Store    Xcode Command Line Utilities might be enough to build seafile, but it is left untested yet.    Install homebrew    Execute this from Terminal\n   `ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"   Make sure you have a clean homebrew environment. You can double-check it by  brew doctor    visit http://brew.sh/ for more   Then install seafile from homebrew\n   brew tap Chilledheart/seafile\n  brew install seafile-client  If you face any installation issue, please report it with your homebrew logs\n-  Homebrew Troubleshooting  If it is an issue while using homebrewed seafile, please report it with your seafile logs\n-  Seafile FAQ", 
            "title": "Setup homebrew environment"
        }, 
        {
            "location": "/build_seafile/osx/#option-2-macports-conflicting-with-homebrew", 
            "text": "", 
            "title": "Option 2: Macports (conflicting with homebrew)"
        }, 
        {
            "location": "/build_seafile/osx/#setup-macports-environment", 
            "text": "Install xcode   Download Xcode from  website  or  App Store    Install macports    Quick start https://www.macports.org/install.php     visit https://www.macports.org/ for more     Install following libraries and tools using  port  sudo port install autoconf automake pkgconfig libtool glib2 \\\nlibevent vala openssl git qt4-mac jansson    Install python  sudo port install python27\nsudo port select --set python python27\n\nsudo port install py27-pip\nsudo port select --set pip pip27    Set pkg config environment  export PKG_CONFIG_PATH=/opt/local/lib/pkgconfig:/usr/local/lib/pkgconfig\nexport LIBTOOL=glibtool\nexport LIBTOOLIZE=glibtoolize\nexport CPPFLAGS=\"-I/opt/local/include\"\nexport LDFLAGS=\"-L/opt/local/lib -L/usr/local/lib -Wl,-headerpad_max_install_names\"", 
            "title": "Setup macports environment"
        }, 
        {
            "location": "/build_seafile/osx/#compiling-libsearpc", 
            "text": "Download  libsearpc , then:      ./autogen.sh\n    ./configure\n    make\n    sudo make install", 
            "title": "Compiling libsearpc"
        }, 
        {
            "location": "/build_seafile/osx/#compiling-ccnet", 
            "text": "Download  ccnet , then:      ./autogen.sh\n    ./configure\n    make\n    sudo make install", 
            "title": "Compiling ccnet"
        }, 
        {
            "location": "/build_seafile/osx/#compiling-seafile", 
            "text": "Download  seafile  Compile ./autogen.sh\n./configure --disable-fuse\nmake\nsudo make install", 
            "title": "Compiling seafile"
        }, 
        {
            "location": "/build_seafile/osx/#compiling-seafile-client-and-packaging-it", 
            "text": "execute the building script:  ./scripts/build.py    Go to Release directory and see if  seafile-applet.app  can run correctly.", 
            "title": "Compiling seafile-client and packaging it"
        }, 
        {
            "location": "/build_seafile/osx/#problem-you-may-encounter", 
            "text": "If  install_name_tool  reports \"malformed object\" \"unknown load command\", It may be the version of xcode command line tools incompatible with  install_name_tool .  If xcode can't find glib, Corrects xcode's \"build settings/search paths/header search\".", 
            "title": "Problem you may encounter"
        }, 
        {
            "location": "/build_seafile/server/", 
            "text": "Server\n\n\nPreparation\n\n\nThe following list is all the libraries you need to install on your machine. \nYou should install all of them before you build seafile\n.\n\n\nPackage names are according to Ubuntu 12.04. For other Linux distros, please find their corresponding names yourself.\n\n\n\n\nlibevent-dev  (2.0 or later )\n\n\nlibcurl4-openssl-dev  (1.0.0 or later)\n\n\nlibglib2.0-dev (2.28 or later)\n\n\nuuid-dev\n\n\nintltool (0.40 or later)\n\n\nlibsqlite3-dev (3.7 or later)\n\n\nlibmysqlclient-dev (5.5 or later)\n\n\nlibarchive-dev\n\n\nlibtool\n\n\nlibjansson-dev\n\n\nvalac\n\n\nlibfuse-dev\n\n\n\n\nAlso, python 2.7 is required since seafile server 5.1.0.\n\n\nThe following libraries need to be compiled from source.\n\n\nlibzdb\n\n\n\n\nInstall \nre2c\n and \nflex\n\n\nDownload \nlibzdb\n\n\n\n\nlibevhtp\n\n\n\n\nDownload \nlibevhtp\n.\n\n\nBuild libevhtp by:\n\n\n\n\ncmake -DEVHTP_DISABLE_SSL=ON -DEVHTP_BUILD_SHARED=ON .\nmake\nsudo make install\n\n\n\n\n\nSeahub dependencies\n\n\nSeahub\n is the web front end of Seafile. It's written in the \ndjango\n framework. Seahub requires Python 2.6(or 2.7) installed on your server, and it needs the following python libraries:\n\n\n\n\nDjango 1.8\n\n\npytz\n\n\ndjango-statici18n\n\n\ndjangorestframework\n\n\ndjango_compressor\n\n\ndjango-post_office\n\n\ndjango-constance\n (install it by \npip install https://github.com/haiwen/django-constance/archive/bde7f7c.zip\n)\n\n\ngunicorn\n\n\nflup\n\n\nchardet\n\n\npython-dateutil\n\n\nsix\n\n\nopenpyxl\n\n\n\n\nBefore continue, make sure you have all the above libraries available in your system.\n\n\nPrepare the directory layout\n\n\nIn the following sections, you'll be guided to build and setup the seafile server step by step. Seafile server is consisted of several components. In order for them to function correctly, you must:\n\n\n\n\nFollow our instructions step by step\n\n\nMake sure your directory layout is exactly the same with the guide in each step.\n\n\n\n\nFirst create the top level directory. In the following sections, we'll use \"/data/haiwen\" as the top level directory.\n\n\n\nmkdir /data/haiwen/\ncd /data/haiwen/\nmkdir seafile-server\ncd seafile-server\n\n\n\n\nThe currently layout is:\n\n\n\nhaiwen/\n\u2514\u2500\u2500 seafile-server\n\n\n\n\nGet the source\n\n\nFirst you should get the latest source of libsearpc/ccnet/seafile/seahub\n\n\nDownload the source tarball of the latest tag from\n\n\n\n\nhttps://github.com/haiwen/libsearpc/tags\n\n\nhttps://github.com/haiwen/ccnet/tags\n\n\nhttps://github.com/haiwen/seafile/tags\n\n\nhttps://github.com/haiwen/seahub/tags\n\n\n\n\nFor example, if the latest released seafile server is 4.4.7, then just use the \nv4.4.7-server\n tags of the projects (except for libsearpc, which uses the \nv3.0-latest\n tag). You should get four tarballs:\n\n\n\n\nlibsearpc-3.0-latest.tar.gz\n\n\nccnet-4.4.7-server.tar.gz\n\n\nseafile-4.4.7-server.tar.gz\n\n\nseahub-4.4.7-server.tar.gz\n\n\n\n\nCreate a folder \nhaiwen/src\n, and uncompress libsearpc/ccnet/seafile source to it.\n\n\n\ncd haiwen/seafile-server\nmkdir src\ncd src\ntar xf /path/to/libsearpc-3.0-latest.tar.gz\ntar xf /path/to/ccnet-4.4.7-server.tar.gz\ntar xf /path/to/seafile-4.4.7-server.tar.gz\n\n\n\n\nAnd uncompress seahub tarball to \nhaiwen/seafile-server\n:\n\n\n\ncd haiwen/seafile-server\ntar xf /path/to/seahub-4.4.7-server.tar.gz\nmv seahub-4.4.7-server seahub\n\n\n\n\nSo far, The current directory layout is:\n\n\n\nhaiwen/\n\u2514\u2500\u2500 seafile-server\n    \u2514\u2500\u2500 seahub\n    \u2514\u2500\u2500 src\n        \u251c\u2500\u2500 libsearpc-4.4.7-server\n        \u251c\u2500\u2500 ccnet-4.4.7-server\n        \u251c\u2500\u2500 seafile-4.4.7-server\n        \u251c\u2500\u2500 ... (other files)\n\n\n\n\nBuilding\n\n\nTo build seafile server, you need first build \nlibsearpc\n and \nccnet\n.\n\n\nlibsearpc\n\n\n\ncd libsearpc-${version}\n./autogen.sh\n./configure\nmake\nmake install\n\n\n\n\nccnet\n\n\n\ncd ccnet-${version}\n./autogen.sh\n./configure --disable-client --enable-server   # `export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig` if libsearpc is not found\nmake\nmake install\n\n\n\n\nseafile\n\n\n\ncd seafile-${version}\n./autogen.sh\n./configure --disable-client --enable-server\nmake\nmake install\n\n\n\n\nNote\n: You need to run \nsudo ldconfig\n to refresh the system libraries cache after you compiles all the components.\n\n\nDeploy Seafile Server\n\n\nComponents of the Seafile Server\n\n\nThe seafile server consists of the following components:\n\n\n\n  \n\n    \nProcess Name\nFunctionality\n\n  \n\n  \n\n    \nccnet-server\nunderlying networking\n\n  \n\n  \n\n    \nseaf-server\ndata management\n\n  \n\n  \n\n    \nSeahub\nwebsite front-end of seafile server\n\n  \n\n  \n\n    \nfileserver\nhandles raw file upload/download for Seahub\n\n  \n\n\n\n\n\n\n\n\n\nccnet\n stores its configuration and metadata is a directory named \nccnet\n.\n\n\nseaf-server\n store its configuration and data in a directory, normally named \nseafile-data\n.\n\n\nseahub\n is written in Django. If you have any experience with Django, you should know the \nsyncdb\n command must be run to create all the database tables.\n\n\nAn \nadmin account\n has to be created, so that you, the admin, can login with this account to manage the server.\n\n\n\n\nThese are the essential steps to create the configuration:\n\n\n\n\nensure seafile is already installed and all the python libraries seahub needs are installed.\n\n\ncreate the ccnet configuration with the \nccnet-init\n program\n\n\ncreate the seafile configuration with \nseaf-server-init\n program\n\n\nrun Django \nsyncdb\n command for seahub\n\n\ncreate an admin account for the seafile server\n\n\n\n\nTo create the configurations, you can either:\n\n\n\n\nuse the seafile-admin script(see below)\n\n\n[[create server configuration by hand]]\n\n\n\n\nCreate Configurations with the seafile-admin script\n\n\nseafile-admin\n should have been installed to system path after you have built and installed Seafile from source.\n\n\nusage: seafile-admin [-h] {setup,start,stop,reset-admin} ...\n\n\noptional arguments:\n  -h, --help            show this help message and exit\n\n\nsubcommands:\n\n\n{setup,start,stop,reset-admin}\n    setup               setup the seafile server\n    start               start the seafile server\n    stop                stop the seafile server\n    reset-admin         reset seafile admin account\n\n\n\nGo to the top level directory(in this guide it's \n/data/haiwen/\n), and run \nseafile-admin setup\n to create all the configuration:\n\n\ncd /data/haiwen\nexport PYTHONPATH=/data/haiwen/seafile-server/seahub/thirdpart\nseafile-admin setup\n\n\n\nThe script would ask you a series of questions, and create all the configuration for you.\n\n\n\n  \n\n    \nName\nUsage\nDefault\nRequirement\n\n  \n\n  \n\n    \nserver name\n\n    \nThe name of the server that would be shown on the client\n\n    \n\n    \n3 ~ 15 letters or digits\n\n  \n\n  \n\n    \nip or domain\n\n    \nThe ip address or domain name of the server\n\n    \n\n    \nMake sure to use the right ip or domain, or the client would have trouble connecting it\n\n  \n\n  \n\n  \nccnet port\n\n  \nthe tcp port used by ccnet\n\n  \n10001\n\n  \n\n  \n\n  \n\n    \nseafile port\n\n    \ntcp port used by seafile\n\n    \n12001\n\n    \n\n  \n\n  \n\n    \nseafile fileserver port\n\n    \ntcp port used by seafile fileserver\n\n    \n8082\n\n    \n\n  \n\n  \n\n    \nadmin email\n\n    \nEmail address of the admin account\n\n    \n\n    \n\n  \n\n  \n\n    \nadmin password\n\n    \npassword of the admin account\n\n    \n\n    \n\n  \n\n\n\n\n\nThis is a screenshot of the \nseafile-admin setup\n command:\n\n\n\nAnd a screenshot after setup is finished successfully:\n\n\n\nAt this time, the directory layout would be like this:\n\n\nhaiwen/\n\u2514\u2500\u2500 ccnet # ccnet config directory\n    \u2514\u2500\u2500 ccnet.conf # ccnet config file\n\u2514\u2500\u2500 seafile-data # seafile configuration and data\n    \u2514\u2500\u2500 seafile.conf # seafile config file\n\u2514\u2500\u2500 seahub-data/ # seahub data\n\u2514\u2500\u2500 seahub.db # seahub sqlite3 database\n\u2514\u2500\u2500 seahub_settings.py # custom settings for seahub\n\u2514\u2500\u2500 seafile-server\n    \u2514\u2500\u2500 seahub/\n    \u2514\u2500\u2500 seafile-{VERSION} # seafile source code\n\n\n\nStart the Seafile Server\n\n\nAfter configuration successfully created, run \nseafile-admin start\n in the top directory to start the all components of Seafile. ( \nYou should always run the seafile-admin script in the top directory\n ).\n\n\n\ncd /data/haiwen # go to the top level directory\nseafile-admin start\n\n\n\n\nAt this moment, all the components should be running and seahub can be visited at \nhttp://yourserver-ip-or-domain:8000\n\n\nNote\n You may want to deploy seahub with nginx or apache. In this case, follow the instructions on Deploy Seafile Web With \nNginx\n/\nApache\n.\n\n\nStop the Seafile Server\n\n\nTo stop seafile server, run \nseafile-admin stop\n.\n\n\n\ncd /data/haiwen # go to the top level directory\nseafile-admin stop\n\n\n\n\nUpgrade the Seafile Server\n\n\nWhen you want to upgrade to a new vesrion of seafile server, you need to:\n\n\n\n\nStop the seafile server if it's running\n\n\n\n\n\ncd /data/haiwen\nseafile-admin stop\n\n\n\n\n\n\nGet and latest source code and build libsearpc/ccnet/seafile, just as what you do in a fresh setup.\n\n\nRun the upgrade script. The upgrade script mainly updates database used by seafile for you. For example, create a new database table that is used in the latest seafile server but not in the previous version.\n\n\n\n\nGet and compile the latest libsearpc/ccnet/seafile\n\n\nSee the \nBuilding\n section above.\n\n\nGet the new seahub tarball and uncompress it\n\n\n\ncd haiwen/seafile-server\nmv seahub/ seahub-old # move away the old seahub folder\ntar xf /path/to/new/seahub-x.x.x-server.tar.gz\nmv seahub-x.x.x-server seahub\n\n\n\n\nDo the upgrade\n\n\n\n\ncopy the scripts/upgrade/ subdir outside\n\n\n\n\nThe upgrade scripts is distributed in the \nscripts/upgrade\n subdir of seafile source code, we need to copy it to \nseafile-server\n directory before run the scripts.\n\n\n\ncd /data/haiwen/seafile-server\ncp -rf seafile-{version}/scripts/upgrade .\n\n\n\n\nContinuous Upgrade (like from 1.1 to 1.2)\n\n\nContinuous upgrade means to upgrade from one version of seafile server to the next version. For example, upgrading from 1.1.0 to 1.2.0 is a continuous upgrade.\n\n\nNote:\n Minor upgrade, like upgrade from 1.3.0 to 1.3.1, is documented in a separate section below.\n\n\nSay you are upgrading from 1.1.0 to 1.2.0, you should run the script \nupgrade_1.1_1.2.sh\n in \nseafile-server\n directory.\n\n\n\ncd /data/haiwen/seafile-server\n./upgrade/upgrade_1.1_1.2.sh\n\n\n\n\nNon-continous version upgrade(like from 1.1 to 1.3)\n\n\nIf you upgrade a few versions at once, e.g. from 1.1.0 to 1.3.0. The procedure is:\n\n\n\n\nupgrade from 1.1.0 to 1.2.0\n\n\nupgrade from 1.2.0 to 1.3.0\n\n\n\n\nJust run the upgrade scripts in sequence.\n\n\nMinor Upgrade (like from 1.3.0 to 1.3.1)\n\n\nMinor upgrade Minor upgrade is like an upgrade from 1.3.0 to 1.3.1. For this type of upgrade, you only need to update the avatar link:\n\n\n\ncd /data/haiwen/seafile-server/seahub/media\ncp -rf avatars/* ../../../seahub-data/avatars/\nrm -rf avatars\nln -s ../../../seahub-data/avatars\n\n\n\n\nProblems Report\n\n\nIf you encounter any problem when building/deploying Seafile, please leave us a message or \nopen an issue\n.", 
            "title": "Server"
        }, 
        {
            "location": "/build_seafile/server/#server", 
            "text": "", 
            "title": "Server"
        }, 
        {
            "location": "/build_seafile/server/#preparation", 
            "text": "The following list is all the libraries you need to install on your machine.  You should install all of them before you build seafile .  Package names are according to Ubuntu 12.04. For other Linux distros, please find their corresponding names yourself.   libevent-dev  (2.0 or later )  libcurl4-openssl-dev  (1.0.0 or later)  libglib2.0-dev (2.28 or later)  uuid-dev  intltool (0.40 or later)  libsqlite3-dev (3.7 or later)  libmysqlclient-dev (5.5 or later)  libarchive-dev  libtool  libjansson-dev  valac  libfuse-dev   Also, python 2.7 is required since seafile server 5.1.0.  The following libraries need to be compiled from source.", 
            "title": "Preparation"
        }, 
        {
            "location": "/build_seafile/server/#libzdb", 
            "text": "Install  re2c  and  flex  Download  libzdb", 
            "title": "libzdb"
        }, 
        {
            "location": "/build_seafile/server/#libevhtp", 
            "text": "Download  libevhtp .  Build libevhtp by:   cmake -DEVHTP_DISABLE_SSL=ON -DEVHTP_BUILD_SHARED=ON .\nmake\nsudo make install", 
            "title": "libevhtp"
        }, 
        {
            "location": "/build_seafile/server/#seahub-dependencies", 
            "text": "Seahub  is the web front end of Seafile. It's written in the  django  framework. Seahub requires Python 2.6(or 2.7) installed on your server, and it needs the following python libraries:   Django 1.8  pytz  django-statici18n  djangorestframework  django_compressor  django-post_office  django-constance  (install it by  pip install https://github.com/haiwen/django-constance/archive/bde7f7c.zip )  gunicorn  flup  chardet  python-dateutil  six  openpyxl   Before continue, make sure you have all the above libraries available in your system.", 
            "title": "Seahub dependencies"
        }, 
        {
            "location": "/build_seafile/server/#prepare-the-directory-layout", 
            "text": "In the following sections, you'll be guided to build and setup the seafile server step by step. Seafile server is consisted of several components. In order for them to function correctly, you must:   Follow our instructions step by step  Make sure your directory layout is exactly the same with the guide in each step.   First create the top level directory. In the following sections, we'll use \"/data/haiwen\" as the top level directory.  \nmkdir /data/haiwen/\ncd /data/haiwen/\nmkdir seafile-server\ncd seafile-server  The currently layout is:  \nhaiwen/\n\u2514\u2500\u2500 seafile-server", 
            "title": "Prepare the directory layout"
        }, 
        {
            "location": "/build_seafile/server/#get-the-source", 
            "text": "First you should get the latest source of libsearpc/ccnet/seafile/seahub  Download the source tarball of the latest tag from   https://github.com/haiwen/libsearpc/tags  https://github.com/haiwen/ccnet/tags  https://github.com/haiwen/seafile/tags  https://github.com/haiwen/seahub/tags   For example, if the latest released seafile server is 4.4.7, then just use the  v4.4.7-server  tags of the projects (except for libsearpc, which uses the  v3.0-latest  tag). You should get four tarballs:   libsearpc-3.0-latest.tar.gz  ccnet-4.4.7-server.tar.gz  seafile-4.4.7-server.tar.gz  seahub-4.4.7-server.tar.gz   Create a folder  haiwen/src , and uncompress libsearpc/ccnet/seafile source to it.  \ncd haiwen/seafile-server\nmkdir src\ncd src\ntar xf /path/to/libsearpc-3.0-latest.tar.gz\ntar xf /path/to/ccnet-4.4.7-server.tar.gz\ntar xf /path/to/seafile-4.4.7-server.tar.gz  And uncompress seahub tarball to  haiwen/seafile-server :  \ncd haiwen/seafile-server\ntar xf /path/to/seahub-4.4.7-server.tar.gz\nmv seahub-4.4.7-server seahub  So far, The current directory layout is:  \nhaiwen/\n\u2514\u2500\u2500 seafile-server\n    \u2514\u2500\u2500 seahub\n    \u2514\u2500\u2500 src\n        \u251c\u2500\u2500 libsearpc-4.4.7-server\n        \u251c\u2500\u2500 ccnet-4.4.7-server\n        \u251c\u2500\u2500 seafile-4.4.7-server\n        \u251c\u2500\u2500 ... (other files)", 
            "title": "Get the source"
        }, 
        {
            "location": "/build_seafile/server/#building", 
            "text": "To build seafile server, you need first build  libsearpc  and  ccnet .", 
            "title": "Building"
        }, 
        {
            "location": "/build_seafile/server/#libsearpc", 
            "text": "cd libsearpc-${version}\n./autogen.sh\n./configure\nmake\nmake install", 
            "title": "libsearpc"
        }, 
        {
            "location": "/build_seafile/server/#ccnet", 
            "text": "cd ccnet-${version}\n./autogen.sh\n./configure --disable-client --enable-server   # `export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig` if libsearpc is not found\nmake\nmake install", 
            "title": "ccnet"
        }, 
        {
            "location": "/build_seafile/server/#seafile", 
            "text": "cd seafile-${version}\n./autogen.sh\n./configure --disable-client --enable-server\nmake\nmake install  Note : You need to run  sudo ldconfig  to refresh the system libraries cache after you compiles all the components.", 
            "title": "seafile"
        }, 
        {
            "location": "/build_seafile/server/#deploy-seafile-server", 
            "text": "", 
            "title": "Deploy Seafile Server"
        }, 
        {
            "location": "/build_seafile/server/#components-of-the-seafile-server", 
            "text": "The seafile server consists of the following components:  \n   \n     Process Name Functionality \n   \n   \n     ccnet-server underlying networking \n   \n   \n     seaf-server data management \n   \n   \n     Seahub website front-end of seafile server \n   \n   \n     fileserver handles raw file upload/download for Seahub \n       ccnet  stores its configuration and metadata is a directory named  ccnet .  seaf-server  store its configuration and data in a directory, normally named  seafile-data .  seahub  is written in Django. If you have any experience with Django, you should know the  syncdb  command must be run to create all the database tables.  An  admin account  has to be created, so that you, the admin, can login with this account to manage the server.   These are the essential steps to create the configuration:   ensure seafile is already installed and all the python libraries seahub needs are installed.  create the ccnet configuration with the  ccnet-init  program  create the seafile configuration with  seaf-server-init  program  run Django  syncdb  command for seahub  create an admin account for the seafile server   To create the configurations, you can either:   use the seafile-admin script(see below)  [[create server configuration by hand]]", 
            "title": "Components of the Seafile Server"
        }, 
        {
            "location": "/build_seafile/server/#create-configurations-with-the-seafile-admin-script", 
            "text": "seafile-admin  should have been installed to system path after you have built and installed Seafile from source. \nusage: seafile-admin [-h] {setup,start,stop,reset-admin} ...  optional arguments:\n  -h, --help            show this help message and exit  subcommands:  {setup,start,stop,reset-admin}\n    setup               setup the seafile server\n    start               start the seafile server\n    stop                stop the seafile server\n    reset-admin         reset seafile admin account  Go to the top level directory(in this guide it's  /data/haiwen/ ), and run  seafile-admin setup  to create all the configuration: \ncd /data/haiwen\nexport PYTHONPATH=/data/haiwen/seafile-server/seahub/thirdpart\nseafile-admin setup  The script would ask you a series of questions, and create all the configuration for you.  \n   \n     Name Usage Default Requirement \n   \n   \n     server name \n     The name of the server that would be shown on the client \n     \n     3 ~ 15 letters or digits \n   \n   \n     ip or domain \n     The ip address or domain name of the server \n     \n     Make sure to use the right ip or domain, or the client would have trouble connecting it \n   \n   \n   ccnet port \n   the tcp port used by ccnet \n   10001 \n   \n   \n   \n     seafile port \n     tcp port used by seafile \n     12001 \n     \n   \n   \n     seafile fileserver port \n     tcp port used by seafile fileserver \n     8082 \n     \n   \n   \n     admin email \n     Email address of the admin account \n     \n     \n   \n   \n     admin password \n     password of the admin account \n     \n     \n     This is a screenshot of the  seafile-admin setup  command:  And a screenshot after setup is finished successfully:  At this time, the directory layout would be like this: \nhaiwen/\n\u2514\u2500\u2500 ccnet # ccnet config directory\n    \u2514\u2500\u2500 ccnet.conf # ccnet config file\n\u2514\u2500\u2500 seafile-data # seafile configuration and data\n    \u2514\u2500\u2500 seafile.conf # seafile config file\n\u2514\u2500\u2500 seahub-data/ # seahub data\n\u2514\u2500\u2500 seahub.db # seahub sqlite3 database\n\u2514\u2500\u2500 seahub_settings.py # custom settings for seahub\n\u2514\u2500\u2500 seafile-server\n    \u2514\u2500\u2500 seahub/\n    \u2514\u2500\u2500 seafile-{VERSION} # seafile source code", 
            "title": "Create Configurations with the seafile-admin script"
        }, 
        {
            "location": "/build_seafile/server/#start-the-seafile-server", 
            "text": "After configuration successfully created, run  seafile-admin start  in the top directory to start the all components of Seafile. (  You should always run the seafile-admin script in the top directory  ).  \ncd /data/haiwen # go to the top level directory\nseafile-admin start  At this moment, all the components should be running and seahub can be visited at  http://yourserver-ip-or-domain:8000  Note  You may want to deploy seahub with nginx or apache. In this case, follow the instructions on Deploy Seafile Web With  Nginx / Apache .", 
            "title": "Start the Seafile Server"
        }, 
        {
            "location": "/build_seafile/server/#stop-the-seafile-server", 
            "text": "To stop seafile server, run  seafile-admin stop .  \ncd /data/haiwen # go to the top level directory\nseafile-admin stop", 
            "title": "Stop the Seafile Server"
        }, 
        {
            "location": "/build_seafile/server/#upgrade-the-seafile-server", 
            "text": "When you want to upgrade to a new vesrion of seafile server, you need to:   Stop the seafile server if it's running   \ncd /data/haiwen\nseafile-admin stop   Get and latest source code and build libsearpc/ccnet/seafile, just as what you do in a fresh setup.  Run the upgrade script. The upgrade script mainly updates database used by seafile for you. For example, create a new database table that is used in the latest seafile server but not in the previous version.", 
            "title": "Upgrade the Seafile Server"
        }, 
        {
            "location": "/build_seafile/server/#get-and-compile-the-latest-libsearpcccnetseafile", 
            "text": "See the  Building  section above.", 
            "title": "Get and compile the latest libsearpc/ccnet/seafile"
        }, 
        {
            "location": "/build_seafile/server/#get-the-new-seahub-tarball-and-uncompress-it", 
            "text": "cd haiwen/seafile-server\nmv seahub/ seahub-old # move away the old seahub folder\ntar xf /path/to/new/seahub-x.x.x-server.tar.gz\nmv seahub-x.x.x-server seahub", 
            "title": "Get the new seahub tarball and uncompress it"
        }, 
        {
            "location": "/build_seafile/server/#do-the-upgrade", 
            "text": "copy the scripts/upgrade/ subdir outside   The upgrade scripts is distributed in the  scripts/upgrade  subdir of seafile source code, we need to copy it to  seafile-server  directory before run the scripts.  \ncd /data/haiwen/seafile-server\ncp -rf seafile-{version}/scripts/upgrade .", 
            "title": "Do the upgrade"
        }, 
        {
            "location": "/build_seafile/server/#continuous-upgrade-like-from-11-to-12", 
            "text": "Continuous upgrade means to upgrade from one version of seafile server to the next version. For example, upgrading from 1.1.0 to 1.2.0 is a continuous upgrade.  Note:  Minor upgrade, like upgrade from 1.3.0 to 1.3.1, is documented in a separate section below.  Say you are upgrading from 1.1.0 to 1.2.0, you should run the script  upgrade_1.1_1.2.sh  in  seafile-server  directory.  \ncd /data/haiwen/seafile-server\n./upgrade/upgrade_1.1_1.2.sh", 
            "title": "Continuous Upgrade (like from 1.1 to 1.2)"
        }, 
        {
            "location": "/build_seafile/server/#non-continous-version-upgradelike-from-11-to-13", 
            "text": "If you upgrade a few versions at once, e.g. from 1.1.0 to 1.3.0. The procedure is:   upgrade from 1.1.0 to 1.2.0  upgrade from 1.2.0 to 1.3.0   Just run the upgrade scripts in sequence.", 
            "title": "Non-continous version upgrade(like from 1.1 to 1.3)"
        }, 
        {
            "location": "/build_seafile/server/#minor-upgrade-like-from-130-to-131", 
            "text": "Minor upgrade Minor upgrade is like an upgrade from 1.3.0 to 1.3.1. For this type of upgrade, you only need to update the avatar link:  \ncd /data/haiwen/seafile-server/seahub/media\ncp -rf avatars/* ../../../seahub-data/avatars/\nrm -rf avatars\nln -s ../../../seahub-data/avatars", 
            "title": "Minor Upgrade (like from 1.3.0 to 1.3.1)"
        }, 
        {
            "location": "/build_seafile/server/#problems-report", 
            "text": "If you encounter any problem when building/deploying Seafile, please leave us a message or  open an issue .", 
            "title": "Problems Report"
        }, 
        {
            "location": "/build_seafile/rpi/", 
            "text": "How to Build Seafile Server Release Package for Raspberry Pi\n\n\nTable of contents\n:\n\n\n\n\nSetup the build environment\n\n\nInstall packages\n\n\nCompile development libraries\n\n\nInstall Python libraries\n\n\nPrepare source code\n\n\nFetch git tags and prepare source tarballs\n\n\nRun the packaging script\n\n\nTest the built package\n\n\nTest a fresh install\n\n\nTest upgrading\n\n\n\n\nSetup the build environment\n\n\nRequirements:\n\n\n\n\nA raspberry pi with raspian distribution installed.\n\n\n\n\n Install packages\n\n\nsudo apt-get install build-essential\nsudo apt-get install libevent-dev libcurl4-openssl-dev libglib2.0-dev uuid-dev intltool libsqlite3-dev libmysqlclient-dev libarchive-dev libtool libjansson-dev valac libfuse-dev re2c flex python-setuptools cmake\n\n\n\n\n Compile development libraries\n\n\nlibevhtp\n\n\nlibevhtp is a http server libary on top of libevent. It's used in seafile file server.\n\n\ngit clone https://www.github.com/haiwen/libevhtp.git\ncd libevhtp\ncmake -DEVHTP_DISABLE_SSL=OFF -DEVHTP_BUILD_SHARED=ON .\nmake\nsudo make install\n\n\n\n\nlibzdb\n\n\nlibzdb\n provides a consistent API to various database backends, including sqlite/mysql/pg/oracle. It's used by ccnet-server and seafile-server.\n\n\ngit clone https://www.github.com/haiwen/libzdb.git\ncd libzdb\n./autogen.sh\n./configure\nmake\nsudo make install\n\n\n\n\nAfter compiling all the libraries, run \nldconfig\n to update the system libraries cache:\n\n\nsudo ldconfig\n\n\n\n\n Install python libraries\n\n\nCreate a new directory \n/home/pi/dev/seahub_thirdpart\n:\n\n\nmkdir -p ~/dev/seahub_thirdpart\n\n\n\n\nDownload these tarballs to \n/tmp/\n:\n\n\n\n\npytz\n\n\nDjango\n\n\ndjango-statici18n\n\n\ndjangorestframework\n\n\ndjango_compressor\n\n\njsonfield\n\n\ndjango-post_office\n\n\ngunicorn\n\n\nflup\n\n\nchardet\n\n\npython-dateutil\n\n\nsix\n\n\ndjango-picklefield\n\n\ndjango-constance\n\n\njdcal\n\n\net_xmlfile\n\n\nopenpyxl\n\n\n\n\nInstall all these libaries to \n/home/pi/dev/seahub_thirdpart\n:\n\n\ncd ~/dev/seahub_thirdpart\nexport PYTHONPATH=.\neasy_install -d . /tmp/pytz-2016.1.tar.gz\neasy_install -d . /tmp/Django-1.8.10.tar.gz\neasy_install -d . /tmp/django-statici18n-1.1.3.tar.gz\neasy_install -d . /tmp/djangorestframework-3.3.2.tar.gz\neasy_install -d . /tmp/django_compressor-1.4.tar.gz\neasy_install -d . /tmp/jsonfield-1.0.3.tar.gz\neasy_install -d . /tmp/django-post_office-2.0.6.tar.gz\neasy_install -d . /tmp/gunicorn-19.4.5.tar.gz\neasy_install -d . /tmp/flup-1.0.2.tar.gz\neasy_install -d . /tmp/chardet-2.3.0.tar.gz\neasy_install -d . /tmp/python-dateutil-1.5.tar.gz\neasy_install -d . /tmp/six-1.9.0.tar.gz\neasy_install -d . /tmp/django-picklefield-0.3.2.tar.gz\nwget -O /tmp/django_constance.zip https://github.com/haiwen/django-constance/archive/bde7f7c.zip\neasy_install -d . /tmp/django_constance.zip\neasy_install -d . /tmp/jdcal-1.2.tar.gz\neasy_install -d . /tmp/et_xmlfile-1.0.1.tar.gz\neasy_install -d . /tmp/openpyxl-2.3.0.tar.gz\n\n\n\n\nPrepare seafile source code\n\n\nTo build seafile server, there are four sub projects involved:\n\n\n\n\nlibsearpc\n\n\nccnet\n\n\nseafile\n\n\nseahub\n\n\n\n\nThe build process has two steps:\n\n\n\n\nFirst, fetch the tags of each projects, and make a soruce tarball for each of them.\n\n\nThen run a \nbuild-server.py\n script to build the server package from the source tarballs.\n\n\n\n\n Fetch git tags and prepare source tarballs\n\n\nSeafile manages the releases in tags on github.\n\n\nAssume we are packaging for seafile server 4.1.1, then the tags are:\n\n\n\n\nccnet, seafile, and seahub would all have a \nv4.1.1-sever\n tag.\n\n\nlibsearpc would have the \nv3.0-latest\n tag (libsearpc has been quite stable and basically has no further development, so the tag is always \nv3.0-latest\n)\n\n\n\n\nFirst setup the \nPKG_CONFIG_PATH\n enviroment variable (So we don't need to make and make install libsearpc/ccnet/seafile into the system):\n\n\nexport PKG_CONFIG_PATH=/home/pi/dev/seafile/lib:$PKG_CONFIG_PATH\nexport PKG_CONFIG_PATH=/home/pi/dev/libsearpc:$PKG_CONFIG_PATH\nexport PKG_CONFIG_PATH=/home/pi/dev/ccnet:$PKG_CONFIG_PATH\n\n\n\n\nlibsearpc\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/libsearpc.git\ncd libsearpc\ngit reset --hard v3.0-latest\n./autogen.sh\n./configure\nmake dist\n\n\n\n\nccnet\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/ccnet.git\ncd ccnet\ngit reset --hard v4.1.1-server\n./autogen.sh\n./configure\nmake dist\n\n\n\n\nseafile\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/seafile.git\ncd seafile\ngit reset --hard v4.1.1-server\n./autogen.sh\n./configure\nmake dist\n\n\n\n\nseahub\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/seahub.git\ncd seahub\ngit reset --hard v4.1.1-server\n./tools/gen-tarball.py --version=4.1.1 --branch=HEAD\n\n\n\n\nseafobj\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/seafobj.git\ncd seafobj\ngit reset --hard v4.1.1-server\nmake dist\n\n\n\n\nseafdav\n\n\ncd ~/dev\ngit clone https://github.com/haiwen/seafdav.git\ncd seafdav\ngit reset --hard v4.1.1-server\nmake\n\n\n\n\nCopy the source tar balls to the same folder\n\n\nmkdir ~/seafile-sources\ncp ~/dev/libsearpc/libsearpc-\nversion\n-tar.gz ~/seafile-sources\ncp ~/dev/ccnet/ccnet-\nversion\n-tar.gz ~/seafile-sources\ncp ~/dev/seafile/seafile-\nversion\n-tar.gz ~/seafile-sources\ncp ~/dev/seahub/seahub-\nversion\n-tar.gz ~/seafile-sources\n\ncp ~/dev/seafobj/seafobj.tar.gz ~/seafile-sources\ncp ~/dev/seafdav/seafdav.tar.gz ~/seafile-sources\n\n\n\n\n Run the packaging script\n\n\nNow we have all the tarballs prepared, we can run the \nbuild-server.py\n script to build the server package.\n\n\nmkdir ~/seafile-server-pkgs\n~/dev/seafile/scripts/build-server.py --libsearpc_version=\nlibsearpc_version\n --ccnet_version=\nccnet_version\n --seafile_version=\nseafile_version\n --seahub_version=\nseahub_version\n --srcdir=  --thidrpartdir=/home/pi/dev/seahub_thirdpart --srcdir=/home/pi/seafile-sources --outputdir=/home/pi/seafile-server-pkgs\n\n\n\n\nAfter the script finisheds, we would get a \nseafile-server_4.1.1_pi.tar.gz\n in \n~/seafile-server-pkgs\n folder.\n\n\n Test the built package\n\n\nTest a fresh install\n\n\nUse the built seafile server package to go over the steps of \nDeploying Seafile with SQLite\n.\n\n\nThe test should cover these steps at least:\n\n\n\n\nThe setup process is ok\n\n\nAfter \nseafile.sh start\n and \nseahub.sh start\n, you can login from a browser.\n\n\nUploading/Downloading files through a web browser works correctly.\n\n\nSeafile \nWebDAV\n server works correctly\n\n\n\n\n Test upgrading from a previous version\n\n\n\n\nDownload the package of the previous version seafile server, and setup it.\n\n\nUpgrading according to \nthe manual\n\n\nAfter the upgrade, check the functionality is ok:\n\n\nUploading/Downloading files through a web browser works correctly.\n\n\nSeafile \nWebDAV\n server works correctly", 
            "title": "Raspberry Pi"
        }, 
        {
            "location": "/build_seafile/rpi/#how-to-build-seafile-server-release-package-for-raspberry-pi", 
            "text": "Table of contents :   Setup the build environment  Install packages  Compile development libraries  Install Python libraries  Prepare source code  Fetch git tags and prepare source tarballs  Run the packaging script  Test the built package  Test a fresh install  Test upgrading", 
            "title": "How to Build Seafile Server Release Package for Raspberry Pi"
        }, 
        {
            "location": "/build_seafile/rpi/#libevhtp", 
            "text": "libevhtp is a http server libary on top of libevent. It's used in seafile file server.  git clone https://www.github.com/haiwen/libevhtp.git\ncd libevhtp\ncmake -DEVHTP_DISABLE_SSL=OFF -DEVHTP_BUILD_SHARED=ON .\nmake\nsudo make install", 
            "title": "libevhtp"
        }, 
        {
            "location": "/build_seafile/rpi/#libzdb", 
            "text": "libzdb  provides a consistent API to various database backends, including sqlite/mysql/pg/oracle. It's used by ccnet-server and seafile-server.  git clone https://www.github.com/haiwen/libzdb.git\ncd libzdb\n./autogen.sh\n./configure\nmake\nsudo make install  After compiling all the libraries, run  ldconfig  to update the system libraries cache:  sudo ldconfig", 
            "title": "libzdb"
        }, 
        {
            "location": "/build_seafile/rpi/#libsearpc", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/libsearpc.git\ncd libsearpc\ngit reset --hard v3.0-latest\n./autogen.sh\n./configure\nmake dist", 
            "title": "libsearpc"
        }, 
        {
            "location": "/build_seafile/rpi/#ccnet", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/ccnet.git\ncd ccnet\ngit reset --hard v4.1.1-server\n./autogen.sh\n./configure\nmake dist", 
            "title": "ccnet"
        }, 
        {
            "location": "/build_seafile/rpi/#seafile", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/seafile.git\ncd seafile\ngit reset --hard v4.1.1-server\n./autogen.sh\n./configure\nmake dist", 
            "title": "seafile"
        }, 
        {
            "location": "/build_seafile/rpi/#seahub", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/seahub.git\ncd seahub\ngit reset --hard v4.1.1-server\n./tools/gen-tarball.py --version=4.1.1 --branch=HEAD", 
            "title": "seahub"
        }, 
        {
            "location": "/build_seafile/rpi/#seafobj", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/seafobj.git\ncd seafobj\ngit reset --hard v4.1.1-server\nmake dist", 
            "title": "seafobj"
        }, 
        {
            "location": "/build_seafile/rpi/#seafdav", 
            "text": "cd ~/dev\ngit clone https://github.com/haiwen/seafdav.git\ncd seafdav\ngit reset --hard v4.1.1-server\nmake", 
            "title": "seafdav"
        }, 
        {
            "location": "/build_seafile/rpi/#copy-the-source-tar-balls-to-the-same-folder", 
            "text": "mkdir ~/seafile-sources\ncp ~/dev/libsearpc/libsearpc- version -tar.gz ~/seafile-sources\ncp ~/dev/ccnet/ccnet- version -tar.gz ~/seafile-sources\ncp ~/dev/seafile/seafile- version -tar.gz ~/seafile-sources\ncp ~/dev/seahub/seahub- version -tar.gz ~/seafile-sources\n\ncp ~/dev/seafobj/seafobj.tar.gz ~/seafile-sources\ncp ~/dev/seafdav/seafdav.tar.gz ~/seafile-sources", 
            "title": "Copy the source tar balls to the same folder"
        }, 
        {
            "location": "/develop/env/", 
            "text": "Setup Develop Environment\n\n\nPreparation\n\n\nPackage names are according to Ubuntu 12.04. For other Linux distros, please find their corresponding names yourself.\n\n\n\n\nlibevent-dev  (2.0 or later )\n\n\nlibcurl4-openssl-dev  (1.0.0 or later)\n\n\nlibglib2.0-dev (2.28 or later)\n\n\nuuid-dev\n\n\nintltool (0.40 or later)\n\n\nlibsqlite3-dev (3.7 or later)\n\n\nlibmysqlclient-dev (5.5 or later)\n\n\nlibarchive-dev\n\n\nlibtool\n\n\nlibjansson-dev\n\n\nvalac\n\n\nlibfuse-dev\n\n\n\n\nThe following libraries need to be compiled from source.\n\n\n\n\nlibzdb\n\n\nlibevhtp\n\n\n\n\nlibzdb relies on two packages: \nre2c\n and \nflex\n.\nlibevhtp can be build by \ncmake .; make; sudo make install\n.  libevhtp's version should be 1.1.6 or 1.1.7.\n\n\n'''Seahub''' is the web front end of Seafile. It's written in the Django framework. Seahub requires Python 2.6(2.7) installed on your server, and it needs the following python libraries:\n\n\n\n\nDjango1.5\n\n\nDjblets\n\n\nsqlite3\n\n\nsimplejson (python-simplejson)\n\n\nPIL (aka. python imaging library, python-image) or Pillow\n\n\nchardet\n\n\npython-dateutil\n\n\n\n\nDownload \n Compile\n\n\nClone \nlibsearpc\n, \nccnet\n, \nseafile\n, \nseahub\n to ~/dev (or wherever you want).\n\n\nComplie libsearpc with\n\n\ncd ~/dev/libsearpc\n./autogen.sh\n./configure\nmake\nmake install\n\n\n\nCompile ccnet with\n\n\ncd ~/dev/ccnet\n./autogen.sh\n./configure --disable-client --enable-server   # `export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig` if libsearpc is not found\nmake\nmake install\n\n\n\nCompile seafile with\n\n\ncd ~/dev/seafile\n./autogen.sh\n./configure --disable-client --enable-server\nmake     # in Mac, use `make LDFLAGS=-liconv`\nmake install\n\n\n\nRun seafile\n\n\nRun seafile with\n\n\ncd ~/dev/seafile/tests/basic\n./seafile.sh 2\n\n\n\nOr you can start ccnet, seafile and fileserver manually by:\n\n\nccnet-server -c ~/dev/seafile/tests/basic/conf2/ -D all -f -\nseaf-server -c ~/dev/seafile/tests/basic/conf2/ -d ~/dev/seafile/tests/basic/conf2/seafile-data/ -f -l -\n\n\n\nPrepare seahub\n\n\nGo to seahub\n\n\ncd ~/dev/seahub\n\n\n\nDownload django-1.5 to thirdpart. And create and modify setenv.sh from templates\n\n\ncp setenv.sh.template setenv.sh\n\n\n\nCreate database\n\n\n. setenv.sh\npython manage.py syncdb\n\n\n\nCreate admin account (assume seafile is under ~/dev/seafile)\n\n\npython tools/seahub-admin.py ~/dev/seafile/tests/basic/conf2\n\n\n\nStart seahub\n\n\n./run-seahub.sh.template", 
            "title": "Develop env"
        }, 
        {
            "location": "/develop/env/#setup-develop-environment", 
            "text": "", 
            "title": "Setup Develop Environment"
        }, 
        {
            "location": "/develop/env/#preparation", 
            "text": "Package names are according to Ubuntu 12.04. For other Linux distros, please find their corresponding names yourself.   libevent-dev  (2.0 or later )  libcurl4-openssl-dev  (1.0.0 or later)  libglib2.0-dev (2.28 or later)  uuid-dev  intltool (0.40 or later)  libsqlite3-dev (3.7 or later)  libmysqlclient-dev (5.5 or later)  libarchive-dev  libtool  libjansson-dev  valac  libfuse-dev   The following libraries need to be compiled from source.   libzdb  libevhtp   libzdb relies on two packages:  re2c  and  flex .\nlibevhtp can be build by  cmake .; make; sudo make install .  libevhtp's version should be 1.1.6 or 1.1.7.  '''Seahub''' is the web front end of Seafile. It's written in the Django framework. Seahub requires Python 2.6(2.7) installed on your server, and it needs the following python libraries:   Django1.5  Djblets  sqlite3  simplejson (python-simplejson)  PIL (aka. python imaging library, python-image) or Pillow  chardet  python-dateutil", 
            "title": "Preparation"
        }, 
        {
            "location": "/develop/env/#download-compile", 
            "text": "Clone  libsearpc ,  ccnet ,  seafile ,  seahub  to ~/dev (or wherever you want).  Complie libsearpc with  cd ~/dev/libsearpc\n./autogen.sh\n./configure\nmake\nmake install  Compile ccnet with  cd ~/dev/ccnet\n./autogen.sh\n./configure --disable-client --enable-server   # `export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig` if libsearpc is not found\nmake\nmake install  Compile seafile with  cd ~/dev/seafile\n./autogen.sh\n./configure --disable-client --enable-server\nmake     # in Mac, use `make LDFLAGS=-liconv`\nmake install", 
            "title": "Download &amp; Compile"
        }, 
        {
            "location": "/develop/env/#run-seafile", 
            "text": "Run seafile with  cd ~/dev/seafile/tests/basic\n./seafile.sh 2  Or you can start ccnet, seafile and fileserver manually by:  ccnet-server -c ~/dev/seafile/tests/basic/conf2/ -D all -f -\nseaf-server -c ~/dev/seafile/tests/basic/conf2/ -d ~/dev/seafile/tests/basic/conf2/seafile-data/ -f -l -", 
            "title": "Run seafile"
        }, 
        {
            "location": "/develop/env/#prepare-seahub", 
            "text": "Go to seahub  cd ~/dev/seahub  Download django-1.5 to thirdpart. And create and modify setenv.sh from templates  cp setenv.sh.template setenv.sh  Create database  . setenv.sh\npython manage.py syncdb  Create admin account (assume seafile is under ~/dev/seafile)  python tools/seahub-admin.py ~/dev/seafile/tests/basic/conf2  Start seahub  ./run-seahub.sh.template", 
            "title": "Prepare seahub"
        }, 
        {
            "location": "/develop/code_standard/", 
            "text": "Code Standard\n\n\nThe source code of seafile is ISO/IEC 9899:1999 (E) (a.k.a. C99) compatible.\n\n\nIndent\n\n\n\n\nUse only spaces, and indent 4 spaces at a time.\n\n\n\n\nInline\n\n\n\n\nDefine functions inline only when they are sufficiently small.\n\n\n\n\nConst\n\n\n\n\nWe are using keyword \nconst\n in the source.Please look into the code for detail.", 
            "title": "Code Standard"
        }, 
        {
            "location": "/develop/code_standard/#code-standard", 
            "text": "The source code of seafile is ISO/IEC 9899:1999 (E) (a.k.a. C99) compatible.", 
            "title": "Code Standard"
        }, 
        {
            "location": "/develop/code_standard/#indent", 
            "text": "Use only spaces, and indent 4 spaces at a time.", 
            "title": "Indent"
        }, 
        {
            "location": "/develop/code_standard/#inline", 
            "text": "Define functions inline only when they are sufficiently small.", 
            "title": "Inline"
        }, 
        {
            "location": "/develop/code_standard/#const", 
            "text": "We are using keyword  const  in the source.Please look into the code for detail.", 
            "title": "Const"
        }, 
        {
            "location": "/develop/web_api/", 
            "text": "Web API\n\n\n\n\n\n\nSeafile Web API V2\n\n\nAPI Basics\n\n\nStatus Code\n\n\nQuick Start\n\n\nAccount\n\n\nList Accounts(Admin only)\n\n\nGet Account Info(Admin only)\n\n\nCreate Account(Admin only)\n\n\nUpdate Account(Admin only)\n\n\nMigrate Account(Admin only)\n\n\nDelete Account(Admin only)\n\n\nCheck Account Info\n\n\nGet Server Information\n\n\n\n\n\n\nStarred Files\n\n\nList starred files\n\n\nStar A File\n\n\nUnstar A File\n\n\n\n\n\n\nGroup\n\n\nList Groups\n\n\nAdd A Group\n\n\nDelete Group\n\n\nRename Group\n\n\nGroup Member\n\n\nAdd A Group Member\n\n\nDelete A Group Member\n\n\n\n\n\n\nGroup Message\n\n\nGet Group Messages\n\n\nGet Group Message Detail\n\n\nSend A Group Message\n\n\nReply A Group Message\n\n\nGet Group Message Replies\n\n\n\n\n\n\n\n\n\n\nShare\n\n\nFile Share Link\n\n\nList File Share Links\n\n\nCreate File Share Link\n\n\nDelete File Share Link\n\n\nSend Share Link Email\n\n\nSend Upload Link Email\n\n\nList Direntry in Dir Download Link\n\n\n\n\n\n\nShared Libraries\n\n\nList Shared Libraries\n\n\nList Be Shared Libraries\n\n\nShare A Library\n\n\nUnshare A Library\n\n\n\n\n\n\n\n\n\n\nLibrary\n\n\nLibrary\n\n\nGet Default Library\n\n\nCreate Default Library\n\n\nList Libraries\n\n\nGet Library Info\n\n\nGet Library Owner\n\n\nGet Library History\n\n\nCreate Library\n\n\nCheck/Create Sub Library\n\n\nDelete Library\n\n\nRename Library\n\n\nDecrypt Library\n\n\nCreate Public Library\n\n\nRemove Public Library\n\n\nFetch library download info\n\n\nList Virtual Libraries\n\n\nSearch Libraries\n\n\n\n\n\n\nFile\n\n\nView File Through Owa\n\n\nDownload File\n\n\nGet File Detail\n\n\nGet File History\n\n\nDownload File From a Revision\n\n\nCreate File\n\n\nRename File\n\n\nLock File\n\n\nUnlock File\n\n\nMove File\n\n\nCopy File\n\n\nRevert File\n\n\nDelete File\n\n\nUpload File\n\n\nGet Upload Link\n\n\nUpload File\n\n\n\n\n\n\nUpdate file\n\n\nGet Update Link\n\n\nUpdate File\n\n\n\n\n\n\nGet Upload Blocks Link\n\n\nGet Update Blocks Link\n\n\n\n\n\n\nDirectory\n\n\nList Directory Entries\n\n\nCreate New Directory\n\n\nRename Directory\n\n\nDelete Directory\n\n\nDownload Directory\n\n\nShare Directory\n\n\n\n\n\n\nMultiple Files / Directories\n\n\nCopy\n\n\nMove\n\n\nDelete\n\n\n\n\n\n\n\n\n\n\nAvatar\n\n\nGet User Avatar\n\n\nGet Group Avatar\n\n\n\n\n\n\nGet File Activities\n\n\nGet Thumbnail Image\n\n\nAdd Organization\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSeafile Web API V2\n\n\nAPI Basics\n\n\nAll API calls must be authenticated with a valid Seafile API key.\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' https://cloud.seafile.com/api2/auth/ping/\n\n\n\nThe api key can be retrieved by the obtain auth api. See the \nQuick Start\n for details.\n\n\nFor each API, we provide \ncurl\n examples to illustrate the usage. We also provide \npython\n and \njavascript\n examples, please refer to https://github.com/haiwen/webapi-examples for details.\n\n\nStatus Code\n\n\n\n\n200: OK\n\n\n201: CREATED\n\n\n202: ACCEPTED\n\n\n301: MOVED_PERMANENTLY\n\n\n400: BAD_REQUEST\n\n\n403: FORBIDDEN\n\n\n404: NOT_FOUND\n\n\n409: CONFLICT\n\n\n429: TOO_MANY_REQUESTS\n\n\n440: REPO_PASSWD_REQUIRED\n\n\n441: REPO_PASSWD_MAGIC_REQUIRED\n\n\n500: INTERNAL_SERVER_ERROR\n\n\n520: OPERATION_FAILED\n\n\n\n\nQuick Start\n\n\nping\n\n\ncurl https://cloud.seafile.com/api2/ping/\n\n\"pong\"\n\n\n\nobtain auth token\n\n\ncurl -d \"username=username@example.com\npassword=123456\" https://cloud.seafile.com/api2/auth-token/\n\n{\"token\": \"24fd3c026886e3121b2ca630805ed425c272cb96\"}\n\n\n\nauth ping\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' https://cloud.seafile.com/api2/auth/ping/\n\n\"pong\"\n\n\n\nAccount\n\n\nList Accounts\n\n\nGET\n https://cloud.seafile.com/api2/accounts/\n\n\nRequest parameters\n\n\n\n\nstart (default to 0)\n\n\nlimit (default to 100)\n\n\nscope (default None, accepted values: 'LDAP' or 'DB')\n\n\n\n\nTo retrieve all users, just set both \nstart\n and \nlimit\n to \n-1\n.\n\n\nIf scope parameter is passed then accounts will be searched inside the specific scope, otherwise it will be used the old approach: first LDAP and, if no account is found, DB.\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/\n\n\n\nSample response\n\n\n[\n{\n    \"email\": \"foo@foo.com\"\n},\n{\n    \"email\": \"bar@bar.com\"\n}\n]\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nGet Account Info\n\n\nGET\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\nSample request\n\n\ncurl -v -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n{\n\"is_staff\": false,\n\"is_active\": true,\n\"id\": 2,\n\"create_time\": 1356061187741686,\n\"usage\": 651463187,\n\"total\": 107374182400,\n\"email\": \"user@mail.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nCheck Account Info\n\n\nGET\n https://cloud.seafile.com/api2/account/info/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/account/info/\n\n\n\nSample response\n\n\n{\n\"usage\": 26038531,\n\"total\": 104857600,\n\"email\": \"user@example.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Invalid token\n\n\n\n\nCreate Account\n\n\nPUT\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\n\n\npassword\n\n\nis_staff (defaults to False)\n\n\nis_active (defaults to True)\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"password=123456\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 201(Created) is returned and the Location header provides shared link.\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nUpdate Account\n\n\nPUT\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\nAt least one of followings:\n\n\n\n\npassword\n\n\nis_staff\n\n\nis_active\n\n\nname\n\n\nnote\n\n\nstorage\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"password=654321\nis_staff=true\nstorage=1073741824\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Bad Request, keyword password is required\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nMigrate Account\n\n\nPOST\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\n\n\nop\n\n\nto_user this user must exist\n\n\n\n\nSample request\n\n\ncurl -v -d \"op=migrate\nto_user=user2@mail.com\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Bad Request, arguments are missing or invalid\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nDelete Account\n\n\nDELETE\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nSample request\n\n\ncurl -v -X DELETE -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nGet Server Information\n\n\nGET\n https://cloud.seafile.com/api2/server-info\n\n\nNote\n:\n\n\n\n\nNo authentication required.\n\n\nAdded in seafile community edition server \n4.0.5\n or pro edition server \n4.0.3\n\n\n\n\nSample request\n\n\ncurl https://cloud.seafile.com/api2/server-info/\n\n\n\nSample response\n\n\nSample response from a seafile community edition server:\n\n\n{\n    \"version\": \"4.0.6\",\n    \"features\": [\n    \"seafile-basic\",\n    ]\n}\n\n\n\nSample response from a seafile pro edition server:\n\n\n{\n    \"version\": \"4.0.6\",\n    \"features\": [\n    \"seafile-basic\",\n    \"seafile-pro\",\n    \"office-preview\",\n    \"file-search\"\n    ]\n}\n\n\n\nStarred Files\n\n\nList starred files\n\n\nGET\n https://cloud.seafile.com/api2/starredfiles/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e6199b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/starredfiles/\n\n\n\nSample response\n\n\n[\n{\n    \"repo\": \"99b758e6-91ab-4265-b705-925367374cf0\",\n    \"mtime\": 1355198150,\n    \"org\": -1,\n    \"path\": \"/foo/bar.doc\",\n    \"dir\": false,\n    \"size\": 0\n},\n{\n    \"repo\": \"99b758e6-91ab-4265-b705-925367374cf0\",\n    \"mtime\": 1353751237,\n    \"org\": -1,\n    \"path\": \"/add_folder-blue.png\",\n    \"dir\": false,\n    \"size\": 3170\n}\n]\n\n\n\nStar A File\n\n\nPOST\n https://cloud.seafile.com/api2/starredfiles/\n\n\nRequest parameters\n\n\n\n\nrepo_id (post)\n\n\np (post)\n\n\n\n\nSample request\n\n\ncurl -v -d \"repo_id=dae8cecc-2359-4d33-aa42-01b7846c4b32\np=/foo.md\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/starredfiles/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/starredfiles/\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 201(Created) and Location header provides url of starred file list.\n\n\nErrors\n\n\n\n\n400 \nrepo_id\n or \np\n is missing, or \np\n is not valid file path(e.g. /foo/bar/).\n\n\n\n\nUnstar A File\n\n\nDELETE\n https://cloud.seafile.com/api2/starredfiles/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/starredfiles/?repo_id=dae8cecc-2359-4d33-aa42-01b7846c4b32\np=/foo.md'\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string named \"success\" is returned.\n\n\nErrors\n\n\n\n\n400 \nrepo_id\n or \np\n is missing, or \np\n is not valid file path(e.g. /foo/bar/).\n\n\n\n\nGroup\n\n\nList Groups\n\n\nGET\n https://cloud.seafile.com/api2/groups/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/\"\n\n\n\nSample response\n\n\n{\n    \"replynum\": 0,\n    \"groups\": [\n        {\n            \"ctime\": 1398134171327948,\n            \"creator\": \"user@example.com\",\n            \"msgnum\": 0,\n            \"mtime\": 1398231100,\n            \"id\": 1,\n            \"name\": \"lian\"\n        },\n        {\n            \"ctime\": 1398236081042441,\n            \"creator\": \"user@example.com\",\n            \"msgnum\": 0,\n            \"mtime\": 0,\n            \"id\": 2,\n            \"name\": \"123\"\n        }\n    ]\n}\n\n\n\nAdd A Group\n\n\nPUT\n https://cloud.seafile.com/api2/groups/\n\n\nRequest parameters\n\n\n\n\ngroup_name\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \"group_name=newgroup\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/\"\n\n\n\nSample response\n\n\n{\"group_id\": 3, \"success\": true}\n\n\n\nErrors\n\n\n\n\n400 There is already a group with that name.\n\n\n\n\nDelete Group\n\n\nDELETE\n https://cloud.seafile.com/api2/groups/{group_id}/\n\n\nRequest parameters\n\n\nNone\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/1/\"\n\n\n\nSuccess\n\n\n200 if everything is fine.\n\n\nErrors\n\n\n\n\n400 if ad group id format\n\n\n404 if Group not found\n\n\n403 if Forbid to delete group\n\n\n520 if Failed to remove group (generic error)\n\n\n\n\nRename Group\n\n\nPOST\n https://cloud.seafile.com/api2/groups/{group_id}/\n\n\nRequest parameters\n\n\n\n\noperation (value must be 'rename')\n\n\nnewname (the new name for the group)\n\n\n\n\nSample request\n\n\ncurl -d \"operation=rename\nnewname=pinkfloyd_lovers\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/1/\"\n\n\n\nSuccess\n\n\n200 if everything is fine.\n\n\nErrors\n\n\n\n\n404 if Group not found\n\n\n403 if Forbid to rename group\n\n\n400 if Newname is missing or if Group name is not valid of if There is already a group with that name or Operation can only be rename.\n\n\n\n\nGroup Member\n\n\nAdd A Group Member\n\n\nPUT\n https://cloud.seafile.com/api2/groups/{group_id}/members/\n\n\nRequest parameters\n\n\n\n\nuser_name\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \"user_name=user@example.com\"-H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/1/members/\"\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n400 invalid group id\n\n\n403 only administrators can add group members\n\n\n404 unable to find group\n\n\n\n\nDelete A Group Member\n\n\nDELETE\n https://cloud.seafile.com/api2/groups/{group_id}/members/\n\n\nRequest parameters\n\n\n\n\nuser_name\n\n\n\n\nSample request\n\n\ncurl -X DELETE -d \"user_name=user@example.com\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/1/members/\"\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n400 invalid group id\n\n\n403 only administrators can remove group members\n\n\n404 unable to find group\n\n\n\n\nGroup Message\n\n\nGet Group Messages\n\n\nGET\n https://cloud.seafile.com/api2/group/msgs/{group_id}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/msgs/1/\"\n\n\n\nSample response\n\n\n{\n    \"next_page\": -1,\n    \"msgs\": [\n        {\n            \"reply_cnt\": 0,\n            \"timestamp\": 1398230602,\n            \"replies\": [],\n            \"from_email\": \"user@example.com\",\n            \"msgid\": 1,\n            \"msg\": \"test discuss\",\n            \"nickname\": \"user\"\n        }\n    ]\n}\n\n\n\nGet Group Message Detail\n\n\nGET\n https://cloud.seafile.com/api2/group/{group_id}/msg/{msg_id}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nmsg_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/1/msg/1/\"\n\n\n\nSample response\n\n\n{\n    \"reply_cnt\": 2,\n    \"timestamp\": 1398230602,\n    \"replies\": [\n        {\n            \"msg\": \"this is another test\",\n            \"timestamp\": 1398232319,\n            \"nickname\": \"user\",\n            \"msgid\": 1,\n            \"from_email\": \"user@example.com\"\n        },\n        {\n            \"msg\": \"this is another test\",\n            \"timestamp\": 1398232508,\n            \"nickname\": \"user\",\n            \"msgid\": 3,\n            \"from_email\": \"user@example.com\"\n        }\n    ],\n    \"from_email\": \"user@example.com\",\n    \"msgid\": 1,\n    \"msg\": \"test discuss\",\n    \"nickname\": \"user\"\n}\n\n\n\nErrors\n\n\n\n\n404 message not found\n\n\n\n\nSend A Group Message\n\n\nPOST\n https://cloud.seafile.com/api2/group/msgs/{group_id}/\n\n\nRequest parameters\n\n\n\n\nmessage\n\n\ngroup_id\n\n\nrepo_id(optional)\n\n\npath(optional)\n\n\n\n\nSample request\n\n\ncurl -d \"message=this is another test\nrepo_id=c7436518-5f46-4296-97db-2fcba4c8c8db\npath=/123.md\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/msgs/1/\"\n\n\n\nSample response\n\n\n{\n    \"msgid\": 3\n}\n\n\n\nReply A Group Message\n\n\nPOST\n https://cloud.seafile.com/api2/group/{group_id}/msg/{msg_id}\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nmsg_id\n\n\nmessage\n\n\n\n\nSample request\n\n\ncurl -d \"message=this is a reply\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/1/msg/1/\"\n\n\n\nSample response\n\n\n{\n    \"msgid\": 3\n}\n\n\n\nErrors\n\n\n\n\n404 message not found\n\n\n\n\nGet Group Message Replies\n\n\nGET\n https://cloud.seafile.com/api2/new_replies/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/new_replies/\"\n\n\n\nSample response\n\n\n[\n    {\n        \"reply_cnt\": 1,\n        \"timestamp\": 1398231100,\n        \"replies\": [\n            {\n                \"msg\": \"@user test reply\",\n                \"timestamp\": 1398234493,\n                \"nickname\": \"123\",\n                \"msgid\": 5,\n                \"from_email\": \"user@example.com\"\n            }\n        ],\n        \"from_email\": \"user@example.com\",\n        \"att\": {\n            \"repo\": \"c7436518-5f46-4296-97db-2fcba4c8c8db\",\n            \"path\": \"/123.md\",\n            \"type\": \"file\",\n            \"src\": \"recommend\"\n        },\n        \"msgid\": 3,\n        \"msg\": \"this is another test\",\n        \"nickname\": \"user\"\n    }\n]\n\n\n\nShare\n\n\nFile Share Link\n\n\nList File Share Links\n\n\nGET\n https://cloud.seafile.com/api2/shared-links/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-links/\"\n\n\n\nSample response\n\n\n{\"fileshares\": [{\"username\": \"user@example.com\", \"repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\", \"ctime\": null, \"s_type\": \"d\", \"token\": \"e410827494\", \"view_cnt\": 0, \"path\": \"/123/\"}, {\"username\": \"user@example.com\", \"repo_id\": \"affc837f-7fdd-4e91-b88a-32caf99897f2\", \"ctime\": null, \"s_type\": \"f\", \"token\": \"0ae587a7d1\", \"view_cnt\": 0, \"path\": \"/lian123.md\"}]}\n\n\n\nCreate File Share Link\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/file/shared-link/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np (Path to the file)\n\n\nshare_type (optional, \ndownload\n or \nupload\n, default \ndownload\n)\n\n\npassword (optional)\n\n\nexpire (optional)\n\n\n\n\nSample request\n\n\nCreate download link for file\n\n\ncurl -v  -X PUT -d \"p=/foo.md\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/afc3b694-7d4c-4b8a-86a4-89c9f3261b12/file/shared-link/\n\n\n\nCreate download link for directory with password and expire date\n\n\ncurl -v  -X PUT -d \"password=password\nexpire=6\np=/123/\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/afc3b694-7d4c-4b8a-86a4-89c9f3261b12/file/shared-link/\n\n\n\nCreate upload link for directory\n\n\ncurl -v -X PUT -d \"share_type=upload\np=/123/\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/afc3b694-7d4c-4b8a-86a4-89c9f3261b12/file/shared-link/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/f/9b437a7e55/\n...\n\n\n\nSuccess\n\n\nResponse code 201(Created) is returned and the Location header provides shared link.\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n400 Password(if link is encrypted) is missing\n\n\n500 Internal server error\n\n\n\n\nDelete File Share Link\n\n\nDELETE\n https://cloud.seafile.com/api2/shared-links/?t=0ae587a7d1\n\n\nRequest parameters\n\n\n\n\nt\n\n\n\n\nSample request\n\n\ncurl -v -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-links/?t=0ae587a7d1\"\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\n\nSend Share Link Email\n\n\nPOST\n https://cloud.seafile.com/api2/send-share-link/\n\n\nRequest parameters\n\n\n\n\ntoken\n\n\nemail\n\n\nextra_msg (not necessary)\n\n\n\n\nSample request\n\n\ncurl -d \"email=sample@eamil.com,invalid-email\ntoken=4cbd625c5e\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/send-share-link/\n\n\n\nSample response\n\n\n{\n    \nfailed\n: [\n        {\n            \nemail\n: \ninvalid-email\n,\n            \nerror_msg\n: \nemail invalid.\n\n        }\n    ],\n    \nsuccess\n: [\n        \nsample@eamil.com\n\n    ]\n}\n\n\n\n\nErrors\n\n\n\n\n400 token/repo_id invalid\n\n\n403 Permission denied.\n\n\n403 Sending shared link failed. Email service is not properly configured, please contact administrator.\n\n\n404 token/library not found\n\n\n\n\nSend Upload Link Email\n\n\nPOST\n https://cloud.seafile.com/api2/send-upload-link/\n\n\nRequest parameters\n\n\n\n\ntoken\n\n\nemail\n\n\nextra_msg (not necessary)\n\n\n\n\nSample request\n\n\ncurl -d \"email=sample@eamil.com,invalid-email\ntoken=4cbd625c5e\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/send-upload-link/\n\n\n\nSample response\n\n\n{\n    \nfailed\n: [\n        {\n            \nemail\n: \ninvalid-email\n,\n            \nerror_msg\n: \nemail invalid.\n\n        }\n    ],\n    \nsuccess\n: [\n        \nsample@eamil.com\n\n    ]\n}\n\n\n\n\n\n\n400 token/repo_id invalid\n\n\n403 Permission denied.\n\n\n403 Sending shared link failed. Email service is not properly configured, please contact administrator.\n\n\n404 token/library not found\n\n\n\n\nList Direntry in Dir Download Link\n\n\nGET\n https://cloud.seafile.com/api2/d/{token}/dir/\n\n\nRequest parameters\n\n\n\n\ntoken (upload link token)\n\n\np (sub folder path)\n\n\npassword (if link is encrypted)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/d/3af7c46595/dir/?p=/subfolder/\"\n\n\n\nSample response\n\n\n[{\"mtime\": 1436846750, \"type\": \"dir\", \"name\": \"sadof\", \"id\": \"1806dbdb700b7bcd49e6275107c7ccf7b3ea1776\"}, {\"id\": \"bdb06f6de972c42893fda590ac954988b562429c\", \"mtime\": 1436431020, \"type\": \"file\", \"name\": \"test.mdert\", \"size\": 20}]\n\n\n\nShared Libraries\n\n\nList Shared Libraries\n\n\nGET\n https://cloud.seafile.com/api2/shared-repos/\n\n\nSample request\n\n\ncurl -v -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/shared-repos/\n\n\n\nSample response\n\n\n[{\"repo_id\": \"7d42522b-1f6f-465d-b9c9-879f8eed7c6c\", \"share_type\": \"personal\", \"permission\": \"rw\", \"encrypted\": false, \"user\": \"user@example.com\", \"last_modified\": 1361072500, \"repo_desc\": \"ff\", \"group_id\": 0, \"repo_name\": \"\\u6d4b\\u8bd5\\u4e2d\\u6587pdf\"}, {\"repo_id\": \"79bb29cd-b683-4844-abaf-433952723ca5\", \"share_type\": \"group\", \"permission\": \"rw\", \"encrypted\": false, \"user\": \"user@example.com\", \"last_modified\": 1359182468, \"repo_desc\": \"test\", \"group_id\": 1, \"repo_name\": \"test_enc\"}]\n\n\n\nList Be Shared Libraries\n\n\nGET\n https://cloud.seafile.com/api2/beshared-repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/beshared-repos/\"\n\n\n\nSample response\n\n\n\"[{\"user\": \"user@example.com\", \"repo_id\": \"989e3952-9d6f-4427-ab16-4bf9b53212eb\", \"share_type\": \"personal\", \"permission\": \"rw\", \"encrypted\": false, \"repo_desc\": \"lib shared to imwhatiam\", \"enc_version\": false, \"last_modified\": 1398218747, \"is_virtual\": false, \"group_id\": 0, \"repo_name\": \"lib shared to imwhatiam\"}]\"\n\n\n\nShare A Library\n\n\nPUT\n https://cloud.seafile.com/api2/shared-repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nshare_type ('personal', 'group' or 'public')\n\n\nuser (or users)\n\n\ngroup_id\n\n\npermission\n\n\n\n\nIf share_type is 'personal' then 'user' or 'users' param are required, if share_type is 'group' then 'group_id' parameter is required. If share_type is 'public' no other params is required.\n\n\n'user' or 'users' parameters can be a comma separated list of emails, in this case the share will be done for more users at the same time. If a problem is encountered during multiple users sharing then the sharing process is aborted.\n\n\nSample request\n\n\ncurl -X PUT -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-repos/7d42522b-1f6f-465d-b9c9-879f8eed7c6c/?share_type=group\nuser=user@example.com\ngroup_id=1\npermission=rw\"\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nUnshare A Library\n\n\nDELETE\n https://cloud.seafile.com/api2/shared-repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nshare_type ('personal', 'group' or 'public')\n\n\nuser\n\n\ngroup_id\n\n\n\n\nIf share_type is 'personal' then 'user' param is required, if share_type is 'group' then 'group_id' parameter is required. If share_type is 'public' no other params is required.\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-repos/7d42522b-1f6f-465d-b9c9-879f8eed7c6c/?share_type=personal\nuser=user@example.com\ngroup_id=0\"\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nLibrary\n\n\nLibrary\n\n\nGet Default Library\n\n\nGET\n https://cloud.seafile.com/api2/default-repo/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/default-repo/\"\n\n\n\nSample response\n\n\n{\n    \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n    \"exists\": true\n}\n\n\n\nCreate Default Library\n\n\nPOST\n https://cloud.seafile.com/api2/default-repo/\n\n\nSample request\n\n\ncurl -X POST -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/default-repo/\"\n\n\n\nSample response\n\n\n{\n    \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n    \"exists\": true\n}\n\n\n\nList Libraries\n\n\nGET\n https://cloud.seafile.com/api2/repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/\n\n\n\nSample response\n\n\n[\n{\n    \"permission\": \"rw\",\n    \"encrypted\": false,\n    \"mtime\": 1400054900,\n    \"owner\": \"user@mail.com\",\n    \"id\": \"f158d1dd-cc19-412c-b143-2ac83f352290\",\n    \"size\": 0,\n    \"name\": \"foo\",\n    \"type\": \"repo\",\n    \"virtual\": false,\n    \"desc\": \"new library\",\n    \"root\": \"0000000000000000000000000000000000000000\"\n},\n{\n    \"permission\": \"rw\",\n    \"encrypted\": false,\n    \"mtime\": 1400054802,\n    \"owner\": \"user@mail.com\",\n    \"id\": \"0536b11a-a5fd-4482-9314-728cb3472f54\",\n    \"size\": 0,\n    \"name\": \"foo\",\n    \"type\": \"repo\",\n    \"virtual\": false,\n    \"desc\": \"new library\",\n    \"root\": \"0000000000000000000000000000000000000000\"\n}\n]\n\n\n\nGet Library Info\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -G -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/\n\n\n\nSample response\n\n\n{\n\"encrypted\": false,\n\"password_need\": null,\n\"mtime\": null,\n\"owner\": \"self\",\n\"id\": \"632ab8a8-ecf9-4435-93bf-f495d5bfe975\",\n\"size\": 1356155,\n\"name\": \"org\",\n\"root\": \"b5227040de360dd22c5717f9563628fe5510cbce\",\n\"desc\": \"org file\",\n\"type\": \"repo\"\n}\n\n\n\nGet Library Owner\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/owner/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/owner/\n\n\n\nSample response\n\n\n{\n\"owner\": \"user@example.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nGet Library History\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/history/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/history/\n\n\n\nSample response\n\n\n{\"commits\": [{\"rev_file_size\": 0, \"rev_file_id\": null, \"ctime\": 1398045167, \"creator_name\": \"imwhatiam123@gmail.com\", \"creator\": \"0000000000000000000000000000000000000000\", \"root_id\": \"ca2625da6be6e211ddd584615ef3bfaa531e66aa\", \"rev_renamed_old_path\": null, \"parent_id\": \"205c469f0830df09b13024601524058757a43128\", \"new_merge\": false, \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\", \"desc\": \"Modified \\\"api.md\\\"\", \"id\": \"eb62721812e0c3122889b5facde971b353ad176b\", \"conflict\": false, \"second_parent_id\": null}, {\"rev_file_size\": 0, \"rev_file_id\": null, \"ctime\": 1398045158, \"creator_name\": \"imwhatiam123@gmail.com\", \"creator\": \"0000000000000000000000000000000000000000\", \"root_id\": \"0b7a31adf4ea8b29ad5a5920420b548da11dd32f\", \"rev_renamed_old_path\": null, \"parent_id\": \"2ba85ee6072efea51a3483843ea7de9b6d1d1eb2\", \"new_merge\": false, \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\", \"desc\": \"Added \\\"api.md\\\"\", \"id\": \"205c469f0830df09b13024601524058757a43128\", \"conflict\": false, \"second_parent_id\": null}], \"page_next\": false}\n\n\n\nCreate Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/\n\n\nRequest parameters\n\n\n\n\nname\n\n\ndesc (defaults to \"new repo\")\n\n\npasswd (needed by encrypt library)\n\n\n\n\nSample request\n\n\ncurl -v -d \"name=foo\ndesc=new library\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/\n\n\n\nSample response\n\n\n{\n\"encrypted\": \"\",\n\"enc_version\": 0,\n\"repo_id\": \"f15811fd-5c19-412c-b143-2ac83f352290\",\n\"magic\": \"\",\n\"relay_id\": \"c5e41170db250ea497075e2911104faf0105b7fb\",\n\"repo_version\": 1,\n\"relay_addr\": \"cloud.seafile.com\",\n\"token\": \"c1f3defe9ba408cd7964427ec276843e9d10c23b\",\n\"relay_port\": \"10001\",\n\"random_key\": \"\",\n\"email\": \"user@mail.com\",\n\"repo_name\": \"foo\"\n}\n\n\n\nSuccess\n\n\nResponse code 200 and newly created library information are returned.\n\n\nErrors\n\n\n\n\n400 Library name missing.\n\n\n520 Operation failed.\n\n\n\n\nCheck/Create Sub Library\n\n\ncheck if a dir has a corresponding sub_repo, if it does not have, create one\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/sub_repo/?p=/\\\nname=sub_lib\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\nname\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/sub_repo/?p=/\\\nname=sub_lib\n\n\n\nSample response\n\n\n{\"sub_repo_id\": \"c0a3283c-013c-4a7c-8f68-006f06fa6dec\"}\n\n\n\nErrors\n\n\n\n\n400 Argument missing\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nDelete Library\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nSample request\n\n\ncurl -v -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n\n\n400 Library does not exist.\n\n\n\n\n\n\n403 Only library owner can perform this operation.\n\n\n\n\n\n\nRename Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/?op=rename\n\n\nSample request\n\n\ncurl -d \"repo_name=new-repo-name\"  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/op=rename\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n\n\n404 Library not found.\n\n\n\n\n\n\n403 You do not have permission to rename this library.\n\n\n\n\n\n\n500 Unable to rename library\n\n\n\n\n\n\nDecrypt Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\npassword\n\n\n\n\nSample request\n\n\ncurl -v -d \"password=123\" -H 'Authorization: Token e6a33d61954f219a96b60f635cf02717964e4385' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/0c2465a5-4753-4660-8a22-65abec9ec8d0/\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n400 Incorrect password\n\n\n409 Repo is not encrypt\n\n\n500 Internal server error\n\n\n\n\nCreate Public Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/public/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -X POST -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/public/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \"success\" is returned.\n\n\n\nErrors\n\n\n\n\n404 Repo not found\n\n\n403 Forbid to access this repo\n\n\n500 INTERNAL SERVER ERROR, Unable to make repo public\n\n\n\n\nRemove Public Library\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/public/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/public/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \"success\" is returned.\n\n\n\nErrors\n\n\n\n\n404 Repo not found\n\n\n403 Forbid to access this repo\n\n\n500 INTERNAL SERVER ERROR, Unable to remove public repo\n\n\n\n\nFetch library download info\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/download-info/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/download-info/\n\n\n\nSample response\n\n\n{\n\"applet_root\": \"https://localhost:13420\",\n\"relay_addr\": \"localhost\",\n\"token\": \"46acc4d9ca3d6a5c7102ef379f82ecc1edc629e1\",\n\"repo_id\": \"dae8cecc-2359-4d33-aa42-01b7846c4b32\",\n\"relay_port\": \"10002\",\n\"encrypted\": \"\",\n\"repo_name\": \"test\",\n\"relay_id\": \"8e4b13b49ca79f35732d9f44a0804940d985627c\",\n\"email\": \"user@example.com\"\n}\n\n\n\nList Virtual Libraries\n\n\nGET\n https://cloud.seafile.com/api2/virtual-repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/virtual-repos/\"\n\n\n\nSample response\n\n\n{\"virtual-repos\":\n    [\n        {\"virtual_perm\": \"rw\", \"store_id\": null, \"worktree_invalid\": false, \"encrypted\": false, \"origin_repo_name\": \"lian\", \"last_modify\": 0, \"no_local_history\": false, \"head_branch\": null, \"last_sync_time\": 0, \"id\": \"51344de8-456f-4dc7-ac08-718827994252\", \"size\": 0, \"share_permission\": null, \"worktree_changed\": false, \"worktree_checktime\": 0, \"origin_path\": \"/lian\", \"is_virtual\": true, \"origin_repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\", \"version\": 1, \"random_key\": null, \"is_original_owner\": true, \"shared_email\": null, \"enc_version\": 0, \"head_cmmt_id\": \"bc666fdc60d2352b9f6a0324ac64168d43724eed\", \"desc\": null, \"index_corrupted\": false, \"magic\": null, \"name\": \"lian\", \"worktree\": null, \"auto_sync\": false, \"relay_id\": null},\n        {\"virtual_perm\": \"rw\", \"store_id\": null, \"worktree_invalid\": false, \"encrypted\": false, \"origin_repo_name\": \"lian\", \"last_modify\": 0, \"no_local_history\": false, \"head_branch\": null, \"last_sync_time\": 0, \"id\": \"c0a3283c-013c-4a7c-8f68-006f06fa6dec\", \"size\": 0, \"share_permission\": null, \"worktree_changed\": false, \"worktree_checktime\": 0, \"origin_path\": \"/\", \"is_virtual\": true, \"origin_repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\", \"version\": 1, \"random_key\": null, \"is_original_owner\": true, \"shared_email\": null, \"enc_version\": 0, \"head_cmmt_id\": \"ff18229aadc9acc73ad481278d5b4c42b3353aa0\", \"desc\": null, \"index_corrupted\": false, \"magic\": null, \"name\": \"123\", \"worktree\": null, \"auto_sync\": false, \"relay_id\": null}\n    ]\n}\n\n\n\nSearch Libraries\n\n\nGET\n https://cloud.seafile.com/api2/search/\n\n\nRequest parameters\n\n\n\n\nq\n\n\nper_page (optional)\n\n\n\n\nSample request\n\n\ncurl -G -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/search/?q=keyword\n\n\n\nSample response\n\n\n{\n    \"has_more\": false,\n    \"total\": 3,\n    \"results\": [\n        {\n            \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n            \"name\": \"api.md\",\n            \"oid\": \"8ea78453bb474359cd9d8e2c4c4d8d9cbdcef0a2\",\n            \"last_modified\": 1398045167,\n            \"fullpath\": \"/api.md\",\n            \"size\": 18939\n        },\n        {\n            \"repo_id\": \"c5509062-9bca-4933-a7e0-c6da1d5f82be\",\n            \"name\": \"home.md\",\n            \"oid\": \"dda57aaffa5179829e064c7d0c142f47a8a65d3b\",\n            \"last_modified\": 1397096831,\n            \"fullpath\": \"/home.md\",\n            \"size\": 1954\n        },\n        {\n            \"repo_id\": \"c5509062-9bca-4933-a7e0-c6da1d5f82be\",\n            \"name\": \"\\u5e38\\u89c1\\u5b89\\u88c5\\u95ee\\u9898.md\",\n            \"oid\": \"8573f982eeb478b932a55ec13218f4f90a7c5a27\",\n            \"last_modified\": 1397188959,\n            \"fullpath\": \"/\\u5e38\\u89c1\\u5b89\\u88c5\\u95ee\\u9898.md\",\n            \"size\": 1050\n        }\n    ]\n}\n\n\n\nErrors\n\n\n\n\n404 Search not supported.\n\n\n400 Missing argument q.\n\n\n\n\nFile\n\n\nView File Through Owa\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/owa-file/?path=/foo.docx\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\npath\n\n\n\n\nSample request\n\n\ncurl  -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/owa-file/?path=/foo.docx'\n\n\n\nSample response\n\n\n{\n    \naccess_token\n: \n7decacff-6e55-4856-9734-01aaab26ef45\n,\n    \naction_url\n: \nhttp://off1.off.com/wv/wordviewerframe.aspx?WOPIsrc=http%3A%2F%2F192.168.1.124%3A8000%2Fapi2%2Fwopi%2Ffiles%2F2b0750085925fa85238e5f64cfd13ed6f1076bfd%2F\n,\n    \naccess_token_ttl\n: 1456906784000\n}\n\n\n\n\nAfter get response\n\n\nIn order to instantiate the Office Online applications, a host must create an HTML page that will host an iframe element within it pointing to a particular WOPI action URL. And then use a form element and POST the \naccess_token\n and \naccess_token_ttl\n values to the Office Online.\n\n\nFor more info, you can see \nthis official docs\n.\n\n\nErrors\n\n\n\n\n400 path invalid.\n\n\n403 permission denied.\n\n\n403 Library encrypted.\n\n\n403 Office Web App feature not enabled.\n\n\n403 Office Web App feature only supported in professional edition.\n\n\n404 File/Library not found.\n\n\n500 Internal Server Error\n\n\n\n\nDownload File\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\nreuse (optional): Set \nresue\n to \n1\n if you want the generated download link can be accessed more than once in one hour.\n\n\n\n\nSample request\n\n\ncurl  -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\nreuse=1'\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo.c\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 File not found\n\n\n520 Operation failed.\n\n\n\n\nGet File Detail\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/detail/?p=/foo.c\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/detail/?p=/foo.c\n\n\n\nSample response\n\n\n{\n\"id\": \"013d3d38fed38b3e8e26b21bb3463eab6831194f\",\n\"mtime\": 1398148877,\n\"type\": \"file\",\n\"name\": \"foo.py\",\n\"size\": 22\n}\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n520 Operation failed.\n\n\n\n\nGet File History\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/history/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/history/?p=/foo.c\n\n\n\nSample response\n\n\n{\n\"commits\":\n    [\n        {\n        \"rev_file_size\": 0,\n        \"repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\",\n        \"ctime\": 1398149763,\n        \"creator_name\": \"user@example.com\",\n        \"creator\": \"0000000000000000000000000000000000000000\",\n        \"root_id\": \"b64d413d9894c9206beac3faf9c2a0d75b4a8ebf\",\n        \"rev_renamed_old_path\": null,\n        \"parent_id\": \"8e546762e1657ab22dad83e9cb1e5ea31a767c9a\",\n        \"new_merge\": false,\n        \"version\": 1,\n        \"conflict\": false,\n        \"desc\": \"Added \\\"foo.c\\\"\",\n        \"id\": \"9464f7499bfa7363d563282361339eaf96a93318\",\n        \"rev_file_id\": \"0000000000000000000000000000000000000000\",\n        \"second_parent_id\": null\n        },\n        {\n        \"rev_file_size\": 0,\n        \"repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\",\n        \"ctime\": 1398146059,\n        \"creator_name\": \"user@example.com\",\n        \"creator\": \"0000000000000000000000000000000000000000\",\n        \"root_id\": \"572413414257c76039897e00aeb35f819471206b\",\n        \"rev_renamed_old_path\": null,\n        \"parent_id\": \"f977bdb0ebb205645c3b42216c2817e511c3f68f\",\n        \"new_merge\": false,\n        \"version\": 1,\n        \"conflict\": false,\n        \"desc\": \"Added \\\"foo.c\\\"\",\n        \"id\": \"a1ec20709675f4dc8db825cdbca296be245d189b\",\n        \"rev_file_id\": \"0000000000000000000000000000000000000000\",\n        \"second_parent_id\": null\n        }\n    ]\n}\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 File not found\n\n\n\n\nDownload File From a Revision\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/revision/?p=/foo.c\ncommit_id=a1ec20709675f4dc8db825cdbca296be245d189b\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\ncommit_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/revision/?p=/foo.c\\\ncommit_id=a1ec20709675f4dc8db825cdbca296be245d189b\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo.c\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 Revision not found\n\n\n\n\nCreate File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=create\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 201 CREATED\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 201, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n403 FORBIDDEN, You do not have permission to move file\n\n\n520 OPERATION FAILED, fail to create file\n\n\n\n\nRename File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation=rename\n\n\nnewname\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=rename\nnewname=newfoo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 301 MOVED PERMANENTLY\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 301, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/) or newname is missing(newname too long)\n\n\n403 FORBIDDEN, You do not have permission to rename file\n\n\n404 NOT FOUND, repo not found\n\n\n409 CONFLICT, the newname is the same to the old\n\n\n520 OPERATION FAILED, fail to rename file\n\n\n\n\nLock File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/file/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"operation=lock\np=/foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to lock file\n\n\n404 NOT FOUND, repo not found\n\n\n520 OPERATION FAILED, fail to lock file\n\n\n\n\nUnlock File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/file/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"operation=unlock\np=/foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to lock file\n\n\n404 NOT FOUND, repo not found\n\n\n520 OPERATION FAILED, fail to unlock file\n\n\n\n\nMove File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\ndst_repo\n\n\ndst_dir\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=move\ndst_repo=affc837f-7fdd-4e91-b88a-32caf99897f2\ndst_dir=/\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 301 MOVED PERMANENTLY\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 301, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to move file\n\n\n404 NOT FOUND, repo not found\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nCopy File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\ndst_repo\n\n\ndst_dir\n\n\n\n\nSample request\n\n\ncurl -v -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to copy file\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nRevert File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo_id}/file/revert/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\ncommit_id\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"commit_id=a1ec20709675f4dc8db825cdbca296be245d189b\np=/foo.c\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/file/revert/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n{\"ret\": 0}\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n\n\nDelete File\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n520 Operation failed.\n\n\n\n\nNote\n\n\nThis can also be used to delete directory.\n\n\nUpload File\n\n\nGet Upload Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-link/?p=/upload-dir\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np (use '/' as default)\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/upload-link/\n\n\n\nSample response\n\n\n\"http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\"\n\n\n\nErrors\n\n\n403 Permission denied.\n500 Run out of quota\n\n\n\nUpload File\n\n\nAfter getting the upload link, POST to this link for uploading files.\n\n\nPOST\n http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\n\n\nErrors\n\n\n400 Bad request\n440 Invalid filename\n500 Internal server error\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -F file=@test.txt -F filename=test.txt -F parent_dir=/ http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\n\n\n\nSample response\n\n\n\"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc\"\n\n\n\nNote\n\n\n\n\n\n\nNew uploaded file's name will be 'test(1).text' if a file with name 'test.txt' already exists in parent directory\n\n\n\n\n\n\nFor python client uploading, see \nhttps://github.com/haiwen/webapi-examples/blob/master/python/upload-file.py\n, or it can be done much more easily with elegant \npython requests library\n, see \nhttps://github.com/haiwen/webapi-examples/blob/master/python/upload-file2.py\n\n\n\n\n\n\nUpdate file\n\n\nGet Update Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/update-link/?p=/update-dir\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np (use '/' as default)\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/update-link/\n\n\n\nSample response\n\n\n\"http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\"\n\n\n\nErrors\n\n\n403 Permission denied.\n500 Run out of quota\n\n\n\nUpdate File\n\n\nAfter getting the update link, POST to this link for updating files.\n\n\nPOST\n http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\n\n\nRequest parameters\n\n\n\n\ntarget_file\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -F file=@test.txt -F filename=test.txt -F target_file=/test.txt http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\n\n\n\nReturns\n\n\nThe id of the updated file\n\n\nSample response\n\n\n\"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc\"\n\n\n\nErrors\n\n\n\n\n400 Bad request\n\n\n440 Invalid filename\n\n\n500 Internal server error\n\n\n\n\nGet Upload Blocks Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-blks-link/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/upload-blks-link/\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com/seafhttp/upload-blks-api/569213db-7297-457a-907d-e2259a277c05\"\n\n\n\nErrors\n\n\n\n\n403 Can not access repo\n\n\n520 above quota\n\n\n\n\nGet Update Blocks Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/update-blks-link/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/update-blks-link/\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com/seafhttp/update-blks-api/402c6d48-fe52-4592-97dd-85f462f03d66\"\n\n\n\nErrors\n\n\n\n\n403 Can not access repo\n\n\n520 above quota\n\n\n\n\nDirectory\n\n\nList Directory Entries\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np (optional): The path to a directory. If \np\n is missing, then defaults to '/' which is the top directory.\n\n\noid (optional): The object id of the directory. The object id is the checksum of the directory contents.\n\n\nt (optional): If set \nt\n argument as \nf\n, will only return file entries, and \nd\n for only dir entries.\n\n\nrecursive (optional): If set \nt\n argument as \nd\n \nAND\n \nrecursive\n argument as \n1\n, return all dir entries recursively\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/dir/?p=/foo\n\n\n\nSample response\n\n\nIf oid is the same as the current oid of the directory, returns \n\"uptodate\"\n , else returns\n\n\n[\n{\n    \"id\": \"0000000000000000000000000000000000000000\",\n    \"type\": \"file\",\n    \"name\": \"test1.c\",\n    \"size\": 0\n},\n{\n    \"id\": \"e4fe14c8cda2206bb9606907cf4fca6b30221cf9\",\n    \"type\": \"dir\",\n    \"name\": \"test_dir\"\n}\n]\n\n\n\nErrors\n\n\n\n\n404 The path is not exist.\n\n\n440 Repo is encrypted, and password is not provided.\n\n\n520 Operation failed..\n\n\n\n\nCreate New Directory\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np\n\n\noperation=mkdir (post)\n\n\n\n\nSample request\n\n\ncurl -d  \"operation=mkdir\" -v  -H 'Authorization: Tokacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 201(Created) is returned, and Location header provides the url of created directory.\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/)\n\n\n520 Operation failed.\n\n\n\n\nNotes\n\n\nNewly created directory will be renamed if the name is duplicated.\n\n\nRename Directory\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/?p=/foo\n\n\nParameters\n\n\n\n\nrepo-id\n\n\np (path)\n\n\noperation=rename\n\n\nnewname (the new name of the directory)\n\n\n\n\nSample request\n\n\ncurl -d  \"operation=rename\nnewname=pinkfloyd_newfolder\" -v  -H 'Authorization: Tokacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSuccess\n\n\nResponse code 200 if everything is ok\n\n\nErrors\n\n\n\n\n403 if You do not have permission to rename a folder\n\n\n400 if newname is not given\n\n\n520 if Failed to rename directory (generic problem)\n\n\n\n\nNotes\n\n\nIf the new name is the same of the old name no operation will be done.\n\n\nDelete Directory\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/)\n\n\n520 Operation failed.\n\n\n\n\nNote\n\n\nThis can also be used to delete file.\n\n\nDownload Directory\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/download/?p=/foo\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/), or unable to download directory, size is too large\n\n\n404 Repo(path) not found(exist)\n\n\n520 Operation failed.\n\n\n\n\nShare Directory\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/shared_items/?p={path}\n\n\n\n\nrepo-id\n\n\npath\n\n\npermission, \nr\n or \nrw\n\n\nshare_type, \nuser\n or \ngroup\n\n\nusername, necessary if share_type is user\n\n\ngroup_id, necessary if share_type is group\n\n\n\n\nSample request for share folder to user\n\n\ncurl -X PUT -d \"username=2@1.com\nshare_type=user\nperm=r\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/78c620ee-2989-4427-8eff-7748f4fbebc0/dir/shared_items/?p=/q\n\n\n\nSample response for share folder to user\n\n\n{\"failed\": [], \"success\": [{\"user_info\": {\"nickname\": \"2\", \"name\": \"2@1.com\"}, \"share_type\": \"user\", \"permission\": \"r\"}]}\n\n\n\nSample request for share folder to group\n\n\ncurl -X PUT -d \"group_id=772\nshare_type=group\nperm=rw\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/78c620ee-2989-4427-8eff-7748f4fbebc0/dir/shared_items/?p=/q\n\n\n\nSample response for share folder to group\n\n\n{\"failed\": [], \"success\": [{\"group_info\": {\"id\": 772, \"name\": \"group-2\"}, \"share_type\": \"group\", \"permission\": \"r\"}]}\n\n\n\nErrors\n\n\n\n\n400 share_type/permission/group_id invalid.\n\n\n403 Permission denied.\n\n\n404 Library/Folder/Group not found.\n\n\n500 Failed to get sub repo.\n\n\n\n\nMultiple Files / Directories\n\n\nCopy\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/copy/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to copy. Multiple file/folder names can be seperated by \n:\n.\n\n\ndst_repo: the destination repo id\n\n\ndst_dir: the destination folder in \ndst_repo\n\n\n\n\nSample request\n\n\ncurl -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/copy/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to copy file\n\n\n404 repo not found\n\n\n502 failed to copy file\n\n\n\n\nMove\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/move/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to move. Multiple file/folder names can be seperated by \n:\n.\n\n\ndst_repo: the destination repo id\n\n\ndst_dir: the destination folder in \ndst_repo\n\n\n\n\nSample request\n\n\ncurl -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/move/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to move file\n\n\n404 repo not found\n\n\n502 failed to move file\n\n\n\n\nDelete\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/delete/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to delete. Multiple file/folder names can be seperated by \n:\n.\n\n\n\n\nSample request\n\n\ncurl -d \"file_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/delete/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to delete file\n\n\n404 repo not found\n\n\n502 failed to delete file\n\n\n\n\nAvatar\n\n\nGet User Avatar\n\n\nGET\n https://cloud.seafile.com/api2/avatars/user/{user}/resized/{size}/\n\n\nRequest parameters\n\n\n\n\nuser\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/avatars/user/user@example.com/resized/80/\n\n\n\nSample response\n\n\n{\n    \"url\": \"http://127.0.0.1:8000/media/avatars/default.png\",\n    \"is_default\": true,\n    \"mtime\": 0\n}\n\n\n\nGet Group Avatar\n\n\nGET\n https://cloud.seafile.com/api2/avatars/group/{group_id}/resized/{size}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/avatars/group/1/resized/80/\n\n\n\nSample response\n\n\n{\n    \"url\": \"http://127.0.0.1:8000/media/avatars/groups/default.png\",\n    \"is_default\": true,\n    \"mtime\": 0\n}\n\n\n\nGet File Activities\n\n\nGET\n https://cloud.seafile.com/api2/events/\n\n\nRequest parameters\n\n\nthis api will only return first 15 records of activities. if want get more, pass \nstart\n parameter\n\n\n\n\nstart (default 0)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/events/\"\n\n\n\nSample response\n\n\n {\"more_offset\": 15, \"events\":[{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398078909, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-cli_3.0.2_i386.tar.gz\\\".\"},{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398075540, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-server_3.0.0_x86-64.tar.gz\\\".\"}], \"more\": false}\n\n\n\nSample request for more activities\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/events/?start=15\"\n\n\n\nSample response for more activities\n\n\n {\"more_offset\": 30, \"events\":[{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398078909, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-cli_3.0.2_i386.tar.gz\\\".\"},{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398075540, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-server_3.0.0_x86-64.tar.gz\\\".\"}], \"more\": false}\n\n\n\nGet Thumbnail Image\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo_id}/thumbnail/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 40f9a510a0629430865dc199a3880898ad2e48fc' https://cloud.seafile.com/api2/repos/fbead5d0-4817-4446-92f3-7ac8e6a8e5f5/thumbnail/?p=/5.jpg\\\nsize=123 \n thumbnail.png\n\n\n\nAdd Organization\n\n\nThis API is only used internally to create an organization account in seacloud.cc.\n\n\nPOST\n https://cloud.seafile.com/api2/organization/\n\n\nRequest parameters\n\n\n\n\nusername\n\n\npassword\n\n\norg_name\n\n\nprefix\n\n\nquota\n\n\nmember_limit\n\n\n\n\nSample request\n\n\ncurl -v -X POST -d \"username=example@example.com\npassword=example\norg_name=example\nprefix=example\nquota=100\nmember_limit=10\" -H \"Authorization: Token ccdff90e4d1efe76b2b3d91c06b027a5cff189d4\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/organization/\n\n\n\nSample response\n\n\n\"success\"", 
            "title": "Web API"
        }, 
        {
            "location": "/develop/web_api/#web-api", 
            "text": "Seafile Web API V2  API Basics  Status Code  Quick Start  Account  List Accounts(Admin only)  Get Account Info(Admin only)  Create Account(Admin only)  Update Account(Admin only)  Migrate Account(Admin only)  Delete Account(Admin only)  Check Account Info  Get Server Information    Starred Files  List starred files  Star A File  Unstar A File    Group  List Groups  Add A Group  Delete Group  Rename Group  Group Member  Add A Group Member  Delete A Group Member    Group Message  Get Group Messages  Get Group Message Detail  Send A Group Message  Reply A Group Message  Get Group Message Replies      Share  File Share Link  List File Share Links  Create File Share Link  Delete File Share Link  Send Share Link Email  Send Upload Link Email  List Direntry in Dir Download Link    Shared Libraries  List Shared Libraries  List Be Shared Libraries  Share A Library  Unshare A Library      Library  Library  Get Default Library  Create Default Library  List Libraries  Get Library Info  Get Library Owner  Get Library History  Create Library  Check/Create Sub Library  Delete Library  Rename Library  Decrypt Library  Create Public Library  Remove Public Library  Fetch library download info  List Virtual Libraries  Search Libraries    File  View File Through Owa  Download File  Get File Detail  Get File History  Download File From a Revision  Create File  Rename File  Lock File  Unlock File  Move File  Copy File  Revert File  Delete File  Upload File  Get Upload Link  Upload File    Update file  Get Update Link  Update File    Get Upload Blocks Link  Get Update Blocks Link    Directory  List Directory Entries  Create New Directory  Rename Directory  Delete Directory  Download Directory  Share Directory    Multiple Files / Directories  Copy  Move  Delete      Avatar  Get User Avatar  Get Group Avatar    Get File Activities  Get Thumbnail Image  Add Organization", 
            "title": "Web API"
        }, 
        {
            "location": "/develop/web_api/#directory", 
            "text": "", 
            "title": "Directory"
        }, 
        {
            "location": "/develop/web_api/#multiple-files-directories", 
            "text": "", 
            "title": "Multiple Files / Directories"
        }, 
        {
            "location": "/develop/web_api_v2.1/", 
            "text": "Web API (For Seafile server v5.1.0+)\n\n\n\n\n\n\n\n\n\n\n\nSeafile Web API\n\n\n\n\n    \nAPI Basics\n\n    \nStatus Code\n\n    \nQuick Start\n\n\n    \n\n        \nAccount\n\n        \n\n            \nCheck Account Info\n\n            \nGet Server Information\n\n        \n\n    \n\n\n    \n\n        \nStarred Files\n\n        \n\n            \nList starred files\n\n            \nStar A File\n\n            \nUnstar A File\n\n        \n\n    \n\n\n    \n\n        \nGroup\n\n        \n\n            \nList Groups\n\n            \nAdd a Group\n\n            \nGet Info of a Group\n\n            \nRename a Group\n\n            \nTransfer a Group\n\n            \nDelete a Group\n\n            \nQuit Group\n\n            \n\n                \nGroup Member\n\n                \n\n                    \nList Group Members\n\n                    \nAdd a Group Member\n\n                    \nBulk Add Group Members\n\n                    \nGet Info of a Group Member\n\n                    \nSet a Group Member Admin\n\n                    \nUnset a Group Member Admin\n\n                    \nDelete a Group Member\n\n                \n\n            \n\n            \n\n                \nGroup Message\n\n                \n\n                    \nGet Group Messages\n\n                    \nGet Group Message Detail\n\n                    \nSend A Group Message\n\n                    \nReply A Group Message\n\n                    \nGet Group Message Replies\n\n                \n\n            \n\n        \n\n    \n\n\n    \n\n        \nShare\n\n        \n\n            \n\n                \nShare Link\n\n                \n\n                    \nList Share Links\n\n                    \nCreate Share Link\n\n                    \nDelete Share Link\n\n                    \nSend Share Link Email\n\n                    \nList Direntry in Dir Download Link\n\n                \n\n            \n\n            \n\n                \nUpload Link\n\n                \n\n                    \nList Upload Links\n\n                    \nCreate Upload Link\n\n                    \nDelete Upload Link\n\n                    \nSend Upload Link Email\n\n                \n\n            \n\n            \n\n                \nShared Libraries\n\n                \n\n                    \nList Shared Libraries\n\n                    \nList Be Shared Libraries\n\n                    \nShare A Library\n\n                    \nUnshare A Library\n\n                \n\n            \n\n        \n\n    \n\n\n    \n\n        \nLibrary\n\n        \n\n            \nGet Default Library\n\n            \nCreate Default Library\n\n            \nList Libraries\n\n            \nGet Library Info\n\n            \nGet Library Owner\n\n            \nGet Library History\n\n            \nGet Library History Limit Days\n\n            \nSet Library History Limit Days\n\n            \nCreate Library\n\n            \nCheck/Create Sub Library\n\n            \nDelete Library\n\n            \nRename Library\n\n            \nTransfer Library\n\n            \nDecrypt Library\n\n            \nCreate Public Library\n\n            \nRemove Public Library\n\n            \nFetch library download info\n\n            \nList Virtual Libraries\n\n            \nSearch Libraries\n\n            \nGet Library Download Links\n\n            \nGet Library Upload Links\n\n            \nDelete Library Download Link\n\n            \nDelete Library Upload Link\n\n        \n\n    \n\n\n    \n\n        \nFile\n\n        \n\n            \nView File Through Owa\n\n            \nDownload File\n\n            \nGet File Detail\n\n            \nGet File History\n\n            \nDownload File From a Revision\n\n            \nCreate File\n\n            \nRename File\n\n            \nLock File\n\n            \nUnlock File\n\n            \nMove File\n\n            \nCopy File\n\n            \nRevert File\n\n            \nDelete File\n\n            \n\n                \nUpload File\n\n                \n\n                    \nGet Upload Link\n\n                    \nUpload File\n\n                \n\n            \n\n            \n\n                \nUpdate file\n\n                \n\n                    \nGet Update Link\n\n                    \nUpdate File\n\n                \n\n            \n\n            \nGet Upload Blocks Link\n\n            \nGet Update Blocks Link\n\n        \n\n    \n\n\n    \n\n        \nDirectory\n\n        \n\n            \nList Directory Entries\n\n            \nCreate New Directory\n\n            \nRename Directory\n\n            \nDelete Directory\n\n            \nDownload Directory\n\n            \nShare Directory\n\n        \n\n    \n\n\n    \n\n        \nMultiple Files / Directories\n\n        \n\n            \nCopy\n\n            \nMove\n\n            \nDelete\n\n        \n\n    \n\n\n    \n\n        \nAvatar\n\n        \n\n            \nGet User Avatar\n\n            \nGet Group Avatar\n\n        \n\n    \n\n\n    \n\n        \nDevices\n\n        \n\n            \nGet User Devices\n\n            \nUnlink User Device\n\n        \n\n    \n\n\n    \nGet File Activities\n\n    \nGet Thumbnail Image\n\n    \nAdd Organization\n\n\n\n\n\n\n\n\n\n\nAdmin Only\n\n\n\n    \n\n        \nAccount\n\n        \n\n            \nList Accounts\n\n            \nGet Account Info\n\n            \nCreate Account\n\n            \nUpdate Account\n\n            \nMigrate Account\n\n            \nDelete Account\n\n        \n\n    \n\n\n    \n\n        \nDevices\n\n        \n\n            \nGet Desktop Devices\n\n            \nGet Mobile Devices\n\n            \nUnlink User Device\n\n            \nGet Device Errors\n\n        \n\n    \n\n\n    \n\n        \nLog\n\n        \n\n            \nGet Login Log\n\n            \nGet File Audit Log\n\n            \nGet File Update Log\n\n            \nGet Permission Audit Log\n\n        \n\n    \n\n\n\n\n\n\n\n\n\n\n\n\n\n\nSeafile Web API\n\n\nAPI Basics\n\n\nAll API calls must be authenticated with a valid Seafile API key.\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' https://cloud.seafile.com/api2/auth/ping/\n\n\n\nThe api key can be retrieved by the obtain auth api. See the \nQuick Start\n for details.\n\n\nFor each API, we provide \ncurl\n examples to illustrate the usage. We also provide \npython\n and \njavascript\n examples, please refer to https://github.com/haiwen/webapi-examples for details.\n\n\nStatus Code\n\n\n\n\n200: OK\n\n\n201: CREATED\n\n\n202: ACCEPTED\n\n\n301: MOVED_PERMANENTLY\n\n\n400: BAD_REQUEST\n\n\n403: FORBIDDEN\n\n\n404: NOT_FOUND\n\n\n409: CONFLICT\n\n\n429: TOO_MANY_REQUESTS\n\n\n440: REPO_PASSWD_REQUIRED\n\n\n441: REPO_PASSWD_MAGIC_REQUIRED\n\n\n500: INTERNAL_SERVER_ERROR\n\n\n520: OPERATION_FAILED\n\n\n\n\nQuick Start\n\n\nping\n\n\ncurl https://cloud.seafile.com/api2/ping/\n\n\"pong\"\n\n\n\nobtain auth token\n\n\ncurl -d \"username=username@example.com\npassword=123456\" https://cloud.seafile.com/api2/auth-token/\n\n{\"token\": \"24fd3c026886e3121b2ca630805ed425c272cb96\"}\n\n\n\nauth ping\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' https://cloud.seafile.com/api2/auth/ping/\n\n\"pong\"\n\n\n\nAccount\n\n\nCheck Account Info\n\n\nGET\n https://cloud.seafile.com/api2/account/info/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/account/info/\n\n\n\nSample response\n\n\n{\n\"usage\": 26038531,\n\"total\": 104857600,\n\"email\": \"user@example.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Invalid token\n\n\n\n\nGet Server Information\n\n\nGET\n https://cloud.seafile.com/api2/server-info\n\n\nNote\n:\n\n\n\n\nNo authentication required.\n\n\nAdded in seafile community edition server \n4.0.5\n or pro edition server \n4.0.3\n\n\n\n\nSample request\n\n\ncurl https://cloud.seafile.com/api2/server-info/\n\n\n\nSample response\n\n\nSample response from a seafile community edition server:\n\n\n{\n    \"version\": \"4.0.6\",\n    \"features\": [\n    \"seafile-basic\",\n    ]\n}\n\n\n\nSample response from a seafile pro edition server:\n\n\n{\n    \"version\": \"4.0.6\",\n    \"features\": [\n    \"seafile-basic\",\n    \"seafile-pro\",\n    \"office-preview\",\n    \"file-search\"\n    ]\n}\n\n\n\nStarred Files\n\n\nList starred files\n\n\nGET\n https://cloud.seafile.com/api2/starredfiles/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e6199b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/starredfiles/\n\n\n\nSample response\n\n\n[\n{\n    \"repo\": \"99b758e6-91ab-4265-b705-925367374cf0\",\n    \"mtime\": 1355198150,\n    \"org\": -1,\n    \"path\": \"/foo/bar.doc\",\n    \"dir\": false,\n    \"size\": 0\n},\n{\n    \"repo\": \"99b758e6-91ab-4265-b705-925367374cf0\",\n    \"mtime\": 1353751237,\n    \"org\": -1,\n    \"path\": \"/add_folder-blue.png\",\n    \"dir\": false,\n    \"size\": 3170\n}\n]\n\n\n\nStar A File\n\n\nPOST\n https://cloud.seafile.com/api2/starredfiles/\n\n\nRequest parameters\n\n\n\n\nrepo_id (post)\n\n\np (post)\n\n\n\n\nSample request\n\n\ncurl -v -d \"repo_id=dae8cecc-2359-4d33-aa42-01b7846c4b32\np=/foo.md\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/starredfiles/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/starredfiles/\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 201(Created) and Location header provides url of starred file list.\n\n\nErrors\n\n\n\n\n400 \nrepo_id\n or \np\n is missing, or \np\n is not valid file path(e.g. /foo/bar/).\n\n\n\n\nUnstar A File\n\n\nDELETE\n https://cloud.seafile.com/api2/starredfiles/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/starredfiles/?repo_id=dae8cecc-2359-4d33-aa42-01b7846c4b32\np=/foo.md'\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string named \"success\" is returned.\n\n\nErrors\n\n\n\n\n400 \nrepo_id\n or \np\n is missing, or \np\n is not valid file path(e.g. /foo/bar/).\n\n\n\n\nGroup\n\n\nList Groups\n\n\nGET\n https://cloud.seafile.com/api2/groups/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/groups/\"\n\n\n\nSample response\n\n\n{\n    \"replynum\": 0,\n    \"groups\": [\n        {\n            \"ctime\": 1398134171327948,\n            \"creator\": \"user@example.com\",\n            \"msgnum\": 0,\n            \"mtime\": 1398231100,\n            \"id\": 1,\n            \"name\": \"lian\"\n        },\n        {\n            \"ctime\": 1398236081042441,\n            \"creator\": \"user@example.com\",\n            \"msgnum\": 0,\n            \"mtime\": 0,\n            \"id\": 2,\n            \"name\": \"123\"\n        }\n    ]\n}\n\n\n\nAdd a Group\n\n\nPOST\n https://cloud.seafile.com/api/v2.1/groups/\n\n\nRequest parameters\n\n\n\n\nname (name of new group)\n\n\n\n\nSample request\n\n\ncurl -d \nname=new_group_name\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/\n\n\n\n\nSample response\n\n\n{\n    \nname\n: \nnew_group_name\n,\n    \nowner\n: \nlian@lian.com\n,\n    \ncreated_at\n: \n2015-12-17T10:29:57+0800\n,\n    \nadmins\n: [\nlian@lian.com\n],\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/groups/default.png\n,\n    \nid\n: 773\n}\n\n\n\n\nGet Info of a Group\n\n\nGET\n https://cloud.seafile.com/api/v2.1/groups/772/\n\n\nRequest parameters\n\n\n\n\navatar_size\n\n\nwith_repos (0 or 1, if return library info of group. default 0 not return)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/772/\n\n\n\n\nSample response\n\n\n{\n    \nname\n: \nrename_group_name\n,\n    \nowner\n: \nlian@lian.com\n,\n    \ncreated_at\n: \n2015-12-17T10:29:57+0800\n,\n    \nadmins\n: [\nlian@lian.com\n],\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/groups/default.png\n,\n    \nid\n: 772\n}\n\n\n\n\nRename a Group\n\n\nPUT\n https://cloud.seafile.com/api/v2.1/groups/772/\n\n\nRequest parameters\n\n\n\n\nname (name of new group)\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \nname=rename_group_name\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/772/\n\n\n\n\nSample response\n\n\n{\n    \nname\n: \nrename_group_name\n,\n    \nowner\n: \nlian@lian.com\n,\n    \ncreated_at\n: \n2015-12-17T10:29:57+0800\n,\n    \nadmins\n: [\nlian@lian.com\n],\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/groups/default.png\n,\n    \nid\n: 772\n}\n\n\n\n\n Transfer a Group\n\n\nPUT\n https://cloud.seafile.com/api/v2.1/groups/772/\n\n\nRequest parameters\n\n\n\n\nowner (new owner of this group, should be an email.)\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \nowner=new_owner@new_owner.com\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/772/\n\n\n\n\nSample response\n\n\n{\n    \nname\n: \nrename_group_name\n,\n    \nowner\n: \nnew_owner@new_owner.com\n,\n    \ncreated_at\n: \n2015-12-17T10:29:57+0800\n,\n    \nadmins\n: [\nlian@lian.com\n, \nnew_owner@new_owner.com\n],\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/groups/default.png\n,\n    \nid\n: 772\n}\n\n\n\n\n Delete a Group\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/groups/772/\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/772/\n\n\n\n\nSample response\n\n\n{\nsuccess\n:true}\n\n\n\n\n Quit Group\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/groups/770/members/myself@email.com/\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/myself@email.com/\n\n\n\n\nSample response\n\n\n{\nsuccess\n:true}\n\n\n\n\nGroup Member\n\n\nList All Group Members\n\n\nGET\n https://cloud.seafile.com/api/v2.1/groups/770/members/\n\n\nRequest parameters\n\n\n\n\navatar_size\n\n\nis_admin (\ntrue\n or \nfalse\n, if ONLY return admin members of group. default \nfalse\n return all members)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \nhttps://cloud.seafile.com/api/v2.1/groups/770/members/\n\n\n\n\n\nSample response\n\n\n[\n    {\n        \nlogin_id\n: \n,\n        \nname\n: \nnickname-of-lian\n,\n        \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n        \nis_admin\n: true,\n        \ncontact_email\n: \nlian_contact@email.com\n,\n        \nemail\n: \nlian@lian.com\n\n    },\n    {\n        \nlogin_id\n: \n,\n        \nname\n: \n1\n,\n        \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n        \nis_admin\n: false,\n        \ncontact_email\n: \n1@1.com\n,\n        \nemail\n: \n1@1.com\n\n    }\n]\n\n\n\n\nAdd a Group Member\n\n\nPOST\n https://cloud.seafile.com/api/v2.1/groups/770/members/\n\n\nRequest parameters\n\n\n\n\nemail\n\n\n\n\nSample request\n\n\ncurl -d \nemail=new-member@email.com\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/\n\n\n\n\nSample response\n\n\n{\n    \nlogin_id\n: \n,\n    \nname\n: \nnew-member\n,\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n    \nis_admin\n: false,\n    \ncontact_email\n: \nnew-member@email.com\n,\n    \nemail\n: \nnew-member@email.com\n\n}\n\n\n\n\nBulk Add Group Members\n\n\nPOST\n https://cloud.seafile.com/api/v2.1/groups/770/members/bulk/\n\n\nRequest parameters\n\n\n\n\nemails\n\n\n\n\nSample request\n\n\ncurl -d \nemails=new-member-1@email.com,new-member-2@email.com,new-member-3@email.com\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/bulk/\n\n\n\n\nSample response\n\n\n{\n    \nfailed\n:[\n        {\n            \nerror_msg\n: \nInvalid email\n,\n            \nemail\n: \nnew-member-3@email.com\n\n        },\n        {\n            \nerror_msg\n: \nIs already group member\n,\n            \nemail\n: \nnew-member-4@email.com\n\n        }\n    \nsuccess\n:[\n        {\n            \nlogin_id\n: \n,\n            \nname\n: \nnew-member-1\n,\n            \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n            \nis_admin\n: false,\n            \ncontact_email\n: \nnew-member-1@email.com\n,\n            \nemail\n: \nnew-member-1@email.com\n\n        },\n        {\n            \nlogin_id\n: \n,\n            \nname\n: \nnew-member-2\n,\n            \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n            \nis_admin\n: false,\n            \ncontact_email\n: \nnew-member-2@email.com\n,\n            \nemail\n: \nnew-member-2@email.com\n\n        }\n    ]\n}\n\n\n\n\n\nGet Info of a Group Member\n\n\nGET\n https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\n\n\nRequest parameters\n\n\n\n\navatar_size\n\n\n\n\nSample response\n\n\n{\n    \nlogin_id\n: \n,\n    \nname\n: \ngroup-member\n,\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n    \nis_admin\n: false,\n    \ncontact_email\n: \ngroup-member@email.com\n,\n    \nemail\n: \ngroup-member@email.com\n\n}\n\n\n\n\nSet a Group Member Admin\n\n\nPUT\n https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\nRequest parameters\n\n\n\n\nis_admin=true\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \nis_admin=true\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\n\n\nSample response\n\n\n{\n    \nlogin_id\n: \n,\n    \nname\n: \ngroup-member\n,\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n    \nis_admin\n: true,\n    \ncontact_email\n: \ngroup-member@email.com\n,\n    \nemail\n: \ngroup-member@email.com\n\n}\n\n\n\n\nUnset a Group Member Admin\n\n\nPUT\n https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\nRequest parameters\n\n\n\n\nis_admin=false\n\n\n\n\nSample request\n\n\ncurl -X PUT -d \nis_admin=false\n -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\n\n\nSample response\n\n\n{\n    \nlogin_id\n: \n,\n    \nname\n: \ngroup-member\n,\n    \navatar_url\n: \nhttps://cloud.seafile.com/media/avatars/default.png\n,\n    \nis_admin\n: false,\n    \ncontact_email\n: \ngroup-member@email.com\n,\n    \nemail\n: \ngroup-member@email.com\n\n}\n\n\n\n\n Delete a Group Member\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token 444d2bbf1fc78ffbeedc4704c9f41e32d926ac94' https://cloud.seafile.com/api/v2.1/groups/770/members/group-member@email.com/\n\n\n\n\nSample response\n\n\n{\nsuccess\n:true}\n\n\n\n\nGroup Message\n\n\nGet Group Messages\n\n\nGET\n https://cloud.seafile.com/api2/group/msgs/{group_id}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/msgs/1/\"\n\n\n\nSample response\n\n\n{\n    \"next_page\": -1,\n    \"msgs\": [\n        {\n            \"reply_cnt\": 0,\n            \"timestamp\": 1398230602,\n            \"replies\": [],\n            \"from_email\": \"user@example.com\",\n            \"msgid\": 1,\n            \"msg\": \"test discuss\",\n            \"nickname\": \"user\"\n        }\n    ]\n}\n\n\n\nGet Group Message Detail\n\n\nGET\n https://cloud.seafile.com/api2/group/{group_id}/msg/{msg_id}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nmsg_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/1/msg/1/\"\n\n\n\nSample response\n\n\n{\n    \"reply_cnt\": 2,\n    \"timestamp\": 1398230602,\n    \"replies\": [\n        {\n            \"msg\": \"this is another test\",\n            \"timestamp\": 1398232319,\n            \"nickname\": \"user\",\n            \"msgid\": 1,\n            \"from_email\": \"user@example.com\"\n        },\n        {\n            \"msg\": \"this is another test\",\n            \"timestamp\": 1398232508,\n            \"nickname\": \"user\",\n            \"msgid\": 3,\n            \"from_email\": \"user@example.com\"\n        }\n    ],\n    \"from_email\": \"user@example.com\",\n    \"msgid\": 1,\n    \"msg\": \"test discuss\",\n    \"nickname\": \"user\"\n}\n\n\n\nErrors\n\n\n\n\n404 message not found\n\n\n\n\nSend A Group Message\n\n\nPOST\n https://cloud.seafile.com/api2/group/msgs/{group_id}/\n\n\nRequest parameters\n\n\n\n\nmessage\n\n\ngroup_id\n\n\nrepo_id(optional)\n\n\npath(optional)\n\n\n\n\nSample request\n\n\ncurl -d \"message=this is another test\nrepo_id=c7436518-5f46-4296-97db-2fcba4c8c8db\npath=/123.md\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/msgs/1/\"\n\n\n\nSample response\n\n\n{\n    \"msgid\": 3\n}\n\n\n\nReply A Group Message\n\n\nPOST\n https://cloud.seafile.com/api2/group/{group_id}/msg/{msg_id}\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nmsg_id\n\n\nmessage\n\n\n\n\nSample request\n\n\ncurl -d \"message=this is a reply\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/group/1/msg/1/\"\n\n\n\nSample response\n\n\n{\n    \"msgid\": 3\n}\n\n\n\nErrors\n\n\n\n\n404 message not found\n\n\n\n\nGet Group Message Replies\n\n\nGET\n https://cloud.seafile.com/api2/new_replies/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/new_replies/\"\n\n\n\nSample response\n\n\n[\n    {\n        \"reply_cnt\": 1,\n        \"timestamp\": 1398231100,\n        \"replies\": [\n            {\n                \"msg\": \"@user test reply\",\n                \"timestamp\": 1398234493,\n                \"nickname\": \"123\",\n                \"msgid\": 5,\n                \"from_email\": \"user@example.com\"\n            }\n        ],\n        \"from_email\": \"user@example.com\",\n        \"att\": {\n            \"repo\": \"c7436518-5f46-4296-97db-2fcba4c8c8db\",\n            \"path\": \"/123.md\",\n            \"type\": \"file\",\n            \"src\": \"recommend\"\n        },\n        \"msgid\": 3,\n        \"msg\": \"this is another test\",\n        \"nickname\": \"user\"\n    }\n]\n\n\n\nShare\n\n\nFile Share Link\n\n\nList Share Links\n\n\nGET\n https://cloud.seafile.com/api/v2.1/share-links/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api/v2.1/share-links/\"\n\n\n\nSample response\n\n\n[{\"username\":\"lian@lian.com\",\"view_cnt\":0,\"ctime\":\"2016-02-26T16:20:36.894\",\"token\":\"4cbd625c5e\",\"repo_id\":\"62ca6cf9-dab6-47e5-badc-bab13d9220ce\",\"link\":\"https://cloud.seafile.com/f/4cbd625c5e/\",\"expire_date\":null,\"path\":\"/file.md\",\"is_expired\":false},{\"username\":\"lian@lian.com\",\"view_cnt\":0,\"ctime\":\"2016-03-04T03:54:58.279\",\"token\":\"8dc1e04ddd\",\"repo_id\":\"62ca6cf9-dab6-47e5-badc-bab13d9220ce\",\"link\":\"https://cloud.seafile.com/d/8dc1e04ddd/\",\"expire_date\":null,\"path\":\"/\",\"is_expired\":false}]\n\n\n\nCreate Share Link\n\n\nPOST\n https://cloud.seafile.com/api/v2.1/share-links/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\npath (file/folder path)\n\n\npassword (not necessary)\n\n\nexpire_date (not necessary)\n\n\n\n\nSample request\n\n\nCreate download link for file\n\n\ncurl -d \"path=/foo.md\nrepo_id=62ca6cf9-dab6-47e5-badc-bab13d9220ce\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/share-links/\n\n\n\nCreate download link for directory with password and expire date\n\n\ncurl -d \"path=/bar/\nrepo_id=62ca6cf9-dab6-47e5-badc-bab13d9220ce\npassword=password\nexpire_date=6\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/share-links/\n\n\n\nSample response\n\n\n{\n    \nusername\n: \nlian@lian.com\n,\n    \nview_cnt\n: 0,\n    \nctime\n: \n2016-03-04T04:06:35.477\n,\n    \ntoken\n: \n409f5aa54a\n,\n    \nrepo_id\n: \n62ca6cf9-dab6-47e5-badc-bab13d9220ce\n,\n    \nlink\n: \nhttps://cloud.seafile.com/f/409f5aa54a/\n,\n    \nexpire_date\n: null,\n    \npath\n: \n/foo.md\n,\n    \nis_expired\n: false\n}\n\n\n\n\n{\n    \nusername\n: \nlian@lian.com\n,\n    \nview_cnt\n: 0,\n    \nctime\n: \n2016-03-04T04:12:48.959\n,\n    \ntoken\n: \ndb1a50e686\n,\n    \nrepo_id\n: \n62ca6cf9-dab6-47e5-badc-bab13d9220ce\n,\n    \nlink\n: \nhttps://cloud.seafile.com/d/db1a50e686/\n,\n    \nexpire_date\n: null,\n    \npath\n: \n/bar/\n,\n    \nis_expired\n: false\n}\n\n\n\n\nErrors\n\n\n\n\n400 path/repo_id invalid\n\n\n403 Permission denied.\n\n\n404 file/folder/library not found.\n\n\n500 Internal Server Error\n\n\n\n\nDelete Share Link\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/share-links/{token}/\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api/v2.1/share-links/0ae587a7d1/\"\n\n\n\nSample response\n\n\n{\"success\":true}\n\n\n\nSend Share Link Email\n\n\nPOST\n https://cloud.seafile.com/api2/send-share-link/\n\n\nRequest parameters\n\n\n\n\ntoken\n\n\nemail\n\n\nextra_msg (not necessary)\n\n\n\n\nSample request\n\n\ncurl -d \"email=sample@eamil.com,invalid-email\ntoken=4cbd625c5e\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/send-share-link/\n\n\n\nSample response\n\n\n{\n    \nfailed\n: [\n        {\n            \nemail\n: \ninvalid-email\n,\n            \nerror_msg\n: \nemail invalid.\n\n        }\n    ],\n    \nsuccess\n: [\n        \nsample@eamil.com\n\n    ]\n}\n\n\n\n\nErrors\n\n\n\n\n400 token/repo_id invalid\n\n\n403 Permission denied.\n\n\n403 Sending shared link failed. Email service is not properly configured, please contact administrator.\n\n\n404 token/library not found\n\n\n\n\nList Direntry in Dir Download Link\n\n\nGET\n https://cloud.seafile.com/api2/d/{token}/dir/\n\n\nRequest parameters\n\n\n\n\ntoken (upload link token)\n\n\np (sub folder path)\n\n\npassword (if link is encrypted)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/d/3af7c46595/dir/?p=/subfolder/\"\n\n\n\nSample response\n\n\n[{\"mtime\": 1436846750, \"type\": \"dir\", \"name\": \"sadof\", \"id\": \"1806dbdb700b7bcd49e6275107c7ccf7b3ea1776\"}, {\"id\": \"bdb06f6de972c42893fda590ac954988b562429c\", \"mtime\": 1436431020, \"type\": \"file\", \"name\": \"test.mdert\", \"size\": 20}]\n\n\n\nUpload Link\n\n\nList Upload Links\n\n\nGET\n https://cloud.seafile.com/api/v2.1/upload-links/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api/v2.1/upload-links/\"\n\n\n\nSample response\n\n\n[{\"username\":\"lian@lian.com\",\"repo_id\":\"62ca6cf9-dab6-47e5-badc-bab13d9220ce\",\"ctime\":\"2016-03-03T15:26:15.223\",\"token\":\"9a5d5c8391\",\"link\":\"https://cloud.seafile.com/u/d/9a5d5c8391/\",\"path\":\"/\"},{\"username\":\"lian@lian.com\",\"repo_id\":\"78c620ee-2989-4427-8eff-7748f4fbebc0\",\"ctime\":\"2016-03-04T05:37:17.968\",\"token\":\"d17d87ea4d\",\"link\":\"https://cloud.seafile.com/u/d/d17d87ea4d/\",\"path\":\"/yutong/\"}]\n\n\n\nCreate Upload Link\n\n\nPOST\n https://cloud.seafile.com/api/v2.1/upload-links/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\npath (file/folder path)\n\n\npassword (not necessary)\n\n\n\n\nSample request\n\n\nCreate upload link for directory with password\n\n\ncurl -d \"path=/bar/\nrepo_id=afc3b694-7d4c-4b8a-86a4-89c9f3261b12\npassword=password\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/upload-links/\n\n\n\nSample response\n\n\n{\n    \nusername\n: \nlian@lian.com\n,\n    \nrepo_id\n: \n62ca6cf9-dab6-47e5-badc-bab13d9220ce\n,\n    \nctime\n: \n2016-03-04T05:51:34.022\n,\n    \ntoken\n: \ndce40e8594\n,\n    \nlink\n: \nhttps://cloud.seafile.com/u/d/dce40e8594/\n,\n    \npath\n: \n/bar/\n\n}\n\n\n\n\nErrors\n\n\n\n\n400 path/repo_id invalid\n\n\n403 Permission denied.\n\n\n500 Internal Server Error\n\n\n\n\nDelete Upload Link\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/upload-links/{token}/\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api/v2.1/upload-links/0ae587a7d1/\"\n\n\n\nSample response\n\n\n{\"success\":true}\n\n\n\nSend Upload Link Email\n\n\nPOST\n https://cloud.seafile.com/api2/send-upload-link/\n\n\nRequest parameters\n\n\n\n\ntoken\n\n\nemail\n\n\nextra_msg (not necessary)\n\n\n\n\nSample request\n\n\ncurl -d \"email=sample@eamil.com,invalid-email\ntoken=4cbd625c5e\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/send-upload-link/\n\n\n\nSample response\n\n\n{\n    \nfailed\n: [\n        {\n            \nemail\n: \ninvalid-email\n,\n            \nerror_msg\n: \nemail invalid.\n\n        }\n    ],\n    \nsuccess\n: [\n        \nsample@eamil.com\n\n    ]\n}\n\n\n\n\n\n\n400 token/repo_id invalid\n\n\n403 Permission denied.\n\n\n403 Sending shared link failed. Email service is not properly configured, please contact administrator.\n\n\n404 token/library not found\n\n\n\n\nShared Libraries\n\n\nList Shared Libraries\n\n\nGET\n https://cloud.seafile.com/api2/shared-repos/\n\n\nSample request\n\n\ncurl -v -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/shared-repos/\n\n\n\nSample response\n\n\n[{\"repo_id\": \"7d42522b-1f6f-465d-b9c9-879f8eed7c6c\", \"share_type\": \"personal\", \"permission\": \"rw\", \"encrypted\": false, \"user\": \"user@example.com\", \"last_modified\": 1361072500, \"repo_desc\": \"ff\", \"group_id\": 0, \"repo_name\": \"\\u6d4b\\u8bd5\\u4e2d\\u6587pdf\"}, {\"repo_id\": \"79bb29cd-b683-4844-abaf-433952723ca5\", \"share_type\": \"group\", \"permission\": \"rw\", \"encrypted\": false, \"user\": \"user@example.com\", \"last_modified\": 1359182468, \"repo_desc\": \"test\", \"group_id\": 1, \"repo_name\": \"test_enc\"}]\n\n\n\nList Be Shared Libraries\n\n\nGET\n https://cloud.seafile.com/api2/beshared-repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/beshared-repos/\"\n\n\n\nSample response\n\n\n\"[{\"user\": \"user@example.com\", \"repo_id\": \"989e3952-9d6f-4427-ab16-4bf9b53212eb\", \"share_type\": \"personal\", \"permission\": \"rw\", \"encrypted\": false, \"repo_desc\": \"lib shared to imwhatiam\", \"enc_version\": false, \"last_modified\": 1398218747, \"is_virtual\": false, \"group_id\": 0, \"repo_name\": \"lib shared to imwhatiam\"}]\"\n\n\n\nShare A Library\n\n\nPUT\n https://cloud.seafile.com/api2/shared-repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nshare_type ('personal', 'group' or 'public')\n\n\nuser (or users)\n\n\ngroup_id\n\n\npermission\n\n\n\n\nIf share_type is 'personal' then 'user' or 'users' param are required, if share_type is 'group' then 'group_id' parameter is required. If share_type is 'public' no other params is required.\n\n\n'user' or 'users' parameters can be a comma separated list of emails, in this case the share will be done for more users at the same time. If a problem is encountered during multiple users sharing then the sharing process is aborted.\n\n\nSample request\n\n\ncurl -X PUT -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-repos/7d42522b-1f6f-465d-b9c9-879f8eed7c6c/?share_type=group\nuser=user@example.com\ngroup_id=1\npermission=rw\"\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nUnshare A Library\n\n\nDELETE\n https://cloud.seafile.com/api2/shared-repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nshare_type ('personal', 'group' or 'public')\n\n\nuser\n\n\ngroup_id\n\n\n\n\nIf share_type is 'personal' then 'user' param is required, if share_type is 'group' then 'group_id' parameter is required. If share_type is 'public' no other params is required.\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/shared-repos/7d42522b-1f6f-465d-b9c9-879f8eed7c6c/?share_type=personal\nuser=user@example.com\ngroup_id=0\"\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nLibrary\n\n\nGet Default Library\n\n\nGET\n https://cloud.seafile.com/api2/default-repo/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/default-repo/\"\n\n\n\nSample response\n\n\n{\n    \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n    \"exists\": true\n}\n\n\n\nCreate Default Library\n\n\nPOST\n https://cloud.seafile.com/api2/default-repo/\n\n\nSample request\n\n\ncurl -X POST -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/default-repo/\"\n\n\n\nSample response\n\n\n{\n    \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n    \"exists\": true\n}\n\n\n\nList Libraries\n\n\nGET\n https://cloud.seafile.com/api2/repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/\n\n\n\nSample response\n\n\n[\n{\n    \"permission\": \"rw\",\n    \"encrypted\": false,\n    \"mtime\": 1400054900,\n    \"owner\": \"user@mail.com\",\n    \"id\": \"f158d1dd-cc19-412c-b143-2ac83f352290\",\n    \"size\": 0,\n    \"name\": \"foo\",\n    \"type\": \"repo\",\n    \"virtual\": false,\n    \"desc\": \"new library\",\n    \"root\": \"0000000000000000000000000000000000000000\"\n},\n{\n    \"permission\": \"rw\",\n    \"encrypted\": false,\n    \"mtime\": 1400054802,\n    \"owner\": \"user@mail.com\",\n    \"id\": \"0536b11a-a5fd-4482-9314-728cb3472f54\",\n    \"size\": 0,\n    \"name\": \"foo\",\n    \"type\": \"repo\",\n    \"virtual\": false,\n    \"desc\": \"new library\",\n    \"root\": \"0000000000000000000000000000000000000000\"\n}\n]\n\n\n\nGet Library Info\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -G -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/\n\n\n\nSample response\n\n\n{\n\"encrypted\": false,\n\"password_need\": null,\n\"mtime\": null,\n\"owner\": \"self\",\n\"id\": \"632ab8a8-ecf9-4435-93bf-f495d5bfe975\",\n\"size\": 1356155,\n\"name\": \"org\",\n\"root\": \"b5227040de360dd22c5717f9563628fe5510cbce\",\n\"desc\": \"org file\",\n\"type\": \"repo\"\n}\n\n\n\nGet Library Owner\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/owner/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/owner/\n\n\n\nSample response\n\n\n{\n\"owner\": \"user@example.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Permission error(only administrator/repo-owner can perform this action).\n\n\n\n\nGet Library History\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/history/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/history/\n\n\n\nSample response\n\n\n{\"commits\": [{\"rev_file_size\": 0, \"rev_file_id\": null, \"ctime\": 1398045167, \"creator_name\": \"imwhatiam123@gmail.com\", \"creator\": \"0000000000000000000000000000000000000000\", \"root_id\": \"ca2625da6be6e211ddd584615ef3bfaa531e66aa\", \"rev_renamed_old_path\": null, \"parent_id\": \"205c469f0830df09b13024601524058757a43128\", \"new_merge\": false, \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\", \"desc\": \"Modified \\\"api.md\\\"\", \"id\": \"eb62721812e0c3122889b5facde971b353ad176b\", \"conflict\": false, \"second_parent_id\": null}, {\"rev_file_size\": 0, \"rev_file_id\": null, \"ctime\": 1398045158, \"creator_name\": \"imwhatiam123@gmail.com\", \"creator\": \"0000000000000000000000000000000000000000\", \"root_id\": \"0b7a31adf4ea8b29ad5a5920420b548da11dd32f\", \"rev_renamed_old_path\": null, \"parent_id\": \"2ba85ee6072efea51a3483843ea7de9b6d1d1eb2\", \"new_merge\": false, \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\", \"desc\": \"Added \\\"api.md\\\"\", \"id\": \"205c469f0830df09b13024601524058757a43128\", \"conflict\": false, \"second_parent_id\": null}], \"page_next\": false}\n\n\n\nGet Library History Limit Days\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/history-limit/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/history-limit/\n\n\n\nSample response\n\n\n{\n\"keep_days\": -1,\n}\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n500 Internal Server Error\n\n\n\n\nSet Library History Limit Days\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/history-limit/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\nkeep_days. -1 for keep full history; 0 for do not keep history; positive number for keep a period of limit days.\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"keep_days=4\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/history-limit/\n\n\n\nSample response\n\n\n{\n\"keep_days\": 4,\n}\n\n\n\nErrors\n\n\n\n\n400 keep_days invalid.\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n500 Internal Server Error\n\n\n520 Failed to set library history limit.\n\n\n\n\nCreate Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/\n\n\nRequest parameters\n\n\n\n\nname\n\n\ndesc (defaults to \"new repo\")\n\n\npasswd (needed by encrypt library)\n\n\n\n\nSample request\n\n\ncurl -v -d \"name=foo\ndesc=new library\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/\n\n\n\nSample response\n\n\n{\n\"encrypted\": \"\",\n\"enc_version\": 0,\n\"repo_id\": \"f15811fd-5c19-412c-b143-2ac83f352290\",\n\"magic\": \"\",\n\"relay_id\": \"c5e41170db250ea497075e2911104faf0105b7fb\",\n\"repo_version\": 1,\n\"relay_addr\": \"cloud.seafile.com\",\n\"token\": \"c1f3defe9ba408cd7964427ec276843e9d10c23b\",\n\"relay_port\": \"10001\",\n\"random_key\": \"\",\n\"email\": \"user@mail.com\",\n\"repo_name\": \"foo\"\n}\n\n\n\nSuccess\n\n\nResponse code 200 and newly created library information are returned.\n\n\nErrors\n\n\n\n\n400 Library name missing.\n\n\n520 Operation failed.\n\n\n\n\nCheck/Create Sub Library\n\n\ncheck if a dir has a corresponding sub_repo, if it does not have, create one\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/sub_repo/?p=/\\\nname=sub_lib\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\nname\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/sub_repo/?p=/\\\nname=sub_lib\n\n\n\nSample response\n\n\n{\"sub_repo_id\": \"c0a3283c-013c-4a7c-8f68-006f06fa6dec\"}\n\n\n\nErrors\n\n\n\n\n400 Argument missing\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nDelete Library\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nSample request\n\n\ncurl -v -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n\n\n400 Library does not exist.\n\n\n\n\n\n\n403 Only library owner can perform this operation.\n\n\n\n\n\n\nRename Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/?op=rename\n\n\nSample request\n\n\ncurl -d \"repo_name=new-repo-name\"  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/op=rename\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n404 Library not found.\n\n\n403 You do not have permission to rename this library.\n\n\n500 Unable to rename library\n\n\n\n\nTransfer Library\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/owner/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\nowner\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"owner=new@owner.com\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/owner/\n\n\n\nSample response\n\n\n{\n\"success\": True\n}\n\n\n\nErrors\n\n\n\n\n440 Email invalid.\n\n\n403 Permission error(only administrator/repo-owner can perform this action).\n\n\n404 Library not found.\n\n\n404 User not found.\n\n\n\n\nDecrypt Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/\n\n\nRequest parameters\n\n\n\n\npassword\n\n\n\n\nSample request\n\n\ncurl -v -d \"password=123\" -H 'Authorization: Token e6a33d61954f219a96b60f635cf02717964e4385' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/0c2465a5-4753-4660-8a22-65abec9ec8d0/\n\n\n\nSample response\n\n\n\"success\"\n\n\nErrors\n\n\n\n\n400 Incorrect password\n\n\n409 Repo is not encrypt\n\n\n500 Internal server error\n\n\n\n\nCreate Public Library\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/public/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -X POST -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/public/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \"success\" is returned.\n\n\n\nErrors\n\n\n\n\n404 Repo not found\n\n\n403 Forbid to access this repo\n\n\n500 INTERNAL SERVER ERROR, Unable to make repo public\n\n\n\n\nRemove Public Library\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/public/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/public/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \"success\" is returned.\n\n\n\nErrors\n\n\n\n\n404 Repo not found\n\n\n403 Forbid to access this repo\n\n\n500 INTERNAL SERVER ERROR, Unable to remove public repo\n\n\n\n\nFetch library download info\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/download-info/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/download-info/\n\n\n\nSample response\n\n\n{\n\"applet_root\": \"https://localhost:13420\",\n\"relay_addr\": \"localhost\",\n\"token\": \"46acc4d9ca3d6a5c7102ef379f82ecc1edc629e1\",\n\"repo_id\": \"dae8cecc-2359-4d33-aa42-01b7846c4b32\",\n\"relay_port\": \"10002\",\n\"encrypted\": \"\",\n\"repo_name\": \"test\",\n\"relay_id\": \"8e4b13b49ca79f35732d9f44a0804940d985627c\",\n\"email\": \"user@example.com\"\n}\n\n\n\nList Virtual Libraries\n\n\nGET\n https://cloud.seafile.com/api2/virtual-repos/\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/virtual-repos/\"\n\n\n\nSample response\n\n\n{\"virtual-repos\":\n    [\n        {\"virtual_perm\": \"rw\", \"store_id\": null, \"worktree_invalid\": false, \"encrypted\": false, \"origin_repo_name\": \"lian\", \"last_modify\": 0, \"no_local_history\": false, \"head_branch\": null, \"last_sync_time\": 0, \"id\": \"51344de8-456f-4dc7-ac08-718827994252\", \"size\": 0, \"share_permission\": null, \"worktree_changed\": false, \"worktree_checktime\": 0, \"origin_path\": \"/lian\", \"is_virtual\": true, \"origin_repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\", \"version\": 1, \"random_key\": null, \"is_original_owner\": true, \"shared_email\": null, \"enc_version\": 0, \"head_cmmt_id\": \"bc666fdc60d2352b9f6a0324ac64168d43724eed\", \"desc\": null, \"index_corrupted\": false, \"magic\": null, \"name\": \"lian\", \"worktree\": null, \"auto_sync\": false, \"relay_id\": null},\n        {\"virtual_perm\": \"rw\", \"store_id\": null, \"worktree_invalid\": false, \"encrypted\": false, \"origin_repo_name\": \"lian\", \"last_modify\": 0, \"no_local_history\": false, \"head_branch\": null, \"last_sync_time\": 0, \"id\": \"c0a3283c-013c-4a7c-8f68-006f06fa6dec\", \"size\": 0, \"share_permission\": null, \"worktree_changed\": false, \"worktree_checktime\": 0, \"origin_path\": \"/\", \"is_virtual\": true, \"origin_repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\", \"version\": 1, \"random_key\": null, \"is_original_owner\": true, \"shared_email\": null, \"enc_version\": 0, \"head_cmmt_id\": \"ff18229aadc9acc73ad481278d5b4c42b3353aa0\", \"desc\": null, \"index_corrupted\": false, \"magic\": null, \"name\": \"123\", \"worktree\": null, \"auto_sync\": false, \"relay_id\": null}\n    ]\n}\n\n\n\nSearch Libraries\n\n\nGET\n https://cloud.seafile.com/api2/search/\n\n\nRequest parameters\n\n\n\n\nq\n\n\nper_page (optional)\n\n\n\n\nSample request\n\n\ncurl -G -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/search/?q=keyword\n\n\n\nSample response\n\n\n{\n    \"has_more\": false,\n    \"total\": 3,\n    \"results\": [\n        {\n            \"repo_id\": \"691b3e24-d05e-43cd-a9f2-6f32bd6b800e\",\n            \"name\": \"api.md\",\n            \"oid\": \"8ea78453bb474359cd9d8e2c4c4d8d9cbdcef0a2\",\n            \"last_modified\": 1398045167,\n            \"fullpath\": \"/api.md\",\n            \"size\": 18939\n        },\n        {\n            \"repo_id\": \"c5509062-9bca-4933-a7e0-c6da1d5f82be\",\n            \"name\": \"home.md\",\n            \"oid\": \"dda57aaffa5179829e064c7d0c142f47a8a65d3b\",\n            \"last_modified\": 1397096831,\n            \"fullpath\": \"/home.md\",\n            \"size\": 1954\n        },\n        {\n            \"repo_id\": \"c5509062-9bca-4933-a7e0-c6da1d5f82be\",\n            \"name\": \"\\u5e38\\u89c1\\u5b89\\u88c5\\u95ee\\u9898.md\",\n            \"oid\": \"8573f982eeb478b932a55ec13218f4f90a7c5a27\",\n            \"last_modified\": 1397188959,\n            \"fullpath\": \"/\\u5e38\\u89c1\\u5b89\\u88c5\\u95ee\\u9898.md\",\n            \"size\": 1050\n        }\n    ]\n}\n\n\n\nErrors\n\n\n\n\n404 Search not supported.\n\n\n400 Missing argument q.\n\n\n\n\nGet Library Download Links\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/download-shared-links/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/download-shared-links/\n\n\n\nSample response\n\n\n[\n    {\n        \"view_count\": 0,\n        \"name\": \"/\",\n        \"share_type\": \"d\",\n        \"creator_name\": \"lian\",\n        \"create_by\": \"lian@lian.com\",\n        \"token\": \"105f108fb6\",\n        \"create_time\": \"2016-01-18T15:03:10+0800\",\n        \"path\": \"/\",\n        \"size\": \"\"\n    },\n    {\n        \"view_count\": 3,\n        \"name\": \"1.md\",\n        \"share_type\": \"f\",\n        \"creator_name\": \"lian\",\n        \"create_by\": \"lian@lian.com\",\n        \"token\": \"a626012c1b\",\n        \"create_time\": \"2016-01-19T11:27:43+0800\",\n        \"path\": \"/1.md\",\n        \"size\": \"4\"\n    }\n]\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n\n\nGet Library Upload Links\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-shared-links/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/upload-shared-links/\n\n\n\nSample response\n\n\n[\n    {\n        \"view_count\": 3,\n        \"name\": \"/\",\n        \"creator_name\": \"lian\",\n        \"create_by\": \"lian@lian.com\",\n        \"token\": \"43340efca5\",\n        \"create_time\": \"2016-01-18T15:03:12+0800\",\n        \"path\": \"/\"\n    },\n    {\n        \"view_count\": 8,\n        \"name\": \"a\nb\",\n        \"creator_name\": \"lian\",\n        \"create_by\": \"lian@lian.com\",\n        \"token\": \"f1e49d445a\",\n        \"create_time\": \"2016-01-18T15:03:18+0800\",\n        \"path\": \"/a\nb/\"\n    }\n]\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n\n\nDelete Library Download Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/download-shared-links/{token}/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\ntoken\n\n\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/download-shared-links/105f108fb6/\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n404 Link not found.\n\n\n\n\nDelete Library Upload Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-shared-links/{token}/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\ntoken\n\n\n\n\nSample request\n\n\ncurl -X DELETE -H 'Authorization: Token 24fd3c026886e3121b2ca630805ed425c272cb96' -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/632ab8a8-ecf9-4435-93bf-f495d5bfe975/upload-shared-links/f1e49d445a/\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n404 Library not found.\n\n\n404 Link not found.\n\n\n\n\nFile\n\n\nView File Through Owa\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/owa-file/?path=/foo.docx\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\npath\n\n\n\n\nSample request\n\n\ncurl  -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/owa-file/?path=/foo.docx'\n\n\n\nSample response\n\n\n{\n    \naccess_token\n: \n7decacff-6e55-4856-9734-01aaab26ef45\n,\n    \naction_url\n: \nhttp://off1.off.com/wv/wordviewerframe.aspx?WOPIsrc=http%3A%2F%2F192.168.1.124%3A8000%2Fapi2%2Fwopi%2Ffiles%2F2b0750085925fa85238e5f64cfd13ed6f1076bfd%2F\n,\n    \naccess_token_ttl\n: 1456906784000\n}\n\n\n\n\nAfter get response\n\n\nIn order to instantiate the Office Online applications, a host must create an HTML page that will host an iframe element within it pointing to a particular WOPI action URL. And then use a form element and POST the \naccess_token\n and \naccess_token_ttl\n values to the Office Online.\n\n\nFor more info, you can see \nthis official docs\n.\n\n\nErrors\n\n\n\n\n400 path invalid.\n\n\n403 permission denied.\n\n\n403 Library encrypted.\n\n\n403 Office Web App feature not enabled.\n\n\n403 Office Web App feature only supported in professional edition.\n\n\n404 File/Library not found.\n\n\n500 Internal Server Error\n\n\n\n\nDownload File\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\nreuse (optional): Set \nresue\n to \n1\n if you want the generated download link can be accessed more than once in one hour.\n\n\n\n\nSample request\n\n\ncurl  -v  -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' 'https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\nreuse=1'\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo.c\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 File not found\n\n\n520 Operation failed.\n\n\n\n\nGet File Detail\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/detail/?p=/foo.c\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/detail/?p=/foo.c\n\n\n\nSample response\n\n\n{\n\"id\": \"013d3d38fed38b3e8e26b21bb3463eab6831194f\",\n\"mtime\": 1398148877,\n\"type\": \"file\",\n\"name\": \"foo.py\",\n\"size\": 22\n}\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n520 Operation failed.\n\n\n\n\nGet File History\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/history/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/history/?p=/foo.c\n\n\n\nSample response\n\n\n{\n\"commits\":\n    [\n        {\n        \"rev_file_size\": 0,\n        \"repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\",\n        \"ctime\": 1398149763,\n        \"creator_name\": \"user@example.com\",\n        \"creator\": \"0000000000000000000000000000000000000000\",\n        \"root_id\": \"b64d413d9894c9206beac3faf9c2a0d75b4a8ebf\",\n        \"rev_renamed_old_path\": null,\n        \"parent_id\": \"8e546762e1657ab22dad83e9cb1e5ea31a767c9a\",\n        \"new_merge\": false,\n        \"version\": 1,\n        \"conflict\": false,\n        \"desc\": \"Added \\\"foo.c\\\"\",\n        \"id\": \"9464f7499bfa7363d563282361339eaf96a93318\",\n        \"rev_file_id\": \"0000000000000000000000000000000000000000\",\n        \"second_parent_id\": null\n        },\n        {\n        \"rev_file_size\": 0,\n        \"repo_id\": \"a582d3bc-bcf5-421e-9125-741fa56d18d4\",\n        \"ctime\": 1398146059,\n        \"creator_name\": \"user@example.com\",\n        \"creator\": \"0000000000000000000000000000000000000000\",\n        \"root_id\": \"572413414257c76039897e00aeb35f819471206b\",\n        \"rev_renamed_old_path\": null,\n        \"parent_id\": \"f977bdb0ebb205645c3b42216c2817e511c3f68f\",\n        \"new_merge\": false,\n        \"version\": 1,\n        \"conflict\": false,\n        \"desc\": \"Added \\\"foo.c\\\"\",\n        \"id\": \"a1ec20709675f4dc8db825cdbca296be245d189b\",\n        \"rev_file_id\": \"0000000000000000000000000000000000000000\",\n        \"second_parent_id\": null\n        }\n    ]\n}\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 File not found\n\n\n\n\nDownload File From a Revision\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/file/revision/?p=/foo.c\ncommit_id=a1ec20709675f4dc8db825cdbca296be245d189b\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\ncommit_id\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/revision/?p=/foo.c\\\ncommit_id=a1ec20709675f4dc8db825cdbca296be245d189b\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo.c\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n404 Revision not found\n\n\n\n\nCreate File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=create\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 201 CREATED\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 201, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n403 FORBIDDEN, You do not have permission to move file\n\n\n520 OPERATION FAILED, fail to create file\n\n\n\n\nRename File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation=rename\n\n\nnewname\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=rename\nnewname=newfoo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 301 MOVED PERMANENTLY\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 301, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/) or newname is missing(newname too long)\n\n\n403 FORBIDDEN, You do not have permission to rename file\n\n\n404 NOT FOUND, repo not found\n\n\n409 CONFLICT, the newname is the same to the old\n\n\n520 OPERATION FAILED, fail to rename file\n\n\n\n\nLock File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/file/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"operation=lock\np=/foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to lock file\n\n\n404 NOT FOUND, repo not found\n\n\n520 OPERATION FAILED, fail to lock file\n\n\n\n\nUnlock File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/file/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"operation=unlock\np=/foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to lock file\n\n\n404 NOT FOUND, repo not found\n\n\n520 OPERATION FAILED, fail to unlock file\n\n\n\n\nMove File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\ndst_repo\n\n\ndst_dir\n\n\n\n\nSample request\n\n\ncurl -v -d \"operation=move\ndst_repo=affc837f-7fdd-4e91-b88a-32caf99897f2\ndst_dir=/\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 301 MOVED PERMANENTLY\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 301, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to move file\n\n\n404 NOT FOUND, repo not found\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nCopy File\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo.c\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\noperation\n\n\ndst_repo\n\n\ndst_dir\n\n\n\n\nSample request\n\n\ncurl -v -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.1 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200, and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 BAD REQUEST, Path is missing or invalid(e.g. p=/)\n\n\n403 FORBIDDEN, You do not have permission to copy file\n\n\n500 INTERNAL SERVER ERROR\n\n\n\n\nRevert File\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo_id}/file/revert/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\ncommit_id\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"commit_id=a1ec20709675f4dc8db825cdbca296be245d189b\np=/foo.c\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/8f5f2222-72a8-454f-ac40-8397c5a556a8/file/revert/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n{\"ret\": 0}\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n\n\nDelete File\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/file/?p=/foo\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/file/?p=/foo.c\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing\n\n\n520 Operation failed.\n\n\n\n\nNote\n\n\nThis can also be used to delete directory.\n\n\nUpload File\n\n\nGet Upload Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-link/?p=/upload-dir\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np (use '/' as default)\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/upload-link/\n\n\n\nSample response\n\n\n\"http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\"\n\n\n\nErrors\n\n\n403 Permission denied.\n500 Run out of quota\n\n\n\nUpload File\n\n\nAfter getting the upload link, POST to this link for uploading files.\n\n\nPOST\n http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\n\n\nErrors\n\n\n400 Bad request\n440 Invalid filename\n500 Internal server error\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -F file=@test.txt -F filename=test.txt -F parent_dir=/ http://cloud.seafile.com:8082/upload-api/73c5d117-3bcf-48a0-aa2a-3f48d5274ae3\n\n\n\nSample response\n\n\n\"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc\"\n\n\n\nNote\n\n\n\n\n\n\nNew uploaded file name will be 'test(1).text' if a file with name 'test.txt' already exists in parent directory\n\n\n\n\n\n\nFor python client uploading, see \nhttps://github.com/haiwen/webapi-examples/blob/master/python/upload-file.py\n, or it can be done much more easily with elegant \npython requests library\n, see \nhttps://github.com/haiwen/webapi-examples/blob/master/python/upload-file2.py\n\n\n\n\n\n\nUpdate file\n\n\nGet Update Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/update-link/?p=/update-dir\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\np (use '/' as default)\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/update-link/\n\n\n\nSample response\n\n\n\"http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\"\n\n\n\nErrors\n\n\n403 Permission denied.\n500 Run out of quota\n\n\n\nUpdate File\n\n\nAfter getting the update link, POST to this link for updating files.\n\n\nPOST\n http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\n\n\nRequest parameters\n\n\n\n\ntarget_file\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -F file=@test.txt -F filename=test.txt -F target_file=/test.txt http://cloud.seafile.com:8082/update-api/e69e5ee7-9329-4f42-bf1b-12879bd72c28\n\n\n\nReturns\n\n\nThe id of the updated file\n\n\nSample response\n\n\n\"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc\"\n\n\n\nErrors\n\n\n\n\n400 Bad request\n\n\n440 Invalid filename\n\n\n500 Internal server error\n\n\n\n\nGet Upload Blocks Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/upload-blks-link/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/upload-blks-link/\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com/seafhttp/upload-blks-api/569213db-7297-457a-907d-e2259a277c05\"\n\n\n\nErrors\n\n\n\n\n403 Can not access repo\n\n\n520 above quota\n\n\n\n\nGet Update Blocks Link\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/update-blks-link/\n\n\nRequest parameters\n\n\n\n\nrepo-id\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/update-blks-link/\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com/seafhttp/update-blks-api/402c6d48-fe52-4592-97dd-85f462f03d66\"\n\n\n\nErrors\n\n\n\n\n403 Can not access repo\n\n\n520 above quota\n\n\n\n\nDirectory\n\n\nList Directory Entries\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np (optional): The path to a directory. If \np\n is missing, then defaults to '/' which is the top directory.\n\n\noid (optional): The object id of the directory. The object id is the checksum of the directory contents.\n\n\nt (optional): If set \nt\n argument as \nf\n, will only return file entries, and \nd\n for only dir entries.\n\n\nrecursive (optional): If set \nt\n argument as \nd\n \nAND\n \nrecursive\n argument as \n1\n, return all dir entries recursively\n\n\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d9b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/repos/99b758e6-91ab-4265-b705-925367374cf0/dir/?p=/foo\n\n\n\nSample response\n\n\nIf oid is the same as the current oid of the directory, returns \n\"uptodate\"\n , else returns\n\n\n[\n{\n    \"id\": \"0000000000000000000000000000000000000000\",\n    \"type\": \"file\",\n    \"name\": \"test1.c\",\n    \"size\": 0\n},\n{\n    \"id\": \"e4fe14c8cda2206bb9606907cf4fca6b30221cf9\",\n    \"type\": \"dir\",\n    \"name\": \"test_dir\"\n}\n]\n\n\n\nErrors\n\n\n\n\n404 The path is not exist.\n\n\n440 Repo is encrypted, and password is not provided.\n\n\n520 Operation failed..\n\n\n\n\nCreate New Directory\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np\n\n\noperation=mkdir (post)\n\n\n\n\nSample request\n\n\ncurl -d  \"operation=mkdir\" -v  -H 'Authorization: Tokacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 201(Created) is returned, and Location header provides the url of created directory.\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/)\n\n\n520 Operation failed.\n\n\n\n\nNotes\n\n\nNewly created directory will be renamed if the name is duplicated.\n\n\nRename Directory\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/?p=/foo\n\n\nParameters\n\n\n\n\nrepo-id\n\n\np (path)\n\n\noperation=rename\n\n\nnewname (the new name of the directory)\n\n\n\n\nSample request\n\n\ncurl -d  \"operation=rename\nnewname=pinkfloyd_newfolder\" -v  -H 'Authorization: Tokacd9c6ccb8133606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSuccess\n\n\nResponse code 200 if everything is ok\n\n\nErrors\n\n\n\n\n403 if You do not have permission to rename a folder\n\n\n400 if newname is not given\n\n\n520 if Failed to rename directory (generic problem)\n\n\n\n\nNotes\n\n\nIf the new name is the same of the old name no operation will be done.\n\n\nDelete Directory\n\n\nDELETE\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -X DELETE -v  -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\"success\"\n\n\n\nSuccess\n\n\nResponse code is 200(OK), and a string \n\"success\"\n is returned.\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/)\n\n\n520 Operation failed.\n\n\n\n\nNote\n\n\nThis can also be used to delete file.\n\n\nDownload Directory\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/download/?p=/foo\n\n\n\n\nrepo-id\n\n\np\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd3606d94ff8e61d99b477fd' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/dae8cecc-2359-4d33-aa42-01b7846c4b32/dir/?p=/foo\n\n\n\nSample response\n\n\n\"https://cloud.seafile.com:8082/files/adee6094/foo\"\n\n\n\nErrors\n\n\n\n\n400 Path is missing or invalid(e.g. p=/), or unable to download directory, size is too large\n\n\n404 Repo(path) not found(exist)\n\n\n520 Operation failed.\n\n\n\n\nShare Directory\n\n\nPUT\n https://cloud.seafile.com/api2/repos/{repo-id}/dir/shared_items/?p={path}\n\n\n\n\nrepo-id\n\n\npath\n\n\npermission, \nr\n or \nrw\n\n\nshare_type, \nuser\n or \ngroup\n\n\nusername, necessary if share_type is user\n\n\ngroup_id, necessary if share_type is group\n\n\n\n\nSample request for share folder to user\n\n\ncurl -X PUT -d \"username=2@1.com\nshare_type=user\nperm=r\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/78c620ee-2989-4427-8eff-7748f4fbebc0/dir/shared_items/?p=/q\n\n\n\nSample response for share folder to user\n\n\n{\"failed\": [], \"success\": [{\"user_info\": {\"nickname\": \"2\", \"name\": \"2@1.com\"}, \"share_type\": \"user\", \"permission\": \"r\"}]}\n\n\n\nSample request for share folder to group\n\n\ncurl -X PUT -d \"group_id=772\nshare_type=group\nperm=rw\" -H 'Authorization: Token ef12bf1e66a1aa797a1d6556fdc9ae84f1e9249f' -H 'Accept: application/json; charset=utf-8; indent=4' https://cloud.seafile.com/api2/repos/78c620ee-2989-4427-8eff-7748f4fbebc0/dir/shared_items/?p=/q\n\n\n\nSample response for share folder to group\n\n\n{\"failed\": [], \"success\": [{\"group_info\": {\"id\": 772, \"name\": \"group-2\"}, \"share_type\": \"group\", \"permission\": \"r\"}]}\n\n\n\nErrors\n\n\n\n\n400 share_type/permission/group_id invalid.\n\n\n403 Permission denied.\n\n\n404 Library/Folder/Group not found.\n\n\n500 Failed to get sub repo.\n\n\n\n\nMultiple Files / Directories\n\n\nCopy\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/copy/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to copy. Multiple file/folder names can be seperated by \n:\n.\n\n\ndst_repo: the destination repo id\n\n\ndst_dir: the destination folder in \ndst_repo\n\n\n\n\nSample request\n\n\ncurl -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/copy/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to copy file\n\n\n404 repo not found\n\n\n502 failed to copy file\n\n\n\n\nMove\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/move/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to move. Multiple file/folder names can be seperated by \n:\n.\n\n\ndst_repo: the destination repo id\n\n\ndst_dir: the destination folder in \ndst_repo\n\n\n\n\nSample request\n\n\ncurl -d \"dst_repo=73ddb2b8-dda8-471b-b7a7-ca742b07483c\ndst_dir=/\nfile_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/move/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to move file\n\n\n404 repo not found\n\n\n502 failed to move file\n\n\n\n\nDelete\n\n\nPOST\n https://cloud.seafile.com/api2/repos/{repo_id}/fileops/delete/\n\n\nRequest parameters\n\n\n\n\np: source folder path, defaults to \n\"/\"\n\n\nfile_names: list of file/folder names to delete. Multiple file/folder names can be seperated by \n:\n.\n\n\n\n\nSample request\n\n\ncurl -d \"file_names=foo.c:bar.c:dir1:dir2\" -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' https://cloud.seafile.com/api2/repos/c7436518-5f46-4296-97db-2fcba4c8c8db/fileops/delete/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n400 missing argument\n\n\n403 You do not have permission to delete file\n\n\n404 repo not found\n\n\n502 failed to delete file\n\n\n\n\nAvatar\n\n\nGet User Avatar\n\n\nGET\n https://cloud.seafile.com/api2/avatars/user/{user}/resized/{size}/\n\n\nRequest parameters\n\n\n\n\nuser\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/avatars/user/user@example.com/resized/80/\"\n\n\n\nSample response\n\n\n{\n    \"url\": \"http://127.0.0.1:8000/media/avatars/default.png\",\n    \"is_default\": true,\n    \"mtime\": 0\n}\n\n\n\nGet Group Avatar\n\n\nGET\n https://cloud.seafile.com/api2/avatars/group/{group_id}/resized/{size}/\n\n\nRequest parameters\n\n\n\n\ngroup_id\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/avatars/group/1/resized/80/\"\n\n\n\nSample response\n\n\n{\n    \"url\": \"http://127.0.0.1:8000/media/avatars/groups/default.png\",\n    \"is_default\": true,\n    \"mtime\": 0\n}\n\n\n\nDevices\n\n\nGet User Devices\n\n\nGET\n https://cloud.seafile.com/api2/devices/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/devices/\n\n\n\nSample response\n\n\n[\n    {\n        \nsynced_repos\n: [\n            {\n                \nrepo_id\n: \n47945b31-dedb-4b92-a048-32bf825595ce\n,\n                \nsync_time\n: 1458008928,\n                \nrepo_name\n: \nwopi\n\n            },\n            {\n                \nrepo_id\n: \n78c620ee-2989-4427-8eff-7748f4fbebc0\n,\n                \nsync_time\n: 1457943466,\n                \nrepo_name\n: \nlib-of-lian\n\n            }\n        ],\n        \nlast_accessed\n: \n2016-03-15T10:28:48+08:00\n,\n        \ndevice_name\n: \nlian\n,\n        \nplatform_version\n: \n,\n        \nplatform\n: \nlinux\n,\n        \nuser\n: \nlian@lian.com\n,\n        \nkey\n: \n99abe1a7cc7d614db0bfa19db81e42ef675abe4f\n,\n        \nclient_version\n: \n5.0.0\n,\n        \nlast_login_ip\n: \n192.168.1.16\n,\n        \ndevice_id\n: \nbe10980211752515053bf9036a13139375de0cc8\n\n    },\n    {\n        \nlast_accessed\n: \n2016-03-15T13:59:51+08:00\n,\n        \ndevice_name\n: \nPLK-AL10\n,\n        \nplatform_version\n: \n5.0.2\n,\n        \nplatform\n: \nandroid\n,\n        \nuser\n: \nlian@lian.com\n,\n        \nkey\n: \n067051c94163ed193f2131d48c61882daa7cb238\n,\n        \nclient_version\n: \n2.0.3\n,\n        \nlast_login_ip\n: \n192.168.1.208\n,\n        \ndevice_id\n: \n4a0d62c1f27b3b74\n\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n401 UNAUTHORIZED\n\n\n\n\nUnlink User Device\n\n\nDELETE\n https://cloud.seafile.com/api2/devices/\n\n\nRequest parameters\n\n\n\n\nplatform\n\n\ndevice_id\n\n\n\n\nSample request\n\n\ncurl -X DELETE -d \"platform=linux\ndevice_id=be10980211752515053bf9036a13139375de0cc8\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/devices/\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n400 platform invalid\n\n\n400 device_id invalid\n\n\n500 Internal Server Error\n\n\n\n\nGet File Activities\n\n\nGET\n https://cloud.seafile.com/api2/events/\n\n\nRequest parameters\n\n\nthis api will only return first 15 records of activities. if want get more, pass \nstart\n parameter\n\n\n\n\nstart (default 0)\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/events/\"\n\n\n\nSample response\n\n\n {\"more_offset\": 15, \"events\":[{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398078909, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-cli_3.0.2_i386.tar.gz\\\".\"},{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398075540, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-server_3.0.0_x86-64.tar.gz\\\".\"}], \"more\": false}\n\n\n\nSample request for more activities\n\n\ncurl -H 'Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd' \"https://cloud.seafile.com/api2/events/?start=15\"\n\n\n\nSample response for more activities\n\n\n {\"more_offset\": 30, \"events\":[{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398078909, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-cli_3.0.2_i386.tar.gz\\\".\"},{\"repo_id\": \"6f3d28a4-73ae-4d01-a727-26774379dcb9\", \"author\": \"mysnowls@163.com\", \"nick\": \"lins05\", \"time\": 1398075540, \"etype\": \"repo-update\", \"repo_name\": \"Downloads\", \"desc\": \"Added \\\"seafile-server_3.0.0_x86-64.tar.gz\\\".\"}], \"more\": false}\n\n\n\nGet Thumbnail Image\n\n\nGET\n https://cloud.seafile.com/api2/repos/{repo_id}/thumbnail/\n\n\nRequest parameters\n\n\n\n\nrepo_id\n\n\np\n\n\nsize\n\n\n\n\nSample request\n\n\ncurl -H 'Authorization: Token 40f9a510a0629430865dc199a3880898ad2e48fc' https://cloud.seafile.com/api2/repos/fbead5d0-4817-4446-92f3-7ac8e6a8e5f5/thumbnail/?p=/5.jpg\\\nsize=123 \n thumbnail.png\n\n\n\nAdd Organization\n\n\nThis API is only used internally to create an organization account in seacloud.cc.\n\n\nPOST\n https://cloud.seafile.com/api2/organization/\n\n\nRequest parameters\n\n\n\n\nusername\n\n\npassword\n\n\norg_name\n\n\nprefix\n\n\nquota\n\n\nmember_limit\n\n\n\n\nSample request\n\n\ncurl -v -X POST -d \"username=example@example.com\npassword=example\norg_name=example\nprefix=example\nquota=100\nmember_limit=10\" -H \"Authorization: Token ccdff90e4d1efe76b2b3d91c06b027a5cff189d4\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/organization/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nNote: The following APIs are only available since Seafile v5.1.\n\n\nAdmin Only\n\n\nAccount\n\n\nList Accounts\n\n\nGET\n https://cloud.seafile.com/api2/accounts/\n\n\nRequest parameters\n\n\n\n\nstart (default to 0)\n\n\nlimit (default to 100)\n\n\nscope (default None, accepted values: 'LDAP' or 'DB')\n\n\n\n\nTo retrieve all users, just set both \nstart\n and \nlimit\n to \n-1\n.\n\n\nIf scope parameter is passed then accounts will be searched inside the specific scope, otherwise it will be used the old approach: first LDAP and, if no account is found, DB.\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/\n\n\n\nSample response\n\n\n[\n{\n    \"email\": \"foo@foo.com\"\n},\n{\n    \"email\": \"bar@bar.com\"\n}\n]\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nGet Account Info\n\n\nGET\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\nSample request\n\n\ncurl -v -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n{\n\"is_staff\": false,\n\"is_active\": true,\n\"id\": 2,\n\"create_time\": 1356061187741686,\n\"usage\": 651463187,\n\"total\": 107374182400,\n\"email\": \"user@mail.com\"\n}\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nCreate Account\n\n\nPUT\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\n\n\npassword\n\n\nis_staff (defaults to False)\n\n\nis_active (defaults to True)\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"password=123456\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 201 CREATED\n\n Location: https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 201(Created) is returned and the Location header provides shared link.\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nUpdate Account\n\n\nPUT\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\nAt least one of followings:\n\n\n\n\npassword\n\n\nis_staff\n\n\nis_active\n\n\nname\n\n\nnote\n\n\nstorage\n\n\n\n\nSample request\n\n\ncurl -v -X PUT -d \"password=654321\nis_staff=true\nstorage=1073741824\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Bad Request, keyword password is required\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nMigrate Account\n\n\nPOST\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nRequest parameters\n\n\n\n\nop\n\n\nto_user this user must exist\n\n\n\n\nSample request\n\n\ncurl -v -d \"op=migrate\nto_user=user2@mail.com\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/user@mail.com/\n\n\n\nSample response\n\n\n...\n\n HTTP/1.0 200 OK\n...\n\n\"success\"\n\n\n\nSuccess\n\n\nResponse code 200(OK) is returned.\n\n\n\nErrors\n\n\n\n\n400 Bad Request, arguments are missing or invalid\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nDelete Account\n\n\nDELETE\n https://cloud.seafile.com/api2/accounts/{email}/\n\n\nSample request\n\n\ncurl -v -X DELETE -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api2/accounts/newaccount@gmail.com/\n\n\n\nSample response\n\n\n\"success\"\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nDevices\n\n\nGet Desktop Devices\n\n\nGet first page (50 records per page) of desktop devices.\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/devices/?platform=desktop\npage=1\nper_page=50\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/devices/?platform=desktop\npage=1\nper_page=50\n\n\n\nSample response\n\n\n[\n    {'has_next_page': False},\n    [\n        {\n            'last_accessed': '2016-04-11T18:24:29+08:00',\n            'last_login_ip': u'192.168.1.210',\n            'platform': u'linux',\n            'user': u'1@1.com',\n            'client_version': u'2.0.4',\n            'device_name': u'PLK-AL10',\n            'device_id': u'4a0d62c1f27b3b74'\n        }\n    ]\n]\n\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nGet Mobile Devices\n\n\nGet first page (50 records per page) of mobile devices.\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/devices/?platform=mobile\npage=1\nper_page=50\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/devices/?platform=mobile\npage=1\nper_page=50\n\n\n\nSample response\n\n\n[\n    {'has_next_page': False},\n    [\n        {\n            'last_accessed': '2016-04-11T18:24:29+08:00',\n            'last_login_ip': u'192.168.1.210',\n            'platform': u'ios',\n            'user': u'1@1.com',\n            'client_version': u'2.0.4',\n            'device_name': u'PLK-AL10',\n            'device_id': u'4a0d62c1f27b3b74'\n        }\n    ]\n]\n\n\n\n\nErrors\n\n\n\n\n403 Permission error, only administrator can perform this action\n\n\n\n\nUnlink User Device\n\n\nDELETE\n https://cloud.seafile.com/api/v2.1/admin/devices/\n\n\nRequest parameters\n\n\n\n\nplatform\n\n\ndevice_id\n\n\nuser\n\n\n\n\nSample request\n\n\ncurl -X DELETE -d \"platform=linux\ndevice_id=be10980211752515053bf9036a13139375de0cc8\nuser=1@1.com\" -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/devices/\n\n\n\nSample response\n\n\n{\"success\": true}\n\n\n\nErrors\n\n\n\n\n400 platform invalid\n\n\n400 device_id invalid\n\n\n400 user invalid\n\n\n500 Internal Server Error\n\n\n\n\nGet Device Errors\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/device-errors/\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/device-errors/\n\n\n\nSample response\n\n\n[\n    {\n        'repo_id': u'47945b31-dedb-4b92-a048-32bf825595ce',\n        'device_ip': u'192.168.1.124',\n        'error_time': '2016-04-13T17:49:11+08:00',\n        'device_name': u'lian-ubuntu-1404-64',\n        'email': u'1@1.com',\n        'client_version': u'5.0.6',\n        'error_msg': u'No permission.',\n        'repo_name': u'wopi'\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n403 Permission denied.\n\n\n500 Internal Server Error\n\n\n\n\nNOTE\n This api only supported in pro edition.\n\n\nAdmin Log\n\n\nGet Login Log\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/logs/login/?start=2016-03-20\nend=2016-03-31\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/logs/login/?start=2016-03-20\nend=2016-03-31\n\n\n\nSample response\n\n\n[\n    {\n        'email': u'lian@lian.com',\n        'login_ip': u'192.168.1.124',\n        'name': u'lian',\n        'login_time': '2016-03-31T14:42:23+08:00'\n    },\n    {\n        'email': u'org@org.com',\n        'login_ip': u'192.168.1.124',\n        'name': u'org',\n        'login_time': '2016-03-31T14:39:08+08:00'\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n400 start or end date invalid.\n\n\n403 Feature disabled.\n\n\n\n\nNOTE\n This api only supported in pro edition.\n\n\nGet File Audit Log\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/logs/file-audit/?start=2016-03-20\nend=2016-03-31\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/logs/file-audit/?start=2016-03-20\nend=2016-03-31\n\n\n\nSample response\n\n\n[\n    {\n        'repo_id': u'4929d0df-8c6c-43cb-8edf-40a8489689fb',\n        'time': '2016-03-31T05:46:03+08:00',\n        'etype': u'file-download-web',\n        'ip': u'192.168.1.124',\n        'user_name': u'org',\n        'file_path': u'/earth.jpg',\n        'user_email': u'org@org.com',\n        'repo_name': ''\n    },\n    {\n        'repo_id': u'513cd72c-c54a-463e-a18f-841efe91bd61',\n        'time': '2016-03-31T06:25:22+08:00',\n        'etype': u'file-download-web',\n        'ip': u'192.168.1.124',\n        'user_name': u'org',\n        'file_path': u'/kj.md',\n        'user_email': u'org@org.com',\n        'repo_name': u'new-lib-of-org-1'\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n400 start or end date invalid.\n\n\n403 Feature disabled.\n\n\n\n\nNOTE\n This api only supported in pro edition.\n\n\nGet File Update Log\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/logs/file-update/?start=2016-03-20\nend=2016-03-31\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/logs/file-update/?start=2016-03-20\nend=2016-03-31\n\n\n\nSample response\n\n\n[\n    {\n        'commit_id': u'55ec5350b16d6c72a044b5a9cd9b2d62ad439364',\n        'file_operation': u'Added \nuser.csv\n.',\n        'repo_id': u'513cd72c-c54a-463e-a18f-841efe91bd61',\n        'repo_name': u'new-lib-of-org-1',\n        'time': '2016-03-31T06:25:15+08:00',\n        'user_email': u'org@org.com',\n        'user_name': u'org'\n    },\n    {\n        'commit_id': u'6820d809481e3c9fb856d0650ac73a09b570a301',\n        'file_operation': u'Added \nkj.md\n',\n        'repo_id': u'513cd72c-c54a-463e-a18f-841efe91bd61',\n        'repo_name': u'new-lib-of-org-1',\n        'time': '2016-03-31T06:25:21+08:00',\n        'user_email': u'org@org.com',\n        'user_name': u'org'\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n400 start or end date invalid.\n\n\n403 Feature disabled.\n\n\n\n\nNOTE\n This api only supported in pro edition.\n\n\nGet Permission Audit Log\n\n\nGET\n https://cloud.seafile.com/api/v2.1/admin/logs/perm-audit/?start=2016-03-20\nend=2016-03-31\n\n\nSample request\n\n\ncurl -H \"Authorization: Token f2210dacd9c6ccb8133606d94ff8e61d99b477fd\" -H 'Accept: application/json; indent=4' https://cloud.seafile.com/api/v2.1/admin/logs/perm-audit/?start=2016-03-20\nend=2016-03-31\n\n\n\nSample response\n\n\n[\n    {\n        'etype': u'add-repo-perm',\n        'file_path': u'/\nimg onerror=alert(1) src=a\n_\n_\\u2126_%2F_W_#_12_\\u8fd9',\n        'from_email': u'org3@org3.com',\n        'from_name': u'org3',\n        'permission': u'rw',\n        'repo_id': u'a84544e5-0b84-459d-b1e6-0399dabc76a0',\n        'repo_name': '',\n        'time': '2016-03-31T06:21:50+08:00',\n        'to': u'org@org.com'\n    },\n    {\n        'etype': u'add-repo-perm',\n        'file_path': u'/\nimg onerror=alert(1) src=a\n_\n_\\u2126_%2F_W_#_12_\\u8fd9',\n        'from_email': u'org3@org3.com',\n        'from_name': u'org3',\n        'permission': u'rw',\n        'repo_id': u'a84544e5-0b84-459d-b1e6-0399dabc76a0',\n        'repo_name': '',\n        'time': '2016-03-31T06:21:53+08:00',\n        'to': u'777'\n    }\n]\n\n\n\n\nErrors\n\n\n\n\n400 start or end date invalid.\n\n\n403 Feature disabled.\n\n\n\n\nNOTE\n This api only supported in pro edition.", 
            "title": "Web API V2.1"
        }, 
        {
            "location": "/develop/web_api_v2.1/#web-api-for-seafile-server-v510", 
            "text": "Seafile Web API  \n\n     API Basics \n     Status Code \n     Quick Start \n\n     \n         Account \n         \n             Check Account Info \n             Get Server Information \n         \n     \n\n     \n         Starred Files \n         \n             List starred files \n             Star A File \n             Unstar A File \n         \n     \n\n     \n         Group \n         \n             List Groups \n             Add a Group \n             Get Info of a Group \n             Rename a Group \n             Transfer a Group \n             Delete a Group \n             Quit Group \n             \n                 Group Member \n                 \n                     List Group Members \n                     Add a Group Member \n                     Bulk Add Group Members \n                     Get Info of a Group Member \n                     Set a Group Member Admin \n                     Unset a Group Member Admin \n                     Delete a Group Member \n                 \n             \n             \n                 Group Message \n                 \n                     Get Group Messages \n                     Get Group Message Detail \n                     Send A Group Message \n                     Reply A Group Message \n                     Get Group Message Replies \n                 \n             \n         \n     \n\n     \n         Share \n         \n             \n                 Share Link \n                 \n                     List Share Links \n                     Create Share Link \n                     Delete Share Link \n                     Send Share Link Email \n                     List Direntry in Dir Download Link \n                 \n             \n             \n                 Upload Link \n                 \n                     List Upload Links \n                     Create Upload Link \n                     Delete Upload Link \n                     Send Upload Link Email \n                 \n             \n             \n                 Shared Libraries \n                 \n                     List Shared Libraries \n                     List Be Shared Libraries \n                     Share A Library \n                     Unshare A Library \n                 \n             \n         \n     \n\n     \n         Library \n         \n             Get Default Library \n             Create Default Library \n             List Libraries \n             Get Library Info \n             Get Library Owner \n             Get Library History \n             Get Library History Limit Days \n             Set Library History Limit Days \n             Create Library \n             Check/Create Sub Library \n             Delete Library \n             Rename Library \n             Transfer Library \n             Decrypt Library \n             Create Public Library \n             Remove Public Library \n             Fetch library download info \n             List Virtual Libraries \n             Search Libraries \n             Get Library Download Links \n             Get Library Upload Links \n             Delete Library Download Link \n             Delete Library Upload Link \n         \n     \n\n     \n         File \n         \n             View File Through Owa \n             Download File \n             Get File Detail \n             Get File History \n             Download File From a Revision \n             Create File \n             Rename File \n             Lock File \n             Unlock File \n             Move File \n             Copy File \n             Revert File \n             Delete File \n             \n                 Upload File \n                 \n                     Get Upload Link \n                     Upload File \n                 \n             \n             \n                 Update file \n                 \n                     Get Update Link \n                     Update File \n                 \n             \n             Get Upload Blocks Link \n             Get Update Blocks Link \n         \n     \n\n     \n         Directory \n         \n             List Directory Entries \n             Create New Directory \n             Rename Directory \n             Delete Directory \n             Download Directory \n             Share Directory \n         \n     \n\n     \n         Multiple Files / Directories \n         \n             Copy \n             Move \n             Delete \n         \n     \n\n     \n         Avatar \n         \n             Get User Avatar \n             Get Group Avatar \n         \n     \n\n     \n         Devices \n         \n             Get User Devices \n             Unlink User Device \n         \n     \n\n     Get File Activities \n     Get Thumbnail Image \n     Add Organization     Admin Only  \n     \n         Account \n         \n             List Accounts \n             Get Account Info \n             Create Account \n             Update Account \n             Migrate Account \n             Delete Account \n         \n     \n\n     \n         Devices \n         \n             Get Desktop Devices \n             Get Mobile Devices \n             Unlink User Device \n             Get Device Errors \n         \n     \n\n     \n         Log \n         \n             Get Login Log \n             Get File Audit Log \n             Get File Update Log \n             Get Permission Audit Log", 
            "title": "Web API (For Seafile server v5.1.0+)"
        }, 
        {
            "location": "/develop/web_api_v2.1/#directory", 
            "text": "", 
            "title": "Directory"
        }, 
        {
            "location": "/develop/web_api_v2.1/#multiple-files-directories", 
            "text": "", 
            "title": "Multiple Files / Directories"
        }, 
        {
            "location": "/develop/python_api/", 
            "text": "Python API\n\n\n\n\n\n\nSeafile Python API\n\n\nInstall Seafile Server\n\n\nExample: Copy Library\n\n  \n\n  \nSet Environment Variable\n\n  \nCopy Library\n\n  \nList Of Seafile-API\n\n  \n\n\n\n\n\n\n\nSeafile Python API\n\n\nThis tutorial show you how to use seafile-api, and will accomplish a \"library copy\" work under \nUbuntu\n as example.\n\n\nInstall Seafile Server\n\n\nFirst of all, make sure you have \nDownload and Setup Seafile Server\n successfully. And your directory layout will be like this:\n\n\n# tree . -L 3\n.\n\u251c\u2500\u2500 ccnet\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ccnet.conf\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ......\n\u2502......\n\u251c\u2500\u2500 seafile-server-3.0.3\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seafile.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 seahub.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 setup-seafile.sh\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 upgrade\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 README\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 seaf_migrate_3.py\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 seaf_migrate_3.sh\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 ......\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ......\n\u2502......\n\n\n\nExample: Copy Library\n\n\nIn this example, two script files will be used: \nseaf_migrate_3.sh\n and \nseaf_migrate_3.py\n. We put them in the \nupgrade\n directory as you see above.\n\n\nSet Environment Variable\n\n\nIf you want use Seafile-API, set environment variable first. That's what \nseaf_migrate_3.sh\n does:\n\n\n\n\nget ccnet/seafile config file path and export them;\n\n\nexport Python path;\n\n\ncall \nseaf_migrate_3.py\n.\n\n\n\n\nExample code\n\n\n#!/bin/bash\n\n#get path of ccnet.conf\nSCRIPT=$(readlink -f \n$0\n) # haiwen/seafile-server-3.0.3/upgrade/seaf_migrate_3.sh\nUPGRADE_DIR=$(dirname \n$SCRIPT\n) # haiwen/seafile-server-3.0.3/upgrade/\nINSTALLPATH=$(dirname \n$UPGRADE_DIR\n) # haiwen/seafile-server-3.0.3/\nTOPDIR=$(dirname \n${INSTALLPATH}\n) # haiwen/\ndefault_ccnet_conf_dir=${TOPDIR}/ccnet\n\n#get path of seafile.conf\nfunction read_seafile_data_dir () {\n    seafile_ini=${default_ccnet_conf_dir}/seafile.ini\n    if [[ ! -f ${seafile_ini} ]]; then\n        echo \n${seafile_ini} not found. Now quit\n\n        exit 1\n    fi\n    seafile_data_dir=$(cat \n${seafile_ini}\n)\n    if [[ ! -d ${seafile_data_dir} ]]; then\n        echo \nYour seafile server data directory \\\n${seafile_data_dir}\\\n is invalid or doesn't exits.\n\n        echo \nPlease check it first, or create this directory yourself.\n\n        echo \n\n        exit 1;\n    fi\n\n    export SEAFILE_CONF_DIR=$seafile_data_dir\n}\n\nexport CCNET_CONF_DIR=${default_ccnet_conf_dir}\nread_seafile_data_dir;\n\nexport PYTHONPATH=${INSTALLPATH}/seafile/lib/python2.6/site-packages:${INSTALLPATH}/seafile/lib64/python2.6/site-packages:${INSTALLPATH}/seafile/lib/python2.7/site-packages:${INSTALLPATH}/seahub/thirdpart:$PYTHONPATH\nexport PYTHONPATH=${INSTALLPATH}/seafile/lib/python2.7/site-packages:${INSTALLPATH}/seafile/lib64/python2.7/site-packages:$PYTHONPATH\n\nfunction usage () {\n    echo \nUsage: `basename $0` \nrepo-id\n\n    echo \nexit.\n\n    exit 1\n}\nif [ $# != 1 ]; then\n    usage\nfi\n\npython seaf_migrate_3.py $1\n\n\n\n\n\n\nNOTE:\n\nYou can get \nrepo_id\n at address bar of Seahub or through \nSeafile web API\n\n\n\n\nCopy Library\n\n\nThen \nseaf_migrate_3.py\n will call Seafile-API to copy library:\n\n\n\n\nGet library ID from input.\n\n\nGet origin_repo object.\n\n\nCreate a new library, set name, desc and owner.\n\n\nCopy stuffs from old library to new library.\n\n\n\n\nExample code\n\n\n#!/usr/bin/env python\n\nimport os\nimport stat\nimport sys\nfrom seaserv import seafile_api\n\ndef count_files_recursive(repo_id, path='/'):\n    num_files = 0\n    for e in seafile_api.list_dir_by_path(repo_id, path):\n        if stat.S_ISDIR(e.mode):\n            num_files += count_files_recursive(repo_id,\n                                               os.path.join(path, e.obj_name))\n        else:\n            num_files += 1\n    return num_files\n\n#Get library ID from input\norigin_repo_id = sys.argv[1]\n\n#Get origin_repo object\norigin_repo = seafile_api.get_repo(origin_repo_id)\nusername = seafile_api.get_repo_owner(origin_repo_id)\n\n#Create a new library, set name, desc and owner\nnew_repo_id = seafile_api.create_repo(name=origin_repo.name,\n                                      desc=origin_repo.desc,\n                                      username=username, passwd=None)\n\n#Copy stuffs from old library to new library\ndirents = seafile_api.list_dir_by_path(origin_repo_id, '/')\nfor e in dirents:\n    print \ncopying: \n + e.obj_name\n    obj_name = e.obj_name\n    seafile_api.copy_file(origin_repo_id, '/', obj_name, new_repo_id, '/',\n                          obj_name, username, 0, 1)\n\nprint \n*\n * 60\nprint \nOK, verifying...\n\nprint \nOrigin library(%s): %d files. New Library(%s): %d files.\n % (\n    origin_repo_id[:8], count_files_recursive(origin_repo_id),\n    new_repo_id[:8], count_files_recursive(new_repo_id))\nprint \n*\n * 60\n\n\n\n\nIf you execute script file successfully, you will see these output, and of course a new library at myhome page of Seahub.\n\n\nfoo@foo:~/haiwen/seafile-server-3.0.3/upgrade$ ./seaf_migrate_test.sh c8bbb088-cbaf-411d-8bd8-9870763f0e5f\nLoading ccnet config from /home/foo/haiwen/ccnet\nLoading seafile config from /home/foo/haiwen/seafile-data\ncopying: test.html\ncopying: test-dir-2\ncopying: test-dir\ncopying: solar.html\ncopying: examples.desktop\n************************************************************\nOK, verifying...\nOrigin library(c8bbb088): 10 files. New Library(4d6f4837): 10 files.\n************************************************************\n\n\n\nList Of Seafile-API\n\n\nThis list is based on \nseafile-server-3.0.3\n, and parameter was omitted.\n\n\nFor more infomation about Seafile-API, please see \napi.py\n.\n\n\n\n\n\n\nseafile_api.add_inner_pub_repo()\n\n\nseafile_api.cancel_copy_task()\n\n\nseafile_api.change_repo_passwd()\n\n\nseafile_api.check_passwd()\n\n\nseafile_api.check_permission()\n\n\nseafile_api.check_quota()\n\n\nseafile_api.check_repo_access_permission()\n\n\nseafile_api.copy_file()\n\n\nseafile_api.count_inner_pub_repos()\n\n\nseafile_api.create_enc_repo()\n\n\nseafile_api.create_repo()\n\n\nseafile_api.create_virtual_repo()\n\n\nseafile_api.del_file()\n\n\nseafile_api.delete_repo_token()\n\n\nseafile_api.delete_repo_tokens_by_peer_id()\n\n\nseafile_api.diff_commits()\n\n\nseafile_api.edit_repo()\n\n\nseafile_api.generate_repo_token()\n\n\nseafile_api.get_commit_list()\n\n\nseafile_api.get_copy_task()\n\n\nseafile_api.get_decrypt_key()\n\n\nseafile_api.get_deleted()\n\n\nseafile_api.get_dir_id_by_commit_and_path()\n\n\nseafile_api.get_dir_id_by_path()\n\n\nseafile_api.get_file_id_by_commit_and_path()\n\n\nseafile_api.get_file_id_by_path()\n\n\nseafile_api.get_file_revisions()\n\n\nseafile_api.get_file_size()\n\n\nseafile_api.get_files_last_modified()\n\n\nseafile_api.get_group_repo_list()\n\n\nseafile_api.get_group_repoids()\n\n\nseafile_api.get_group_repos_by_owner()\n\n\nseafile_api.get_fileserver_access_token()\n\n\nseafile_api.get_inner_pub_repo_list()\n\n\nseafile_api.get_orphan_repo_list()\n\n\nseafile_api.get_owned_repo_list()\n\n\nseafile_api.get_repo()\n\n\nseafile_api.get_repo_list()\n\n\nseafile_api.get_repo_owner()\n\n\nseafile_api.get_repo_size()\n\n\nseafile_api.get_share_in_repo_list()\n\n\nseafile_api.get_share_out_repo_list()\n\n\nseafile_api.get_shared_groups_by_repo()\n\n\nseafile_api.get_user_quota()\n\n\nseafile_api.get_user_self_usage()\n\n\nseafile_api.get_user_share_usage()\n\n\nseafile_api.get_virtual_repo()\n\n\nseafile_api.get_virtual_repos_by_owner()\n\n\nseafile_api.group_share_repo()\n\n\nseafile_api.group_unshare_repo()\n\n\nseafile_api.is_inner_pub_repo()\n\n\nseafile_api.is_password_set()\n\n\nseafile_api.is_repo_owner()\n\n\nseafile_api.is_valid_filename()\n\n\nseafile_api.list_dir_by_commit_and_path()\n\n\nseafile_api.list_dir_by_dir_id()\n\n\nseafile_api.list_dir_by_path()\n\n\nseafile_api.list_file_by_file_id()\n\n\nseafile_api.list_repo_tokens()\n\n\nseafile_api.list_repo_tokens_by_email()\n\n\nseafile_api.move_file()\n\n\nseafile_api.post_dir()\n\n\nseafile_api.post_empty_file()\n\n\nseafile_api.post_file()\n\n\nseafile_api.put_file()\n\n\nseafile_api.query_fileserver_access_token()\n\n\nseafile_api.remove_inner_pub_repo()\n\n\nseafile_api.remove_repo()\n\n\nseafile_api.remove_share()\n\n\nseafile_api.rename_file()\n\n\nseafile_api.revert_dir()\n\n\nseafile_api.revert_file()\n\n\nseafile_api.revert_repo()\n\n\nseafile_api.set_group_repo_permission()\n\n\nseafile_api.set_passwd()\n\n\nseafile_api.set_repo_owner()\n\n\nseafile_api.set_share_permission()\n\n\nseafile_api.set_user_quota()\n\n\nseafile_api.share_repo()\n\n\nseafile_api.unset_passwd()", 
            "title": "Python API"
        }, 
        {
            "location": "/develop/python_api/#python-api", 
            "text": "Seafile Python API  Install Seafile Server  Example: Copy Library \n   \n   Set Environment Variable \n   Copy Library \n   List Of Seafile-API", 
            "title": "Python API"
        }, 
        {
            "location": "/develop/php_api/", 
            "text": "PHP API\n\n\nPlease see https:/github.com/rene-s/Seafile-PHP-SDK", 
            "title": "PHP API"
        }, 
        {
            "location": "/develop/php_api/#php-api", 
            "text": "Please see https:/github.com/rene-s/Seafile-PHP-SDK", 
            "title": "PHP API"
        }, 
        {
            "location": "/develop/data_model/", 
            "text": "Data Model\n\n\nSeafile internally uses a data model similar to GIT's. It consists of \nRepo\n, \nBranch\n, \nCommit\n, \nFS\n, and \nBlock\n.\n\n\nRepo\n\n\nA repo is also called a library. Every repo has an unique id (UUID), and attributes like description, creator, password.\n\n\nBranch\n\n\nUnlike git, only two predefined branches is used, i.e., \nlocal\n and \nmaster\n.\n\n\nIn PC client, modifications will first be committed to the \nlocal\n branch.\nThen the \nmaster\n branch is downloaded from server, and merged into \nlocal\n branch.\nAfter that the \nlocal\n branch will be uploaded to server. Then the server will fast-forward\nits \nmaster\n branch to the head commit of the just uploaded branch.\n\n\nWhen users update a repo on the web, modifications will first be committed to temporary branch\non the server, then merged into the \nmaster\n branch.\n\n\nCommit\n\n\nLike in GIT.\n\n\nFS\n\n\nThere are two types of FS objects, \nSeafDir Object\n and \nSeafile Object\n.\n\nSeafDir Object\n represents a directory, and \nSeafile Object\n represents a file.\n\n\nBlock\n\n\nA file is further divided into blocks with variable lengths. We use Content Defined Chunking algorithm to\ndivide file into blocks. A clear overview of this algorithm can be found at http://pdos.csail.mit.edu/papers/lbfs:sosp01/lbfs.pdf.\nOn average, a block's size is around 1MB.\n\n\nThis mechanism makes it possible to deduplicate data between different versions of frequently updated files,\nimproving storage efficiency. It also enables transferring data to/from multiple servers in parallel.", 
            "title": "Data Model"
        }, 
        {
            "location": "/develop/data_model/#data-model", 
            "text": "Seafile internally uses a data model similar to GIT's. It consists of  Repo ,  Branch ,  Commit ,  FS , and  Block .", 
            "title": "Data Model"
        }, 
        {
            "location": "/develop/data_model/#repo", 
            "text": "A repo is also called a library. Every repo has an unique id (UUID), and attributes like description, creator, password.", 
            "title": "Repo"
        }, 
        {
            "location": "/develop/data_model/#branch", 
            "text": "Unlike git, only two predefined branches is used, i.e.,  local  and  master .  In PC client, modifications will first be committed to the  local  branch.\nThen the  master  branch is downloaded from server, and merged into  local  branch.\nAfter that the  local  branch will be uploaded to server. Then the server will fast-forward\nits  master  branch to the head commit of the just uploaded branch.  When users update a repo on the web, modifications will first be committed to temporary branch\non the server, then merged into the  master  branch.", 
            "title": "Branch"
        }, 
        {
            "location": "/develop/data_model/#commit", 
            "text": "Like in GIT.", 
            "title": "Commit"
        }, 
        {
            "location": "/develop/data_model/#fs", 
            "text": "There are two types of FS objects,  SeafDir Object  and  Seafile Object . SeafDir Object  represents a directory, and  Seafile Object  represents a file.", 
            "title": "FS"
        }, 
        {
            "location": "/develop/data_model/#block", 
            "text": "A file is further divided into blocks with variable lengths. We use Content Defined Chunking algorithm to\ndivide file into blocks. A clear overview of this algorithm can be found at http://pdos.csail.mit.edu/papers/lbfs:sosp01/lbfs.pdf.\nOn average, a block's size is around 1MB.  This mechanism makes it possible to deduplicate data between different versions of frequently updated files,\nimproving storage efficiency. It also enables transferring data to/from multiple servers in parallel.", 
            "title": "Block"
        }, 
        {
            "location": "/develop/server-components/", 
            "text": "Components of Seafile Server\n\n\nSeafile server comprises of the following services.\n\n\n\n\nCcnet daemon\n (ccnet for client side or ccnet-server for server side)\uff1anetworking service daemon. In our initial design, Ccnet worked like a traffic bus. All the network traffic between client, server and internal traffic between different components would go through Ccnet. After further development we found that file transfer is improved by utilizing the Seafile daemon component directly.\n\n\nSeafile daemon\n\uff1adata service daemon\n\n\nSeahub\n\uff1athe website. Seafile server package contains a light-weight Python HTTP server \ngunicorn\n that serves the website. Seahub runs as an application within gunicorn.\n\n\nFileServer\n: handles raw file upload/download functions for Seahub. Due to Gunicorn being poor at handling large files, so we wrote this \"FileServer\" in the C programming language to serve raw file upload/download.\n\n\nController\n: monitors ccnet and Seafile daemons, restarts them if necessary.\n\n\n\n\nThe picture below shows how Seafile desktop client syncs files with Seafile server\n:\n\n\n\n\n\n\nThe picture below shows how Seafile mobile client interacts with Seafile server\n:\n\n\n\n\n\n\nThe picture below shows how Seafile mobile client interacts with Seafile server if the server is configured behind Nginx/Apache\n:", 
            "title": "Server Components"
        }, 
        {
            "location": "/develop/server-components/#components-of-seafile-server", 
            "text": "Seafile server comprises of the following services.   Ccnet daemon  (ccnet for client side or ccnet-server for server side)\uff1anetworking service daemon. In our initial design, Ccnet worked like a traffic bus. All the network traffic between client, server and internal traffic between different components would go through Ccnet. After further development we found that file transfer is improved by utilizing the Seafile daemon component directly.  Seafile daemon \uff1adata service daemon  Seahub \uff1athe website. Seafile server package contains a light-weight Python HTTP server  gunicorn  that serves the website. Seahub runs as an application within gunicorn.  FileServer : handles raw file upload/download functions for Seahub. Due to Gunicorn being poor at handling large files, so we wrote this \"FileServer\" in the C programming language to serve raw file upload/download.  Controller : monitors ccnet and Seafile daemons, restarts them if necessary.   The picture below shows how Seafile desktop client syncs files with Seafile server :    The picture below shows how Seafile mobile client interacts with Seafile server :    The picture below shows how Seafile mobile client interacts with Seafile server if the server is configured behind Nginx/Apache :", 
            "title": "Components of Seafile Server"
        }, 
        {
            "location": "/develop/sync_algorithm/", 
            "text": "Synchronization algorithm\n\n\nThis article tries to give an overview on Seafile's file synchronization algorithm.\nFor clarity, some details are deliberately omitted, but it should help you get the\nbig picture.\n\n\nTo better understand this article, you should first read \nSeafile data model\n.\n\n\nThe Basic Work Flow\n\n\nEach downloaded repo is bound to an ordinary local folder. Using Git's terminology,\nwe call this local folder the \"worktree\".\n\n\nA typical synchronization work flow consists of the following steps:\n\n\n\n\nSeafile client daemon detects changes in the worktree (via inotify etc).\n\n\nThe daemon commits the changes to the \nlocal\n branch.\n\n\nDownload new changes from the \nmaster\n branch on the server (if any).\n\n\nMerge the downloaded branch into \nlocal\n branch (also checkout changes to worktree).\n\n\nFast-forward upload \nlocal\n branch to server's \nmaster\n branch.\n\n\n\n\nSince the above work flow may be interrupted at any point by shutting down the\nprogram or computer, after reboot we lose all notifications from the OS.\nWe need a reliable and efficient way to determine which\nfiles in the worktree has been changed (even after reboots).\n\n\nWe use Git's index file to do this. It caches the timestamps of every\nfile in the worktree when the last commit is generated. So we can easily and\nreliably detect changed files in the worktree since the latest commit\nby comparing timestamps.\n\n\nAnother notable case is what happens if two clients try to upload to the server\nsimultaneously. The commit procedure on the server ensures atomicity. So only\none client will update the \nmaster\n branch successfully, while the other will\nfail.\n\n\nThe failing client will restart the sync work flow later. It will first merge\nthe changes from the succeeded client then upload again.\n\n\nMerge\n\n\nThe most tricky part of the syncing algorithm is merging.\n\n\nGit's merge algorithm doesn't work well enough for auto synchronization.\n\n\nFirstly, if a merge is interrupted, git requires you to reset to the latest commit and\nmerge again. It's not a problem for Git since it's a single command.\nBut seafile runs as a daemon and may be kill at any time.\nThe user may have changed some files in the worktree between the interruption\nand restart. Resetting the worktree will LOSE user's uncommitted data.\n\n\nSecondly, Git's merge command will fail if it fails to update a file in the worktree.\nBut on Windows, an opened Office document will be write-protected by the\nOffice process. So the merge may fail in this case.\n\n\nThat's why programs use Git directly for auto-sync is not reliable.\n\n\nSeafile implement its own merge algorithm based on the ideas from Git's\nmerge algorithm.\n\n\nIt handles the first problem by \"redoing\" the merge carefully after restart.\nIt handles the second problem by not starting merge until no file is\nwrite-protected in the worktree.\n\n\nSeafile's merge algorithm also handles all the conflict cases handled by Git.", 
            "title": "Sync algorithm"
        }, 
        {
            "location": "/develop/sync_algorithm/#synchronization-algorithm", 
            "text": "This article tries to give an overview on Seafile's file synchronization algorithm.\nFor clarity, some details are deliberately omitted, but it should help you get the\nbig picture.  To better understand this article, you should first read  Seafile data model .", 
            "title": "Synchronization algorithm"
        }, 
        {
            "location": "/develop/sync_algorithm/#the-basic-work-flow", 
            "text": "Each downloaded repo is bound to an ordinary local folder. Using Git's terminology,\nwe call this local folder the \"worktree\".  A typical synchronization work flow consists of the following steps:   Seafile client daemon detects changes in the worktree (via inotify etc).  The daemon commits the changes to the  local  branch.  Download new changes from the  master  branch on the server (if any).  Merge the downloaded branch into  local  branch (also checkout changes to worktree).  Fast-forward upload  local  branch to server's  master  branch.   Since the above work flow may be interrupted at any point by shutting down the\nprogram or computer, after reboot we lose all notifications from the OS.\nWe need a reliable and efficient way to determine which\nfiles in the worktree has been changed (even after reboots).  We use Git's index file to do this. It caches the timestamps of every\nfile in the worktree when the last commit is generated. So we can easily and\nreliably detect changed files in the worktree since the latest commit\nby comparing timestamps.  Another notable case is what happens if two clients try to upload to the server\nsimultaneously. The commit procedure on the server ensures atomicity. So only\none client will update the  master  branch successfully, while the other will\nfail.  The failing client will restart the sync work flow later. It will first merge\nthe changes from the succeeded client then upload again.", 
            "title": "The Basic Work Flow"
        }, 
        {
            "location": "/develop/sync_algorithm/#merge", 
            "text": "The most tricky part of the syncing algorithm is merging.  Git's merge algorithm doesn't work well enough for auto synchronization.  Firstly, if a merge is interrupted, git requires you to reset to the latest commit and\nmerge again. It's not a problem for Git since it's a single command.\nBut seafile runs as a daemon and may be kill at any time.\nThe user may have changed some files in the worktree between the interruption\nand restart. Resetting the worktree will LOSE user's uncommitted data.  Secondly, Git's merge command will fail if it fails to update a file in the worktree.\nBut on Windows, an opened Office document will be write-protected by the\nOffice process. So the merge may fail in this case.  That's why programs use Git directly for auto-sync is not reliable.  Seafile implement its own merge algorithm based on the ideas from Git's\nmerge algorithm.  It handles the first problem by \"redoing\" the merge carefully after restart.\nIt handles the second problem by not starting merge until no file is\nwrite-protected in the worktree.  Seafile's merge algorithm also handles all the conflict cases handled by Git.", 
            "title": "Merge"
        }
    ]
}